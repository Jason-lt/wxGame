{"version":3,"sources":["../../../../../assets/Script/ddz/assets/Script/ddz/DdzGlobalFuncs.js"],"names":["ddz","GlobalFuncs","SortCardFunc","c1","c2","info1","_info","info2","_type","_value","_color","SortCardFuncForInfo","_sortByPoint","o1","o2","point","GetNextIndex","index","totalnum","getPreIndex","getTopIndex","getMyIndex","GetCardsOriginInterval","container","cardWidth","iNum","cardsLayerWidth","getBoundingBox","width","maxlen","CARD_MAX_INTERVAL","origin","interval","breakline","minlen","CARD_MIN_INTERVAL","Math","ceil","numberToPoint","num","numberToValue","pointToValue","valueToPoint","value","getLaiziNumByValue","getLaiziNumByPoint","canShowTag","len","setToCenter","node","winSize","cc","director","getWinSize","x","y","height","formatTime","h","floor","m","s","parseInt","mh","ms","ss","drawGameCanvas","webC","_renderContext","clearColor","clear","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","getBackButtonPositionY","systemTy","ty","UserInfo","systemType","sceneSize","reultHeight","SYSTEMTYPE","iphoneOtherType","iPhoneXType","ANDROIDOther","iPhone7P8PType","ANDROIDVIVO85","getCeLabgSizeY","getBannerIntervalY","getOpenData","update","wechatTypeA","wechatType","split","hall","MsgBoxManager","showToast","GameWorld","weChatVersionTips","wx","hasOwnProperty","openDataContext","getOpenDataContext","judgeweChatVersion","upDateRankData","val","postMessage","method","sumReward","userId","upDateRankDataChip","chip","getUserInfo","getFriendUserIds","getFriendUidCallBack","sharedCanvas","canvas","context","getContext","Timer","cancelTimer","FriendUids","myUserIdIndex","indexOf","splice","LOGD","JSON","stringify","setTimer","showGroupRank","rankType","nowWeek","ReadStringFromLocalStorage","matchModel","LAST_RANK_WEEK","shareTicket","week","showFriendRank","showOrigin","playZuanShi","isShowTips","manager","rewardNumber","isChip","isHongbao","isJiPaiQi","LOGW","loader","loadRes","err","prefab","preFabNode","instantiate","getScene","addChild","com","getComponent","parentScene","setCountWithNumber","ani","Animation","clipName","getClips","name","anim","getAnimationState","setTipsRichText","once","play","changeDiamondToHongbao","changeDiamondToJiPaiQi","changeDiamondToChip","bind","playMultiReward","coinNum","diamondNum","jipaiqiNum","countNum","_title","updateRewardInfo","playZuanShiBox","_count","isType","zuanshiBoxCom","setZuanshiNnm","playShareZuanShi","tips","strRich","tipsNode","removeFromParent","updateDiamondCount","updateTipsText","updateCoinText","checkFailCount","matchName","canShowMatchRevivalPanel","lastFailDate","LAST_FAIL_DATE","curDate","GlobalTimer","getCurDay","countString","FAIL_NUMBER_LIST","countDic","parse","setInLocalStorage","gameModel","setTempDataWithArenaFailTime","setTempDataWithMatchFailTime","nowNumber","showShareGuideWindow","isWin","chipNumber","multiple","adsCounts","preFabPath","comName","matchRevivalPanel","setRewardAndCompersation","showPopWinByPreFab","window","showNormalTipsWindow","widthTips","buttons","title","normalWindow","setTitleContentAndButtonsString","animation","anim1","showDropEffect","baseScale","pNode","scale","seq","sequence","scaleTo","runAction","showShareMomentsItem","type","data","BiLog","clickStat","clickStatEventType","clickStatEventTypeButtonClick","setShareImageType","setDayLoginRewardCount","dayLoginCount","day","nowHour","getCurHours","setTodayLoginRewardDic","lastGetStateString","LAST_GETDAYREWARD_TIME","lastGetStateDic","dayGetList","length","lastGetHour","nowDic","removeMatchResultPanel","requestAnimationFrame","NotificationCenter","trigger","EventType","REMOVE_ALL_MATCH_RESULT_PANEL","isFristGetReward","lastDate","LAST_GET_REWARD_DAY","curDay","noteToFriend","noteType","moneyCount","serverConfig","getServerConfigJson","version","mv","couponCount","ME","udataInfo","m_couponCount","exchangedCoupon","m_exchangedCoupon","getMoneyStringWithCoupons","MsgFactory","sendRewardMsgToFriends","giftBtnClick","gongZhonghaoMenuPoint","onOfficialAccountGuide"],"mappings":"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","file":"DdzGlobalFuncs.js","sourceRoot":"../../../../../assets/Script/ddz","sourcesContent":["//\n// ddz_global.js\n// highladder\n//\n// Created by guangy on 2016-03-08\n// \n//斗地主global\n\nddz.GlobalFuncs = {};\n\nddz.GlobalFuncs.SortCardFunc = function(c1, c2) {\n\tvar info1 = c1._info;\n\tvar info2 = c2._info;\n\n\tif (info1._type < info2._type){\n\t\treturn 1;\n\t}\n\telse if (info1._type >info2._type){\n\t\treturn -1\n\t}\n\telse{\n\t\tif (info1._value < info2._value) {\n\t\t\treturn 1;\n\t\t} else if (info1._value > info2._value) {\n\t\t\treturn -1\n\t\t}\n\t\telse{\n\t\t\treturn info2._color - info1._color;\n\t\t}\n\t}\n};\nddz.GlobalFuncs.SortCardFuncForInfo = function(c1, c2) {\n\tvar info1 = c1;\n\tvar info2 = c2;\n\n\tif (info1._type < info2._type){\n\t\treturn 1;\n\t}\n\telse if (info1._type >info2._type){\n\t\treturn -1\n\t}\n\telse{\n\t\tif (info1._value < info2._value) {\n\t\t\treturn 1;\n\t\t} else if (info1._value > info2._value) {\n\t\t\treturn -1\n\t\t}\n\t\telse{\n\t\t\treturn info2._color - info1._color;\n\t\t}\n\t}\n};\n/**\n * 按牌的point排序\n * @param  {[type]} o1 [description]\n * @param  {[type]} o2 [description]\n * @return {[type]}    [description]\n */\nddz.GlobalFuncs._sortByPoint = function (o1, o2) {\n\treturn o1.point - o2.point;\n};\n\nddz.GlobalFuncs.GetNextIndex = function(index, totalnum) {\n\tif (typeof(totalnum) == \"undefined\") {\n\t\treturn index % 3 + 1;\n\t}\n\treturn index % totalnum + 1;\n};\n\nddz.GlobalFuncs.getPreIndex = function(index, totalnum) {\n\tif (typeof(totalnum) == 'undefined') {\n\t\treturn index == 1 ? 3 : index - 1;\n\t}\n\treturn index == 1 ? totalnum : index - 1;\n};\n\nddz.GlobalFuncs.getTopIndex = function  (index,totalnum) {\n\tif (typeof(totalnum) == 'undefined') {\n\t\treturn index == 1 ? 2 : 1;\n\t}\n\treturn index == 1 ? 2 : 1;\n};\n\nddz.GlobalFuncs.getMyIndex = function  (index, totalnum) {\n\tif (typeof(totalnum) == 'undefined') {\n\t\treturn index%2+1;\n\t}\n\treturn index%totalnum +1;\n};\n\nddz.GlobalFuncs.GetCardsOriginInterval = function(container, cardWidth, iNum) {\n\tvar cardsLayerWidth = container.getBoundingBox().width;\n\t//被挡扑克牌最多允许显示0.5宽度，所以当这个最大宽度小于容器宽度时，必须按最大显示且有偏移， 否则按容器百分比显示\n\tvar maxlen = cardWidth * (iNum - 1) * ddz.CARD_MAX_INTERVAL + cardWidth;\n\tvar origin, interval;\n\t//指分行的位置，默认应该是个极大值，表示不分行\n\tvar breakline = 10;\n\tif (maxlen > cardsLayerWidth) {\n\t\t// hall.LOGW('global', \"poker more than need\");\n\t\torigin = 0;\n\t\tinterval = (cardsLayerWidth - cardWidth) / (iNum - 1);\n\t\tvar minlen = cardWidth * (iNum - 1) * ddz.CARD_MIN_INTERVAL + cardWidth;\n\t\tif (minlen > cardsLayerWidth) {\n\t\t\tbreakline = Math.ceil((cardsLayerWidth - cardWidth) / (cardWidth * ddz.CARD_MIN_INTERVAL));\n\t\t\tinterval = (cardsLayerWidth - cardWidth) / (breakline - 1);\n\t\t}\n\n\t} else {\n\t\t//这里初始位置设定为0.2, 有必要写入global中\n\t\torigin = (cardsLayerWidth - maxlen) / 2;\n\t\tinterval = ddz.CARD_MAX_INTERVAL * cardWidth;\n\t\t// hall.LOGW('global', \"origin : \" + origin + \"  interval : \" + interval);\n\t}\n\n\treturn {\n\t\t\"origin\": origin,\n\t\t\"interval\": interval,\n\t\t\"breakline\": breakline\n\t};\n};\n\n/**\n *\n * @param num\n * @returns {number}\n * @constructor\n */\nddz.GlobalFuncs.numberToPoint = function(num) {\n\tvar point = num % 13;\n\tif (num == 52 || num == 53) {\n\t\tpoint = num % 13 + 13;\n\t}\n\tif (num > 53) { // 癞子牌\n\t\tpoint = num - 54;\n\t}\n\treturn point;\n};\n\n/**\n * 根据牌序号获取牌权重值\n * @param num 牌序号\n * @returns {number} 权重值\n */\nddz.GlobalFuncs.numberToValue = function(num) {\n\tvar point = this.numberToPoint(num);\n\treturn this.pointToValue(point);\n\t// if (num < 0) {\n\t// \thall.LOGW('global', \"error, num < 0 in ddz.GlobalFuncs.numberToValue!!\");\n\t// \treturn -1;\n\t// }\n\t// if (num > 53) {\n\t// \treturn 15; //癞子牌\n\t// } else if (num == 53) { //大王\n\t// \treturn 14;\n\t// } else if (num == 52) { //小王\n\t// \treturn 13;\n\t// } else {\n\t// \tvar point = num % 13 + 1;\n\t// \tif (point < 3) { // A = 11, 2 = 12\n\t// \t\treturn point + 10;\n\t// \t} else {\n\t// \t\treturn point - 3; // 3 = 0, 4 = 1...\n\t// \t}\n\t// }\n\t// return -1;\n};\n\n/**\n * 根据牌点数获取牌权重值\n * @param point 牌点数\n * @returns {*} 牌权重值\n */\nddz.GlobalFuncs.pointToValue = function(point) {\n\tif (point == -1) {\n\t\treturn -1\n\t} else if (point <= 12) {\n\t\treturn (point - 2 + 13) % 13\n\t} else {\n\t\treturn point\n\t}\n};\n\n/**\n * 权重转点数\n * @param value 权重\n * @returns {*}\n */\nddz.GlobalFuncs.valueToPoint = function(value){\n\tif (value == -1) {\n\t\treturn -1\n\t} else if (value <= 12) {\n\t\treturn (value + 2) % 13\n\t} else {\n\t\treturn value\n\t}\n};\n\n\n// ddz.GlobalFuncs.getLaiziNumByValue = function(value) { //获得需要转换成相应value的癞子number，例如癞子牌当做5打出，则value = 2\n// \tif (value >= 0 && value < 11) {\n// \t\treturn 56 + value;\n// \t} else if (value < 13) {\n// \t\treturn 43 + value;\n// \t} else {\n// \t\thall.LOGW('global', \"error! value should not larger than 12\");\n// \t}\n// };\n\nddz.GlobalFuncs.getLaiziNumByValue = function(value) {\n\tvar point = this.valueToPoint(value);\n\treturn this.getLaiziNumByPoint(point);\n};\n\nddz.GlobalFuncs.getLaiziNumByPoint = function(point) {\n\treturn point + 54;\n};\n\nddz.GlobalFuncs.canShowTag = function (breakline, len, index) {\n\treturn index == len - 1 || (index + 1) % breakline  == 0;\n};\n\nddz.GlobalFuncs.setToCenter = function (node) {\n\tvar winSize = cc.director.getWinSize();\n\tnode.x = winSize.width/2;\n\tnode.y = winSize.height/2;\n};\n\n/**\n * 秒转换为时间\n * @param value 秒\n */\nddz.GlobalFuncs.formatTime = function (value) {\n\tvar h = Math.floor(value / 3600);\n\tvar m = Math.floor((value % 3600)/60);\n\tvar s = parseInt(value % 60);\n\n\tvar mh = h < 10 ? \"0\" + h : \"\" + h;\n\tvar ms = m < 10 ? \"0\" + m : \"\" + m;\n\tvar ss = s < 10 ? \"0\" + s : \"\" + s;\n\n\treturn mh +  \":\" + ms + \":\" + ss;\n};\n\nddz.GlobalFuncs.drawGameCanvas = function () {\n\tvar webC = cc._renderContext;\n\t// webC.enable(webC.SCISSOR_TEST);\n\twebC.clearColor(183/255, 220/255,181/255, 1);//底部颜色\n\twebC.clear(webC.COLOR_BUFFER_BIT | webC.DEPTH_BUFFER_BIT);\n};\n\n// ddz.GlobalFuncs.getWindowWidthscaling = function () {\n// \tvar winSize = cc.director.getWinSize();\n// \treturn winSize.width/640;\n// };\n\nddz.GlobalFuncs.getBackButtonPositionY = function () {\n\tvar systemTy = ty.UserInfo.systemType;\n\tvar sceneSize = cc.director.getWinSize();\n\tvar reultHeight = 0;\n\tif (systemTy == ty.UserInfo.SYSTEMTYPE.iphoneOtherType){//其他iPhone\n\t\treultHeight = sceneSize.height/2-49;\n\t}else if(systemTy == ty.UserInfo.SYSTEMTYPE.iPhoneXType){ //iPhoneX\n\t\treultHeight = sceneSize.height/2-102;\n\t}else if(systemTy == ty.UserInfo.SYSTEMTYPE.ANDROIDOther){ //cc.sys.OS_ANDROID\n\t\treultHeight = sceneSize.height/2-54;\n\t}else if(systemTy == ty.UserInfo.SYSTEMTYPE.iPhone7P8PType){ //8p\n\t\treultHeight = sceneSize.height/2-46;\n\t} else if(systemTy == ty.UserInfo.SYSTEMTYPE.ANDROIDVIVO85){ //vivo Y85A\n\t\treultHeight = sceneSize.height/2-104;\n\t}\n\treturn reultHeight;\n};\n\nddz.GlobalFuncs.getCeLabgSizeY = function () {\n\tvar systemTy = ty.UserInfo.systemType;\n\tvar reultHeight = 0;\n\tif (systemTy == ty.UserInfo.SYSTEMTYPE.iphoneOtherType){//其他iPhone\n\t\treultHeight = 49;\n\t}else if(systemTy == ty.UserInfo.SYSTEMTYPE.iPhoneXType){ //iPhoneX\n\t\treultHeight = 102;\n\t}else if(systemTy == ty.UserInfo.SYSTEMTYPE.ANDROIDOther){ //cc.sys.OS_ANDROID\n\t\treultHeight = 54;\n\t}else if(systemTy == ty.UserInfo.SYSTEMTYPE.iPhone7P8PType){ //8p\n\t\treultHeight = 46;\n\t} else if(systemTy == ty.UserInfo.SYSTEMTYPE.ANDROIDVIVO85){ //vivo Y85A\n\t\treultHeight = 104;\n\t}\n\treturn reultHeight;\n};\n\nddz.GlobalFuncs.getBannerIntervalY = function () {\n\tvar systemTy = ty.UserInfo.systemType;\n\tvar reultHeight = 0;\n\tif(systemTy == ty.UserInfo.SYSTEMTYPE.iPhoneXType){ //iPhoneX\n\t\treultHeight = 20;\n\t}\n\treturn reultHeight;\n};\n\n\nddz.GlobalFuncs.getOpenData = function (update) {\n\tvar wechatTypeA = ty.UserInfo.wechatType.split(\".\");\n\tif(wechatTypeA[1] && wechatTypeA[1]< 6){\n\t\tif(!update){\n\t\t\thall.MsgBoxManager.showToast({\"title\":ddz.GameWorld.weChatVersionTips});\n\t\t}\n\t\treturn null;\n\t}else {\n\t\tif(wechatTypeA[1] && wechatTypeA[1] == 6 &&wechatTypeA[2] && wechatTypeA[2] < 2){\n\t\t\tif(!update){\n\t\t\t\thall.MsgBoxManager.showToast({\"title\":ddz.GameWorld.weChatVersionTips});\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\t}\n\tif (wx.hasOwnProperty('getOpenDataContext')){\n\t\tvar openDataContext = wx.getOpenDataContext();\n\t\tif (openDataContext){\n\t\t\treturn openDataContext\n\t\t}\n\t}\n\n\treturn null;\n};\n\n//判断微信版本号,6.7.1及以上\nddz.GlobalFuncs.judgeweChatVersion = function(){\n\tvar wechatTypeA = ty.UserInfo.wechatType.split(\".\");\n\n\tif (wechatTypeA[1] != null && wechatTypeA[1] >= 7){\n\t\tif (wechatTypeA[2] != null && wechatTypeA[2] >= 1) {\n\t\t\treturn true\n\t\t}\n\t}\n\n\treturn false;\n};\n\n\n/**\n * 更新自己的排行榜数据\n * @param val\n */\nddz.GlobalFuncs.upDateRankData = function (val) {\n\tvar openDataContext = ddz.GlobalFuncs.getOpenData(true);\n\tif(!openDataContext){\n\t\treturn;\n\t}\n\topenDataContext.postMessage({\n\t\tmethod:'updateRank',\n\t\tsumReward: val,\n\t\tuserId:ty.UserInfo.userId\n\t})\n};\nddz.GlobalFuncs.upDateRankDataChip = function (val) {\n\tvar openDataContext = ddz.GlobalFuncs.getOpenData(true);\n\tif(!openDataContext){\n\t\treturn;\n\t}\n\topenDataContext.postMessage({\n\t\tmethod:'updateRankChip',\n\t\tchip: val,\n\t\tuserId:ty.UserInfo.userId\n\t})\n};\nddz.GlobalFuncs.getUserInfo = function () {\n\tvar openDataContext = ddz.GlobalFuncs.getOpenData(true);\n\tif(!openDataContext){\n\t\treturn;\n\t}\n\topenDataContext.postMessage({\n\t\tmethod:'getUserInfo'\n\t})\n};\n\n/**\n * 获取同玩好友的uid数组\n */\nddz.GlobalFuncs.getFriendUserIds = function () {\n\tvar openDataContext = ddz.GlobalFuncs.getOpenData(true);\n\tif(!openDataContext){\n\t\treturn;\n\t}\n\n\tvar getFriendUidCallBack = function () {\n\t\tvar openDataContext = wx.getOpenDataContext();\n\t\tvar sharedCanvas = openDataContext.canvas;\n\n\t\tif (sharedCanvas && sharedCanvas.hasOwnProperty('2d')) {\n\t\t\tvar context = sharedCanvas.getContext(\"2d\");\n\t\t\tif (context.hasOwnProperty('friendUids')) {\n\t\t\t\tty.Timer.cancelTimer(cc.director, getFriendUidCallBack);\n\t\t\t\tty.UserInfo.FriendUids = context['friendUids'];\n\t\t\t\tvar myUserIdIndex = ty.UserInfo.FriendUids.indexOf(ty.UserInfo.userId);\n\t\t\t\tif (myUserIdIndex > -1){//从好友列表中,删除自己的ID\n\t\t\t\t\tty.UserInfo.FriendUids.splice(myUserIdIndex, 1);\n\t\t\t\t}\n\t\t\t\tddz.LOGD('ddz.GlobalFuncs.getFriendUserIds', JSON.stringify(ty.UserInfo.FriendUids));\n\t\t\t\tdelete context['friendUids'];\n\t\t\t}\n\t\t}\n\n\t};\n\n\tty.Timer.setTimer(cc.director, getFriendUidCallBack, 1/30);\n\topenDataContext.postMessage({\n\t\tmethod:'getFriendUserIds'\n\t})\n};\n\n/**\n * 更新自己的群排行榜数据\n * @param val 群shareTicket\n */\nddz.GlobalFuncs.showGroupRank = function (val,rankType) {\n\tvar nowWeek = hall.GlobalFuncs.ReadStringFromLocalStorage(ddz.matchModel.LAST_RANK_WEEK, \"\");\n\tvar openDataContext = ddz.GlobalFuncs.getOpenData();\n\tif(!openDataContext){\n\t\treturn;\n\t}\n\topenDataContext.postMessage({\n\t\tmethod:'showGroupRank',\n\t\tshareTicket: val,\n\t\tweek:nowWeek,\n\t\tuserId:ty.UserInfo.userId,\n\t\trankType : rankType\n\t})\n};\n\n/**\n * 更新自己的好友排行榜数\n */\nddz.GlobalFuncs.showFriendRank = function (shareTicket,rankType) {\n\tvar nowWeek = hall.GlobalFuncs.ReadStringFromLocalStorage(ddz.matchModel.LAST_RANK_WEEK, \"\");\n\tvar openDataContext = ddz.GlobalFuncs.getOpenData();\n\tif(!openDataContext){\n\t\treturn;\n\t}\n\topenDataContext.postMessage({\n\t\tmethod:'showFriendRank',\n\t\tweek:nowWeek,\n\t\tuserId:ty.UserInfo.userId,\n\t\trankType : rankType\n\t})\n};\n/**\n * 初始化\n */\nddz.GlobalFuncs.showOrigin = function () {\n\tvar openDataContext = ddz.GlobalFuncs.getOpenData();\n\tif(!openDataContext){\n\t\treturn;\n\t}\n\topenDataContext.postMessage({\n\t\tmethod:'showOrigin'\n\t})\n};\n\nddz.GlobalFuncs.playZuanShi = function (isShowTips,manager,rewardNumber,isChip,isHongbao,isJiPaiQi) {\n\thall.LOGW(\"==\",\" file = [DdzGlobalFuncs] fun = [playZuanShi] isShowTips = \" + isShowTips);\n\tcc.loader.loadRes('prefabs/zuanshi/zuanshi', function (err, prefab) {\n\t\tvar preFabNode = cc.instantiate(prefab);\n\t\tcc.director.getScene().addChild(preFabNode,777777);\n\t\tddz.GlobalFuncs.setToCenter(preFabNode);\n\t\tvar com = preFabNode.getComponent('ddz_zuanShiAni');\n\t\tcom.parentScene = manager;\n\t\tif(rewardNumber){\n\t\t\tcom.setCountWithNumber(rewardNumber);\n\t\t}\n\n\t\tif(!isChip){\n\t\t\tvar ani = preFabNode.getComponent(cc.Animation);\n\t\t\tvar clipName = ani.getClips()[0].name;\n\t\t\tvar anim = ani.getAnimationState(clipName);\n\t\t\tcom.setTipsRichText(isShowTips);\n\t\t\tanim.once(\"finished\", function () {\n\t\t\t});\n\t\t\tanim.play();\n\t\t}else {\n\t\t\tif (isHongbao) {\n\t\t\t\tcom.changeDiamondToHongbao();\n\t\t\t}else {\n\t\t\t\tif (isJiPaiQi) {\n\t\t\t\t\tcom.changeDiamondToJiPaiQi();\n\t\t\t\t}else {\n\t\t\t\t\tcom.changeDiamondToChip();\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\t}.bind(this));\n};\n\nddz.GlobalFuncs.playMultiReward = function (coinNum,diamondNum,jipaiqiNum,countNum,_title) {\n\tcc.loader.loadRes('prefabs/ddz_multiReward', function (err, prefab) {\n\t\tvar preFabNode = cc.instantiate(prefab);\n\t\tcc.director.getScene().addChild(preFabNode,777777);\n\t\tddz.GlobalFuncs.setToCenter(preFabNode);\n\t\tvar com = preFabNode.getComponent('multiReward');\n\t\tcom.updateRewardInfo(coinNum,diamondNum,jipaiqiNum,countNum,_title);\n\t\t\n\t}.bind(this));\n};\n\n\nddz.GlobalFuncs.playZuanShiBox = function (_count,isType) {\n\thall.LOGW(\"\",\"file = [DdzGlobalFuncs] fun = [playZuanShiBox] _count = \" + _count);\n    if (ddz.zuanshiBoxCom) {\n        ddz.zuanshiBoxCom.setZuanshiNnm(_count,isType);\n        return\n    }\n\tcc.loader.loadRes('prefabs/ddz_zuanshiBox', function (err, prefab) {\n\t\tvar preFabNode = cc.instantiate(prefab);\n\t\tif (preFabNode) {\n\t\t\tcc.director.getScene().addChild(preFabNode,777777);\n\t\t\t// ddz.GlobalFuncs.setToCenter(preFabNode);\n            ddz.zuanshiBoxCom = preFabNode.getComponent('ddz_zuanshiBox');\n            if (ddz.zuanshiBoxCom) {\n                ddz.zuanshiBoxCom.setZuanshiNnm(_count,isType);\n            }\n\t\t}else {\n\t\t\thall.LOGW(\"\",\"file = [DdzGlobalFuncs] fun = [playZuanShiBox] preFabNode = null\");\n\t\t}\n\t}.bind(this));\n};\n\nddz.GlobalFuncs.playShareZuanShi = function (rewardNumber,tips,strRich) {\n\thall.LOGW(\"==\",\" file = [DdzGlobalFuncs] fun = [playShareZuanShi] rewardNumber = \" + rewardNumber);\n\tif(ddz.tipsNode){\n\t\tddz.tipsNode.removeFromParent();\n\t\tddz.tipsNode = null;\n\t}\n\tcc.loader.loadRes('prefabs/conversionSuccess', function (err, prefab) {\n\t\tvar preFabNode = cc.instantiate(prefab);\n\t\tcc.director.getScene().addChild(preFabNode);\n\t\tif (ddz.tipsNode) {\n\t\t\tddz.tipsNode.removeFromParent();\n\t\t\tddz.tipsNode = null;\n\t\t}\n\t\tddz.tipsNode = preFabNode;\n\t\tvar winSize = cc.director.getWinSize();\n\t\tpreFabNode.x = winSize.width/2;\n\t\tpreFabNode.y = winSize.height/2 + 103;\n\n\t\tvar com = preFabNode.getComponent('conversionSuccess');\n\t\tcom.updateDiamondCount(rewardNumber);\n\t\t\n\t\tif (tips) {\n\t\t\tcom.updateTipsText(tips);\n\t\t}\n\t\tif (strRich) {\n\t\t\tcom.updateCoinText(strRich);\n\t\t}\n\n\t}.bind(this));\n};\n/**\n * 检查某个比赛当天失败的次数\n * @returns {int}\n */\nddz.GlobalFuncs.checkFailCount = function (matchName) {\n\tddz.matchModel.canShowMatchRevivalPanel = false;\n\t// FAIL_NUMBER_LIST\n\tvar lastFailDate = hall.GlobalFuncs.ReadStringFromLocalStorage(ddz.matchModel.LAST_FAIL_DATE, \"\");\n\tvar curDate = hall.GlobalTimer.getCurDay();\n\tvar countString = hall.GlobalFuncs.ReadStringFromLocalStorage(ddz.matchModel.FAIL_NUMBER_LIST, \"\");\n\tvar countDic = {};\n\tif(countString != \"\"){\n\t\tcountDic = JSON.parse(countString);\n\t}\n\tif (lastFailDate != curDate){\n\t\tcountDic = {};\n\t\thall.GlobalFuncs.setInLocalStorage(ddz.matchModel.LAST_FAIL_DATE, curDate);\n\t\tcountDic[matchName] = 1;\n\t\thall.GlobalFuncs.setInLocalStorage(ddz.matchModel.FAIL_NUMBER_LIST, JSON.stringify(countDic));\n\t\tif(matchName == \"arena\"){\n\t\t\tddz.gameModel.setTempDataWithArenaFailTime(1);\n\t\t}else {\n\t\t\tddz.gameModel.setTempDataWithMatchFailTime(1);\n\t\t}\n\t\thall.GlobalFuncs.setInLocalStorage(ddz.matchModel.FAIL_NUMBER_LIST, JSON.stringify(countDic));\n\t\treturn 1;\n\t}\n\tif(!countDic[matchName]){\n\t\tcountDic[matchName] = 1;\n\t\thall.GlobalFuncs.setInLocalStorage(ddz.matchModel.FAIL_NUMBER_LIST, JSON.stringify(countDic));\n\t\tif(matchName == \"arena\"){\n\t\t\tddz.gameModel.setTempDataWithArenaFailTime(1);\n\t\t}else {\n\t\t\tddz.gameModel.setTempDataWithMatchFailTime(1);\n\t\t}\n\t\thall.GlobalFuncs.setInLocalStorage(ddz.matchModel.FAIL_NUMBER_LIST, JSON.stringify(countDic));\n\t\treturn 1;\n\t}\n\tvar nowNumber = parseInt(countDic[matchName]);\n\tnowNumber += 1;\n\tcountDic[matchName] = nowNumber;\n\tif(matchName == \"arena\"){\n\t\tddz.gameModel.setTempDataWithArenaFailTime(nowNumber);\n\t}else {\n\t\tddz.gameModel.setTempDataWithMatchFailTime(nowNumber);\n\t}\n\thall.GlobalFuncs.setInLocalStorage(ddz.matchModel.FAIL_NUMBER_LIST, JSON.stringify(countDic));\n\treturn nowNumber;\n};\n\n\n\nddz.GlobalFuncs.showShareGuideWindow = function (isWin,chipNumber,multiple,adsCounts) {\n\n\tvar preFabPath = \"prefabs/ddz_window_revival\";\n\tvar  comName = \"ddz_revivalWindow\";\n\tif(ddz.matchRevivalPanel){\n\t\tddz.matchRevivalPanel.setRewardAndCompersation(isWin,chipNumber,multiple,adsCounts);\n\t\treturn\n\t}\n\thall.GlobalFuncs.showPopWinByPreFab(preFabPath, function (preFabNode) {\n\t\tvar window = preFabNode.getComponent(comName);\n\t\twindow.setRewardAndCompersation(isWin,chipNumber,multiple,adsCounts);\n\t\tddz.matchRevivalPanel = window;\n\t});\n};\n\n\nddz.GlobalFuncs.showNormalTipsWindow = function (widthTips,buttons,title) {\n\tvar preFabPath = \"prefabs/ddz_window_normal\";\n\tvar  comName = \"ddz_window_normal\";\n\tif(ddz.gameModel.normalWindow){\n\t\tvar window = ddz.gameModel.normalWindow.getComponent(comName);\n\t\tvar _title = \"提示\";\n\t\tif(title){\n\t\t\t_title = title;\n\t\t}\n\t\twindow.setTitleContentAndButtonsString(_title,widthTips,buttons);\n\t\tvar animation = ddz.gameModel.normalWindow.getComponent(cc.Animation);\n\t\tvar anim1 = animation.getAnimationState('tipsWindowNode');\n\t\tanim1.play();\n\t\treturn;\n\t}\n\thall.GlobalFuncs.showPopWinByPreFab(preFabPath, function (preFabNode) {\n\t\tvar window = preFabNode.getComponent(comName);\n\t\tddz.gameModel.normalWindow = preFabNode;\n\t\tvar _title = \"提示\";\n\t\tif(title){\n\t\t\t_title = title;\n\t\t}\n\t\twindow.setTitleContentAndButtonsString(_title,widthTips,buttons);\n\t\t// [{title:确定\"\",callFunc : function () {}}]\n\t});\n};\n\nddz.GlobalFuncs.showDropEffect = function (baseScale, pNode) {\n\tpNode.scale = baseScale * 1.15;\n\tvar seq = cc.sequence(cc.scaleTo(0.1, baseScale * 0.93),cc.scaleTo(0.015, baseScale));\n\tpNode.runAction(seq);\n};\n\nddz.GlobalFuncs.showShareMomentsItem = function (type,data) {\n\tty.BiLog.clickStat(ty.UserInfo.clickStatEventType.clickStatEventTypeButtonClick, [\"shareMoments\",type]);\n\n\tcc.loader.loadRes('prefabs/ddz_item_shareMoments', function (err, prefab) {\n\t\tvar preFabNode = cc.instantiate(prefab);\n\t\tcc.director.getScene().addChild(preFabNode);\n\t\tddz.GlobalFuncs.setToCenter(preFabNode);\n\n\t\tvar com = preFabNode.getComponent('ddz_item_shareMoments');\n\t\tcom.setShareImageType(type,data);\n\t}.bind(this));\n};\n//检测当前今日登陆可领取的钻石数量\nddz.GlobalFuncs.setDayLoginRewardCount = function () {\n\tddz.gameModel.dayLoginCount = 0;\n\tvar day = hall.GlobalTimer.getCurDay();\n\tvar nowHour = hall.GlobalTimer.getCurHours();\n\tif(nowHour < 10){\n\t\tddz.GlobalFuncs.setTodayLoginRewardDic(day);\n\t\treturn 0;\n\t}\n\tvar lastGetStateString = hall.GlobalFuncs.ReadStringFromLocalStorage(ddz.gameModel.LAST_GETDAYREWARD_TIME, \"\");\n\tif(lastGetStateString == \"\" || lastGetStateString.indexOf(\"{\") < 0){\n\t\tddz.GlobalFuncs.setTodayLoginRewardDic(day);\n\t\treturn 1;\n\t}\n\tvar lastGetStateDic = JSON.parse(lastGetStateString);\n\tif(!lastGetStateDic[day]){\n\t\tddz.GlobalFuncs.setTodayLoginRewardDic(day);\n\t\treturn 1;\n\t}\n\tvar dayGetList = lastGetStateDic[day];\n\tddz.gameModel.dayLoginCount = dayGetList.length;\n\tif(dayGetList.length == 0){\n\t\treturn 1;\n\t}\n\tvar lastGetHour = dayGetList[dayGetList.length-1];\n\tif(lastGetHour < 18){\n\t\tif(nowHour < 18){\n\t\t\treturn -1;\n\t\t}else {\n\t\t\treturn 1;\n\t\t}\n\t}else {\n\t\treturn -1;\n\t}\n};\nddz.GlobalFuncs.setTodayLoginRewardDic = function (day) {\n\tvar nowDic = {};\n\tnowDic[day] = [];\n\thall.GlobalFuncs.setInLocalStorage(ddz.gameModel.LAST_GETDAYREWARD_TIME,JSON.stringify(nowDic));\n};\n\nddz.GlobalFuncs.removeMatchResultPanel = function (com) {\n\trequestAnimationFrame(function () {\n\t\tty.NotificationCenter.trigger(ddz.EventType.REMOVE_ALL_MATCH_RESULT_PANEL, com);\n\t})\n};\n\nddz.GlobalFuncs.isFristGetReward = function () {\n\tvar lastDate = hall.GlobalFuncs.ReadStringFromLocalStorage(hall.LAST_GET_REWARD_DAY, \"\");\n\tvar curDay = hall.GlobalTimer.getCurDay();\n\tif (lastDate != curDay){\n\t\thall.GlobalFuncs.setInLocalStorage(hall.LAST_GET_REWARD_DAY, curDay);\n\t\treturn true;\n\t}\n\treturn false;\n};\n\n\nddz.GlobalFuncs.noteToFriend = function (noteType , moneyCount) {\n\tvar serverConfig = ddz.gameModel.getServerConfigJson();\n\tif (serverConfig && serverConfig.version >= 5.7){\n\t\tif (ddz.GlobalFuncs.isFristGetReward()) {\n\t\t\t//本日第一次领红包,通知给所有好友\n\t\t\tvar mv = 0;\n\t\t\tif (moneyCount){\n\t\t\t\tmv = moneyCount;\n\t\t\t}else{\n\t\t\t\tvar couponCount = hall.ME.udataInfo.m_couponCount;\n\t\t\t\tvar exchangedCoupon = hall.ME.udataInfo.m_exchangedCoupon;\n\t\t\t\tmv = hall.GlobalFuncs.getMoneyStringWithCoupons(couponCount + exchangedCoupon);\n\t\t\t}\n\n\t\t\tddz.MsgFactory.sendRewardMsgToFriends(ty.UserInfo.FriendUids, mv, noteType);\n\t\t}\n\t}\n};\n\nddz.GlobalFuncs.giftBtnClick = function () {\n\tif (ddz.gameModel.gongZhonghaoMenuPoint > 0) {\n\t\thall.GlobalFuncs.onOfficialAccountGuide();\n\t}else {\n\t\t\n\t}\n};"]}