{"version":3,"sources":["../../../../../assets/Script/ddz/assets/Script/ddz/DdzAudioHelper.js"],"names":["ddz","AudioHelper","getMusicPlayManager","stopMusic","musicPlayManager","wx","createInnerAudioContext","obeyMuteSwitch","playMusic","file","isloop","volume","_curMusicFile","playManager","arguments","length","autoplay","loop","src","ty","SystemInfo","cdnPath","cc","url","raw","rePlayMusic","play","stop","destroy","playEffect","setEffectsVolume","audioEngine","stopEffect","effectId","stopAllEffects","unloadAll","uncacheAll","val","hall","GlobalFuncs","setInLocalStorage","SETTING_EFFECT_KEY","setMusicVolume","SETTING_MUSIC_KEY","getMusicVolume","ReadNumFromLocalStorage","getEffectsVolume"],"mappings":"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","file":"DdzAudioHelper.js","sourceRoot":"../../../../../assets/Script/ddz","sourcesContent":["/**\n * 声音播放工具\n */\nddz.AudioHelper = {\n\n\tgetMusicPlayManager:function () {\n\n\t\tthis.stopMusic();\n\n\t\tthis.musicPlayManager = wx.createInnerAudioContext();\n\t\tthis.musicPlayManager.obeyMuteSwitch = true;\n\t\treturn this.musicPlayManager;\n\t},\n\n\t/**\n\t * 播放音乐 (音效只可以播放一个,如果再调用此方法,之前的音乐会被停止)\n\t * @param file 文件名,例如: '/resources/sound/table_sound_After_the_bomb.mp3'\n\t * @param isloop 是否循环\n\t * @param volume 可选参数,音量\n     */\n\tplayMusic : function (file, isloop, volume) {\n\n\t\tif (this._curMusicFile && this._curMusicFile == file){\n\t\t\treturn;\n\t\t}\n\n\t\tthis._curMusicFile = file;\n\n\t\t// if (arguments.length == 3){\n\t\t// \tthis.setMusicVolume(volume);\n\t\t// }\n\t\t// cc.audioEngine.playMusic(cc.url.raw(file), isloop);\n\t\tvar playManager = this.getMusicPlayManager();\n\n\t\tif (arguments.length == 3){\n\t\t\tplayManager.volume = volume;\n\t\t}\n\n\t\tplayManager.autoplay = true;\n\t\tplayManager.loop = isloop;\n\t\tplayManager.src = ty.SystemInfo.cdnPath + cc.url.raw(file);\n\t},\n\n\trePlayMusic:function () {\n\t\tif (this.musicPlayManager && this.musicPlayManager.loop){\n\t\t\tthis.musicPlayManager.play();\n\t\t}\n\t},\n\n\tstopMusic:function () {\n\t\tif (this.musicPlayManager){\n\t\t\tthis.musicPlayManager.stop();\n\t\t\tthis.musicPlayManager.destroy();\n\t\t\tthis.musicPlayManager = null;\n\t\t}\n\t},\n\n\n\t/**\n\t * 播放音效 (音效可以同时播放多个)\n\t * @param file 文件名,例如: '/resources/sound/table_sound_After_the_bomb.mp3'\n\t * @param isloop 是否循环\n\t * @param volume 可选参数,音量\n\t */\n\tplayEffect : function (file, isloop, volume) {\n\t\tif (arguments.length == 3){\n\t\t\tthis.setEffectsVolume(volume);\n\t\t}\n\t\tcc.audioEngine.playEffect(ty.SystemInfo.cdnPath + cc.url.raw(file), isloop);\n\t},\n\n\t/**\n\t * 停止音效\n\t * @param effectId\n     */\n\tstopEffect: function(effectId) {\n\t\tif(effectId < 0) {\n\t\t\treturn;\n\t\t}\n\t\tcc.audioEngine.stopEffect(effectId);\n\t},\n\n\t/**\n\t * 停止所有音效\n     */\n\tstopAllEffects: function() {\n\t\tcc.audioEngine.stopAllEffects();\n\t},\n\n\t/**\n\t * 卸载所有文件\n     */\n\tunloadAll: function() {\n\t\tcc.audioEngine.uncacheAll();\n\t},\n\n\t/**\n\t * 更改音效音量\n\t * @param val 音量\n     */\n\tsetEffectsVolume : function (val) {\n\t\thall.GlobalFuncs.setInLocalStorage(ddz.SETTING_EFFECT_KEY, val);\n\t\tcc.audioEngine.setEffectsVolume(val);\n\t},\n\n\t/**\n\t * 更改音乐音量\n\t * @param val 音量\n\t */\n\tsetMusicVolume : function (val) {\n\t\thall.GlobalFuncs.setInLocalStorage(ddz.SETTING_MUSIC_KEY, val);\n\t\tcc.audioEngine.setMusicVolume(val);\n\t},\n\n\t/**\n\t * 获取音乐音量\n     */\n\tgetMusicVolume: function() {\n\t\treturn hall.GlobalFuncs.ReadNumFromLocalStorage(ddz.SETTING_MUSIC_KEY, cc.audioEngine.getMusicVolume());\n\t},\n\n\t/**\n\t * 获取音效音量\n     */\n\tgetEffectsVolume: function() {\n\t\treturn hall.GlobalFuncs.ReadNumFromLocalStorage(ddz.SETTING_EFFECT_KEY, cc.audioEngine.getEffectsVolume());\n\t},\n\n\n\t\n};\n"]}