{"version":3,"sources":["../../../../../assets/Script/hall/assets/Script/hall/MsgFactory.js"],"names":["hall","MsgFactory","_TAG","_sendCmd","json","params","userId","ty","UserInfo","gameId","SystemInfo","hallId","clientId","TCP","sendMsg","getUserInfo","LOGD","EventType","CMD_USER_INFO","getUserRewardInfo","ddz","CMD_MESSAGE","getSystemMessageInfo","getTimeStamp","CMD_USER","getQuickStart","roomId","apiver","sessionIndex","isBringInCoin","innerTable","tableId","mixId","play_mode","data","CMD_TABLE_QUICKSTART","getQuickStartParams","getGameData","CMD_GAME_DATA","getMsgSendData","pagenum","getMsgReceiveData","getSysMsgData","setRankSign","str","CMD_RANK","sendMsgData","otherId","msg","getUnreadMsg","deleteRecMsgData","index","deleteSendMsgData","getCoinRank","getRebateRank","getJewelRank","getUserNameById","targetId","soldJewel","count","CMD_STORE","handSoldJewel","toUid","conversionCoin","prodId","getNewVIPInfo","CMD_NEW_VIP","getLoginReward","CMD_GET_NSLOGIN_REWARD","getNewUserReward","CMD_NEW_USER_REWARD","getStoreInfo","action","CMD_STORE_INFO","getBagInfo","CMD_BAG_INFO","getEveryTaskInfo","CMD_EVERYTASK","getPersonalMsg","getMessageReward","msgid","getGlobalMsg","sendHeartBeat","argument","cmd","HEART_BEAT","deviceId","getHallInfo","CMD_HALL_INFO","getArenaMatchList","CMD_GAME","ASYNC_COMMON_ARENA_MATCH","bindUser","CMD_BIND_USER","authorCode","getGdata","bindGame","CMD_BIND_GAME","getHeadPics","CMD_GET_HEAD_PICS","roomAction","tmp","GameId","CUSTOM_ROOMID","key","CMD_ROOM","customTableAction","CMD_CUSTOMTABLE","sendChatMsg","seatId","isFace","voiceIndex","CMD_TABLE_CHAT"],"mappings":"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","file":"MsgFactory.js","sourceRoot":"../../../../../assets/Script/hall","sourcesContent":["//\n//  MsgFactory.js\n//\n//  Created by xujing on 18-01-29.\n// 将向server发消息的逻辑统一放在这里\nhall.MsgFactory = {\n    _TAG: 'hall.MsgFactory',\n\n    // 发送出去消息\n    _sendCmd: function(json) {\n        // var strValue = JSON.stringify(json) + '\\r\\n';\n        // ddz.LOGD(null, 'send msg in msg_factory :' + strValue);\n        if (!json.params){\n            json.params = {};\n        }\n        json.params.userId = json.params.userId || ty.UserInfo.userId;\n        json.params.gameId = json.params.gameId || ty.SystemInfo.hallId;\n        json.params.clientId = ty.SystemInfo.clientId;\n\n        ty.TCP.sendMsg(json);\n    },\n\n    /**\n     * 获取UserInfo，大厅获取9999的UserInfo，单版获取6的\n     * 大厅也有获取6的user_info的时候，地主的新手奖励实在地主服的bind_game时发放的\n     */\n    getUserInfo: function(gameId) {\n        hall.LOGD(this._TAG, 'getUserInfo');\n        if (gameId == null || typeof(gameId) == 'undefined') {\n            gameId = ty.SystemInfo.hallId;\n        }\n\n        hall.LOGD(this._TAG, 'getUserInfo gameId = ' + gameId);\n        var params = {\n            'cmd': ty.EventType.CMD_USER_INFO,\n            'params' : {\n                'gameId': gameId\n            }\n        };\n        this._sendCmd(params);\n    },\n    /*\n     typeid\n     2 - 系统消息\n     1 - 游戏消息\n    */\n    getUserRewardInfo: function() {\n        hall.LOGD(this._TAG, 'getUserRewardInfo');\n        var params = {\n            'cmd': ddz.EventType.CMD_MESSAGE,\n            'params' : {\n                'action':'list',\n                'typeid':1\n            }\n        };\n        this._sendCmd(params);\n    },\n\n    getSystemMessageInfo: function() {\n        hall.LOGD(this._TAG, 'getSystemMessageInfo');\n        var params = {\n            'cmd': ddz.EventType.CMD_MESSAGE,\n            'params' : {\n                'action':'m_list',\n                'typeid':2\n            }\n        };\n        this._sendCmd(params);\n    },\n\n    getTimeStamp: function() {\n        hall.LOGD(this._TAG, 'getTimeStamp');\n        var params = {\n            \"cmd\"   : ddz.EventType.CMD_USER,\n            \"params\": {\n                \"action\" :\"sync_timestamp\"\n            }\n        };\n        this._sendCmd(params);\n    },\n\n    /* 进入经典场，某个房间，返回的是table_info...有3种情况，带roomid（选定房间进入）, 带sessionIndex（快速进入）, 都不带（断线重练）\n     * 参数都要携带，roomId或者sessionIndex没有的时候传null\n     * isBringInCoin是否有代入功能\n     * 斗地主与麻将牌桌内的快速开始要携带在牌桌内的标记innerTable\n     * innerTable为1，表示在牌桌内的快速开始，没有或者为0，表示非配桌内的快速开始\n     */\n    getQuickStart: function(userId, gameId, roomId, apiver, sessionIndex, isBringInCoin, innerTable, tableId, mixId, play_mode) {\n        var data = {\n            'userId': userId,\n            'gameId': gameId,\n            'apiver': apiver\n        };\n        var params = {\n            'cmd': ddz.EventType.CMD_TABLE_QUICKSTART,\n            'params': data\n        };\n\n        //如果没有sessionIndex这个参数，则传roomId， 否则传sessionIndex\n        if (typeof(sessionIndex) != 'undefined' && sessionIndex != null) {\n            data[\"sessionIndex\"] = sessionIndex;\n        }\n\n        if (typeof(roomId) != 'undefined' && roomId != null) {\n            data[\"roomId\"] = roomId;\n        }\n\n        if (tableId) {\n            data[\"tableId\"] = tableId;\n        }\n\n        if (typeof(innerTable) != 'undefined' && innerTable != null) {\n            data['innerTable'] = innerTable;\n        }\n\n        if (typeof(isBringInCoin) != 'undefined' && isBringInCoin != null) {\n            data[\"buyin\"] = isBringInCoin;\n        }\n\n        if (typeof(mixId) != 'undefined' && mixId != null) {\n            data[\"mixId\"] = mixId;\n        }\n\n        if (typeof(play_mode) != 'undefined' && play_mode != null) {\n            data[\"play_mode\"] = play_mode;\n        }\n\n        this._sendCmd(params);\n    },\n    \n    getQuickStartParams: function(params){\n        var params = {\n            'cmd': ddz.EventType.CMD_TABLE_QUICKSTART,\n            'params': params\n        };\n        this._sendCmd(params);\n    },\n\n    /**\n     * 获取gameData，大厅版本需要区分是获取9999的gameId还是6的gameId\n     */\n    getGameData: function(gameId) {\n        var params = {\n            'cmd': ddz.EventType.CMD_GAME_DATA,\n            'params': {\n                'gameId': gameId\n            }\n        };\n\n        this._sendCmd(params);\n    },\n\n    // 获取已发出私信列表\n    getMsgSendData: function(pagenum) {\n        var params = {\n            'cmd': ddz.EventType.CMD_MESSAGE,\n            'params': {\n                \"action\": \"msg_send_list\",\n                'pagenum': pagenum\n            }\n        };\n\n        this._sendCmd(params);\n    },\n\n    // 获取接受私信列表\n    getMsgReceiveData: function(pagenum) {\n        var params = {\n            'cmd': ddz.EventType.CMD_MESSAGE,\n            'params': {\n                \"action\": \"msg_receive_list\",\n                'pagenum': pagenum\n            }\n        };\n\n        this._sendCmd(params);\n    },\n\n    getSysMsgData: function() {\n        var params = {\n            'cmd': ddz.EventType.CMD_MESSAGE,\n            'params': {\n                \"action\": \"sys_msg_list\"\n            }\n        };\n        this._sendCmd(params);\n    },\n    // 宝石排行榜签名\n    setRankSign: function(str) {\n        var params = {\n            'cmd': ddz.EventType.CMD_RANK,\n            'params': {\n                \"action\": \"sign\",\n                'rankKey': \"hall.jewel\",\n                'content': str\n            }\n        };\n        this._sendCmd(params);\n    },\n\n    // 发送私信\n    sendMsgData: function(otherId, msg) {\n        var params = {\n            'cmd': ddz.EventType.CMD_MESSAGE,\n            'params': {\n                \"action\": \"msg_send\",\n                'to_uid': otherId,\n                'msg': msg\n            }\n        };\n        this._sendCmd(params);\n    },\n    // 消息未读\n    getUnreadMsg: function() {\n        var params = {\n            'cmd': ddz.EventType.CMD_MESSAGE,\n            'params': {\n                \"action\": \"sys_unread\"\n            }\n        };\n        this._sendCmd(params);\n    },\n    //删除私信\n    deleteRecMsgData: function(index) {\n        var params = {\n            'cmd': ddz.EventType.CMD_MESSAGE,\n            'params': {\n                \"action\": \"del_msg_recv\",\n                'id': index\n            }\n        };\n        this._sendCmd(params);\n    },\n    deleteSendMsgData: function(index) {\n        var params = {\n            'cmd': ddz.EventType.CMD_MESSAGE,\n            'params': {\n                \"action\": \"del_msg_send\",\n                'id': index\n            }\n        };\n        this._sendCmd(params);\n    },\n    // 获取金币排行榜\n    getCoinRank: function() {\n        var params = {\n            'cmd': ddz.EventType.CMD_RANK,\n            'params': {\n                \"action\": \"list\",\n                'rankKey': \"110000001\"\n            }\n        };\n        this._sendCmd(params);\n    },\n    // \n    getRebateRank: function() {\n        var params = {\n            'cmd': ddz.EventType.CMD_RANK,\n            'params': {\n                \"action\": \"list\",\n                'rankKey': \"hall.period.winchip.1605\"\n            }\n        };\n        this._sendCmd(params);\n    },\n\n    // 获取宝石排行榜\n\n    getJewelRank: function() {\n        var params = {\n            'cmd': ddz.EventType.CMD_RANK,\n            'params': {\n                \"action\": \"list\",\n                'rankKey': \"hall.jewel\"\n            }\n        };\n        this._sendCmd(params);\n    },\n    // 根据id获取名字\n    getUserNameById: function(targetId) {\n        var params = {\n            'cmd': ddz.EventType.CMD_USER,\n            'params': {\n                \"action\": \"get_name\",\n                'targetUserId': targetId\n            }\n        };\n        this._sendCmd(params);\n    },\n    // 出售宝石\n    soldJewel: function(count) {\n        var params = {\n            'cmd': ddz.EventType.CMD_STORE,\n            'params': {\n                \"action\": \"jewel_sell\",\n                'count': count\n            }\n        };\n        this._sendCmd(params);\n    },\n    // 赠送\n    handSoldJewel: function(count, toUid) {\n        var params = {\n            'cmd': ddz.EventType.CMD_STORE,\n            'params': {\n                \"action\": \"jewel_give\",\n                'count': count,\n                'to_uid': toUid\n            }\n        };\n        this._sendCmd(params);\n    },\n\n    // 钻石兑换金币\n    conversionCoin: function(prodId) {\n        var params = {\n            'cmd': ddz.EventType.CMD_STORE,\n            'params': {\n                \"action\": \"buy\",\n                'prodId': prodId\n            }\n        };\n        this._sendCmd(params);\n    },\n\n    getNewVIPInfo: function() {\n        var params = {\n            'cmd': ddz.EventType.CMD_NEW_VIP,\n            'params': {\n                'gameId': ty.SystemInfo.gameId,\n                'action': \"simpleVipInfo\"\n            }\n        };\n        this._sendCmd(params);\n    },\n\n    // 获取每日登陆的奖励 \n    getLoginReward: function() {\n        var params = {\n            'cmd': ddz.EventType.CMD_GET_NSLOGIN_REWARD,\n            'params': {\n                'gameId': ty.SystemInfo.gameId,\n                'rewardtype': 1\n            }\n        };\n        this._sendCmd(params);\n    },\n\n    // 获取新手奖励\n    getNewUserReward: function() {\n        var params = {\n            'cmd': ddz.EventType.CMD_NEW_USER_REWARD,\n            'params': {\n                'gameId': ty.SystemInfo.gameId,\n                'actionType': 1,\n                \"action\": \"receive\"\n            }\n        };\n        this._sendCmd(params);\n    },\n\n    //获取商店信息\n    getStoreInfo: function(action) {\n        hall.LOGD(this._TAG, \"发送获取商店信息请求... action = \" + action);\n        var params = {\n            'cmd': ddz.EventType.CMD_STORE_INFO,\n            'params': {\n                'action': action\n            }\n        };\n        this._sendCmd(params);\n    },\n\n    //获取背包信息\n    getBagInfo: function() {\n        var params = {\n            'cmd': ddz.EventType.CMD_BAG_INFO,\n            'params': {\n                'action': 'update'\n            }\n        };\n        this._sendCmd(params);\n\n        // var params = {\n        //     'cmd': ddz.EventType.CMD_PACK_INFO,\n        //     'params': {\n        //         'action': 'list'\n        //     }\n        // };\n        // this._sendCmd(params);\n\n    },\n\n    //获取每次任务信息，action有两个：change改变每日任务的状态    update更新每日任务\n    getEveryTaskInfo: function(gameId, action) {\n        var params = {\n            'cmd': ddz.EventType.CMD_EVERYTASK,\n            'params': {\n                'gameId': gameId,\n                'action': action\n            }\n        };\n        this._sendCmd(params);\n    },\n\n    getPersonalMsg: function(gameId) {\n        var params = {\n            'cmd': ddz.EventType.CMD_MESSAGE,\n            'params': {\n                'gameId': gameId || ty.SystemInfo.gameId,\n                'action': 'private_update',\n                'pagenum': 0\n            }\n        };\n        this._sendCmd(params);\n    },\n\n    getMessageReward: function(msgid) {\n        var params = {\n            'cmd': ddz.EventType.CMD_MESSAGE,\n            'params': {\n                'action': 'm_receive',\n                'typeid': 2,\n                'msgid' : msgid,\n            }\n        };\n        this._sendCmd(params);\n    },\n\n    getGlobalMsg: function(gameId) {\n        var params = {\n            'cmd': ddz.EventType.CMD_MESSAGE,\n            'params': {\n                'gameId': gameId || ty.SystemInfo.gameId,\n                'action': 'global_update',\n                'pagenum': 0\n\n            }\n        };\n        this._sendCmd(params);\n    },\n\n    // 心跳的消息\n    sendHeartBeat: function(argument) {\n        var cmd = {\n            'cmd': ty.EventType.HEART_BEAT,\n            'params': {\n                'deviceId': ty.SystemInfo.deviceId\n            }\n        };\n        this._sendCmd(cmd);\n    },\n\n    getHallInfo: function(gameId) {\n        var cmd = {\n            'cmd': ddz.EventType.CMD_HALL_INFO,\n            'params': {\n                'gameId': gameId || ty.SystemInfo.gameId,\n            }\n        };\n        this._sendCmd(cmd);\n    },\n\n    getArenaMatchList: function(gameId) {\n        hall.LOGD(\"getArenaMatchList\",\"123456\");\n        var cmd = {\n            'cmd': ddz.EventType.CMD_GAME,\n            'params': {\n                'action': ddz.EventType.ASYNC_COMMON_ARENA_MATCH,\n                'gameId': gameId || ty.SystemInfo.gameId,\n            }\n        };\n        this._sendCmd(cmd);\n    },\n\n    /**\n     * 3.0接口，等同于2.7的user_info\n     * 大厅版本发送大厅的GameId，单版发送地主的gameIdisHall\n     */\n    bindUser: function() {\n        // 发送完bind_user，需要重置msg_center里的_bBindGame\n        // if (!hall.MsgCenter._bBindGame) {\n        //     hall.MsgCenter._bBindGame = true;\n        // }\n\n        var cmd = {\n            'cmd': ty.EventType.CMD_BIND_USER,\n            'params': {\n                'authorCode': ty.UserInfo.authorCode\n            }\n        };\n        this._sendCmd(cmd);\n    },\n\n    /**\n     * 获取游戏数据\n     */\n    getGdata: function() {\n        var cmd = {\n            'cmd': ddz.EventType.CMD_GAME_DATA,\n            'params': {\n                'authorCode': ty.UserInfo.authorCode\n            }\n        };\n        this._sendCmd(cmd);\n    },\n\n    /**\n     * 3.0接口，大厅独特消息\n     */\n    bindGame: function(gameId) {\n        var cmd = {\n            'cmd': ty.EventType.CMD_BIND_GAME,\n            'params': {\n                'gameId': gameId,\n                'authorCode': ty.UserInfo.authorCode\n            }\n        };\n        this._sendCmd(cmd);\n    },\n    // 请求服务器返回web页信息\n\n    // 获取头像图片列表\n    getHeadPics: function(gameId) {\n        var cmd = {\n            'cmd': ddz.EventType.CMD_GET_HEAD_PICS,\n            'params': {\n                'gameId': gameId\n            }\n        };\n        this._sendCmd(cmd);\n    },\n\n    // 组局信息获取接口\n    roomAction: function(action, tableId, data) {\n        var tmp = {\n            \"action\": action,\n            'gameId': ddz.GameId,\n            'customTableId': tableId,\n            'roomId': hall.CUSTOM_ROOMID\n        };\n        if (data) {\n            for (var key in data) {\n                tmp[key] = data[key];\n            }\n        }\n        var params = {\n            'cmd': ddz.EventType.CMD_ROOM,\n            'params': tmp\n        };\n        this._sendCmd(params);\n    },\n\n    customTableAction: function(action, data) {\n        var tmp = {\n            \"action\": action,\n            'gameId': ty.SystemInfo.gameId\n        };\n        if (data) {\n            for (var key in data) {\n                tmp[key] = data[key];\n            }\n        }\n        var params = {\n            'cmd': ddz.EventType.CMD_CUSTOMTABLE,\n            'params': tmp\n        };\n\n        this._sendCmd(params);\n    },\n\n    /**\n     * 发送聊天信息\n     * @param roomId 房间ID\n     * @param tableId 牌桌ID\n     * @param seatId 坐位ID\n     * @param msg 消息\n     * @param isFace 0:文本, 1:表情,2:语音\n     * @param voiceIndex 语音索引(暂时不用)\n     */\n    sendChatMsg: function(roomId, tableId, seatId, msg, isFace, voiceIndex) {\n        if (isFace) {\n            //兼容老版本\n            // msg = \"expression\" + msg + \".png\";\n            // hall.LOGD(this._TAG, \"chat msg is = \" + msg);\n        }\n        if (msg == \"\"){\n            return\n        }\n        var params = {\n            'cmd': ddz.EventType.CMD_TABLE_CHAT,\n            'params': {\n                'roomId': roomId,\n                'tableId': tableId,\n                'seatId': seatId,\n                'gameId': ddz.GameId,\n                'msg': msg,\n                'isFace': isFace,\n                'voiceIdx': voiceIndex\n            }\n        };\n        hall.MsgFactory._sendCmd(params);\n    }\n};"]}