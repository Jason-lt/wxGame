{"version":3,"sources":["Recharge.js"],"names":["ty","Recharge","createOrder","id","prodPrice","name","prodCount","data","prodId","chargeType","gameId","SystemInfo","hallId","prodName","appInfo","TuyooSDK","rechargeOrder","orderCallFunc","url","platformOrderId","chargeCoin","local_uuid","hall","GlobalFuncs","getLocalUuid","_chargeCoin","wx","request","header","userId","UserInfo","appId","wxAppId","clientId","imei","uuid","method","success","results","NotificationCenter","trigger","ddz","EventType","CHARGE_SUCCESS","tips","str","playShareZuanShi","fail","params","complete"],"mappings":";;;;;;AAAA;;;;AAIAA,GAAGC,QAAH,GAAc;AACVC,iBAAY,qBAASC,EAAT,EAAYC,SAAZ,EAAsBC,IAAtB,EAA2BC,SAA3B,EAAqC;AAC7C;;;;;;;;;;AAWA,YAAIC,OAAO,EAAX;AACAA,aAAKC,MAAL,GAAcL,EAAd;AACAI,aAAKH,SAAL,GAAiBA,SAAjB;AACAG,aAAKE,UAAL,GAAkB,WAAlB;AACAF,aAAKG,MAAL,GAAcV,GAAGW,UAAH,CAAcD,MAAd,IAAwBV,GAAGW,UAAH,CAAcC,MAApD;AACAL,aAAKM,QAAL,GAAgBR,IAAhB;AACAE,aAAKD,SAAL,GAAiBA,SAAjB;AACA;AACAC,aAAKO,OAAL,GAAe,EAAf;AACAd,WAAGe,QAAH,CAAYC,aAAZ,CAA0BT,IAA1B;AACH,KAvBS;AAwBVU,mBAAc,uBAASC,GAAT,EAAaC,eAAb,EAA6BC,UAA7B,EAAwC;AAClD,YAAIC,aAAaC,KAAKC,WAAL,CAAiBC,YAAjB,EAAjB;AACA;AACA;AACA,YAAIC,cAAcL,UAAlB;AACAM,WAAGC,OAAH,CAAW;AACPT,iBAAKA,GADE;AAEPU,oBAAQ;AACJ,gCAAgB;AADZ,aAFD;AAKPrB,kBAAM;AACFsB,wBAAO7B,GAAG8B,QAAH,CAAYD,MADjB;AAEFE,uBAAO/B,GAAGW,UAAH,CAAcoB,KAFnB;AAGFC,yBAAShC,GAAGW,UAAH,CAAcqB,OAHrB;AAIFC,0BAAUjC,GAAGW,UAAH,CAAcsB,QAJtB;AAKFC,sBAAM,MALJ;AAMFC,sBAAOd,UANL;AAOFF,iCAAiBA;AAPf,aALC;;AAePiB,oBAAO,MAfA;;AAiBPC,qBAAS,iBAASC,OAAT,EAAkB;AACvB;AACAtC,mBAAGuC,kBAAH,CAAsBC,OAAtB,CAA8BC,IAAIC,SAAJ,CAAcC,cAA5C,EAA2DlB,WAA3D;AACA,oBAAImB,OAAO,MAAX;AACA,oBAAIC,MAAM,oDAAoDpB,WAApD,GAAkE,MAA5E;AACAgB,oBAAIlB,WAAJ,CAAgBuB,gBAAhB,CAAiCrB,WAAjC,EAA6CmB,IAA7C,EAAkDC,GAAlD;AAEH,aAxBM;AAyBPE,kBAAM,cAASC,MAAT,EAAiB;AACnB;AACH,aA3BM;AA4BPC,sBAAU,kBAASD,MAAT,EAAiB,CAE1B;AA9BM,SAAX;AAgCH;AA7DS,CAAd","file":"Recharge.js","sourceRoot":"../../../../../assets/Script/Framework","sourcesContent":["/**\n * Created by tuyoo on 2018/5/7.\n */\n\nty.Recharge = {\n    createOrder:function(id,prodPrice,name,prodCount){\n        /*\n         params  id:商品ID,prodPrice:价格  单位元, name:商品名称\n                 prodCount:购买数量,默认为1\n\n         prodId:商品ID, prodName:商品名称, prodCount:购买数量\n         prodPrice:价格  单位元,\n         chargeType:支付方式 wxapp.iap,\n         gameId:子游戏id,\n         appInfo:透传参数,\n         mustcharge:是否支付 默认填 1\n         */\n        var data = {};\n        data.prodId = id;\n        data.prodPrice = prodPrice;\n        data.chargeType = \"wxapp.iap\";\n        data.gameId = ty.SystemInfo.gameId || ty.SystemInfo.hallId;\n        data.prodName = name;\n        data.prodCount = prodCount;\n        // data.gameId = ty.SystemInfo.hallId;\n        data.appInfo = {};\n        ty.TuyooSDK.rechargeOrder(data);\n    },\n    orderCallFunc:function(url,platformOrderId,chargeCoin){\n        var local_uuid = hall.GlobalFuncs.getLocalUuid();\n        // hall.LOGW(null, 'file = [Recharge] fun = [orderCallFunc] url = ' + url);\n        // hall.LOGW(null, 'file = [Recharge] fun = [orderCallFunc] platformOrderId = ' + platformOrderId);\n        var _chargeCoin = chargeCoin;\n        wx.request({\n            url: url,\n            header: {\n                'content-type': 'application/x-www-form-urlencoded'\n            },\n            data: {\n                userId:ty.UserInfo.userId,\n                appId: ty.SystemInfo.appId,\n                wxAppId: ty.SystemInfo.wxAppId,\n                clientId: ty.SystemInfo.clientId,\n                imei: 'null',\n                uuid : local_uuid,\n                platformOrderId: platformOrderId,\n            },\n\n            method:'POST',\n\n            success: function(results) {\n                // hall.LOGW(null, 'file = [Recharge] fun = [OrderCallFun] 充值成功 results = ' + JSON.stringify(results));\n                ty.NotificationCenter.trigger(ddz.EventType.CHARGE_SUCCESS,_chargeCoin);\n                var tips = \"购买成功\";\n                var str = \"<img src='ddz_button_diamond'/><color=#FFFFFF> \" + _chargeCoin + \"</c>\";\n                ddz.GlobalFuncs.playShareZuanShi(_chargeCoin,tips,str);\n\n            },\n            fail: function(params) {\n                // hall.LOGW(null, 'file = [Recharge] fun = [OrderCallFun] 充值失败 params = ' + JSON.stringify(params));\n            },\n            complete: function(params) {\n\n            }\n        });\n    },\n};"]}