{"version":3,"sources":["SystemInfo.js"],"names":["console","log","ty","SystemInfo","DEBUG_SER_KEY","clientId","clientIdInt","cloudid","version","loginUrl","deviceId","wxAppId","appId","hallId","gameId","tableBgMusicVolume","cdnPath","remotePackPath","m_server_ip","shareManagerUrl","shareImagePath","shareImageType","shareTicket","ftID","treasureID","mostImgCount","imageDicArray","imageDic","bsgsCitys","getImageWithURL","urlStringO","nowSprite","urlString","hall","hex_md5","setOldSize","texture","oldSize","cc","size","node","width","height","spriteFrame","setContentSize","textureArray","push","length","tempURL","splice","_index","loadImage","txImage","wx","createImage","src","onload","event","LOGW","Texture2D","initWithElement","handleLoadedTexture","SpriteFrame","tempA","i","sprit","onerror","Timer","setTimer","director","getImageWithURLBig","ddz","LOGD","urlStr_2","jpg_index","indexOf","index","replace"],"mappings":"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","file":"SystemInfo.js","sourceRoot":"../../../../../assets/Script/Framework","sourcesContent":["/**\n * @author zhaoliang\n * @date 1.28\n * \n * 全局对象\n * 系统信息\n * 包括clientId，loginUrl等\n */\nconsole.log(\"SystemInfo loaded\");\nty.SystemInfo = {\n    DEBUG_SER_KEY:\"DEBUG_SER_KEY\",\n    clientId: 'H5_2.0_weixin.weixin.0-hall119.weixin.ddzdj',\n    clientIdInt: 24669,\n    cloudid:24,\n\n    version:\"1.0.1\",\n    //\n    // loginUrl: 'https://fz.nalrer.cn/', //仿真地址\n    // loginUrl: 'http://140.143.201.170:8000/', //仿真地址\n    //\n    // webSocketUrl: 'ws://39.107.104.141/',\n    // loginUrl: 'http://192.168.20.108:8000/',\n    // webSocketUrl: 'ws://192.168.10.88/',\n    //\n    loginUrl : 'https://openrich.nalrer.cn/',  //正式\n\n    // webSocketUrl: 'wss://richwss.nalrer.cn/',\n\n    // loginUrl : 'http://140.143.250.132/',\n    // webSocketUrl: 'ws://140.143.250.132/',\n\n    deviceId: 'wechatGame',\n    wxAppId: 'wxbfebdafc2fc60b54',\n    appId: 9999,\n    hallId: 9999,\n    gameId: 119,\n    tableBgMusicVolume: 0.4,\n    cdnPath:\"https://richqn.nalrer.cn/dizhu/\",\n\n    remotePackPath:\"remote_res/res633.zip\",\n\n    m_server_ip : \"https://cbi.touch4.me/api/bilog5/text\",\n    // m_server_ip : \"https://47.94.79.1/api/bilog5/text\",\n    // m_server_ip : \"http://172.16.3.24\",\n\n    shareManagerUrl : 'https://market.touch4.me/',\n\n    shareImagePath : \"\",\n    shareImageType :\"\",\n    shareTicket : \"\",\n    ftID : \"\",\n    treasureID : \"\",\n    mostImgCount : 40,\n    imageDicArray : [],\n    imageDic : {},\n    bsgsCitys : ['北京','上海','广州','深圳','杭州','成都'],\n\n    getImageWithURL : function (urlStringO, nowSprite) {\n        var urlString = hall.hex_md5(urlStringO);\n        var setOldSize = function (nowSprite, texture) {\n            var oldSize = cc.size(nowSprite.node.width, nowSprite.node.height);\n            nowSprite.spriteFrame = texture;\n            nowSprite.node.setContentSize(oldSize);\n        };\n\n        if (ty.SystemInfo.imageDic[urlString]) {\n            if (ty.SystemInfo.imageDic[urlString].texture){\n                // hall.LOGD(null, \"缓存在这里缓存在这里缓存在这里缓存在这里缓存在这里\");\n                setOldSize(nowSprite, ty.SystemInfo.imageDic[urlString].texture);\n            }else {\n                if (ty.SystemInfo.imageDic[urlString].textureArray){\n                    ty.SystemInfo.imageDic[urlString].textureArray.push(nowSprite);\n                }else {\n                    ty.SystemInfo.imageDic[urlString].textureArray = [];\n                    ty.SystemInfo.imageDic[urlString].textureArray.push(nowSprite);\n                }\n            }\n        } else {\n            ty.SystemInfo.imageDic[urlString] = {};\n            ty.SystemInfo.imageDic[urlString].textureArray = [];\n            ty.SystemInfo.imageDic[urlString].textureArray.push(nowSprite);\n            if (ty.SystemInfo.imageDicArray.length >= ty.SystemInfo.mostImgCount){\n                var tempURL = ty.SystemInfo.imageDicArray[0];\n                ty.SystemInfo.imageDic[tempURL] = null;\n                delete ty.SystemInfo.imageDic[tempURL];\n                ty.SystemInfo.imageDicArray.splice(0,1);\n            }\n            ty.SystemInfo.imageDicArray.push(urlString);\n\n            var _index = 0;\n            var loadImage = function(){\n                var txImage = wx.createImage();\n                txImage.src = urlStringO;\n                txImage.onload = function (event) {\n                    hall.LOGW(\"\",\"file = [SystemInfo] fun = [loadImage] 加载成功\");\n                    var texture = new cc.Texture2D();\n                    texture.initWithElement(txImage);\n                    texture.handleLoadedTexture();\n                    ty.SystemInfo.imageDic[urlString].texture =  new cc.SpriteFrame(texture);\n                    var tempA = ty.SystemInfo.imageDic[urlString].textureArray;\n                    for (var  i = 0 ; i < tempA.length ; i ++){\n                        var sprit = tempA[i];\n                        if (sprit){\n                            // hall.LOGD(null, \"不是缓存获得图片不是缓存获得图片不是缓存获得图片不是缓存获得图片不是缓存获得图片\");\n                            setOldSize(sprit, ty.SystemInfo.imageDic[urlString].texture);\n                        }\n                    }\n                };\n                txImage.onerror = function (event) {\n                    hall.LOGW(\"\",\"file = [SystemInfo] fun = [loadImage] 加载失败\");\n                    _index++;\n                    if(_index < 4) {\n                        ty.Timer.setTimer(cc.director, function(){\n                            loadImage();\n                        }, 1, 1, 0);\n                    }\n\n                };\n            };\n\n            loadImage();\n        }\n    },\n    getImageWithURLBig : function (urlStringO, nowSprite) {\n        ddz.LOGD(\"\",\"file = [SystemInfo] fun = [getImageWithURLBig] urlStringO = \" + urlStringO);\n        var urlStr_2 = urlStringO;\n        var jpg_index = urlStringO.indexOf(\".jpg\");\n        if (jpg_index == -1) {\n            var index = urlStringO.indexOf(\"/132\");\n            if (index > 0) {\n                urlStr_2 = urlStr_2.replace('/132', '/0');\n            }\n        }\n        var urlString = hall.hex_md5(urlStr_2);\n        var setOldSize = function (nowSprite, texture) {\n            var oldSize = cc.size(nowSprite.node.width, nowSprite.node.height);\n            nowSprite.spriteFrame = texture;\n            nowSprite.node.setContentSize(oldSize);\n        };\n\n        if (ty.SystemInfo.imageDic[urlString]) {\n            if (ty.SystemInfo.imageDic[urlString].texture){\n                // hall.LOGD(null, \"缓存在这里缓存在这里缓存在这里缓存在这里缓存在这里\");\n                setOldSize(nowSprite, ty.SystemInfo.imageDic[urlString].texture);\n            }else {\n                if (ty.SystemInfo.imageDic[urlString].textureArray){\n                    ty.SystemInfo.imageDic[urlString].textureArray.push(nowSprite);\n                }else {\n                    ty.SystemInfo.imageDic[urlString].textureArray = [];\n                    ty.SystemInfo.imageDic[urlString].textureArray.push(nowSprite);\n                }\n            }\n        } else {\n            ty.SystemInfo.imageDic[urlString] = {};\n            ty.SystemInfo.imageDic[urlString].textureArray = [];\n            ty.SystemInfo.imageDic[urlString].textureArray.push(nowSprite);\n            if (ty.SystemInfo.imageDicArray.length >= ty.SystemInfo.mostImgCount){\n                var tempURL = ty.SystemInfo.imageDicArray[0];\n                ty.SystemInfo.imageDic[tempURL] = null;\n                delete ty.SystemInfo.imageDic[tempURL];\n                ty.SystemInfo.imageDicArray.splice(0,1);\n            }\n            ty.SystemInfo.imageDicArray.push(urlString);\n\n            var _index = 0;\n            var loadImage = function(){\n                var txImage = wx.createImage();\n                txImage.src = urlStr_2;\n                txImage.onload = function (event) {\n                    hall.LOGW(\"\",\"file = [SystemInfo] fun = [loadImage] 加载成功\");\n                    var texture = new cc.Texture2D();\n                    texture.initWithElement(txImage);\n                    texture.handleLoadedTexture();\n                    ty.SystemInfo.imageDic[urlString].texture =  new cc.SpriteFrame(texture);\n                    var tempA = ty.SystemInfo.imageDic[urlString].textureArray;\n                    for (var  i = 0 ; i < tempA.length ; i ++){\n                        var sprit = tempA[i];\n                        if (sprit){\n                            // hall.LOGD(null, \"不是缓存获得图片不是缓存获得图片不是缓存获得图片不是缓存获得图片不是缓存获得图片\");\n                            setOldSize(sprit, ty.SystemInfo.imageDic[urlString].texture);\n                        }\n                    }\n                };\n                txImage.onerror = function (event) {\n                    hall.LOGW(\"\",\"file = [SystemInfo] fun = [loadImage] 加载失败\");\n                    _index++;\n                    if(_index < 4) {\n                        ty.Timer.setTimer(cc.director, function(){\n                            loadImage();\n                        }, 1, 1, 0);\n                    }\n\n                };\n            };\n\n            loadImage();\n        }\n    }\n};\n"]}