{"version":3,"sources":["ddzsingle_robot_chat.js"],"names":["ddz","chatMsg","stringMode","DDZ_PLAY_CHAT_STRING_1000","DDZ_PLAY_CHAT_STRING_1001","DDZ_PLAY_CHAT_STRING_1002","DDZ_PLAY_CHAT_STRING_1003","DDZ_PLAY_CHAT_STRING_1004","DDZ_PLAY_CHAT_STRING_1005","DDZ_PLAY_CHAT_STRING_1006","DDZ_PLAY_CHAT_STRING_1007","AIChat","cc","Class","ctor","_dizhuPlayer","_nongminPlayer","setDizuPlayer","val","push","setNontminPlayer","len","arguments","length","i","startUrgeTimer","ty","Timer","setTimer","_urgeTalk","REPEAT_FOREVER","stopUrgeTimer","cancelTimer","stopAllTimer","chatInfo","showChat","id","GlobalFuncs","getZeroOrOne","_isIn","get","Math","random","log","commonPlayTalk","playerController","msgId","bombPlayTalk","playerUseBomb","res","_cpuIsEnemyWhenPlayerUseBomb","_cpuIsFriendWhenPlayerUseBomb","playChatEmoAction","useInterEmo"],"mappings":"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","file":"ddzsingle_robot_chat.js","sourceRoot":"../../../../../../assets/Script/ComponentScript/component","sourcesContent":["/*\n\tFile: ddz_robot_chat.js\n\tFucntion : 单机斗地主机器人说话\n*/\n\n// ddz.STRING.DDZ_PLAY_CHAT_STRING_1000: '我等的假花儿都谢了!', 0 \n// ddz.STRING.DDZ_PLAY_CHAT_STRING_1001: '真怕猪一样的队友！',  1\n// ddz.STRING.DDZ_PLAY_CHAT_STRING_1002: '一走一停真有型,一秒一卡好潇洒。', 2\n// ddz.STRING.DDZ_PLAY_CHAT_STRING_1003: '我炸你个桃花朵朵开! ', 3\n// ddz.STRING.DDZ_PLAY_CHAT_STRING_1004: '姑娘,你真是条汉子。', 4 \n// ddz.STRING.DDZ_PLAY_CHAT_STRING_1005: '风吹鸡蛋壳,牌去人安乐。',  5\n// ddz.STRING.DDZ_PLAY_CHAT_STRING_1006: '搏一搏,单车变摩托。', 6\n// ddz.STRING.DDZ_PLAY_CHAT_STRING_1007: '炸得好!', 7\n\nddz.chatMsg = [\n\t{\n\t\t'msg': ddz.stringMode.DDZ_PLAY_CHAT_STRING_1000,\n\t\t'index' : 0\n\t},\n\t{\n\t\t'msg': ddz.stringMode.DDZ_PLAY_CHAT_STRING_1001,\n\t\t'index' : 1\n\t},\n\t{\n\t\t'msg': ddz.stringMode.DDZ_PLAY_CHAT_STRING_1002,\n\t\t'index' : 2\n\t},\n\t{\n\t\t'msg': ddz.stringMode.DDZ_PLAY_CHAT_STRING_1003,\n\t\t'index' : 3\n\t},\n\t{\n\t\t'msg': ddz.stringMode.DDZ_PLAY_CHAT_STRING_1004,\n\t\t'index' : 4\n\t},\n\t{\n\t\t'msg': ddz.stringMode.DDZ_PLAY_CHAT_STRING_1005,\n\t\t'index' : 5\n\t},\n\t{\n\t\t'msg': ddz.stringMode.DDZ_PLAY_CHAT_STRING_1006,\n\t\t'index' : 6\n\t},\n\t{\n\t\t'msg': ddz.stringMode.DDZ_PLAY_CHAT_STRING_1007,\n\t\t'index' : 7\n\t}\n];\n\nddz.AIChat = cc.Class({\n\tctor: function() {\n\t\t// _dizhuPlayer这里放的是左右玩家，这个为空时，我是地主\n\t\tthis._dizhuPlayer = [];\n\t\tthis._nongminPlayer = [];\n\t},\n\n\tsetDizuPlayer: function(val) {\n\t\tthis._dizhuPlayer = [];\n\t\tif (val) {\n\t\t\tthis._dizhuPlayer.push(val);\n\t\t}\n\t},\n\n\tsetNontminPlayer: function() {\n\t\tthis._nongminPlayer = [];\n\t\tvar len = arguments.length;\n\t\tfor(var i=0; i<len; i++) {\n\t\t\tthis._nongminPlayer.push(arguments[i]);\n\t\t}\n\t},\n\n\t// 1，超过8秒玩家未出牌，非同伙的AI会说，如果两个都是敌方，则随机一人会说。38秒循环随机一人会说。\n\t// 目前的系统中只有玩家操作时会出现38秒还不出牌\n\tstartUrgeTimer: function() {\n\t\tty.Timer.setTimer(this, this._urgeTalk, 38, cc.REPEAT_FOREVER, 0);\n\t},\n\n\tstopUrgeTimer: function() {\n\t\tty.Timer.cancelTimer(this, this._urgeTalk);\n\t},\n\n\tstopAllTimer: function() {\n\t\tty.Timer.cancelTimer(this, this._urgeTalk);\n\t},\n\n\t_urgeTalk: function() {\n\t\t// 我不是地主\n\t\tvar chatInfo = ddz.chatMsg[0];\n\t\tif (this._dizhuPlayer.length > 0) {\n\t\t\tthis._dizhuPlayer[0].showChat(chatInfo);\n\t\t\treturn;\n\t\t}\n\t\t// 我是地主，随机一个id 0/1\n\t\tvar id = ddz.GlobalFuncs.getZeroOrOne();\n\t\tthis._nongminPlayer[id].showChat(chatInfo);\n\t},\n\t// 0<val<=1\n\t_isIn: function(val) {\n\t\tvar get = Math.random();\n\t\tcc.log('_isIn get = ' + get + ' val = ' + val);\n\t\treturn get <= val;\n\t},\n\n\t// 平常出牌的话语\n\tcommonPlayTalk: function(playerController) {\n\t\tif (!this._isIn(1/8)) {\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tvar msgId = [2, 6];\n\t\tvar id = ddz.GlobalFuncs.getZeroOrOne();\n\t\tvar chatInfo = ddz.chatMsg[msgId[id]];\n\t\tplayerController.showChat(ddz.chatMsg[msgId[id]]);\n\t},\n\n\t// 炸弹出牌说话\n\tbombPlayTalk: function(playerController) {\n\t\tif (!this._isIn(1/2)) {\n\t\t\treturn;\n\t\t}\n\t\tplayerController.showChat(ddz.chatMsg[3]);\n\t},\n\n\t// 玩家使用炸弹后的处理\n\tplayerUseBomb: function() {\n\t\tif (!this._isIn(1/3)) {\n\t\t\treturn false;\n\t\t}\n\t\t\n\t\t// 我是地主\n\t\tif (this._dizhuPlayer.length < 1) {\n\t\t\tvar res = this._cpuIsEnemyWhenPlayerUseBomb(this._nongminPlayer[0]);\n\t\t\tthis._cpuIsEnemyWhenPlayerUseBomb(this._nongminPlayer[1], res);\n\t\t\treturn true;\n\t\t}\n\n\t\t// 我不是地主，地主哭/扔鸡蛋\n\t\tthis._cpuIsEnemyWhenPlayerUseBomb(this._dizhuPlayer[0]);\n\t\t// 我的同伙\n\t\tthis._cpuIsFriendWhenPlayerUseBomb(this._nongminPlayer[0]);\n\t\t\n\t\treturn true;\n\t},\n\n\t_cpuIsFriendWhenPlayerUseBomb:function(playerController) {\n\t\tif (!playerController) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!this._isIn(1/2)) {\n\t\t\tplayerController.showChat(ddz.chatMsg[7]);\n\t\t\treturn;\n\t\t}\n\n\t\tplayerController.playChatEmoAction(8);\n\t},\n\n\t// 电脑是我的敌人\n\t_cpuIsEnemyWhenPlayerUseBomb: function(playerController, res) {\n\t\tif (!playerController) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (typeof(res)!='undefined') {\n\t\t\tif (res) {\n\t\t\t\tplayerController.playChatEmoAction(5);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tplayerController.useInterEmo();\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this._isIn(1/2)) {\n\t\t\tplayerController.useInterEmo();\n\t\t\treturn true;\n\t\t}\n\n\t\tplayerController.playChatEmoAction(5);\n\t\treturn false;\n\t}\n});"]}