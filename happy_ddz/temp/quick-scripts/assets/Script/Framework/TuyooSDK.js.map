{"version":3,"sources":["TuyooSDK.js"],"names":["console","log","ty","TuyooSDK","SESSION_KEY","login","ddz","LOGW","ServerStateManager","checkServerState","wx","getSetting","success","res","authSetting","wxLoginCode","loginTuyooWithCode","getUserInfo","withCredentials","hall","JSON","stringify","wxUserInfo","userInfo","iv","encryptedData","fail","LOGD","wechatLogin","params","BiLog","clickStat","UserInfo","clickStatEventType","clickStatEventTypeWxLoginSuccess","code","data","url","avatarUrl","name","nickName","NotificationCenter","trigger","EventType","UPDATE_SELF_HEAD_IMAGE","clickStatEventTypeWxLoginFailed","complete","wechatLoginDebug","GlobalFuncs","checkUserInfo","openDataContext","getOpenDataContext","sharedCanvas","canvas","context","getContext","hasOwnProperty","Timer","cancelTimer","cc","director","setTimer","loginWithOutAuthorization","MAX_COUNT","curCount","showShareMenu","withShareTicket","gender","local_uuid","getLocalUuid","sdkPath","SystemInfo","loginUrl","debugMode","ReadBoolFromLocalStorage","gameModel","DEBUG_MODE","ReadStringFromLocalStorage","DEBUG_SER_KEY","_nickName","Share","shareKeywordReplace","wechatName","clickStatEventTypeLoginSDKStart","_avatarUrl","postData","appId","wxAppId","clientId","snsId","uuid","scene_id","scene_param","invite_id","request","header","method","checkData","error","clickStatEventTypeLoginSDKFailed","result","userId","userName","userPic","purl","authorCode","wxgame_session_key","PropagateInterface","getUserFeatureInfo","getShareConfigInfo","token","setStorage","key","MSG_LOGIN_SUCCESS","clickStatEventTypeLoginSDKSuccess","ip","tcpsrv","port","wsport","webSocketUrl","indexOf","toString","TCP","connect","toDayList","GlobalTimer","getCurDayList","lastLoginTime","continuousLogin","setInLocalStorage","CONTINUOUSLOGIN","lastShareTimeList","LAST_SHARE_TIMELIST","YESTERDAYSHARE","rechargeOrder","data_s","imei","prodId","prodName","prodCount","prodPrice","chargeType","gameId","appInfo","mustcharge","results","chargeInfo","chargeData","notifyUrl","platformOrderId","requestMidasPayment","mode","env","offerId","buyQuantity","chargeTotal","platform","currencyType","zoneId","Recharge","orderCallFunc","chargeCoin","MsgBoxManager","showToast","title","info","getSystemType","fun","getSystemInfo","deviceInfo","model","isiPhone","windowHeight","resultType","SYSTEMTYPE","iPhoneXType","iPhone7P8PType","iphoneOtherType","isvivo85","ANDROIDVIVO85","ANDROIDOther","systemType","wechatType","version","system","onShow","onHide","date","matchModel","ONHIDE_DATE","date2","Date","getTime","timeGap","CHANGE_TO_SHOW_FROM_HODE","AudioHelper","rePlayMusic","onShowParam","scene","query","queryS","replaceToStringWithDic","from","inviteCode","shareTicket","ftID","treasureID","sourceCode","clickStatEventTypeUserFrom","clickStatShareType","imageType","onShareType","clickStatShareTypeInviteFriend","clickStatEventTypeInviteFriendCardClick","clickStatShareTypeGiveProp","clickStatEventTypeGivePropClick","isOnShare","inviteFriendID","inviteTreasureID","clickStatShareTypeRankList","appid","topage","isClickShareReward","getDayInviteReward","shareToGetreward","SharePointType","gongZhongHaoCard","gongZhongHaoMenu","addApplet","needReLogin","tableChatModel","replay","GAME_HIDE","friendModel","isEnterTable","close","getNetSuccess","netIsConnected","isConnected","errMsg","networkType","getNetworkType","onNetworkStatusChange","onError","d","message","uploadLogTimely"],"mappings":"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","file":"TuyooSDK.js","sourceRoot":"../../../../../assets/Script/Framework","sourcesContent":["/**\n * @author zhaoliang\n * @date 1.28\n * \n * 全局对象\n * 系统信息\n * 包括clientId，loginUrl等\n */\nconsole.log(\"TuyooSDK loaded\");\nty.TuyooSDK = {\n    SESSION_KEY: 'TU_SESSION_STORAGE',\n\n    /**\n     * 首页用\n     */\n    login: function() {\n        ddz.LOGW(\"\",\"file = [TuyooSDK] fun = [login]\")\n        ty.ServerStateManager.checkServerState(function () {\n            wx.getSetting({\n                success:function(res) {\n                    if (!res.authSetting['scope.userInfo']) {\n                        if (ty.wxLoginCode){\n                            ty.TuyooSDK.loginTuyooWithCode(ty.wxLoginCode);\n                            ty.wxLoginCode = null;\n                        }\n                    }else {\n                        wx.getUserInfo({\n                            withCredentials:true,\n                            success: function(res) {\n                                hall.LOGW(null, 'wx login success .. res:' + JSON.stringify(res));\n                                ty.wxUserInfo = true;\n                                if (ty.wxLoginCode){\n                                    ty.TuyooSDK.loginTuyooWithCode(ty.wxLoginCode, res.userInfo, res.iv, res.encryptedData);\n                                    ty.wxLoginCode = null;\n                                }\n                            },\n                            fail:function (res) {\n                                if (ty.wxLoginCode){\n                                    ddz.LOGD(\"\",\"file = [TuyooSDK] fun = [login] res = \" + JSON.stringify(res));\n                                    ty.TuyooSDK.loginTuyooWithCode(ty.wxLoginCode, res.userInfo, res.iv, res.encryptedData);\n                                    ty.wxLoginCode = null;\n                                }\n                            }\n                        });\n                    }\n                },\n                fail:function () {\n                    if (ty.wxLoginCode){\n                        ty.TuyooSDK.loginTuyooWithCode(ty.wxLoginCode);\n                        ty.wxLoginCode = null;\n                    }\n                },\n            });\n\n            // //不要授权\n            // if (ty.wxLoginCode){\n            //     ty.TuyooSDK.loginTuyooWithCode(ty.wxLoginCode);\n            //     ty.wxLoginCode = null;\n            // }\n        });\n    },\n\n    /**\n     * 其它页面用\n     */\n    wechatLogin: function() {\n        ty.ServerStateManager.checkServerState(function () {\n            // ty.BiLog.clickStat(ty.UserInfo.clickStatEventType.clickStatEventTypeWxLoginStart, []);\n            wx.login({\n                success: function(params) {\n                    hall.LOGD(null, 'wx login success, params:' + JSON.stringify(params));\n                    ty.BiLog.clickStat(ty.UserInfo.clickStatEventType.clickStatEventTypeWxLoginSuccess, [params.code]);\n                    if (params.code) {\n                        //登录后,重新获取用户信息\n                        wx.getSetting({\n                            success:function(res) {\n                                if (!res.authSetting['scope.userInfo']) {\n                                    ty.TuyooSDK.loginTuyooWithCode(params.code);\n                                }else {\n                                    wx.getUserInfo({\n                                        withCredentials:true,\n                                        success: function(res) {\n                                            hall.LOGW(null, 'wx login success .. res:' + JSON.stringify(res));\n                                            var data = {};\n                                            data.url = res.userInfo.avatarUrl;\n                                            data.name = res.userInfo.nickName;\n                                            ty.NotificationCenter.trigger(ddz.EventType.UPDATE_SELF_HEAD_IMAGE,data);\n                                            ty.TuyooSDK.loginTuyooWithCode(params.code, res.userInfo, res.iv, res.encryptedData);\n                                        },\n                                        fail:function (res) {\n\n                                            ty.TuyooSDK.loginTuyooWithCode(params.code, res.userInfo, res.iv, res.encryptedData);\n                                        }\n                                    });\n                                }\n                            },\n                            fail:function () {\n                                ty.TuyooSDK.loginTuyooWithCode(params.code);\n                            },\n                        });\n\n                        // wx.getUserInfo({\n                        //     withCredentials:true,\n                        //     success: function(res) {\n                        //         hall.LOGD(null, 'wx login success, res:' + JSON.stringify(res));\n                        //         ty.TuyooSDK.loginTuyooWithCode(params.code, res.userInfo, res.iv, res.encryptedData);\n                        //     },\n                        //     fail:function (res) {\n                        //     }\n                        // });\n\n                        //不要授权\n                        // ty.TuyooSDK.loginTuyooWithCode(params.code);\n                    }\n                },\n\n                fail: function(params) {\n                    ty.BiLog.clickStat(ty.UserInfo.clickStatEventType.clickStatEventTypeWxLoginFailed, []);\n                    hall.LOGD(null, 'wx login fail, params:' + JSON.stringify(params));\n                },\n\n                complete: function(params) {\n\n                }\n            });\n        });\n    },\n\n    wechatLoginDebug: function() {\n        ty.ServerStateManager.checkServerState(function () {\n            wx.login({\n                success: function (params) {\n                    hall.LOGD(null, 'wx login success, params:' + JSON.stringify(params));\n                    if (params.code) {\n                        //此处在使用开放数据域绕过微信授权\n                        var code = params.code;\n                        ddz.GlobalFuncs.getUserInfo();\n                        var checkUserInfo = function () {\n                            var openDataContext = wx.getOpenDataContext();\n                            var sharedCanvas = openDataContext.canvas;\n                            var context = sharedCanvas.getContext(\"2d\");\n                            if (context.hasOwnProperty('game_getUserInfo')) {\n                                ty.Timer.cancelTimer(cc.director, checkUserInfo);\n                                var userInfo = context['game_getUserInfo'];\n                                // ty.TuyooSDK.loginTuyooWithCode(code, {nickName:null,avatarUrl:null,gender:0});\n                                ty.TuyooSDK.loginTuyooWithCode(code, userInfo);\n                            }\n                        };\n\n                        ty.Timer.setTimer(cc.director, checkUserInfo, 1 / 60);\n                    }\n                },\n\n                fail: function (params) {\n                    hall.LOGD(null, 'wx login fail, params:' + JSON.stringify(params));\n                },\n                complete: function (params) {\n\n                }\n            });\n        });\n    },\n\n    loginWithOutAuthorization:function (code) {\n        //此处在使用开放数据域绕过微信授权\n        ddz.GlobalFuncs.getUserInfo();\n        var MAX_COUNT = 120;\n        var curCount = 0;\n        var checkUserInfo = function () {\n            // curCount++;\n            // if (curCount >= MAX_COUNT){\n            //     //180次之后,如果还没有取到玩家数据,就走正常的授权流程\n            //     ty.Timer.cancelTimer(cc.director, checkUserInfo);\n            //     hall.loginBtnManager.showLoginBtn();\n            //     return;\n            // }\n            var openDataContext = wx.getOpenDataContext();\n            var sharedCanvas = openDataContext.canvas;\n            \n            if (sharedCanvas && sharedCanvas.hasOwnProperty('2d')) {\n                var context = sharedCanvas.getContext(\"2d\");\n                if (context.hasOwnProperty('game_getUserInfo')) {\n                    ty.Timer.cancelTimer(cc.director, checkUserInfo);\n                    var userInfo = context['game_getUserInfo'];\n                    // ty.TuyooSDK.loginTuyooWithCode(code, {nickName:null,avatarUrl:null,gender:0});\n                    ty.TuyooSDK.loginTuyooWithCode(code, userInfo);\n                    ty.wxLoginCode = null;\n                }\n            }else {\n                // ty.TuyooSDK.loginTuyooWithCode(code);\n                ty.TuyooSDK.login();\n                // hall.loginBtnManager.showLoginBtn();\n            }\n        };\n\n        checkUserInfo();\n\n        // ty.Timer.setTimer(cc.director, checkUserInfo, 1 / 60);\n    },\n\n    // 微信授权成功后，使用\n    /* {\n        \"data\": {\n            \"result\": {\n                \"code\": 0,\n                \"userId\": 10116,\n                \"exception_report\": 0,\n                \"userType\": 4,\n                \"authInfo\": \"{\\\"authcode\\\": \\\"eyJ1aWQiOiAxMDExNiwgInVuYW1lIjogIlx1Njc2NVx1NWJiZTAwNzRBaWJzVCIsICJ1dG9rZW4iOiAiMjAxOC0wMS0yOSAxNDoxMzoxMi40NzEzMzgiLCAiY29pbiI6IDAsICJlbWFpbCI6ICIiLCAidXRpbWUiOiAiMjAxOC0wMS0yOSAxNDoxMzoxMi40NzA0NzEifQ==\\\", \\\"account\\\": \\\"\\\", \\\"uid\\\": 10116, \\\"usercode\\\": \\\"\\\"}\",\n                \"tcpsrv\": {\n                    \"ip\": \"192.168.10.88\",\n                    \"port\": 8041\n                },\n                \"isCreate\": 1,\n                \"changePwdCount\": 0,\n                \"360.vip\": 0,\n                \"logclient\": {\n                    \"loguploadurl\": \"\",\n                    \"logreporturl\": \"\"\n                },\n                \"userPwd\": \"ty817142\",\n                \"purl\": \"http://ddz.image.tuyoo.com/avatar/head_female_0.png\",\n                \"snsId\": \"wxapp:071Nehqt0Z4XEe1jN6qt007Cqt0Nehqz\",\n                \"userEmail\": \"\",\n                \"connectTimeOut\": 35,\n                \"appId\": 9999,\n                \"heartBeat\": 6,\n                \"userName\": \"来宾0074AibsT\",\n                \"mobile\": \"\",\n                \"token\": \"cce362d6-68a8-485e-b137-86ae6828e07a\",\n                \"authorCode\": \"eyJ1aWQiOiAxMDExNiwgInVuYW1lIjogIlx1Njc2NVx1NWJiZTAwNzRBaWJzVCIsICJ1dG9rZW4iOiAiMjAxOC0wMS0yOSAxNDoxMzoxMi40NzEzMzgiLCAiY29pbiI6IDAsICJlbWFpbCI6ICIiLCAidXRpbWUiOiAiMjAxOC0wMS0yOSAxNDoxMzoxMi40NzA0NzEifQ==\",\n                \"log_report\": 0,\n                \"showAd\": 1\n            }\n        },\n        \"header\": {\n            \"Server\": \"nginx/1.4.1\",\n            \"Date\": \"Mon, 29 Jan 2018 06:13:12 GMT\",\n            \"Content-Type\": \"application/json;charset=UTF-8\",\n            \"Transfer-Encoding\": \"chunked\",\n            \"Connection\": \"keep-alive\",\n            \"Content-Encoding\": \"gzip\"\n        },\n        \"statusCode\": 200,\n        \"errMsg\": \"request:ok\"\n    }\n    */\n    loginTuyooWithCode: function(code, userInfo, iv, encryptedData) {\n        // 微信授权成功后使用code登录途游服务器\n        wx.showShareMenu({\n            withShareTicket: true\n        });\n        // wx.updateShareMenu({\n        //     withShareTicket: true\n        // });\n\n        // var nickName = userInfo.nickName\n        // var avatarUrl = userInfo.avatarUrl\n        // var gender = userInfo.gender //性别 0：未知、1：男、2：女\n        // var province = userInfo.province\n        // var city = userInfo.city\n        // var country = userInfo.country\n\n        //咱们后端 0 是男 1 是女,要转换\n        // var gender = userInfo.gender;\n        var gender = null;\n        if (userInfo) {\n            gender = userInfo.gender;\n        }\n        // var gender = 0;\n        // if (userInfo.gender == 1){\n        //     gender = 0;\n        // }\n        // else if (userInfo.gender == 2){\n        //     gender = 1;\n        // }\n\n        var local_uuid = hall.GlobalFuncs.getLocalUuid();\n        hall.LOGW(\"local_uuid:\",\"file = [TuyooSDK] fun = [loginTuyooWithCode] local_uuid = \" + local_uuid);\n        var sdkPath = ty.SystemInfo.loginUrl;\n\n        debugMode = hall.GlobalFuncs.ReadBoolFromLocalStorage(ddz.gameModel.DEBUG_MODE,debugMode);\n        if (debugMode){\n            sdkPath = hall.GlobalFuncs.ReadStringFromLocalStorage(ty.SystemInfo.DEBUG_SER_KEY, ty.SystemInfo.loginUrl);\n        }\n        var _nickName = \"未设置\";\n        // var sdkPath = 'http://140.143.201.170:8000/';\n        if (userInfo && userInfo.nickName) {\n            ddz.Share.shareKeywordReplace.wechatName = userInfo.nickName;\n            _nickName = userInfo.nickName;\n        }\n\n        ty.BiLog.clickStat(ty.UserInfo.clickStatEventType.clickStatEventTypeLoginSDKStart, [code, local_uuid, _nickName]);\n\n        // var tempData = {\n        //     appId: ty.SystemInfo.appId,\n        //     wxAppId: ty.SystemInfo.wxAppId,\n        //     clientId: ty.SystemInfo.clientId,\n        //     snsId: 'wxapp:' + code,\n        //     uuid : local_uuid,\n        //     //以下为上传玩家的微信用户信息\n        //     nickName: userInfo.nickName,\n        //     avatarUrl: userInfo.avatarUrl,\n        //     gender: gender,\n        //     login_channel : ty.UserInfo.login_channel,\n        //     login_invite_id : ty.UserInfo.login_invite_id || 0\n        // };\n        // hall.LOGW(\"==Login===\",\"====tempData=====\"+JSON.stringify(tempData));\n\n        var _avatarUrl = null;\n        if (userInfo) {\n            _avatarUrl = userInfo.avatarUrl;\n        }\n\n        var postData = {\n            appId: ty.SystemInfo.appId,\n            wxAppId: ty.SystemInfo.wxAppId,\n            clientId: ty.SystemInfo.clientId,\n            snsId: 'wxapp:' + code,\n            uuid : local_uuid,\n            //以下为上传玩家的微信用户信息\n            scene_id : ty.UserInfo.scene_id || 0,\n            scene_param : ty.UserInfo.scene_param || \"\",\n            invite_id : ty.UserInfo.invite_id || 0\n        };\n\n        if (gender) {\n            postData.gender = gender;\n        }\n\n        if (_avatarUrl) {\n            postData.avatarUrl = _avatarUrl;\n        }\n\n        if (userInfo && userInfo.avatarUrl){\n            postData.avatarUrl = userInfo.avatarUrl;\n        }\n\n        if (userInfo && userInfo.nickName){\n            postData.nickName = userInfo.nickName;\n        }\n\n        if (iv){\n            postData.iv = iv;\n        }\n\n        if (encryptedData){\n            postData.encryptedData = encryptedData;\n        }\n\n        hall.LOGW(\"==Login===\",\"====tempData===== URL = \"+JSON.stringify(sdkPath + 'open/v6/user/LoginBySnsIdNoVerify'));\n        hall.LOGW(\"==Login===\",\"====tempData===== postData = \"+JSON.stringify(postData));\n        wx.request({\n            url: sdkPath + 'open/v6/user/LoginBySnsIdNoVerify',\n            header: {\n                'content-type': 'application/x-www-form-urlencoded'\n            },\n            data: postData,\n\n            method:'POST',\n\n            success: function(params) {\n                hall.LOGD(null, 'tuyoo login success, params:' + JSON.stringify(params));\n\n                var checkData = params.data;\n                if (checkData.error && checkData.error.code == 1){\n                    ty.BiLog.clickStat(ty.UserInfo.clickStatEventType.clickStatEventTypeLoginSDKFailed, [code, local_uuid, _nickName, checkData.error]);\n                    return;\n                }\n                // 保存用户名/用户ID/用户头像\n                var result = checkData.result;\n                ty.UserInfo.userId = result.userId;\n                ty.UserInfo.userName = result.userName;\n                ty.UserInfo.userPic = result.purl;\n                ty.UserInfo.authorCode = result.authorCode;\n                ty.UserInfo.wxgame_session_key = result.wxgame_session_key;\n                hall.LOGD(null, 'userId:' + ty.UserInfo.userId + ' userName:' + ty.UserInfo.userName + ' userPic:' + ty.UserInfo.userPic);\n\n                ty.PropagateInterface.getUserFeatureInfo();//获取用户特征\n                ty.PropagateInterface.getShareConfigInfo();//获取分享配置\n                // hall.adManager.requestADInfo();\n\n                var token = result.token;\n                hall.LOGD(null, 'token:' + token);\n                wx.setStorage({\n                    key: ty.TuyooSDK.SESSION_KEY,\n                    data: token\n                });\n\n                // 发送登录成功事件\n                ty.NotificationCenter.trigger(ty.EventType.MSG_LOGIN_SUCCESS);\n\n                ty.BiLog.clickStat(ty.UserInfo.clickStatEventType.clickStatEventTypeLoginSDKSuccess, [code, local_uuid, _nickName, result.userId]);\n\n                var ip = result.tcpsrv.ip;\n                var port = result.tcpsrv.wsport || result.tcpsrv.port; //优先使用wsport\n                // hall.LOGD(null, 'ip:' + ip + ' port:' + port);\n                var webSocketUrl;\n                // if (sdkPath.indexOf(\"https://\") > -1){\n                //     webSocketUrl = 'wss://' + ip + '/';\n                // }\n                // else{\n                //     webSocketUrl = 'ws://' + ip + ':' + port.toString() + '/';\n                // }\n                if (sdkPath.indexOf(\"170\") > -1 || sdkPath.indexOf(\"https://\") > -1){\n                    webSocketUrl = 'wss://' + ip + '/';\n                }\n                else{\n                    webSocketUrl = 'ws://' + ip + ':' + port.toString() + '/';\n                }\n                hall.LOGD(null, 'webSocketUrl:' + webSocketUrl);\n                ty.SystemInfo.webSocketUrl = webSocketUrl;\n                \n                // 解析SDK登录返回，userId/tcpsrv信息，根据tcpsrv信息初始化长连接模块\n                ty.TCP.connect(ty.SystemInfo.webSocketUrl);\n                // ty.TuyooSDK.getShareImage();\n\n                // 保存用户登录时间(天)\n                var toDayList = hall.GlobalTimer.getCurDayList();\n                var lastLoginTime = hall.GlobalFuncs.ReadStringFromLocalStorage(\"LAST_LOGIN_TIME\", []);\n                if(toDayList.toString() != lastLoginTime.toString()){\n                    if (toDayList[0] == lastLoginTime[0] && toDayList[1] == lastLoginTime[1]){\n                        if (toDayList[2] == lastLoginTime[2] + 1){\n                            ddz.continuousLogin = true;\n                            hall.GlobalFuncs.setInLocalStorage(ddz.gameModel.CONTINUOUSLOGIN, true);\n                        }else {\n                            hall.GlobalFuncs.setInLocalStorage(ddz.gameModel.CONTINUOUSLOGIN, false);\n                        }\n                    }\n                    hall.GlobalFuncs.setInLocalStorage(\"LAST_LOGIN_TIME\", toDayList);\n                }\n\n                var lastShareTimeList = hall.GlobalFuncs.ReadStringFromLocalStorage(ddz.Share.LAST_SHARE_TIMELIST, []);\n\n                if(toDayList.toString() != lastShareTimeList.toString()){\n                    if (toDayList[0] == lastShareTimeList[0] && toDayList[1] == lastShareTimeList[1]){\n                        if (toDayList[2] == lastShareTimeList[2] + 1){\n                            hall.GlobalFuncs.setInLocalStorage(ddz.gameModel.YESTERDAYSHARE, true);\n                        }else {\n                            hall.GlobalFuncs.setInLocalStorage(ddz.gameModel.YESTERDAYSHARE, false);\n                        }\n                    }\n                }\n\n            },\n\n            fail: function(params) {\n                ty.BiLog.clickStat(ty.UserInfo.clickStatEventType.clickStatEventTypeLoginSDKFailed, [code, local_uuid, _nickName]);\n                hall.LOGD(null, 'tuyoo login fail, params:' + JSON.stringify(params));\n            },\n\n            complete: function(params) {\n\n            }\n        });\n    },\n\n    /*\n     params prodId:商品ID, prodName:商品名称, prodCount:购买数量\n            prodPrice:价格  单位元,\n            chargeType:支付方式 wxapp.iap,\n            gameId:子游戏id,\n            appInfo:透传参数,\n            mustcharge:是否支付 默认填 1\n     */\n\n    rechargeOrder: function (params){\n        var local_uuid = hall.GlobalFuncs.getLocalUuid();\n        var sdkPath = ty.SystemInfo.loginUrl;\n        // hall.LOGD(\"\",\"file = [TuyooSDK] fun = [rechargeOrder] params = \" + JSON.stringify(params));\n\n        var data_s = {\n            userId:ty.UserInfo.userId,\n            appId: ty.SystemInfo.appId,\n            wxAppId: ty.SystemInfo.wxAppId,\n            clientId: ty.SystemInfo.clientId,\n            imei: 'null',\n            uuid : local_uuid,\n            //商品信息\n            prodId: params.prodId,\n            prodName: params.prodName,\n            prodCount: params.prodCount || 1,\n            prodPrice: params.prodPrice,\n            chargeType: params.chargeType,\n            gameId : params.gameId,\n            appInfo : params.appInfo,\n            mustcharge : params.mustcharge || 1\n        };\n        hall.LOGD(null, 'file = [TuyooSDK] fun = [rechargeOrder] data_s:' + JSON.stringify(data_s));\n\n        debugMode = hall.GlobalFuncs.ReadBoolFromLocalStorage(ddz.gameModel.DEBUG_MODE,debugMode);\n        if (debugMode){\n            sdkPath = hall.GlobalFuncs.ReadStringFromLocalStorage(ty.SystemInfo.DEBUG_SER_KEY, ty.SystemInfo.loginUrl);\n        }\n\n        // hall.LOGD(\"\",\"file = [TuyooSDK] fun = [rechargeOrder] url = \" + sdkPath + 'open/v4/pay/order');\n        wx.request({\n            url: sdkPath + 'open/v4/pay/order',\n            header: {\n                'content-type': 'application/x-www-form-urlencoded'\n            },\n            data: {\n                userId:ty.UserInfo.userId,\n                appId: ty.SystemInfo.appId,\n                wxAppId: ty.SystemInfo.wxAppId,\n                clientId: ty.SystemInfo.clientId,\n                imei: 'null',\n                uuid : local_uuid,\n                //商品信息\n                prodId: params.prodId,\n                prodName: params.prodName,\n                prodCount: params.prodCount || 1,\n                prodPrice: params.prodPrice,\n                chargeType: params.chargeType,\n                gameId : params.gameId,\n                appInfo : params.appInfo,\n                mustcharge : params.mustcharge || 1\n            },\n\n            method:'POST',\n\n            success: function(params) {\n                hall.LOGW(null, 'tuyoo rechargeOrder success, params:' + JSON.stringify(params));\n                // var checkData = params.data;\n                // if (checkData.error && checkData.error.code == 1){\n                //     console.log('tuyoo createOrder fail...');\n                //     return;\n                // }\n                var results = params.data.result;\n                if (results.code == 0) {\n                    var chargeInfo = results.chargeInfo;\n                    var chargeData = chargeInfo.chargeData;\n                    var notifyUrl = chargeData.notifyUrl;\n                    var platformOrderId = chargeData.platformOrderId;\n                    hall.LOGW(null, 'tuyoo rechargeOrder success 创建订单成功, chargeData.mustcharge =' + chargeData.mustcharge);\n                    if (chargeData && chargeData.mustcharge == 1) {\n                        // wx.requestMidasPayment  购买微信币\n                        wx.requestMidasPayment({\n                            mode: chargeData.mode,\n                            env: chargeData.env,\n                            offerId: chargeData.offerId,\n                            buyQuantity: 10 * chargeInfo.chargeTotal,\n                            platform:chargeData.platform,\n                            currencyType:\"CNY\",\n                            zoneId: chargeData.zoneId,\n                            success:function(params) {\n                                hall.LOGW(null, '米大师支付 success params = ' + JSON.stringify(params));\n                                // 支付成功\n                                ty.Recharge.orderCallFunc(notifyUrl,platformOrderId,chargeInfo.chargeCoin);\n                            },\n                            fail:function(params) {    //{ errMsg, errCode }\n                                hall.LOGW(null, '米大师支付 fail params = ' + JSON.stringify(params));\n                                // 支付失败\n                                // console.log(errMsg, errCode)\n                                // hall.MsgBoxManager.showToast({title : '购买失败!'});\n                            }\n                        });\n                    }else if (chargeData && chargeData.mustcharge == 0){\n                        ty.Recharge.orderCallFunc(notifyUrl,platformOrderId,chargeInfo.chargeCoin);\n                    }\n                }else if (results.code == 1) {\n                    hall.MsgBoxManager.showToast({title : results.info});\n                }else if (results.code == 3) {\n                    hall.MsgBoxManager.showToast({title : '微信小程序登陆验证失败!'});\n                }\n            },\n            fail: function(params) {\n                hall.MsgBoxManager.showToast({title : '购买失败!'});\n            },\n            complete: function(params) {\n            }\n        });\n    },\n\n    getSystemType : function (fun) {\n        // {\n        // \t\"0\":{\n        // \t\"errMsg\":\"getSystemInfo:ok\",\n        // \t\t\"model\":\"iPhone X\",\n        // \t\t\"pixelRatio\":3,\n        // \t\t\"windowWidth\":375,\n        // \t\t\"windowHeight\":812,\n        // \t\t\"system\":\"iOS 10.0.1\",\n        // \t\t\"language\":\"zh_CN\",\n        // \t\t\"version\":\"6.6.3\",\n        // \t\t\"batteryLevel\":100,\n        // \t\t\"screenWidth\":375,\n        // \t\t\"screenHeight\":812,\n        // \t\t\"SDKVersion\":\"1.8.0\",\n        // \t\t\"brand\":\"devtools\",\n        // \t\t\"fontSizeSetting\":16,\n        // \t\t\"statusbarHeight\":44,\n        // \t\t\"platform\":\"devtools\"\n        // }\n        // }\n        wx.getSystemInfo({\n            success : function (result) {\n                ty.SystemInfo.deviceInfo = result;\n                var model = result.model;\n                var isiPhone = model.indexOf(\"iPhone\") >= 0;\n                var windowHeight = result.windowHeight;\n                var resultType = 0;\n                if (isiPhone){\n                    if(windowHeight == 812){   //iPhoneX\n                        resultType = ty.UserInfo.SYSTEMTYPE.iPhoneXType;\n                    }else if (windowHeight == 736){ // 7p 8p\n                        resultType = ty.UserInfo.SYSTEMTYPE.iPhone7P8PType;\n                    }else {  //其他iPhone\n                        resultType = ty.UserInfo.SYSTEMTYPE.iphoneOtherType;\n                    }\n                }else { //cc.sys.OS_ANDROID\n                    var isvivo85 = model.indexOf(\"vivo Y85A\") >= 0;\n                    if(isvivo85){\n                        resultType = ty.UserInfo.SYSTEMTYPE.ANDROIDVIVO85;\n                    }else {\n                        resultType = ty.UserInfo.SYSTEMTYPE.ANDROIDOther;\n                    }\n                }\n                ty.UserInfo.systemType = resultType;\n                ty.UserInfo.wechatType = result.version;\n                ty.UserInfo.model = result.model;\n                ty.UserInfo.system = result.system;\n\n                if (fun){\n                    fun(result);\n                }\n            },\n            fail : function () {\n            },\n            complete : function () {\n            }\n        });\n    }\n};\n\nwx.onShow(function (result) {\n    // {\"0\":{\"scene\":1044,\"shareTicket\":\"beecdf9e-e881-492c-8a3f-a7d8c54dfcdb\",\"query\":{}}}  (从后台切到前台才有shareTicket,启动时没有)\n    hall.LOGW('', \"+++++++++++++++++onShow+++++++++++++++++\"+JSON.stringify(result));\n    hall.onHide = false;\n    var date = hall.GlobalFuncs.ReadStringFromLocalStorage(ddz.matchModel.ONHIDE_DATE);\n    var date2 = new Date().getTime();\n    var timeGap = date2-date;\n    if(timeGap < 60000){\n        ty.NotificationCenter.trigger(ddz.EventType.CHANGE_TO_SHOW_FROM_HODE,timeGap);\n    }\n    ddz.AudioHelper.rePlayMusic();\n\n\n    ty.UserInfo.onShowParam = result;\n    //取相关参数\n    var scene = result.scene;\n    var query = result.query;\n    var queryS = hall.GlobalFuncs.replaceToStringWithDic(query);\n    //来源处理\n    ty.UserInfo.scene_id = scene || 0;\n    ty.UserInfo.scene_param = query.from || \"\";\n    ty.UserInfo.invite_id = query.inviteCode || 0;\n    ty.SystemInfo.shareTicket = \"\";\n    ty.SystemInfo.ftID = \"\";\n    ty.SystemInfo.treasureID = \"\";\n\n    if(query && query.sourceCode){//从小程序消息卡片中点入\n        ty.BiLog.clickStat(ty.UserInfo.clickStatEventType.clickStatEventTypeUserFrom,[scene,query.inviteCode,ddz.Share.clickStatShareType[query.sourceCode],\n            query.imageType,\"CardActive\"]);\n        //好友房打点\n        if(query.sourceCode == ddz.Share.onShareType.clickStatShareTypeInviteFriend){\n            var ftID = query.ftID ? query.ftID : \"\";\n            ty.BiLog.clickStat(ty.UserInfo.clickStatEventType.clickStatEventTypeInviteFriendCardClick,\n                [ftID,query.inviteCode]);\n        }\n        //宝箱\n        if(query.sourceCode == ddz.Share.onShareType.clickStatShareTypeGiveProp){\n            var treasureID = query.treasureID ? query.treasureID : \"\";\n            ty.BiLog.clickStat(ty.UserInfo.clickStatEventType.clickStatEventTypeGivePropClick,\n                [treasureID,query.inviteCode]);\n        }\n       //特殊场景处理\n        if (query && query.ftID && !ddz.Share.isOnShare) {\n            //进入好友桌\n            ddz.Share.shareKeywordReplace.inviteFriendID = query.ftID;\n            ty.SystemInfo.ftID = query.ftID;\n        }else if (query && query.treasureID && !ddz.Share.isOnShare) {\n            ddz.Share.shareKeywordReplace.inviteTreasureID = query.treasureID;\n            ty.SystemInfo.treasureID = query.treasureID;\n        }else {\n            //进入群排行榜\n            if(query.sourceCode == ddz.Share.onShareType.clickStatShareTypeRankList && !ddz.Share.isOnShare && scene == 1044){//群排行榜\n                var shareTicket = result.shareTicket;\n                if(shareTicket){\n                    ty.SystemInfo.shareTicket = shareTicket;\n                }\n            }\n        }\n    }else {\n        ty.BiLog.clickStat(ty.UserInfo.clickStatEventType.clickStatEventTypeUserFrom,[scene,query.from,query.appid,\n            \"CardActive\"]);\n    }\n\n    if (scene == 1074 && query && query.from == \"fuhao_guanfang\") { // 公众号会话下发的小程序消息卡片\n        if (query.topage&&query.topage == \"fuli\") {\n            // hall.GlobalFuncs.showDiamondWindowWithType('invite');\n            ddz.isClickShareReward = true;\n            ddz.gameModel.getDayInviteReward();\n        }else {\n            ddz.gameModel.shareToGetreward(ddz.Share.SharePointType.gongZhongHaoCard);\n        }\n    }else if(scene == 1035 && query && query.from == \"fuhao_guanfang\") { // 公众号自定义菜单\n        ddz.gameModel.shareToGetreward(ddz.Share.SharePointType.gongZhongHaoMenu);\n    }else if(scene == 1104) { // 小程序进入\n        ddz.gameModel.shareToGetreward(ddz.Share.SharePointType.addApplet);\n    }\n\n    if (ddz.needReLogin){\n        ty.TuyooSDK.wechatLogin();\n        ddz.needReLogin = null;\n    }\n    ddz.tableChatModel.replay();\n});\n\nwx.onHide(function () {\n    ty.UserInfo.scene_id = 0;\n    ty.UserInfo.onShowParam = null;\n    hall.onHide = true;\n    var date = new Date().getTime();\n    hall.GlobalFuncs.setInLocalStorage(ddz.matchModel.ONHIDE_DATE, date);\n    ty.NotificationCenter.trigger(ddz.EventType.GAME_HIDE);\n    hall.LOGW('',\"+++++++++++++++++onHide+++++++++++++++++\");\n    ddz.friendModel.isEnterTable = false;\n    ty.TCP.close();\n});\n\nvar getNetSuccess = function (res) {\n    if (res.hasOwnProperty('isConnected')){\n        hall.netIsConnected = res.isConnected;\n    }\n    else if (res.hasOwnProperty('errMsg')){\n        hall.netIsConnected = res.errMsg == 'getNetworkType:ok'\n    }\n    else{\n        hall.netIsConnected = res.networkType != 'none';\n    }\n\n    hall.networkType = res.networkType;//wifi,2g,3g,4g,none,unknown\n    hall.LOGD('onNetworkStatusChange', 'hall.netIsConnected:' + hall.netIsConnected + ';hall.networkType:'+hall.networkType);\n};\n\nwx.getNetworkType({\n    success:getNetSuccess\n});\n\nwx.onNetworkStatusChange(getNetSuccess);\n\nwx.onError(function (res) {\n    var d = new Date();\n    var errMsg = res.message;\n    ty.BiLog.uploadLogTimely(errMsg);\n});\n"]}