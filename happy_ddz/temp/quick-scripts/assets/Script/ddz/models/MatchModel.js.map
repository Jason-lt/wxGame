{"version":3,"sources":["MatchModel.js"],"names":["ddz","ShareRecord","leftCount","pointId","ArenaToSharePoint","matchDefaultCfg","roomId","delayTime","matchModel","LAST_REWARD_DATE","LAST_FAIL_DATE","FAIL_NUMBER_LIST","LAST_RANK_WEEK","SHOW_LOGIN_REWARD","MATCH_REWARD_DES","UPDATE_NOTIFY_INFO","ONHIDE_DATE","isGameFlow","isDiZhuWin","isStartMatch","currentGameMode","arenaReviveStageCount","isShowingRevive","canShowMatchRevivalPanel","revivalShareKey","new_gift_reward","getMatchDes","matchId","pars","params","hall","MsgFactory","_sendCmd","matchSignin","feeIndex","that","signinFun","index","_curWaitInfo","stageIndex","ty","NotificationCenter","trigger","EventType","RESET_TABLE","_curDesInfo","type","fees","concat","oi","indexOf","splice","length","feesStr","join","btns","title","callFunc","replace","GlobalFuncs","showNormalTipsWindow","matchResume","matchGiveUp","matchSave","matchChallenge","matchBack","matchBackNextLevel","nextLevel","matchUpdate","getStageIndex","_stageIndex","parseChallenge","value","error","ME","matchInfo","getCurrentMatchData","curMatchAddition","showMatching","ACTION_CHALLENGE","onMatchWait","stateValue","des","getMatchDesByMatchId","preFabPath","AudioHelper","playMusic","MusicPath_mp3","table_background_music","SystemInfo","tableBgMusicVolume","showPopWinByPreFab","preFabNode","com","getComponent","matchDes","showArenaStageProgress","stages","comName","clearMessageList","playAni","SHOW_MATCHING","HIDE_DDZ_MAIN","showArenaReviveWindow","LOGW","matchCondition","getFailCondition","checkFailCount","showRevivalWindow","Share","isMatchShare","matchRevivalPanel","SHOW_MATCH_REVIVE","parseWait","JSON","stringify","shareKeywordReplace","state","gameFlow","isReConnect","reConnect","currentMatchData","LOGD","REMOVE_MATCHING","timerWaitArenaConfig","arenaConfig","gameModel","getArenaMatchConfigJson","shareTypePoint","toString","shareToCheckReward","bind","Timer","setTimer","cc","director","pausetime","isInAtScene","timerWait","curScene","getScene","isLevelUp","setMatchDes","setRankString","rankName","RECEIVE_MATCH_WAIT_STATE","listen","GAME_HIDE","cancelTimer","timerFunc","ignore","setCurMatchAdditionInfo","friendModel","isEnterTable","saveMatch","matchResultPanel","shut","tableScene","children","tableInfo","ftInfo","onGameHide","progress","setProgress","resultTitle","setTitle","gindex","gameFlowOver","over","setDiamondCount","showResults","UPDATE_WAIT_INFO","getCurWaitInfo","cleanWaitInfo","parseGiveUp","waitSignin","MATCH_GIVE_UP","parseOver","_curOverInfo","UserInfo","loc","matchDesMap","reason","MATCH_REASON","WIN","arenaResultPanel","setOverInfo","resultFunc","setMcountDetail","mcount","isAcceptGameWin","curDay","GlobalTimer","getCurDay","lastUpdateTgDate","tgCount","setTongGuanCount","getCurOverInfo","parseMatchInfo","_curUpdateInfo","UPDATE_MATCH_INFO","getCurUpdateInfo","getCurWinnerCount","histories","winnerCount","parseDes","curWinnerCount","addMatchDesInfo","UPDATE_MATCH_DES","_TAG","couponCount","udataInfo","m_couponCount","exchangedCoupon","m_exchangedCoupon","sumReward","curSumReward","selfTotalBonus","selfAllWinnerCount","debugMode","upDateRankData","getCurDes","parseMatchList","_curMatchListInfo","RECIVE_MATCH_LIST_INFO","getMatchListInfo","parse","result","action","code","MsgBoxManager","showToast","info","parseLottery","todoTaskMsg","ToDoTask","runOneTask","parseSignInInfo","ACTION_SAVE","parseSave","ACTION_RESUME","checkMsgState","parseResume","nextStageIndex","MACH_RANK_CHANGE","parseQueue","parseLeaveQueue","msg","save","getMatchRecords","SAVE_MATCH_SUCCESS","enterFTTable","inviteFriendID","waitInfo","wati","_matchRecords","showGetDiamondWindow","_curLotteryInfo","getCurLotteryInfo","_queueInfo","signs","onEnterQueue","getCurQueueInfo","playMode","REMOVE_TABLE_ANI","gotoRoomListScene","gotoDdz","getDiamondCountNeeded","guan","desInfo","detailStages","stageInfo","count","manager","guans","UPDATE_SHARE_STATE","playAnimationAfterShareWithType","window","parentScene","buttonS","diamondCount","tipS","rightSrc","testArray","bottomType","right","setTitleContentAndButtons","shareType","reultType","resultType","onShareType","clickStatShareTypeMainRestartWindow","isBringVersion","showBack","checkOldVersion","startMatchProgress","resumeMatch","onClickLeftButton","event","onClickRightButton","shareWithType","testOver","testSignin","testArenaWin","testStart","match_des"],"mappings":"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","file":"MatchModel.js","sourceRoot":"../../../../../../assets/Script/ddz/models","sourcesContent":["/**\n * Created by tuyoo on 2018/2/5.\n */\n\n\nddz.ShareRecord = {\n    \"00000\": {\n        leftCount: 0,\n        pointId: '0000'\n    }\n};\nddz.ArenaToSharePoint = {\n    \"6790\": \"arenaPoint1\",\n    \"6791\": \"arenaPoint1\",\n    \"6792\": \"arenaPoint1\",\n    \"6793\": \"arenaPoint1\"\n};\n\nvar matchDefaultCfg = {\n    roomId:6789\n};\n\nvar delayTime = 3;\n\nddz.matchModel = {\n    LAST_REWARD_DATE: 'last_reward_Date', //首页提示窗的最后展示时间\n    LAST_FAIL_DATE: 'LAST_FAIL_DATE', //上一次失败时间\n    FAIL_NUMBER_LIST : 'FAIL_NUMBER_LIST',//今天失败的次数\n    LAST_RANK_WEEK: 'last_rank_week', //首页提示窗的最后展示时间\n    SHOW_LOGIN_REWARD: 'show_login_reward', //待提示的每次登录奖励信息\n    MATCH_REWARD_DES: 'match_reward_des', //奖池奖励\n    UPDATE_NOTIFY_INFO: 'update_notify_info', //通告是否被点击\n    ONHIDE_DATE : 'onhide_date',\n    isGameFlow : false,\n    isDiZhuWin : false,\n    isStartMatch:false,\n    currentGameMode: \"default\",\n    arenaReviveStageCount: 3,\n    isShowingRevive: false,\n    canShowMatchRevivalPanel : false,\n    revivalShareKey : \"\",\n    new_gift_reward : null,//新人限时宝箱\n\n    /**\n     * 获取比赛详情\n     */\n    getMatchDes:function (roomId, matchId) {\n        var pars = {\n            \"cmd\": \"room\",\n            \"params\": {\n                \"action\": \"match_des\",\n                \"gameId\": 6,\n                \"roomId\": roomId || matchDefaultCfg.roomId\n            }\n        };\n        if(matchId) {\n            pars.params[\"matchId\"] = matchId;\n        }\n\n        hall.MsgFactory._sendCmd(pars);\n    },\n\n    /**\n     * 比赛报名\n     */\n    matchSignin:function (roomId, matchId, feeIndex) {\n        roomId = roomId || matchDefaultCfg.roomId;\n        matchId = matchId || 0;\n        var that = this;\n\n        var signinFun = function () {\n            var index = 0;\n            if(typeof(feeIndex) != 'undefined') {\n                index = feeIndex;\n            }\n            var pars = {\n                \"cmd\": \"room\",\n                \"params\": {\n                    \"action\": \"signin\",\n                    \"gameId\": 6,\n                    \"roomId\": roomId,\n                    \"signinParams\": {\n                        \"matchId\": matchId,\n                        \"feeIndex\": feeIndex\n                    }\n                }\n            };\n\n            hall.MsgFactory._sendCmd(pars);\n            if (that._curWaitInfo){\n                that._curWaitInfo.stageIndex = 1;\n            }\n            ty.NotificationCenter.trigger(ddz.EventType.RESET_TABLE);\n            // ty.NotificationCenter.trigger(ddz.EventType.ACTION_ENTER_TABLE);\n        };\n\n        if (roomId == matchDefaultCfg.roomId){\n            //检查报名费\n            if (this._curDesInfo && this._curDesInfo.type == 'async_upgrade_hero_match' ){\n                var fees = this._curDesInfo.fees.concat();\n                var oi = fees.indexOf('免费');\n                if (oi > -1){\n                    fees.splice(oi, 1);\n                }\n                oi = fees.indexOf('免费报名');\n                if (oi > -1){\n                    fees.splice(oi, 1);\n                }\n                if (fees.length > 0){\n                    var feesStr = fees.join('、');\n                    var btns = [\n                        {\n                            title:\"取消\",\n                            callFunc:function () {\n                            }\n                        },\n                        {\n                            title:\"开始\",\n                            callFunc:function () {\n                                signinFun();\n                            }\n                        }\n                    ];\n                    feesStr = feesStr.replace(\"钻石\",\"<img src='dda_button_diamond_black' width=42 height=34 /> \");\n                    ddz.GlobalFuncs.showNormalTipsWindow(\"使用\" + feesStr + \"开始闯关\",btns,\"提示\");\n                }\n                else{\n                    signinFun();\n                }\n            }\n        }\n        else{\n            signinFun();\n        }\n    },\n\n    /**\n     * 比赛恢复\n     */\n    matchResume:function (roomId, matchId) {\n        roomId = roomId || matchDefaultCfg.roomId;\n        matchId = matchId || 0;\n\n        var pars = {\n            \"cmd\": \"room\",\n            \"params\": {\n                \"action\": \"resume\",\n                \"gameId\": 6,\n                \"roomId\": roomId,\n                \"matchId\": matchId,\n            }\n        };\n\n        hall.MsgFactory._sendCmd(pars);\n    },\n\n    /**\n     * 放弃当前比赛进度\n     */\n    matchGiveUp:function (roomId, matchId) {\n        roomId = roomId || matchDefaultCfg.roomId;\n        var pars = {\n            \"cmd\": \"room\",\n            \"params\": {\n                \"action\": \"match_giveup\",\n                \"gameId\": 6,\n                \"roomId\": roomId,\n            }\n        };\n        if(matchId) {\n            pars.params.matchId = matchId;\n        }\n        hall.MsgFactory._sendCmd(pars);\n    },\n\n    matchSave: function(roomId, matchId) {\n        var pars = {\n            \"cmd\": \"room\",\n            \"params\": {\n                \"action\": \"save\",\n                \"gameId\": 6,\n                \"roomId\": roomId,\n            }\n        };\n        if(matchId) {\n            pars.params[\"matchId\"] = matchId;\n        }\n        hall.MsgFactory._sendCmd(pars);\n    },\n\n    /**\n     * 继续下一关\n     */\n    matchChallenge:function (roomId, matchId) {\n        var pars = {\n            \"cmd\": \"room\",\n            \"params\": {\n                \"action\": \"match_challenge\",\n                \"gameId\": 6,\n                \"roomId\": roomId || matchDefaultCfg.roomId\n            }\n        };\n        if(matchId) {\n            pars.params[\"matchId\"] = matchId;\n        }\n\n        hall.MsgFactory._sendCmd(pars);\n        ty.NotificationCenter.trigger(ddz.EventType.RESET_TABLE);\n        // ty.NotificationCenter.trigger(ddz.EventType.ACTION_ENTER_TABLE);\n    },\n\n    /**\n     * 复活\n     */\n    matchBack:function (roomId, matchId) {\n        var pars = {\n            \"cmd\": \"room\",\n            \"params\": {\n                \"action\": \"match_back\",\n                \"gameId\": 6,\n                \"roomId\": roomId || matchDefaultCfg.roomId\n            }\n        };\n        if(matchId) {\n            pars.params.matchId = matchId;\n        }\n\n        hall.MsgFactory._sendCmd(pars);\n        ty.NotificationCenter.trigger(ddz.EventType.RESET_TABLE);\n        // ty.NotificationCenter.trigger(ddz.EventType.ACTION_ENTER_TABLE);\n    },\n    /**\n     * 直接到第二关\n     */\n    matchBackNextLevel:function (roomId, matchId, nextLevel) {\n        var pars = {\n            \"cmd\": \"room\",\n            \"params\": {\n                \"action\": \"match_back_next_level\",\n                \"gameId\": 6,\n                \"roomId\": roomId || matchDefaultCfg.roomId\n            }\n        };\n        if(matchId) {\n            pars.params.matchId = matchId;\n        }\n\n        if(nextLevel){\n            pars.params.nextLevel = nextLevel;\n        }\n\n        hall.MsgFactory._sendCmd(pars);\n        ty.NotificationCenter.trigger(ddz.EventType.RESET_TABLE);\n        // ty.NotificationCenter.trigger(ddz.EventType.ACTION_ENTER_TABLE);\n    },\n\n    /**\n     * 获取奖池信息\n     */\n    matchUpdate:function () {\n        var pars = {\n            \"cmd\": \"room\",\n            \"params\": {\n                \"action\": \"update\",\n                \"gameId\": 6,\n                \"roomId\": matchDefaultCfg.roomId\n            }\n        };\n        hall.MsgFactory._sendCmd(pars);\n    },\n\n    getStageIndex:function () {\n        return this._stageIndex;\n    },\n\n    /**\n     *  {\"action\":\"match_challenge\",\"gameId\":6,\"roomId\":67901000,\"matchId\":6792,\"userId\":10070,\"challenge\":1}\n     */\n    parseChallenge: function(value) {\n        if(!value.error &&\n            ((hall.ME.matchInfo.getCurrentMatchData() && value.matchId == hall.ME.matchInfo.getCurrentMatchData().matchId)\n                || (hall.ME.matchInfo.curMatchAddition && value.matchId == hall.ME.matchInfo.curMatchAddition.matchId))\n            ) {\n            this.showMatching();\n        }\n        ty.NotificationCenter.trigger(ddz.EventType.ACTION_CHALLENGE, value);\n    },\n\n    onMatchWait: function(stateValue) {\n        var des = hall.ME.matchInfo.getMatchDesByMatchId(ddz.matchModel._curWaitInfo.matchId);\n        if(des.type && des.type.indexOf(\"common_arena_match\") < 0) {\n            return;\n        }\n        if(stateValue == 1) {\n            var preFabPath = \"prefabs/match/ddz_arena_start\";\n            ddz.AudioHelper.playMusic(ddz.MusicPath_mp3.table_background_music, true, ty.SystemInfo.tableBgMusicVolume);\n            hall.GlobalFuncs.showPopWinByPreFab(preFabPath, function (preFabNode) {\n                var com = preFabNode.getComponent(\"ddz_arena_start\");\n                var matchDes = hall.ME.matchInfo.getMatchDesByMatchId(ddz.matchModel._curWaitInfo.matchId);\n                com.showArenaStageProgress(ddz.matchModel._curWaitInfo.stageIndex, matchDes.stages, false);\n            });\n        }\n\n        if(stateValue == 4) {\n            ddz.matchModel.matchChallenge(ddz.matchModel._curWaitInfo.roomId, ddz.matchModel._curWaitInfo.matchId);\n        }\n    },\n\n    showMatching: function() {\n        var preFabPath = \"ani/ddz_matching/Matching\";\n        var comName = \"DdzMatching\";\n        ddz.AudioHelper.playMusic(ddz.MusicPath_mp3.table_background_music, true, ty.SystemInfo.tableBgMusicVolume);\n        hall.GlobalFuncs.showPopWinByPreFab(preFabPath, function (preFabNode) {\n            var com = preFabNode.getComponent(comName);\n            com.clearMessageList();\n            com.playAni(true);\n            ty.NotificationCenter.trigger(ddz.EventType.SHOW_MATCHING);\n            ty.NotificationCenter.trigger(ddz.EventType.HIDE_DDZ_MAIN);\n        });\n    },\n\n    showArenaReviveWindow : function (matchDes,stageIndex) {\n        hall.LOGW('', \"++++++++++++showArenaReviveWindow++++++++++++\"+ddz.matchModel.canShowMatchRevivalPanel);\n        if(ddz.matchModel.canShowMatchRevivalPanel){\n            var matchCondition = ddz.GlobalFuncs.getFailCondition(\"arena\",ddz.GlobalFuncs.checkFailCount(\"arena\"));\n            hall.LOGW('', \"++++++++++++matchCondition++++++++++++\"+matchCondition);\n            if(matchCondition){\n                // if (matchCondition.resurgenceCondition.conditionType == \"ad\" && !hall.adManager.canPlay)\n                // {\n                //     //当前复活是用广告方式,要检查广告是否播放成功,如果无可播放广告,不再弹出此窗口,让玩家使用钻石复活\n                // }\n                // else{\n                    ddz.GlobalFuncs.showRevivalWindow(matchCondition,\"arena\");\n                    return;\n                // }\n            }\n        }\n        if(ddz.Share.isMatchShare){\n            ddz.Share.isMatchShare = false;\n            return;\n        }\n        if(!ddz.matchModel.isShowingRevive && !ddz.matchRevivalPanel) {\n            ddz.GlobalFuncs.showArenaReviveWindow(matchDes,stageIndex);\n        } else{\n            ty.NotificationCenter.trigger(ddz.EventType.SHOW_MATCH_REVIVE);\n        }\n    },\n\n    parseWait:function (value) {\n        hall.LOGW('', \"++++++++++++parseWait++++++++++++\"+JSON.stringify(value));\n        // {\n        //     \"cmd\":\"room\",\n        //     \"result\":{\n        //         \"gameId\":6,\n        //         \"cardCount\":1,\n        //         \"isLevelUp\":true,\n        //         \"stageIndex\":2,\n        //         \"matchId\":6789,\n        //         \"userId\":10127,\n        //         \"state\":2,\n        //         \"action\":\"wait\",\n        //         \"roomId\":67891000\n        //     }\n        // }\n\n        this._curWaitInfo = value;\n\n        ddz.Share.shareKeywordReplace.stageIndex = value.stageIndex;\n\n        var state = this._curWaitInfo.state;\n        var preFabPath = \"\";\n        var comName = \"\";\n        var gameFlow = this._curWaitInfo.gameFlow;\n        var isReConnect = this._curWaitInfo.reConnect;\n        /*\n         {\"action\":\"wait\",\"gameId\":6,\"roomId\":67901000,\"matchId\":6791,\n         \"userId\":10070,\"stageIndex\":2,\"rank\":1,\"rankName\":\"1/75\",\n         \"isLevelUp\":true,\"cardCount\":1,\"tableRank\":1,\"state\":4}\n         */\n        var matchDes = hall.ME.matchInfo.getMatchDesByMatchId(this._curWaitInfo.matchId);\n        var currentMatchData = hall.ME.matchInfo.getCurrentMatchData();\n        if( matchDes && matchDes.type.indexOf(\"common_arena_match\") > -1) {\n            hall.LOGD(\"wait0000\",JSON.stringify(this._curWaitInfo));\n            //当前收到的wait协议就是用户操作的arena比赛协议\n            ty.NotificationCenter.trigger(ddz.EventType.REMOVE_MATCHING);\n            switch(state) {\n                case 1:\n                    //开局\n                    break;\n                case 2:\n                    //在打牌\n                    break;\n                case 3:\n                    //从后端common config中拿出相应的配置信息\n                    var timerWaitArenaConfig = function () {\n                        var arenaConfig = ddz.gameModel.getArenaMatchConfigJson();\n                        if(arenaConfig) {\n                            var shareTypePoint = arenaConfig[ddz.matchModel._curWaitInfo.matchId.toString()][\"reviveSharePoint\"];\n                            //获取分享点的剩余次数\n                            ddz.gameModel.shareToCheckReward(shareTypePoint);\n                        }\n                    }.bind(this);\n                    ty.Timer.setTimer(cc.director,timerWaitArenaConfig, 0.1, 0);\n                    break;\n                case 4:\n                    //晋级\n                    break;\n                default:\n                    break;\n            }\n\n            var pausetime = 0;\n            if(hall.GlobalFuncs.isInAtScene(\"TableScene\")) {\n                //牌桌上收到arena晋级消息,延迟3秒等待动画播放完成\n                if(state == 4) {\n                    pausetime = delayTime;\n                }\n            }\n            if(state == 3) {\n                //延迟0.5秒,等ArenaMatchConfig协议回来,wait返回的太快了\n                pausetime = 0.5;\n            }\n            var timerWait = function () {\n                if(state == 4) {\n                    var curScene = cc.director.getScene();\n                    if (ddz.matchModel._curWaitInfo.isLevelUp == true){\n                        //已晋级,进度保存/进入下一阶段\n                        preFabPath = \"prefabs/match/ddz_arena_levelup\";\n                        //comName = \"DdzMatching\";\n                        ddz.AudioHelper.playMusic(ddz.MusicPath_mp3.table_background_music, true, ty.SystemInfo.tableBgMusicVolume);\n                        hall.GlobalFuncs.showPopWinByPreFab(preFabPath, function (preFabNode) {\n                            var com = preFabNode.getComponent(\"ddz_arena_levelup\");\n                            com.setMatchDes(matchDes);\n                            com.setRankString(ddz.matchModel._curWaitInfo.rankName);\n                            com.showArenaStageProgress(ddz.matchModel._curWaitInfo.stageIndex, matchDes.stages, true);\n                        });\n                    }\n                }\n                if(state == 3) {\n                    ddz.matchModel.showArenaReviveWindow(matchDes, ddz.matchModel._curWaitInfo.stageIndex);\n                }\n                ty.NotificationCenter.trigger(ddz.EventType.RECEIVE_MATCH_WAIT_STATE, state);\n            }.bind(this);\n            ty.Timer.setTimer(cc.director,timerWait, pausetime, 0);\n            ty.NotificationCenter.listen(ddz.EventType.GAME_HIDE,function () {\n                // hall.LOGW(\"===\",\"====cancelTimer===timerFunc========\");\n                ty.Timer.cancelTimer(cc.director,timerFunc);\n                ty.NotificationCenter.ignore(ddz.EventType.GAME_HIDE,this);\n            }, this);\n            hall.ME.matchInfo.setCurMatchAdditionInfo(this._curWaitInfo);\n            return;\n        }\n\n\n        this._stageIndex = this._curWaitInfo.stageIndex;\n        if(ddz.friendModel.isEnterTable){\n            ddz.MsgFactory.saveMatch();\n        }\n\n        if (state == 3){\n            if (ddz.matchResultPanel){\n                ddz.matchResultPanel.shut();\n            }\n\n            ty.NotificationCenter.trigger(ddz.EventType.REMOVE_MATCHING);\n            //开局之前的等待(3可以在任意场景弹出)\n            preFabPath = \"ani/ddz_matching/Matching\";\n            comName = \"DdzMatching\";\n            ddz.AudioHelper.playMusic(ddz.MusicPath_mp3.table_background_music, true, ty.SystemInfo.tableBgMusicVolume);\n            hall.GlobalFuncs.showPopWinByPreFab(preFabPath, function (preFabNode) {\n                var com = preFabNode.getComponent(comName);\n                com.playAni(true);\n                ty.NotificationCenter.trigger(ddz.EventType.HIDE_DDZ_MAIN);\n            });\n        }\n\n        /*\n         1 在牌桌打牌中\n         2 报名或者晋级成功，等待闯关\n         3 开始挑战\n         4 闯关失败 等待复活\n         5 游戏结束\n         */\n        if (hall.GlobalFuncs.isInAtScene(\"TableScene\") && (state == 2 || state == 4)){\n            if (ddz.matchModel.isGameFlow){\n                return;\n            }\n            if (ddz.matchResultPanel){\n                //已经存在面板了,不要在重复弹出(这种情况存在于牌桌内断线重连的情况,重连后又会收到一次协议,导致重复弹出面板)\n                ddz.LOGD(null, \"已经存在面板,不要重复弹出!\");\n                // if (ddz.waitGetRevial && ddz.waitGetRevial.type == 'back'){\n                //     ddz.matchResultPanel.shut();\n                //     this.matchBack();\n                //     ddz.waitGetRevial = null;\n                // }\n                return;\n            }\n            //只有在牌桌上,才弹出2,4等待窗口\n\n            var isLevelUp = state == 2;\n            if (isLevelUp && !gameFlow){\n                //赢了一局,晋级\n                preFabPath = \"prefabs/match/ddz_success\";\n                comName = \"ddz_success\";\n            }\n            else{\n                //1、失败了,等待复活 2、托管状态下赢\n                preFabPath = \"prefabs/match/ddz_fail\";\n                comName = \"ddz_fail\";\n            }\n\n            // cc.loader.loadRes(preFabPath, function (err, prefab) {\n            //     var newNode = cc.instantiate(prefab);\n            //     cc.director.getScene().addChild(newNode);\n            //     ddz.GlobalFuncs.setToCenter(newNode);\n            // });\n\n\n            var stageIndex = this._curWaitInfo.stageIndex - 2;\n            if (stageIndex < 0){\n                stageIndex = 0;\n            }\n\n            var  timerFunc = function () {\n                // hall.LOGW(\"===\",\"====timerFunc===timerFunc========\");\n                if (ddz.matchResultPanel){\n                    //如果已经存在结算面板,就不要再弹出\n                    return;\n                }\n                var curScene = cc.director.getScene();\n                var tableScene = curScene.children[0].getComponent('DdzTableScene');\n                if(tableScene && tableScene.tableInfo().ftInfo){\n                    return;\n                }\n                ty.NotificationCenter.ignore(ddz.EventType.GAME_HIDE, this.onGameHide, this);\n                hall.GlobalFuncs.showPopWinByPreFab(preFabPath, function (preFabNode) {\n                    var com = preFabNode.getComponent(comName);\n                    if (comName == \"ddz_success\"){\n                        com.progress.getComponent(\"ddz_progress\").setProgress(stageIndex, isLevelUp);\n                        com.resultTitle.getComponent('ddz_resultTitle').setTitle(stageIndex, isLevelUp);\n                    }\n                    else{\n                        var gindex = ddz.matchModel.getStageIndex()-1;\n                        if(gameFlow){\n                            if(ddz.matchModel.isDiZhuWin){\n                                com.gameFlowOver(gindex,\"因队友托管，可重闯本关\");\n                            }else {\n                                com.gameFlowOver(gindex,\"托管不记录成绩,请重闯本关\");\n                            }\n                        }else {\n                            if (gindex == 0){\n                                //第一关失败,显示Over\n                                com.over(gindex);\n                            }\n                            else{\n                                com.setDiamondCount(gindex);\n                            }\n                        }\n                    }\n                    ddz.matchResultPanel = com;\n                    ddz.matchResultPanel.showResults(false);\n                    if (isReConnect){\n                        ddz.matchResultPanel.showResults(true);\n                    }\n\n                });\n            }.bind(this);\n\n            // ty.Timer.setTimer(cc.director,timerFunc, delayTime, 0);\n\n            timerFunc();\n\n            ty.NotificationCenter.listen(ddz.EventType.GAME_HIDE,function () {\n                // hall.LOGW(\"===\",\"====cancelTimer===timerFunc========\");\n                ty.Timer.cancelTimer(cc.director,timerFunc);\n                ty.NotificationCenter.ignore(ddz.EventType.GAME_HIDE,this);\n            }, this);\n\n        }\n        ty.NotificationCenter.trigger(ddz.EventType.UPDATE_WAIT_INFO,ddz.matchModel.getStageIndex());\n\n    },\n\n    getCurWaitInfo:function () {\n        return this._curWaitInfo;\n    },\n\n    cleanWaitInfo:function () {\n        if (this._curWaitInfo){\n            this._curWaitInfo = null;\n        }\n    },\n\n    parseGiveUp:function (value) {\n        this._curWaitInfo = null;\n        if (this.waitSignin){\n            ty.NotificationCenter.trigger(ddz.EventType.MATCH_GIVE_UP, value);\n            this.matchSignin();\n            this.waitSignin = null;\n        }\n    },\n\n    parseOver:function (value) {\n        if (ddz.matchModel.isGameFlow){\n            return;\n        }\n        this._curOverInfo = value;\n\n        var preFabPath;\n        var comName;\n        var that = this;\n\n        if (ddz.matchResultPanel){\n            ddz.LOGD(null, \"已经存在面板,不要重复弹出!\");\n            //已经存在面板了,不要在重复弹出(这种情况存在于牌桌内断线重连的情况,重连后又会收到一次协议,导致重复弹出面板)\n            that._curWaitInfo = null;\n            that._stageIndex = 0;\n            ty.UserInfo.loc = '0.0.0.0';\n            return;\n        }\n\n        var matchDes = hall.ME.matchInfo.matchDesMap[this._curOverInfo.matchId.toString()];\n        if(matchDes && matchDes.type.indexOf(\"common_arena_match\") > -1) {\n            ddz.matchModel.currentGameMode = \"default\";\n            //arena比赛\n            if (this._curOverInfo.reason == ddz.MATCH_REASON.WIN){\n                //赢了,弹出等待窗口\n                preFabPath = \"prefabs/match/ddz_arena_result_win\";\n                comName = \"ddz_arena_result_win\";\n                hall.GlobalFuncs.showPopWinByPreFab(preFabPath, function (preFabNode) {\n                    ddz.arenaResultPanel = preFabNode.getComponent(comName);\n                    ddz.arenaResultPanel.setOverInfo(that._curOverInfo);\n                });\n            }\n            else{\n                preFabPath = \"prefabs/match/ddz_arena_result_lose\";\n                comName = \"ddz_arena_result_lose\";\n                hall.GlobalFuncs.showPopWinByPreFab(preFabPath, function (preFabNode) {\n                    ddz.arenaResultPanel= preFabNode.getComponent(comName);\n                    ddz.arenaResultPanel.setOverInfo(that._curOverInfo);\n                });\n            }\n            return;\n        }\n        var resultFunc = function(){\n            if (that._curOverInfo.reason == ddz.MATCH_REASON.WIN){\n                //赢了,弹出等待窗口\n                preFabPath = \"prefabs/match/ddz_congratulation\";\n                comName = \"ddz_congratulation\";\n                hall.GlobalFuncs.showPopWinByPreFab(preFabPath, function (preFabNode) {\n                    that._curWaitInfo = null;\n                    that._stageIndex = 0;\n                    ty.UserInfo.loc = '0.0.0.0';\n                    ddz.matchResultPanel = preFabNode.getComponent(comName);\n                    ddz.matchResultPanel.setMcountDetail(that._curOverInfo.mcount);\n                    if (ddz.gameModel.isAcceptGameWin) {\n                        ddz.matchResultPanel.showResults(false);\n                        ddz.gameModel.isAcceptGameWin = false;\n                    }else {\n                        ddz.matchResultPanel.showResults(true);\n                    }\n                });\n            }\n            else{\n                // this._curWaitInfo = null;\n                preFabPath = \"prefabs/match/ddz_fail\";\n                comName = \"ddz_fail\";\n                hall.GlobalFuncs.showPopWinByPreFab(preFabPath, function (preFabNode) {\n                    var com = preFabNode.getComponent(comName);\n                    ddz.matchResultPanel = com;\n                    // if (ddz.matchModel.getStageIndex() == 1){\n                    //不可复活的关卡失败\n                    com.over(ddz.matchModel.getStageIndex()-1);\n                    that._curWaitInfo = null;\n                    ty.UserInfo.loc = '0.0.0.0';\n                    if (ddz.gameModel.isAcceptGameWin) {\n                        ddz.matchResultPanel.showResults(false);\n                        ddz.gameModel.isAcceptGameWin = false;\n                    }else {\n                        ddz.matchResultPanel.showResults(true);\n                    }\n                    // }\n                    // else{\n                    //     // com.setDiamondCount(ddz.matchModel.getStageIndex() - 1);\n                    // }\n                });\n            }\n        };\n\n        var curDay = hall.GlobalTimer.getCurDay();\n        if (ty.UserInfo.lastUpdateTgDate && ty.UserInfo.lastUpdateTgDate != curDay){\n            //有可能过12点了\n            ty.UserInfo.tgCount = 1;\n        }\n        else{\n            //通关,通关次数加1\n            ty.UserInfo.tgCount += 1;\n        }\n\n        ty.UserInfo.lastUpdateTgDate = curDay;\n        ddz.gameModel.setTongGuanCount(ty.UserInfo.tgCount);\n\n\n        resultFunc();\n        // ty.Timer.setTimer(cc.director,function(){\n        //     resultFunc();\n        // }, 3, 0, 0);\n    },\n\n    getCurOverInfo:function () {\n        return this._curOverInfo;\n    },\n\n    parseMatchInfo:function (value) {\n\n        // {\n        //     'cmd': 'room',\n        //     'result': {\n        //         'lotteryInfo': {\n        //             'winnerCount': 0,\n        //             'lotteryTime': u '21:00',\n        //             'leftSeconds': 31651,\n        //             'desc': u '20万元奖金'\n        //         },\n        //         'gameId': 6,\n        //         'matchId': 6789,\n        //         'userId': 10007,\n        //         'action': 'update',\n        //         'roomId': 67891000\n        //     }\n        // }\n\n        this._curUpdateInfo = value;\n        ty.NotificationCenter.trigger(ddz.EventType.UPDATE_MATCH_INFO);\n    },\n\n    getCurUpdateInfo:function () {\n        return this._curUpdateInfo;\n    },\n\n    getCurWinnerCount:function () {\n        var histories = this._curDesInfo.histories;\n        if (histories){\n            var winnerCount = histories.winnerCount;\n            if (winnerCount){\n                return winnerCount;\n            }\n            return 0;\n        }\n        return 0;\n    },\n\n    parseDes:function (value) {\n        this._curDesInfo = value;\n        ddz.Share.shareKeywordReplace.curWinnerCount = this.getCurWinnerCount();\n        // this._curDesInfo.histories.lastLottery = {\n        //     \"winnerCount\":2,\n        //     \"lotteryTime\":\"2018-04-08 19:40\",\n        //     \"rewards\":[\n        //         {\n        //             \"count\":2,\n        //             \"itemId\":\"item:1311\"\n        //         },\n        //         {\n        //             \"count\":1200000,\n        //             \"itemId\":\"user:chip\"\n        //         },\n        //         {\n        //             \"count\":12010,\n        //             \"itemId\":\"user:coupon\"\n        //         }\n        //     ]\n        // };\n        \n        hall.ME.matchInfo.addMatchDesInfo(value);\n        ty.NotificationCenter.trigger(ddz.EventType.UPDATE_MATCH_DES, value);\n        var histories = value.histories;\n        hall.LOGD(this._TAG, \"parseDes -------------------------\"+ JSON.stringify(histories));\n\n        var couponCount = hall.ME.udataInfo.m_couponCount;\n        var exchangedCoupon = hall.ME.udataInfo.m_exchangedCoupon;\n        var sumReward = couponCount + exchangedCoupon;\n        sumReward = sumReward / 100;\n        ddz.Share.shareKeywordReplace.curSumReward = sumReward;\n        ddz.Share.shareKeywordReplace.selfTotalBonus = sumReward;\n        ddz.Share.shareKeywordReplace.selfAllWinnerCount = histories.winnerCount;\n        //TODO\n        if(debugMode){\n            return;\n        }\n        ddz.GlobalFuncs.upDateRankData(sumReward+\"\");\n\n        // if(histories && histories.weekInfo){\n        //     hall.MsgFactory.getTimeStamp();\n        //     ty.NotificationCenter.listen(ddz.EventType.GET_TIMESTAMP, this.reciveTimeStamp, this);\n        // }\n    },\n    // reciveTimeStamp : function (result) {\n    //\n    //     ty.NotificationCenter.ignore(ddz.EventType.GET_TIMESTAMP);\n    //\n    //     // \"result\":{\n    //     //     //     \"action\":\"sync_timestamp\",\n    //     //     //         \"gameId\":9999,\n    //     //     //         \"userId\":10200,\n    //     //     //         \"current_ts\":1520826049\n    //     //     // }1523203200\n    //     var nowStamp = result.current_ts;\n    //     var week = parseInt((nowStamp-1523203200)/(7*24*3600));\n    //     ddz.GlobalFuncs.upDateRankDataWeek(week+\"\");\n    //     hall.GlobalFuncs.setInLocalStorage(ddz.matchModel.LAST_RANK_WEEK, week+\"\");\n    //     // var nowWeek = hall.GlobalFuncs.ReadStringFromLocalStorage(ddz.matchModel.LAST_RANK_WEEK, \"\");\n    // },\n\n    getCurDes:function () {\n        return this._curDesInfo;\n    },\n\n    parseMatchList:function (value) {\n        this._curMatchListInfo = value['matches'];\n        ty.NotificationCenter.trigger(ddz.EventType.RECIVE_MATCH_LIST_INFO);\n    },\n    getMatchListInfo:function () {\n        return this._curMatchListInfo;\n    },\n\n    ///\n    parse:function (value) {\n        switch (value.result.action){\n            case \"match_des\" : {\n                this.parseDes(value.result);\n                break;\n            }\n            case \"wait\" : {\n                this.parseWait(value.result);\n                break;\n            }\n            case \"over\" : {\n                this.parseOver(value.result);\n                break;\n            }\n            case \"match_giveup\" : {\n                if (value.error && value.error.code != 1){\n                    hall.MsgBoxManager.showToast({title:value.error.info + \";错误码:\" + value.error.code})\n                }\n                this.parseGiveUp(value.result);\n                break;\n            }\n            case \"update\" : {\n                this.parseMatchInfo(value.result);\n                break;\n            }\n            case \"lottery\" : {\n                //解析开奖消息\n                this.parseLottery(value.result);\n                break;\n            }\n             case \"signin\" : {\n                 if (value.error){\n                     // \"error\":{\"code\":7,\"info\":\"费用不足，请稍后再来\"}\n                     if (value.error.code == 7) {\n                         var todoTaskMsg = {\n                             \"action\": \"pop_info_wnd\",\n                             \"params\": {\n                                 \"des\": \"fuhaoBuyFailed-你的钻石不够啦\\n邀请好友进入游戏可以得钻石哟～\"\n                             }\n                         };\n                         hall.ToDoTask.runOneTask(todoTaskMsg);\n                     }\n                     else{\n                         hall.MsgBoxManager.showToast({title:value.error.info});\n                     }\n                 }\n                 this.parseSignInInfo(value);\n                 break;\n             }\n            case ddz.EventType.ACTION_SAVE : {\n                this.parseSave(value.result);\n                break;\n            }\n            case  ddz.EventType.ACTION_RESUME : {\n                this.checkMsgState(value);\n                this.parseResume(value.result);\n                break;\n            }\n            case  ddz.EventType.ACTION_CHALLENGE : {\n                this.parseChallenge(value.result);\n                break;\n            }\n            case \"match_back\": {\n                if(!value.error){\n                    if (value.result.nextStageIndex > value.result.stageIndex){\n                        if (value.result.stageIndex == 1 && value.result.nextStageIndex == 2) {\n                            hall.MsgBoxManager.showToast({title:'恭喜你,晋级成功!'});\n                        }else {\n                            hall.MsgBoxManager.showToast({title:'恭喜你,跳关成功!'});\n                        }\n                    }else if(value.result.nextStageIndex == value.result.stageIndex){\n                        hall.MsgBoxManager.showToast({title:'恭喜你,复活成功!'});\n                    }\n\n                }else {\n                    hall.MsgBoxManager.showToast({title:value.error.info});\n                }\n                ty.NotificationCenter.trigger(\"arena_match_back\", value);\n                break;\n            }\n            case \"rank\": {\n                hall.ME.matchInfo.setCurMatchAdditionInfo(value.result);\n                ty.NotificationCenter.trigger(ddz.EventType.MACH_RANK_CHANGE, value.result);\n                break;\n            }\n            case \"enter_queue\": {\n                this.parseQueue(value.result);\n                break;\n            }\n            case \"leave_queue\": {\n                this.parseLeaveQueue(value.result);\n                break;\n            }\n        }\n    },\n\n    checkMsgState:function (msg) {\n        if(msg && msg.error && msg.error.code && msg.error.code != 0){\n            ty.NotificationCenter.trigger(\"signin_fail\", msg);\n        } else {\n            ty.NotificationCenter.trigger(\"signin_success\", msg);\n        }\n    },\n\n    parseSave:function (result) {\n        // {\n        //     \"cmd\":\"room\",\n        //     \"result\":{\n        //         \"action\":\"save\",\n        //         \"gameId\":6,\n        //         \"roomId\":67891000,\n        //         \"matchId\":6789,\n        //         \"userId\":10014,\n        //         \"save\":1,\n        //         \"tips\":\"您的比赛进度已保存\"\n        //     }\n        // }\n\n        if (result.save === 1){\n            this._curWaitInfo = null;\n            ddz.MsgFactory.getMatchRecords();\n            ty.NotificationCenter.trigger(ddz.EventType.SAVE_MATCH_SUCCESS, result);\n            if(ddz.friendModel.isEnterTable){\n                ddz.friendModel.enterFTTable(ddz.Share.shareKeywordReplace.inviteFriendID);\n            }\n        }else {\n            ddz.friendModel.isEnterTable = false;\n        }\n    },\n\n    parseResume:function (result) {\n\n        // var result = {\n        //     \"cmd\":\"room\",\n        //     \"result\":{\n        //         \"action\":\"resume\",\n        //         \"gameId\":6,\n        //         \"roomId\":67891000,\n        //         \"matchId\":6789,\n        //         \"userId\":10014,\n        //         \"save\":1,\n        //         \"tips\":\"您的比赛进度已恢复，请继续闯关吧\",\n        //         \"wati\":\"{\"cmd\":\"room\",\"result\":{\"action\":\"wait\",\"gameId\":6,\"roomId\":67891000,\"matchId\":6789,\"userId\":10014,\"stageIndex\":2,\"isLevelUp\":true,\"cardCount\":1,\"state\":2,\"reConnect\":true,\"gameFlow\":true}}\"\n        //     }\n        // }\n\n        // var result = {\n        //     \"cmd\":\"room\",\n        //     \"result\":{\n        //         \"action\":\"resume\",\n        //         \"gameId\":6,\n        //         \"roomId\":67891000,\n        //         \"matchId\":6789,\n        //         \"userId\":10014,\n        //         \"save\":0\n        //     },\n        //     \"error\":{\n        //         \"code\":-1,\n        //         \"info\":\"您已经在比赛中，请稍后报名\"\n        //     }\n        // }\n\n        if (result.save === 1){\n            //成功了,解析携带过来的wait消息\n            var waitInfo = JSON.parse(result.wati);\n            this.parseWait(waitInfo.result);\n            ddz.gameModel._matchRecords = null;\n            hall.LOGW(\"===\",\"====parseResume====\"+ JSON.stringify(waitInfo.result));\n        }else {\n\n        }\n\n        if (!this.isStartMatch){\n            return;\n        }\n        if (this._curWaitInfo){\n            if (this._curWaitInfo.state == 2){\n                this.matchChallenge();\n            } else{\n                if (this._curWaitInfo.stageIndex == 1){\n                    this.waitSignin = true;\n                    this.matchGiveUp();\n                }\n                else{\n                    this.showGetDiamondWindow(this,this._curWaitInfo.stageIndex);\n                }\n            }\n        }else {\n            this.matchSignin();\n        }\n        this.isStartMatch = false;\n        // ty.NotificationCenter.trigger(ddz.EventType.RESUME_MATCH, result.save === 1);\n    },\n\n\n    parseLottery:function (result) {\n        this._curLotteryInfo = result;\n    },\n\n    getCurLotteryInfo:function () {\n        return this._curLotteryInfo;\n    },\n\n    parseQueue:function(result){\n        // {\n        //     \"cmd\":\"room\",\n        //     \"result\":{\n        //     \"action\":\"enter_queue\",\n        //         \"gameId\":6,\n        //         \"roomId\":60181000,\n        //         \"playMode\":\"123\",\n        //         \"userId\":10042,\n        //         \"mixedRoomId\":\"high\",\n        //         \"signs\":1\n        // }\n        // }\n        this._queueInfo = result;\n        if (result.signs && result.signs == 1) {\n            hall.GlobalFuncs.onEnterQueue();\n        }\n    },\n\n    getCurQueueInfo:function () {\n        return this._queueInfo;\n    },\n\n    parseLeaveQueue:function(result){\n        // {\n        //     \"cmd\":\"room\",\n        //     \"result\":{\n        //     \"action\":\"leave_queue\",\n        //         \"gameId\":6,\n        //         \"roomId\":60181000,\n        //         \"playMode\":\"123\",\n        //         \"userId\":10042,\n        //         \"mixedRoomId\":null\n        // },\n        //     \"error\":{\n        //     \"code\":2,\n        //         \"info\":\"无此房间\"\n        // }\n        // }\n        if (result.playMode){\n            ty.NotificationCenter.trigger(ddz.EventType.REMOVE_TABLE_ANI);\n            hall.GlobalFuncs.gotoRoomListScene();\n        }\n        else if (result.reason == -1){\n            hall.GlobalFuncs.gotoDdz();\n        }\n    },\n\n    parseSignInInfo:function (value) {\n        this.checkMsgState(value);\n    },\n\n    getDiamondCountNeeded : function () {\n        var guan = ddz.matchModel.getStageIndex()-1;\n        var desInfo = ddz.matchModel.getCurDes();\n        if(desInfo && desInfo.detailStages){\n            var stageInfo = desInfo.detailStages;\n            if(stageInfo && stageInfo.length > guan){\n                var des = stageInfo[guan];\n                if(des && des.count){\n                    return  des.count;\n                }\n            }\n        }\n        return \"1\";\n    },\n\n    showGetDiamondWindow : function (manager,guans) {\n        // var guans = 1;\n        // if (this._curWaitInfo){\n        //     guans = this._curWaitInfo.stageIndex;\n        // }\n        ty.NotificationCenter.listen(ddz.EventType.UPDATE_SHARE_STATE, this.playAnimationAfterShareWithType, this);\n        var preFabPath = \"prefabs/ddz_window_tips\";\n        var  comName = \"ddz_tipsWindow\";\n        hall.GlobalFuncs.showPopWinByPreFab(preFabPath, function (preFabNode) {\n            var window = preFabNode.getComponent(comName);\n            window.parentScene = manager;\n            var buttonS = \"\";\n            var diamondCount = hall.ME.udataInfo.diamondCount;\n            var count = ddz.matchModel.getDiamondCountNeeded();\n            var tipS = \"<color=#1A6951>使用 </c><img src='dda_button_diamond_black' height=34 width=42/>\" +\n                \"<color=#1A6951> \"+ count +\" 可继续挑战本关\\n已有</color><img src='dda_button_diamond_black' height=34 width=42/>\" +\n                \"<color=#1A6951> \"+ diamondCount +\"</color>\";\n\n            if (diamondCount >= count){\n                buttonS = \"使用\";\n                // tipS = \"使用钻石继续挑战\";\n            }else {\n                buttonS = \"分享\";\n                // tipS = \"使用钻石继续挑战\";\n            }\n\n            var rightSrc = \"dda_button_diamond\";\n            if (buttonS == \"分享\"){\n                rightSrc = \"\";\n            }\n\n            var testArray = [{\n                title :\"重闯第一关\",\n                bottomType : 0\n\n            }, {\n                title :buttonS,\n                right :rightSrc,\n                bottomType :1\n            }\n            ];\n            window.setTitleContentAndButtons(\"提示\",tipS,testArray);\n            // window.changeContentLabelString(guans);\n        });\n    },\n\n    playAnimationAfterShareWithType : function (shareType) {\n        var reultType = ddz.Share.resultType;\n        if (shareType == ddz.Share.onShareType.clickStatShareTypeMainRestartWindow) {\n            // ddz.gameModel.checkShareReward(ddz.Share.SharePointType.failSix);\n            switch (reultType) {\n                case 1:\n                    if (!ddz.gameModel.isBringVersion) {\n                        hall.MsgBoxManager.showToast({title : '请分享到微信群哦~'});\n                    }\n                    break;\n                case 2:\n                    if (!ddz.gameModel.isBringVersion) {\n                        hall.MsgBoxManager.showToast({title : '请不要频繁分享到一个群~'});\n                    }\n                    break;\n                case 3:\n                    break;\n                default:\n                    break;\n            }\n            ddz.Share.resultType = 0;\n        }\n    },\n\n    //显示开始闯关or继续闯关\n    showBack:function () {\n        if (this._curWaitInfo){\n            return true;\n        }\n        if (ddz.gameModel._matchRecords){\n            //有比赛记录,也认为是可以返回\n            return true;\n        }\n        //wait被清除,显示开始\n        return false;\n    },\n\n    checkOldVersion:function () {\n        if (this._curDesInfo.type == \"async_upgrade_hero_match\" && this._curDesInfo.fees[0] == '免费'){\n            return true;\n        }\n        return false;\n    },\n\n    startMatchProgress : function () {\n        hall.LOGD(\"\",\"file = [MatchModel] fun = [startMatchProgress]\"+ JSON.stringify(this._curWaitInfo)\n            +\"==\"+JSON.stringify(ddz.gameModel._matchRecords));\n\n        if (this._curWaitInfo && this._curWaitInfo.matchId == 6789){\n            if (this._curWaitInfo.state == 2){\n                this.matchChallenge();\n            } else{\n                if(this._curWaitInfo.stageIndex == 1){\n                    if (this.checkOldVersion()){\n                        this.matchSignin();\n                    }\n                    else{\n                        //第一关失败,放弃掉\n                        ddz.matchModel.waitSignin = true;\n                        ddz.matchModel.matchGiveUp();\n                    }\n                }else {\n                    this.showGetDiamondWindow(this,this._curWaitInfo.stageIndex);\n                }\n            }\n            return;\n        }\n        if (ddz.gameModel._matchRecords){\n            // var records = ddz.gameModel._matchRecords;\n            // for (var i = 0 ; i < records.length ; i ++){\n            //     var record = records[i];\n            //     if(record.roomId.toString().indexOf(\"6789\") > -1){\n            //         var state = record.state;\n            //         if (state == 2){\n            //             this.matchChallenge();\n            //         } else{\n            //             // this.showGetDiamondWindow(this);\n            //             if(record.stageIndex == 1){\n            //                 this.matchSignin();\n            //             }else {\n            //                 this.showGetDiamondWindow(this,record.stageIndex);\n            //             }\n            //         }\n            //         return;\n            //     }\n            // }\n            this.isStartMatch = true;\n            ddz.MsgFactory.resumeMatch();\n            return;\n        }\n        this.matchSignin();\n    },\n    onClickLeftButton:function (event) {\n        ty.NotificationCenter.ignore(ddz.EventType.UPDATE_SHARE_STATE,this);\n        this.waitSignin = true;\n        this.matchGiveUp();\n    },\n\n    onClickRightButton:function (event) {\n        ty.NotificationCenter.ignore(ddz.EventType.UPDATE_SHARE_STATE,this);\n        var diamondCount = hall.ME.udataInfo.diamondCount;\n        var count = ddz.matchModel.getDiamondCountNeeded();\n        if (diamondCount >= count) {\n            this.matchBack();\n        }else{\n            ddz.Share.shareWithType(ddz.Share.onShareType.clickStatShareTypeMainRestartWindow);\n        }\n    },\n\n    /**\n     *\n     {\"cmd\":\"room\",\"result\":{\"action\":\"over\",\"gameId\":6,\"roomId\":67901000,\"matchId\":6792,\"userId\":10070,\"rank\":21,\"info\":\"比赛：5元红包赛\\n名次：第21名\\n奖励：7500金币\\n奖励已发放，请您查收。\",\"reason\":1,\"rewardDesc\":\"7500金币\",\"rewards\":[{\"icon\":\"user:chip\",\"name\":\"金币\",\"count\":7500,\"iconPath\":\"http://ddz.dl.tuyoo.com/cdn37/hall/pdt/imgs/goods_t300k_2.png\"}],\"feeIndex\":0,\"date\":\"2018-05-08\",\"time\":\"00:53\",\"mname\":\"5元红包赛\",\"mcount\":90}}\n     * @param value\n     */\n    testOver: function() {\n        var _curOverInfo = {\n            \"cmd\": \"room\",\n            \"result\": {\n                \"action\": \"over\",\n                \"gameId\": 6,\n                \"roomId\": 67901000,\n                \"matchId\": 6792,\n                \"userId\": 10070,\n                \"rank\": 46,\n                \"info\": \"比赛：5元红包赛\\n名次：第21名\\n奖励：7500金币\\n奖励已发放，请您查收。\",\n                \"reason\": 1,\n                \"rewardDesc\": \"7500金币\",\n                \"rewards\": [{\n                    \"icon\": \"user:chip\",\n                    \"name\": \"金币\",\n                    \"count\": 7500,\n                    \"iconPath\": \"http://ddz.dl.tuyoo.com/cdn37/hall/pdt/imgs/goods_t300k_2.png\"\n                }, {\n                    \"icon\": \"user:diamond\",\n                    \"name\": \"钻石\",\n                    \"count\": 7500,\n                    \"iconPath\": \"http://ddz.dl.tuyoo.com/cdn37/hall/pdt/imgs/goods_t300k_2.png\"\n                }],\n                \"feeIndex\": 0,\n                \"date\": \"2018-05-08\",\n                \"time\": \"00:53\",\n                \"mname\": \"5元红包赛\",\n                \"mcount\": 90\n            }\n        };\n        var preFabPath = \"prefabs/match/ddz_arena_result_win\";\n        var comName = \"ddz_arena_result_win\";\n        var that = this;\n        hall.GlobalFuncs.showPopWinByPreFab(preFabPath, function (preFabNode) {\n            ddz.arenaResultPanel = preFabNode.getComponent(comName);\n            ddz.arenaResultPanel.setOverInfo(_curOverInfo.result);\n            //that._curWaitInfo = null;\n            //ty.UserInfo.loc = '0.0.0.0';\n            //ddz.matchResultPanel = preFabNode.getComponent(comName);\n            //ddz.matchResultPanel.setMcountDetail(that._curOverInfo.mcount);\n        });\n    },\n\n    testSignin: function(){\n        ddz.matchModel.matchSignin(6790, 6793, 0);\n    },\n\n    testArenaWin: function() {\n        var over = {\"cmd\":\"room\",\"result\":{\"action\":\"over\",\"gameId\":6,\"roomId\":67901000,\"matchId\":6791,\"userId\":10070,\"rank\":6,\"info\":\"比赛：1元红包赛\\n名次：第6名\\n奖励：3000金币+0.01元\\n奖励已发放，请您查收。\",\"reason\":1,\"rewardDesc\":\"3000金币+0.01元\",\"rewards\":[{\"icon\":\"user:chip\",\"name\":\"金币\",\"count\":3000,\"iconPath\":\"http://ddz.dl.tuyoo.com/cdn37/hall/pdt/imgs/goods_t300k_2.png\"},{\"icon\":\"user:coupon\",\"name\":\"红包券\",\"count\":1,\"iconPath\":\"http://ddz.dl.tuyoo.com/cdn37/hall/item/imgs/coupon_1.png\"}],\"feeIndex\":0,\"date\":\"2018-05-11\",\"time\":\"15:39\",\"mname\":\"1元红包赛\",\"mcount\":90}};\n        this._curOverInfo = over.result;\n        var preFabPath = \"prefabs/match/ddz_arena_result_win\";\n        var comName = \"ddz_arena_result_win\";\n        var that = this;\n        hall.GlobalFuncs.showPopWinByPreFab(preFabPath, function (preFabNode) {\n            var com = preFabNode.getComponent(comName);\n            com.setOverInfo(that._curOverInfo);\n            //that._curWaitInfo = null;\n            //ty.UserInfo.loc = '0.0.0.0';\n            //ddz.matchResultPanel = preFabNode.getComponent(comName);\n            //ddz.matchResultPanel.setMcountDetail(that._curOverInfo.mcount);\n        });\n    },\n\n    testStart: function() {\n        var preFabPath = \"prefabs/match/ddz_arena_start\";\n        ddz.AudioHelper.playMusic(ddz.MusicPath_mp3.table_background_music, true, ty.SystemInfo.tableBgMusicVolume);\n        hall.GlobalFuncs.showPopWinByPreFab(preFabPath, function (preFabNode) {\n            var match_des = {\n                \"action\": \"match_des\",\n                \"gameId\": 6,\n                \"roomId\": 67901000,\n                \"matchId\": 6791,\n                \"userId\": 10070,\n                \"name\": \"1元红包赛\",\n                \"desc\": \"满90人开赛，等待时间短，轮转速度快。\\n9轮1局瑞士移位决出所有名次。\",\n                \"type\": \"async_common_arena_match\",\n                \"fees\": [{\n                    \"desc\": \"1钻石\",\n                    \"canPay\": false\n                }, {\n                    \"desc\": \"1000金币\",\n                    \"canPay\": true\n                }],\n                \"ranks\": [{\n                    \"start\": 1,\n                    \"end\": 1,\n                    \"desc\": \"1元\"\n                }, {\n                    \"start\": 2,\n                    \"end\": 2,\n                    \"desc\": \"6000金币+0.02元\"\n                }, {\n                    \"start\": 3,\n                    \"end\": 3,\n                    \"desc\": \"4000金币+0.02元\"\n                }, {\n                    \"start\": 4,\n                    \"end\": 6,\n                    \"desc\": \"3000金币+0.01元\"\n                }, {\n                    \"start\": 7,\n                    \"end\": 12,\n                    \"desc\": \"2000金币\"\n                }, {\n                    \"start\": 13,\n                    \"end\": 21,\n                    \"desc\": \"1500金币\"\n                }, {\n                    \"start\": 22,\n                    \"end\": 33,\n                    \"desc\": \"200金币\"\n                }, {\n                    \"start\": 34,\n                    \"end\": 45,\n                    \"desc\": \"500金币\"\n                }],\n                \"stages\": [{\n                    \"index\": 1,\n                    \"name\": \"90进75\",\n                    \"riseUserCount\": 75,\n                    \"totalUserCount\": 90,\n                    \"canBack\": 0,\n                    \"backFee\": \"\",\n                    \"backFeeCount\": 0\n                }, {\n                    \"index\": 2,\n                    \"name\": \"75进60\",\n                    \"riseUserCount\": 60,\n                    \"totalUserCount\": 75,\n                    \"canBack\": 1,\n                    \"backFee\": \"1个钻石\",\n                    \"backFeeCount\": 1\n                }, {\n                    \"index\": 3,\n                    \"name\": \"60进45\",\n                    \"riseUserCount\": 45,\n                    \"totalUserCount\": 60,\n                    \"canBack\": 1,\n                    \"backFee\": \"1个钻石\",\n                    \"backFeeCount\": 1\n                }, {\n                    \"index\": 4,\n                    \"name\": \"45进33\",\n                    \"riseUserCount\": 33,\n                    \"totalUserCount\": 45,\n                    \"canBack\": 1,\n                    \"backFee\": \"1个钻石\",\n                    \"backFeeCount\": 1\n                }, {\n                    \"index\": 5,\n                    \"name\": \"33进21\",\n                    \"riseUserCount\": 21,\n                    \"totalUserCount\": 33,\n                    \"canBack\": 1,\n                    \"backFee\": \"1个钻石\",\n                    \"backFeeCount\": 1\n                }, {\n                    \"index\": 6,\n                    \"name\": \"21进12\",\n                    \"riseUserCount\": 12,\n                    \"totalUserCount\": 21,\n                    \"canBack\": 1,\n                    \"backFee\": \"1个钻石\",\n                    \"backFeeCount\": 1\n                }, {\n                    \"index\": 7,\n                    \"name\": \"12进6\",\n                    \"riseUserCount\": 6,\n                    \"totalUserCount\": 12,\n                    \"canBack\": 1,\n                    \"backFee\": \"1个钻石\",\n                    \"backFeeCount\": 1\n                }, {\n                    \"index\": 8,\n                    \"name\": \"6进3\",\n                    \"riseUserCount\": 3,\n                    \"totalUserCount\": 6,\n                    \"canBack\": 1,\n                    \"backFee\": \"1个钻石\",\n                    \"backFeeCount\": 1\n                }, {\n                    \"index\": 9,\n                    \"name\": \"决赛\",\n                    \"riseUserCount\": 1,\n                    \"totalUserCount\": 3,\n                    \"canBack\": 0,\n                    \"backFee\": \"\",\n                    \"backFeeCount\": 0\n                }],\n                \"histories\": {\n                    \"playCount\": 9,\n                    \"crownCount\": 1,\n                    \"bestRank\": 1,\n                    \"records\": [{\n                        \"time\": 1525688021,\n                        \"desc\": \"第2名，奖励6000金币+0.02元\"\n                    }, {\n                        \"time\": 1525688477,\n                        \"desc\": \"第3名，奖励4000金币+0.02元\"\n                    }, {\n                        \"time\": 1525690482,\n                        \"desc\": \"第1名，奖励1元\"\n                    }]\n                },\n                \"condition\": 90,\n                \"timeRange\": \"20分钟\",\n                \"matchIntroduce\": \"本比赛采用快速赛赛制\",\n                \"saveInfo\": {\n                    \"record\": {},\n                    \"needResume\": 0\n                }\n            };\n            var com = preFabNode.getComponent(\"ddz_arena_start\");\n            ////var matchDes = hall.ME.matchInfo.getMatchDesByMatchId(ddz.matchModel._curWaitInfo.matchId);\n            com.showArenaStageProgress(1, match_des.stages, true);\n        });\n    }\n\n    // testMatching : function () {\n    //     var preFabPath = \"ani/ddz_matching/Matching\";\n    //     var  comName = \"DdzMatching\";\n    //     ddz.AudioHelper.playMusic(ddz.MusicPath_mp3.table_background_music, true, ty.SystemInfo.tableBgMusicVolume);\n    //     this.showPopWinByPreFab(preFabPath, function (preFabNode) {\n    //         var com = preFabNode.getComponent(comName);\n    //         com.playAni(true);\n    //     });\n    // },\n};"]}