{"version":3,"sources":["DdzNetWorkCenter.js"],"names":["console","log","ddz","NetWorkCenter","canNotLeave","boot","_TAG","LOGD","cmdMap","EventType","MSG_HALL_INFO","onHallInfo","MSG_TABLE_QUICKSTART","onQuickStart","MSG_TABLE_TABLEINFO","onTableInfo","MSG_ROOM","onRoom","MSG_GAME","onGame","MSG_USER_INFO","onReceiveUserInfo","CMD_DIZHU","onDiZhuMsg","CMD_ROOM_LEAVE","onRoomLeave","HALL_SHARE2","onShare2","CMD_TABLE_CHAT","onTableChat","MSG_TODO_TASKS","onTodoTask","MSG_TABLE_LEAVE","onTableLeave","MSG_LED","onLed","MSG_DATA_CHANGED","onUpdateChangedData","ty","NotificationCenter","listen","TCP_RECEIVE","onReceiveTCP_Msg","value","hall","ME","parseUserInfoDDZ","trigger","UPDATE_UER_INFO","UPDATE_COIN_NUMBER","SET_LOSS_MONEY_NUMBER","shut","ignoreScope","argument","friendModel","parseDiZhuInfo","msg","tableChatModel","parseTableChat","result","reason","REMOVE_TABLE_ANI","GlobalFuncs","gotoRoomListScene","MsgBoxManager","showToast","title","params","scope","gameWorld","parseLed","text","model","m_ledBeWork","CMD_LED_RECEIVE","parseGameLed","m_todoTask","parseTodoTask","action","GET_REWARD","waitGetRevial","type","rewards","length","curCount","needCount","matchType","matchModel","matchBack","matchDes","roomId","matchId","ARENA_SEND_MATCH_BACK","matchResultPanel","LOGW","_count","count","itemId","playZuanShi","gameModel","firstUseJiPaiQiPoint","USE_NEW_CARD_NOTE","checkShareReward","Share","SharePointType","firstUseJiPaiQi","coinNum","diamondNum","jipaiqinum","i","playMultiReward","CHECK_REWARD","data","leftCount","pointId","ShareRecord","toString","UPDATE_BUTTON_TEXT","gongZhongHaoCard","gongZhonghaoCardPoint","gongZhongHaoMenu","gongZhonghaoMenuPoint","UPDATE_GIFTBAG_COUNT","firstWithDraw","firstWithDrawPoint","shareFriend","UPDATE_SHARE_FRIEND_TITLE_STATE","getDayFirstLogin","REMOVE_MATCHING","ACTION_CAN_ROOM_LEAVE","curScene","cc","director","getScene","tableScene","children","getComponent","tableInfo","getSceneType","Enums","SceneType","NORMAL","gotoDdz","msgCmd","cmd","gameId","SystemInfo","func","call","val","parseNormalRooms","getMatchList","UPDATE_HALL_INFO","success","quickStartModel","parse","name","isMatchShare","tableInfoModel","noDelete","isLoadTableScene","requestAnimationFrame","gotoDdzTable","parseGame","curValue","MsgFactory","getGameData","getBagInfo","getUserInfo"],"mappings":"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","file":"DdzNetWorkCenter.js","sourceRoot":"../../../../../../assets/Script/ddz/msg_handler","sourcesContent":["/**\n * Created by xujing on 2018/1/31.\n */\nconsole.log('DdzMsgFactory.js loaded');\n\nddz.NetWorkCenter = {\n    canNotLeave : false,\n\n    boot : function () {\n        this._TAG = 'ddz.ClsNetWorkCenter';\n        ddz.LOGD(this._TAG, 'boot');\n\n        this.cmdMap = {};\n        this.cmdMap[ddz.EventType.MSG_HALL_INFO] = this.onHallInfo;\n        this.cmdMap[ddz.EventType.MSG_TABLE_QUICKSTART] = this.onQuickStart;\n        this.cmdMap[ddz.EventType.MSG_TABLE_TABLEINFO] = this.onTableInfo;\n        this.cmdMap[ddz.EventType.MSG_ROOM] = this.onRoom;\n        this.cmdMap[ddz.EventType.MSG_GAME] = this.onGame;\n        this.cmdMap[ddz.EventType.MSG_USER_INFO] = this.onReceiveUserInfo;\n        this.cmdMap[ddz.EventType.CMD_DIZHU] = this.onDiZhuMsg;\n        this.cmdMap[ddz.EventType.CMD_ROOM_LEAVE] = this.onRoomLeave;\n        this.cmdMap[ddz.EventType.HALL_SHARE2] = this.onShare2;\n        this.cmdMap[ddz.EventType.CMD_TABLE_CHAT] = this.onTableChat;\n        this.cmdMap[ddz.EventType.MSG_TODO_TASKS] = this.onTodoTask;\n        this.cmdMap[ddz.EventType.MSG_TABLE_LEAVE] = this.onTableLeave;\n        this.cmdMap[ddz.EventType.MSG_LED] = this.onLed;\n        // this.cmdMap[ddz.EventType.MSG_CASH] = this.onCash;\n\n        this.cmdMap[ddz.EventType.MSG_DATA_CHANGED] = this.onUpdateChangedData;\n\n        ty.NotificationCenter.listen(ty.EventType.TCP_RECEIVE, this.onReceiveTCP_Msg, this);\n\n    },\n    onReceiveUserInfo : function(value){\n        if (typeof(value) == 'undefined') {\n            return;\n        }\n        hall.ME.parseUserInfoDDZ(value);\n        ty.NotificationCenter.trigger(ty.EventType.UPDATE_UER_INFO, hall.ME);\n        // 刷新金币\n        ty.NotificationCenter.trigger(ddz.EventType.UPDATE_COIN_NUMBER);\n\n        // 刷新剩余奖金\n        ty.NotificationCenter.trigger(ddz.EventType.SET_LOSS_MONEY_NUMBER);\n    },\n\n    shut:function () {\n        this.cmdMap = {};\n        ty.NotificationCenter.ignoreScope(this);\n    },\n\n    onDiZhuMsg:function (argument) {\n        ddz.friendModel.parseDiZhuInfo(argument);\n    },\n\n    onTableChat:function (msg) {\n        ddz.tableChatModel.parseTableChat(msg);\n    },\n\n    //当你离开比赛桌的时候，可能会返回这个信息，这个与实际逻辑相关\n    onTableLeave: function(argument) {\n        // {\"cmd\":\"table_leave\",\"result\":{\"gameId\":6,\"roomId\":60191001,\"tableId\":601910010006,\"userId\":10050,\"reason\":0}}\n\n        if (argument.result.reason == 0){\n            ty.NotificationCenter.trigger(ddz.EventType.REMOVE_TABLE_ANI);\n            // hall.GlobalFuncs.gotoDdz();\n            hall.GlobalFuncs.gotoRoomListScene();\n        }\n        else if (argument.result.reason == -1){\n            hall.MsgBoxManager.showToast({title:'牌局已开始，请打完本局。'});\n        }\n    },\n\n    onLed: function(params) {\n        // hall.LOGD(null, params);\n        var result = params['result'];\n        if (result && result.scope == \"hall6\") {\n            hall.gameWorld.parseLed(result.text);\n            var model = hall.gameWorld.model;\n            //若是之前消息已经播放完\n            if (!model.m_ledBeWork) {\n                ty.NotificationCenter.trigger(ddz.EventType.CMD_LED_RECEIVE, result);\n            }\n        }else if (result && result.scope == \"6\") {\n            hall.gameWorld.parseGameLed(result.text);\n            var model = hall.gameWorld.model;\n            //若是之前消息已经播放完\n            if (!model.m_ledBeWork) {\n                ty.NotificationCenter.trigger(ddz.EventType.CMD_LED_RECEIVE, result);\n            }\n        }\n    },\n\n    onTodoTask: function(value) {\n        if (value && value[\"result\"]) {\n            hall.gameWorld.model.m_todoTask.parseTodoTask(value[\"result\"]);\n        }\n    },\n\n    onShare2:function (msg) {\n\n        if (msg.result.action == ddz.EventType.GET_REWARD){\n            // {\"cmd\":\"hall_share2\",\"result\":{\"action\":\"get_reward\",\"gameId\":6,\"userId\":10008,\"rewards\":[]}}\n            //获得奖励回调\n            if (ddz.waitGetRevial && ddz.waitGetRevial.type == 'waitRecive' && msg.result.rewards.length > 0){\n                ddz.waitGetRevial.curCount++;// 钻石数量达到标准就复活\n                if (ddz.waitGetRevial.curCount == ddz.waitGetRevial.needCount){\n                    // ddz.waitGetRevial.type = 'back';\n                    if(ddz.waitGetRevial.matchType == 'arena') {\n                        ddz.matchModel.matchBack(ddz.waitGetRevial.matchDes.roomId, ddz.waitGetRevial.matchDes.matchId);\n                        ty.NotificationCenter.trigger(ddz.EventType.ARENA_SEND_MATCH_BACK);\n                        ddz.waitGetRevial = null;\n                        return;\n                    }\n                    if(ddz.matchResultPanel){\n                        ddz.matchResultPanel.shut();\n                    }\n                    ddz.matchModel.matchBack();\n                    ddz.waitGetRevial = null;\n                }\n\n            }else if(msg.result.rewards.length > 0) {\n                hall.LOGW(\"==\",\" file = [DdzNETWorkCenter] fun = [onShare2] msg.result.rewards.length = \" + msg.result.rewards.length);\n                // ty.NotificationCenter.trigger(ty.EventType.GET_DIAMOND);\n                var _count = 1;\n                if (msg.result.rewards[0].count) {\n                    if (msg.result.rewards.length == 1) {\n                        _count = msg.result.rewards[0].count;\n                        if (msg.result.rewards[0].itemId == \"user:chip\") {\n                            ddz.GlobalFuncs.playZuanShi(false,this,_count,true);\n                        }else if (msg.result.rewards[0].itemId == \"item:1311\") {\n                            ddz.GlobalFuncs.playZuanShi(false,this,_count);\n                        }else if (msg.result.rewards[0].itemId == \"item:1363\") {\n                            if (ddz.gameModel.firstUseJiPaiQiPoint > 0) {\n                                ty.NotificationCenter.trigger(ddz.EventType.USE_NEW_CARD_NOTE);\n                                hall.MsgBoxManager.showToast({\"title\":\"送你一个记牌器,祝你通关\"});\n                                ddz.gameModel.checkShareReward(ddz.Share.SharePointType.firstUseJiPaiQi);\n                            }else {\n                                ddz.GlobalFuncs.playZuanShi(false,this,_count,true,false,true);\n                            }\n\n                            // ddz.GlobalFuncs.playZuanShi(false,this,_count,true,false,true);\n                        }\n                    }else if (msg.result.rewards.length >1) {\n                        var coinNum;\n                        var diamondNum;\n                        var jipaiqinum;\n                        hall.LOGW(\"==\",\" file = [DdzNETWorkCenter] fun = [onShare2] 多个奖励\" );\n                        for (var i = 0; i < msg.result.rewards.length; i++){\n                            var _count = 0;\n                            _count = msg.result.rewards[i].count;\n                            if (msg.result.rewards[i].itemId == \"user:chip\") {\n                                coinNum = _count;\n                            }else if (msg.result.rewards[i].itemId == \"item:1311\") {\n                                diamondNum = _count;\n                            }else if (msg.result.rewards[i].itemId == \"item:1363\") {\n                                jipaiqinum = _count;\n                            }\n                        }\n                        \n                        ddz.GlobalFuncs.playMultiReward(coinNum,diamondNum,jipaiqinum,3);\n                    }\n\n                }\n            }\n        }\n        else if (msg.result.action == ddz.EventType.CHECK_REWARD){\n            //检查当前分享点是否还有奖励\n            //{\"cmd\":\"hall_share2\",\"result\":{\"action\":\"check_reward\",\"gameId\":6,\"userId\":10042,\"pointId\":67890009,\"leftCount\":0}}\n            var data = {};\n            data.leftCount = msg.result.leftCount;\n            data.pointId = msg.result.pointId;\n            ddz.ShareRecord[data.pointId.toString()] = data;\n            ty.NotificationCenter.trigger(ty.EventType.UPDATE_BUTTON_TEXT, data);\n\n            if (msg.result.pointId == ddz.Share.SharePointType.gongZhongHaoCard){\n                ddz.gameModel.gongZhonghaoCardPoint = msg.result.leftCount;\n            }else if (msg.result.pointId == ddz.Share.SharePointType.gongZhongHaoMenu) {\n                ddz.gameModel.gongZhonghaoMenuPoint = msg.result.leftCount;\n                ty.NotificationCenter.trigger(ddz.EventType.UPDATE_GIFTBAG_COUNT);\n            }else if (msg.result.pointId == ddz.Share.SharePointType.firstWithDraw) {\n                ddz.gameModel.firstWithDrawPoint = msg.result.leftCount;\n            }else if (msg.result.pointId == ddz.Share.SharePointType.shareFriend) {\n                ty.NotificationCenter.trigger(ddz.EventType.UPDATE_SHARE_FRIEND_TITLE_STATE, msg.result.leftCount);\n            }else if (msg.result.pointId == ddz.Share.SharePointType.firstUseJiPaiQi) {\n                ddz.gameModel.firstUseJiPaiQiPoint = msg.result.leftCount;\n            }else if (msg.result.pointId == ddz.Share.SharePointType.getDayFirstLogin) {\n                ty.NotificationCenter.trigger(ty.EventType.UPDATE_BUTTON_TEXT, msg.result.leftCount);\n            }\n        }\n    },\n\n    onRoomLeave:function (msg) {\n        // {\"cmd\":\"room_leave\",\"result\":{\"reason\":-1,\"gameId\":6,\"roomId\":60121001,\"userId\":10197}}\n        if (msg.result.reason == -1) return; //-1不处理\n\n        ty.NotificationCenter.trigger(ddz.EventType.REMOVE_TABLE_ANI);\n        ty.NotificationCenter.trigger(ddz.EventType.REMOVE_MATCHING);\n        ddz.LOGD(\"\",\"file = [DdzNetWorkCenter] fun = [onRoomLeave] this.canNotLeave = \" + this.canNotLeave );\n        if(this.canNotLeave){\n            ty.NotificationCenter.trigger(ddz.EventType.ACTION_CAN_ROOM_LEAVE);\n        }else {\n            var curScene = cc.director.getScene();\n            var tableScene = curScene.children[0].getComponent('DdzTableScene');\n            if(tableScene && tableScene.tableInfo().getSceneType() == ddz.Enums.SceneType.NORMAL){\n                \n                // var _queueInfo = ddz.matchModel.getCurQueueInfo();\n                // var _playMode;\n                // if (tableScene.tableInfo().playMode) {\n                //     ddz.LOGD(\"\",\"file = [DdzNetWorkCenter] fun = [onRoomLeave] tableScene.tableInfo().playMode = \" + tableScene.tableInfo().playMode);\n                //     _playMode = tableScene.tableInfo().playMode;\n                //\n                // }else if(_queueInfo && _queueInfo.playMode){\n                //     _playMode = _queueInfo.playMode;\n                // }\n                // switch (_playMode){\n                //     case '123': // 经典叫3分\n                //         hall.GlobalFuncs.gotoRoomListScene(1);  // 1 金币 2 癞子\n                //         break;\n                //     case 'wild': // 癞子\n                //         hall.GlobalFuncs.gotoRoomListScene(2);\n                //         break;\n                //     default:\n                //         hall.GlobalFuncs.gotoDdz();\n                // }\n                hall.GlobalFuncs.gotoRoomListScene();\n\n            }\n            else{\n                if (hall.GlobalFuncs && hall.GlobalFuncs.gotoDdz)\n                    hall.GlobalFuncs.gotoDdz();\n            }\n\n            this.canNotLeave = false;\n        }\n    },\n\n    /**\n     * 收到TCP消息\n     */\n    onReceiveTCP_Msg : function(value){\n        var msgCmd = value.cmd;\n        // if(msgCmd == 'table_info'){\n        //     this.haveTableInfo = true;\n        // }\n        // if(msgCmd == 'table_call'){\n        //     if(this.haveTableInfo){\n        //         hall.onHide = true;\n        //         var date = new Date().getTime();\n        //         hall.GlobalFuncs.setInLocalStorage(ddz.matchModel.ONHIDE_DATE, date);\n        //         ty.NotificationCenter.trigger(ddz.EventType.GAME_HIDE);\n        //         ty.TCP.close();\n        //     }\n        // }\n        var result = value.result;\n        if (result){\n            var gameId = result.gameId;\n            if (gameId === ty.SystemInfo.gameId){\n                //游戏消息在这里处理\n                var func = this.cmdMap[msgCmd];\n                if (func){\n                    func.call(this, value);\n                }\n                else{\n                    ty.NotificationCenter.trigger(msgCmd, value);\n                    ddz.LOGD(this._TAG, \"未注册关于消息 ： \" + msgCmd + \" 的监听！\");\n                }\n            }\n        }\n    },\n\n    onHallInfo : function (val) {\n        //解析Hall_info,本地缓存\n        // ddz.HallInfoModel.parseHallInfo(val.result);\n        // var data = argument[0]['result'];\n        hall.gameWorld.parseNormalRooms(val.result);\n        ddz.gameModel.getMatchList();\n\n        ty.NotificationCenter.trigger(ddz.EventType.UPDATE_HALL_INFO);\n    },\n\n    onQuickStart: function(argument) {\n\n        ddz.LOGD(\"\",\"file = [DdzNetWorkCenter] fun = [onQuickStart]\");\n        // var noDelete = false;\n        var curScene = cc.director.getScene();\n        //\n        // if (curScene.name != \"TableScene\") {\n        //     noDelete = true;\n        //     ty.NotificationCenter.trigger(ddz.EventType.REMOVE_MATCHING,noDelete);  // 去掉队列加载弹窗\n        // }\n\n        var result = argument[\"result\"];\n        var success = result[\"isOK\"] === true;\n        if (success) {\n            if (typeof(result[\"roomId\"]) != 'undefined' && result[\"roomId\"] != 0) {\n                ddz.quickStartModel.parse(argument);\n            }\n        } else {\n            if (curScene.name == \"RoomListScene\"){\n                // 当前正在房间列表,会有别的相应的提示窗,\n            }else {\n                hall.MsgBoxManager.showToast({title : '进入房间失败'});\n            }\n        }\n    },\n\n    /**\n     * 关于table_info 消息,如果是第一次进桌,table_info,会比较慢的来,如果是断线重连,基本会和quick_start消息同时来\n     * 这里,还没有来得及创建牌桌,会造成消息丢失,这个消息要进行缓存。\n     * @param argument\n     */\n    onTableInfo: function(argument) {\n        ddz.Share.isMatchShare = false;\n        ddz.tableInfoModel.parse(argument);\n        var curScene = cc.director.getScene();\n        var noDelete = false;\n\n        if (curScene.name != \"TableScene\") {\n            //牌桌外收到table_info,进入牌桌\n            noDelete = true;\n            ty.NotificationCenter.trigger(ddz.EventType.REMOVE_MATCHING, noDelete);  // 去掉队列加载弹窗\n            ddz.gameModel.isLoadTableScene = true;\n            requestAnimationFrame(function () {\n                hall.GlobalFuncs.gotoDdzTable();\n            });\n        }\n    },\n\n    onRoom: function(argument) {\n        ddz.matchModel.parse(argument);\n    },\n\n    onGame: function(argument) {\n        hall.LOGD(\"hello\",\"parseGame\");\n        ddz.gameModel.parseGame(argument);\n    },\n    // onCash : function (argument) {\n    //     ty.NotificationCenter.trigger(ddz.EventType.UPDATE_CASH_RESULT,argument);\n    // },\n    onUpdateChangedData: function(argument) {\n        hall.LOGD(this._TAG, \"onUpdateGold -------------------------\");\n        //解析数据\n        if (typeof(argument) != 'undefined') {\n            //hall.ME.parseUserInfo(argument[0]);\n            var result = argument[\"result\"];\n            if (typeof(result) != 'undefined' && typeof(result['changes']) != 'undefined') {\n                var gameId = result.gameId;\n                hall.LOGD(this._TAG, 'gameid = ' + gameId);\n                for (var i = 0; i < result['changes'].length; i++) {\n                    var curValue = result[\"changes\"][i];\n                    if (typeof(curValue) == 'undefined') {\n                        continue;\n                    }\n\n                    if (curValue == 'gdata') {\n                        hall.LOGD(this._TAG, \"update_notify,更新gdata\");\n                        hall.MsgFactory.getGameData(gameId);\n                    } else if (curValue == 'item') {\n                        hall.LOGD(this._TAG, \"update_notify,更新道具\");\n                        hall.MsgFactory.getBagInfo();\n                    }\n                    //金币，钻石\n                    else if (curValue == \"udata\") {\n                        hall.LOGD(this._TAG, \"update_notify,更新钻石金币\");\n                        hall.MsgFactory.getUserInfo(gameId);\n                    }\n                }\n            }\n        }\n    }\n};\n\nddz.NetWorkCenter.boot();"]}