{"version":3,"sources":["PlayerPanel.js"],"names":["cc","Class","extends","Component","ctor","_TAG","initWithPar","bLeft","bTop","playContrl","index","_bLeft","_bTop","_playController","_userInfo","_playedCards","_leftTime","_index","reset","properties","avatar","Node","head","boor","landlord","lblMsg","Label","lblNum","lblNumBg","Sprite","aniJingDeng","lblTimer","cardNode","waitTimer","chatButton","default","type","Button","onLoad","ty","NotificationCenter","listen","ddz","EventType","SHOW_GAME_WIN_ANI","onShoGameWinAni","REMOVE_TABLE_ANI","onRemoveAni","GAME_HIDE","onGameHide","node","on","onChatButton","_cardBaseScale","removeFromParent","LOGD","clickChatButton","getAvatarCom","getComponent","getIsFriend","tableInfo","getSceneType","Enums","SceneType","FRIEND","getIsGold","_playcontroller","NORMAL","dizhuWin","dizhuIndex","_tableState","normalInfo","m_dizhu","myIndex","getMyIndex","widx","aniName","hideAll","active","setChatButtonActive","setLblMsg","stopJingDengAni","isAvtive","start","force","setLblNum","setVisible","clearCards","resetAvatar","setPlayerName","setPrepareVisible","bVisible","setDizhuHead","scale","cardCom","length","pop","returnCard","GlobalFuncs","getTopIndex","_mySeatIndex","getPreIndex","GetNextIndex","refreshAvatarForeFriend","origin","initData","that","nextCallBack","isDiZhu","requestAnimationFrame","refreshCardsNum","refreshAvatarForeFriendOrigin","_topSeatinfo","model","user_info","_leftSeatinfo","_rightSeatinfo","refreshWithUserInfo","slice_name","hall","SliceStringToLength","udataInfo","m_name","url","m_purl","setAvatarUrl","getUserInfo","data","showJiaodz","call","name","audioName","getIsMale","grab","_tableInfo","config","m_grab","_mDizhuCalled","AudioHelper","playEffect","EffectPath_mp3","showJiaodzOnlyNumber","showCards","cardNums","bDizhu","_addCardsIntoContainer","widthOutAudioEffect","seat_info","leftNum","m_card","changeShowLeftNum","playJingDengAni","path","sexStr","animationCom","Animation","ani","getAnimationState","play","bSort","withAni","len","breakline","PLAYED_CARDS_MAXINLINE","card","i","createNewCard","showMask","push","sort","SortCardFunc","container","cardSize","CARD_BIG_SIZE","splitWidth","px","py","startPosX","width","canShowTag","Math","floor","setPosition","parent","zIndex","showTag","setDiZhuTag","showDropEffect","val","isValid","string","e","LOGE","setClockVisible","time","showTimer","hideTimer","valTime","unscheduleAllCallbacks","schedule","m_sex","PlayerSexEnum","SEX_MALE","playCards","MSG_TEXT_BUCHU","filename","card_types","RobotGlobal","judgeType","playAnimationSoundByCardType","playTopCards","onDestroy","ignoreScope"],"mappings":"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","file":"PlayerPanel.js","sourceRoot":"../../../../../../assets/Script/ComponentScript/component","sourcesContent":["/**\n * 玩家面板\n */\ncc.Class({\n    extends: cc.Component,\n\n    ctor:function () {\n        this._TAG = \"h5.playPlayerNode\";\n    },\n\n    initWithPar:function (bLeft, bTop, playContrl, index) {\n        this._bLeft = bLeft;\n        this._bTop = bTop;\n        this._playController = playContrl;\n        this._userInfo = null;\n        this._playedCards = [];\n        this._leftTime = -1;\n        this._index = index;\n        this.reset();\n    },\n\n    properties: {\n        avatar : cc.Node,\n        head:cc.Node,\n        boor:cc.Node,\n        landlord:cc.Node,\n        lblMsg : cc.Label,\n        lblNum : cc.Label,\n        lblNumBg : cc.Sprite,\n        aniJingDeng : cc.Node,\n        lblTimer : cc.Label,\n        cardNode : cc.Node,\n        waitTimer : cc.Node,\n        chatButton : {      // 互动表情按钮\n            default : null,\n            type : cc.Button\n        }\n\n    },\n\n    onLoad: function() {\n        ty.NotificationCenter.listen(ddz.EventType.SHOW_GAME_WIN_ANI, this.onShoGameWinAni, this);\n        ty.NotificationCenter.listen(ddz.EventType.REMOVE_TABLE_ANI, this.onRemoveAni, this);\n        ty.NotificationCenter.listen(ddz.EventType.GAME_HIDE, this.onGameHide, this);\n\n        this.chatButton.node.on(\"click\" , this.onChatButton, this);\n        this._cardBaseScale = 0.52;\n        // this.hideAll();\n    },\n\n    onRemoveAni:function () {\n        this.aniJingDeng.removeFromParent();\n    },\n\n    onGameHide:function () {\n        // this.setClockVisible(false);\n        // this.stopJingDengAni();\n        // this.clearCards();\n    },\n    onChatButton: function() {\n        ddz.LOGD(null, \"onChatButton index = \" + this._index);\n        if (this._userInfo) {\n            this._playController.clickChatButton(this._index);\n        }\n    },\n    getAvatarCom : function () {\n        return this.avatar.getComponent('Avatar');\n    },\n\n    getIsFriend:function () {\n        return this._playController.tableInfo().getSceneType() == ddz.Enums.SceneType.FRIEND;\n    },\n    getIsGold:function () {\n        return this._playcontroller.tableInfo().getSceneType() == ddz.Enums.SceneType.NORMAL;\n    },\n\n    onShoGameWinAni:function (dizhuWin) {\n        var dizhuIndex = this._playController._tableState.normalInfo.m_dizhu;\n        var myIndex = this.getMyIndex();\n\n        var widx = 0;\n\n        var aniName;\n        if (dizhuWin){\n            if (myIndex == dizhuIndex){\n                aniName = \"shengli\";\n            }\n            else{\n                aniName = \"shibai\";\n                widx = 1;\n            }\n        }\n        else{\n            if (myIndex == dizhuIndex){\n                aniName = \"shibai\";\n                widx = 1;\n            }\n            else{\n                aniName = \"shengli\";\n            }\n        }\n\n    },\n\n    hideAll: function () {\n        this.avatar.active = false;\n        this.head.active = false;\n        this.setChatButtonActive(false);\n        this.waitTimer.active = false;\n\n        this.setLblMsg(\" \");\n        this.stopJingDengAni();\n\n    },\n\n    setChatButtonActive: function(isAvtive) {\n        this.chatButton.node.active = isAvtive;\n    },\n\n    start: function() {\n\n    },\n\n    // update (dt) {},\n\n    //恢复到没有玩家的状态\n    reset: function(force) {\n\n        this.hideAll();\n\n        if (force || !this.getIsFriend()){\n            this._userInfo = null;  //好友场,不清此数据\n        }\n\n        this._leftTime = -1;\n        this.setLblNum(\"\");\n        this.lblNumBg.setVisible(false);\n        this.stopJingDengAni();\n        this.clearCards();\n        if (force){\n            if (this.getIsFriend()){\n                //好友桌,需要把原来头像显示回来\n                // this.avatar.active = true;\n                this.head.active = true;\n                // var myAvatarM = this.avatar.getComponent(\"Avatar\");\n                // myAvatarM.hideDizhuHat();\n                // this.setChatButtonActive(true);\n            }\n            this.getAvatarCom().resetAvatar();\n            this.getAvatarCom().setPlayerName(\"\");\n        }\n        else{\n            if (this.getIsFriend()){\n                //好友桌,需要把原来头像显示回来\n                // this.avatar.active = true;\n                this.head.active = true;\n                // var myAvatarM = this.avatar.getComponent(\"Avatar\");\n                // myAvatarM.hideDizhuHat();\n                // this.setChatButtonActive(true);\n            }\n            else{\n                this.getAvatarCom().resetAvatar();\n                this.getAvatarCom().setPlayerName(\"\");\n            }\n        }\n        this.boor.active = true;\n        this.landlord.active = false;\n    },\n\n    //设置“准备”是否显示，和图片\n    setPrepareVisible: function(bVisible) {\n        this.setLblMsg(bVisible ? \"已准备\" : \" \");\n    },\n\n    setDizhuHead:function(){\n        this.head.active = true;\n        this.boor.active = false;\n        this.landlord.active = true;\n    },\n\n    /**\n     * 清空所有手牌\n     */\n    clearCards: function() {\n        this.cardNode.scale = 0.52;\n        //手牌回池\n        var cardCom;\n        while (this._playedCards.length > 0){\n            cardCom = this._playedCards.pop();\n            this._playController.returnCard(cardCom.node);\n        }\n    },\n\n    getMyIndex:function () {\n        var myIndex;\n        if (this._bTop) {\n            myIndex = ddz.GlobalFuncs.getTopIndex(this._playController._mySeatIndex);\n        } else {\n            if (this._bLeft){\n                myIndex = ddz.GlobalFuncs.getPreIndex(this._playController._mySeatIndex);\n            }\n            else{\n                myIndex = ddz.GlobalFuncs.GetNextIndex(this._playController._mySeatIndex);\n            }\n        }\n        return myIndex;\n    },\n    \n    /**\n     * 转换动画形像\n     * @param origin 好友桌\n     */\n    refreshAvatarForeFriend : function (origin) {\n        this.initData();\n\n        // this.avatar.active = true;\n        this.head.active = true;\n        var dizhuIndex = this._playController._tableState.normalInfo.m_dizhu;\n        var myIndex = this.getMyIndex();\n\n        var that = this;\n        var nextCallBack = function () {\n            var isDiZhu = myIndex == dizhuIndex;\n            if(isDiZhu){\n                // var to_pos =  that._playController.getEmoPos(myIndex);\n                // if(origin){\n                //     that._playController.showDizhuHatOrigin(to_pos);\n                // }else {\n                //     that._playController.showDizhuHat(to_pos);\n                // }\n\n                that.setDizhuHead();\n            }\n        };\n        requestAnimationFrame(nextCallBack);\n        this.refreshCardsNum();\n\n        // var isMale = this.getIsMale();\n        // var myAvatarM = this.avatar.getComponent(\"Avatar\");\n\n        // else {\n        //     myAvatarM.hideDizhuHat();\n        // }\n\n        //确定角色后,牌的数量也就确定了,这个时候,要刷新手牌数量\n\n    },\n    /**\n     * 转换动画形像\n     */\n    refreshAvatarForeFriendOrigin : function () {\n        // this.avatar.active = true;\n        this.head.active = true;\n        var dizhuIndex = this._playController._tableState.normalInfo.m_dizhu;\n        var that = this;\n        var nextCallBack = function () {\n            var myIndex = that.getMyIndex();\n            var isDiZhu = myIndex == dizhuIndex;\n            if(isDiZhu){\n                // var to_pos =  that._playController.getEmoPos(myIndex);\n                // that._playController.showDizhuHatOrigin(to_pos);\n\n                that.setDizhuHead();\n            }\n        };\n        requestAnimationFrame(nextCallBack);\n    },\n\n    initData:function () {\n        if (this._userInfo){\n            return;\n        }\n        if (this._bTop) {\n            this._userInfo = this._playController._topSeatinfo.model.user_info;\n        } else {\n            this._userInfo = this._bLeft ? this._playController._leftSeatinfo.model.user_info : this._playController._rightSeatinfo.model.user_info;\n        }\n    },\n\n    refreshWithUserInfo: function() {\n        //调用此方法时可能刷新了user_info，需要去取出最新的\n\n        this.hideAll();\n        this.initData();\n\n        if (!this._userInfo){\n            //没有用户信息,就不再执行,因为有可能还没开桌,玩家就走了\n            return;\n        }\n\n        // this.avatar.active = true; //显示头像\n        this.head.active = true;\n\n        if (this.getIsFriend()){\n            //好友桌,进来后,互动表情就可以点击\n            // this.setChatButtonActive(true);\n        }\n        var slice_name = hall.GlobalFuncs.SliceStringToLength(this._userInfo.udataInfo.m_name, 10); //最多显示10个字符\n        this.getAvatarCom().setPlayerName(slice_name);\n\n        var url = this._userInfo.udataInfo.m_purl;\n        if (url.length > 0) {\n            this.getAvatarCom().setAvatarUrl(url);\n        }\n    },\n    \n    getUserInfo:function(){\n        var data = {};\n        data.url = this._userInfo.udataInfo.m_purl;\n        \n    },\n\n    showJiaodz: function(call) {\n        var name;\n        var audioName = this.getIsMale() ? \"man_\" : \"female_\";\n        var grab = this._playController._tableInfo.config.m_grab;\n        if (grab == 1) {\n            if (this._playController._mDizhuCalled) { //抢地主\n                name = call > 0 ? \"抢地主\" : \"不抢\";\n                audioName += call > 0 ? \"rob_dizhu\" : \"not_rob\";\n            } else { //叫地主\n                name = call > 0 ? \"叫地主\" : \"不叫\";\n                audioName += call > 0 ? \"call_dizhu\" : \"not_call\";\n            }\n        } else {\n            name = call > 0 ? call + \"分\" : \"不叫\";\n            audioName += call > 0 ? call + \"_point\" : \"not_call\";\n        }\n        this.setLblMsg(name);\n        ddz.LOGD(this._TAG, 'audioName=' + audioName);\n\n        ddz.AudioHelper.playEffect(ddz.EffectPath_mp3[audioName], false);\n    },\n    showJiaodzOnlyNumber: function(call) {\n        var name;\n        var grab = this._playController._tableInfo.config.m_grab;\n        if (grab == 1) {\n            //抢地主~~~\n            // if (this._playController._mDizhuCalled) { //抢地主\n            //     name = call > 0 ? \"抢地主\" : \"不抢\";\n            // } else { //叫地主\n            //     name = call > 0 ? \"叫地主\" : \"不叫\";\n            // }\n        } else {\n            if(call == -1){\n                return;\n            }\n            name = call > 0 ? call + \"分\" : \"不叫\";\n        }\n        this.setLblMsg(name);\n    },\n\n    showCards: function(cardNums, bDizhu) {\n        if (cardNums.length > 0){\n            //当手里还有牌时,明牌\n            this._addCardsIntoContainer(cardNums, true, bDizhu);\n        }\n    },\n\n    /**\n     * 刷新剩余牌数\n     * @param widthOutAudioEffect 是否在刷新剩余牌数的时候,不播放音效\n     */\n    refreshCardsNum: function(widthOutAudioEffect) {\n        var seat_info;\n        if (this._bTop) {\n            seat_info = this._playController._topSeatinfo;\n        } else {\n            seat_info = this._bLeft ? this._playController._leftSeatinfo : this._playController._rightSeatinfo;\n        }\n        var leftNum = seat_info.model.m_card.length;\n        this.changeShowLeftNum(leftNum);\n\n        if (leftNum < 3 && !this.aniJingDeng.active){\n            //显示警灯动画\n            this.playJingDengAni();\n        }\n\n        if (!widthOutAudioEffect){\n            var path;\n            var sexStr = this.getIsMale() ? \"man_\" : \"female_\";\n            if (leftNum == 2) {\n                path = sexStr + \"I_got_left_two_cards\";\n            } else if (leftNum == 1) {\n                path = sexStr + \"I_got_left_one_cards\";\n            }\n\n            if (path){\n                ddz.LOGD(null, 'playEffect=' + path);\n                ddz.AudioHelper.playEffect(ddz.EffectPath_mp3[path], false);\n            }\n        }\n    },\n\n    changeShowLeftNum:function (leftNum) {\n        this.setLblNum(\"\" + leftNum);\n        this.lblNumBg.setVisible(true);\n    },\n\n    playJingDengAni:function () {\n        //显示警灯动画\n        this.aniJingDeng.active = true;\n        var animationCom = this.aniJingDeng.getComponent(cc.Animation);\n        var ani = animationCom.getAnimationState('jingdeng_anim');\n        ani.play();\n    },\n\n    stopJingDengAni:function () {\n        this.aniJingDeng.active = false;\n    },\n\n    _addCardsIntoContainer: function(cardNums, bSort, bDizhu, withAni) { //bSort表明牌是否需要排序，出牌时不需要，展示牌时需要\n\n        this.clearCards();\n\n        var len = cardNums.length;\n        var breakline = ddz.PLAYED_CARDS_MAXINLINE;\n        // var cards = [];\n        var card, cardCom;\n        for (var i = 0; i < len; i++) {\n            card = this._playController.createNewCard(cardNums[i]);\n            cardCom = card.getComponent('Card');\n            cardCom.showMask(false);\n            this._playedCards.push(cardCom);\n        }\n\n        if (bSort) {\n            this._playedCards.sort(ddz.GlobalFuncs.SortCardFunc);\n        }\n\n        var container = this.cardNode;\n\n\n        var cardSize = ddz.CARD_BIG_SIZE;\n        var splitWidth = 60;\n\n        var px, py;\n        //这两个变量是为了计算右边玩家的手牌坐标用的\n        var startPosX = 0;\n        if (!this._bLeft){\n            //右侧玩家,上家,这个值是负值,需要计算\n            startPosX = ((len < breakline ? len : breakline) - 1) * splitWidth + cardSize.width;\n            startPosX += 20;\n        }\n\n        var canShowTag;\n        for (var index = 0; index < len; index++) {\n            cardCom = this._playedCards[index];\n            card = cardCom.node;\n\n            px = (index % breakline) * splitWidth - startPosX;\n            py = -Math.floor(index/breakline) * 56;\n\n            card.setPosition(px, py);\n            card.parent = container;\n            card.zIndex = index;\n\n            canShowTag = ddz.GlobalFuncs.canShowTag(breakline, len, index);\n\n            cardCom.showTag(canShowTag);\n            cardCom.setDiZhuTag(bDizhu && canShowTag);\n        }\n\n        if (withAni){\n            ddz.GlobalFuncs.showDropEffect(this._cardBaseScale, container);\n        }\n    },\n\n    setLblMsg:function (val) {\n        if (!cc.isValid(this.lblMsg)) return;\n        if (val){\n            this.lblMsg.node.active = true;\n            this.lblMsg.string = val;\n        }\n        else{\n            this.lblMsg.node.active = false;\n        }\n    },\n\n\n    setLblNum:function (val) {\n        if (!cc.isValid(this.lblNum)) return;\n        if (val){\n            this.lblNum.node.active = true;\n            try{\n                this.lblNum.string = val;\n            }\n            catch (e){\n                hall.LOGE(\"setLblNum error:\", val);\n            }\n        }\n        else{\n            this.lblNum.node.active = false;\n        }\n    },\n\n    //设置clock的显示状态和时间\n    setClockVisible: function(bVisible, time) {\n\n        this.clearCards();\n        this.setLblMsg(\" \");\n        if (bVisible){\n            this.showTimer(time);\n        }\n        else{\n            this.hideTimer();\n        }\n    },\n\n    /**\n     * 显示时钟\n     * @param valTime 秒\n     */\n    showTimer:function (valTime) {\n        if (!cc.isValid(this.lblTimer)) return;\n        this._leftTime = valTime;\n\n        this.waitTimer.active = true;\n        this.lblTimer.string = this._leftTime ? this._leftTime +\"\" : \" \";\n        this.unscheduleAllCallbacks();\n\n        this.schedule(function () {\n            this._leftTime--;\n            if (this._leftTime < 0){\n                this.hideTimer();\n                return;\n            }else if (this._leftTime == 0){\n                //好友桌倒计时到0,不隐藏\n                if (this.getIsFriend()){\n                    this.lblTimer.string = \"0\";\n                    this.unscheduleAllCallbacks();\n                    return;\n                }\n            }\n            this.lblTimer.string = this._leftTime ? this._leftTime +\"\" : \" \";\n        }, 1, this);\n    },\n\n    /**\n     * 隐藏时钟\n     */\n    hideTimer:function () {\n        this.unscheduleAllCallbacks();\n        this.waitTimer.active = false;\n    },\n\n    getIsMale:function () {\n        //有问题,容错\n        if(this._userInfo && this._userInfo.udataInfo ){\n            return this._userInfo.udataInfo.m_sex == ddz.Enums.PlayerSexEnum.SEX_MALE;\n        }\n        return true;\n    },\n\n    /**\n     * 出牌\n     * @param cardNums 牌数组\n     * @param bDizhu 是否为地主\n     */\n    playCards: function(cardNums, bDizhu) {\n        ddz.LOGD(this._TAG, \"playCards\");\n        var len = cardNums.length;\n        if (len <= 0) {\n            this.setLblMsg(ddz.MSG_TEXT_BUCHU);\n            var filename = this.getIsMale() ? \"man_no\" : \"female_no\";\n            ddz.LOGD(this._TAG, 'playEffect=' + filename);\n            ddz.AudioHelper.playEffect(ddz.EffectPath_mp3[filename], false);\n            return;\n        }\n\n        var card_types = ddz.RobotGlobal.judgeType(cardNums, false);\n\n        this._playController.playAnimationSoundByCardType(card_types[0], this.getIsMale());\n        this.setLblMsg(\" \");\n\n        this._addCardsIntoContainer(cardNums, false, bDizhu, true);\n\n        this.refreshCardsNum();\n    },\n\n    /**\n     * 恢复上手牌,用于断线重连的情况\n     * @param cardNums 要发的上手牌\n     * @param bDizhu 是否为地主\n     */\n    playTopCards:function (cardNums, bDizhu) {\n        ddz.LOGD(this._TAG, \"playTopCards\");\n        this.setLblMsg(\" \");\n        this._addCardsIntoContainer(cardNums, false, bDizhu);\n        this.refreshCardsNum(true);\n    },\n\n    onDestroy:function () {\n        this._playController = null;\n        this._userInfo = null;\n        this._playedCards = null;\n        ty.NotificationCenter.ignoreScope(this);\n\n        this.hideTimer();\n    }\n});"]}