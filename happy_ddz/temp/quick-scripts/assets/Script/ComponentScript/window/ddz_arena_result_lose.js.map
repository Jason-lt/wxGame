{"version":3,"sources":["ddz_arena_result_lose.js"],"names":["cc","Class","extends","Component","ctor","properties","rankLable","Label","shareBtn","Button","onceMoreBtn","aniNode","Node","btnBack","onLoad","ddz","matchModel","isShowingRevive","Share","isMatchShare","ty","NotificationCenter","listen","onSigninFail","onSigninSuccess","EventType","RECEIVE_MATCH_WAIT_STATE","onMatchWait","ani","getComponent","Animation","play","backButtonH","GlobalFuncs","getBackButtonPositionY","node","y","value","showTipsWindow","tipsString","buttonStr","preFabPath","comName","hall","showPopWinByPreFab","preFabNode","window","tiString","setTitleContentAndButtonsString","title","callFunc","setOverInfo","overInfo","string","rank","shareKeywordReplace","arenaRanking","cleanWaitInfo","updateRankLabel","rankRewards","onClickShare","shareWithType","onShareType","clickStatShareTypeArenaLose","onClickOnceMore","matchSignin","roomId","matchId","removeAni","trigger","REMOVE_TABLE_ANI","RESET_TABLE","removeFromParent","onClickBack","ignoreScope","shut","popScene","ARENA_BACK_TO_SCENE","state","destroy","arenaResultPanel","onDestroy"],"mappings":"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","file":"ddz_arena_result_lose.js","sourceRoot":"../../../../../../assets/Script/ComponentScript/window","sourcesContent":["\n// var ddz_main = cc.instantiate(this.tipsWindow);\n// this.node.addChild(ddz_main);\n// var window = ddz_main.getComponent('ddz_fail');\n// window.setDiamondCount(\"五\",\"56\");\ncc.Class({\n    extends: cc.Component,\n    ctor:function () {\n\n    },\n\n    properties: {\n        rankLable: cc.Label,\n        shareBtn: cc.Button,\n        onceMoreBtn: cc.Button,\n        aniNode: cc.Node,\n        btnBack : cc.Button\n    },\n\n    onLoad:function () {\n        //var backButtonH = ddz.GlobalFuncs.getBackButtonPositionY();\n        //if (backButtonH){\n        //    this.backButton.node.y = backButtonH;\n        //}\n        ddz.matchModel.isShowingRevive = false;\n        ddz.Share.isMatchShare = false;\n        ty.NotificationCenter.listen(\"signin_fail\", this.onSigninFail, this);\n        ty.NotificationCenter.listen(\"signin_success\", this.onSigninSuccess, this);\n        ty.NotificationCenter.listen(ddz.EventType.RECEIVE_MATCH_WAIT_STATE, this.onMatchWait, this);\n        var ani = this.aniNode.getComponent(cc.Animation);\n        ani.play('zaijiezaili');\n\n        var backButtonH = ddz.GlobalFuncs.getBackButtonPositionY();\n        if (backButtonH){\n            this.btnBack.node.y = backButtonH;\n        }\n    },\n\n    onSigninFail: function(value) {\n        //报名失败\n        //this.showTipsWindow(value.error.info, \"确定\");\n    },\n\n    onSigninSuccess: function() {\n        //报名成功\n        //this.removeAni();\n        //ty.NotificationCenter.ignoreScope(this);\n        //this.node.destroy();\n    },\n\n    showTipsWindow : function (tipsString, buttonStr) {\n        var preFabPath = \"prefabs/ddz_window_normal\";\n        var  comName = \"ddz_window_normal\";\n        hall.GlobalFuncs.showPopWinByPreFab(preFabPath, function (preFabNode) {\n            var window = preFabNode.getComponent(comName);\n            var tiString = \"邀请好友\";\n            if(buttonStr){\n                tiString = buttonStr;\n            }\n            window.setTitleContentAndButtonsString(\"提示\",\"<color=#1A6951>\" + tipsString + \"</c>\",[{title:tiString,callFunc:function () {\n                //ddz.Share.shareWithType(ddz.Share.onShareType.clickStatShareTypeGetDiamondHall);\n            }}]);\n        });\n    },\n\n    setOverInfo: function(overInfo) {\n        this.overInfo = overInfo;\n        this.rankLable.string = \"第\" + overInfo.rank + \"名\";\n        ddz.Share.shareKeywordReplace.arenaRanking = overInfo.rank;\n        ddz.matchModel.cleanWaitInfo();\n    },\n\n    updateRankLabel: function(rankRewards) {\n\n    },\n\n    onClickShare: function () {\n        ddz.Share.shareWithType(ddz.Share.onShareType.clickStatShareTypeArenaLose);\n    },\n\n    onClickOnceMore: function() {\n        ddz.matchModel.matchSignin(this.overInfo.roomId, this.overInfo.matchId, 0);\n    },\n\n    removeAni : function () {\n        ty.NotificationCenter.trigger(ddz.EventType.REMOVE_TABLE_ANI);\n        ty.NotificationCenter.trigger(ddz.EventType.RESET_TABLE);\n        this.node.removeFromParent();\n    },\n\n    onClickBack: function() {\n        this.removeAni();\n        ty.NotificationCenter.ignoreScope(this);\n        this.shut();\n        hall.GlobalFuncs.popScene();\n        ty.NotificationCenter.trigger(ddz.EventType.ARENA_BACK_TO_SCENE);\n    },\n\n    onMatchWait: function(state) {\n        ddz.matchModel.onMatchWait(state);\n        this.removeAni();\n        ty.NotificationCenter.ignoreScope(this);\n        this.node.destroy();\n    },\n\n    shut:function () {\n        ddz.arenaResultPanel = null;\n        this.node.destroy();\n    },\n\n    onDestroy: function() {\n        ty.NotificationCenter.ignoreScope(this);\n    },\n    // update (dt) {},\n});\n"]}