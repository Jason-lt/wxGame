{"version":3,"sources":["FriendModule.js"],"names":["cc","Class","extends","Component","properties","btnBack","Button","jifenNode","Node","jifenLeftNode","jifenRightNode","bigBtnNode","bottomNode","lblDiFen","Label","btnInvite","btnReady","btnDuiJu","btnRecord","btnChat","disbinds","namesForSeat","lblNum","shouldLeave","disbindResult","recordNode","recordProgressNode","recordProgressSprite","Sprite","recordProgressFrame","SpriteFrame","recordNowIndex","recordBackNode","rbar","recordTip","leftMsgAni","rightMsgAni","selfMsgAni","chatNode","leftMsgNode","rightMsgNode","selfMsgNode","game_result","Prefab","allMsgShowTime","leftShowTime","rightShowTime","selfShowTime","ctor","resetStartTime","_isOnRecord","_maxRecordTime","_cancelRecord","chatStringList","_recordTime","setTableScene","val","_tableScene","refresh","ftInfo","tableInfo","setBtnReadyState","allComplete","_mySeatinfo","model","m_state","ddz","Enums","SeatState","SEATDZSTAT_WAIT","myAvatar","active","_tableState","normalInfo","TableState","TABLEDSTAT_PLAYING","updateDuiJuBtnLabel","debugMode","string","ftId","m_call","_refreshMultipleLabel","updateMultiple","baseScore","multiple","lbl","node","getChildByName","getComponent","curRound","totalRound","endResultShow","hall","GlobalFuncs","gotoDdz","detailsModel","resuslts","length","isNowin","ty","BiLog","clickStat","UserInfo","clickStatEventType","clickStatEventTypeEndFriendGame","Share","shareKeywordReplace","goodCard","onShowDetail","Timer","setTimer","leaveAction","unscheduleAllCallbacks","reciveOnHide","onLoad","NotificationCenter","listen","EventType","UPDATE_PLAYER_INFO","_onUpdateInfo","GAME_READY","_onGameReady","ACTION_FT_DISBIND","reciveFtDisbind","ACTION_FT_REQ_DISBIND","reciveDisbind","ACTION_FT_REQ_DISBIND_ANSWER","reciveDisbindAnswer","ACTION_FT_REQ_DISBIND_RESULT","reciveDisbindResult","ACTION_END_RESULT_SHOW","GAME_HIDE","FTINFO_CHANGE","onFtInfoChange","NetWorkCenter","canNotLeave","backButtonH","getBackButtonPositionY","y","on","TOUCH_START","_onRecordBtnTouchBegan","TOUCH_MOVE","_onRecordBtnTouchMoved","TOUCH_END","_onRecordBtnTouchEnded","TOUCH_CANCEL","_onRecordBtnTouchCancel","STOP_RECORD","_onRecordComplete","ERROR_RECORD","_onRecordError","START_PLAY_TABLE_CHAT","_onStartPlayTableChat","SHOW_TABLE_CHAT","_onShowPlayTableChat","END_PLAY_TABLE_CHAT","_onEndTableChat","REMOVE_TABLE_ANI","_onRemoveAni","systemType","SYSTEMTYPE","iPhoneXType","wid","Widget","bottom","widL","top","widR","initScore","obj","userPanel","pos","type","onBtnChat","removeFromParent","seatId","GetNextIndex","_mySeatIndex","_showChatAni","getPreIndex","result","parseInt","_showChatMsgRight","msg","_stopChatAni","aniNode","ani","Animation","play","msgNode","msgString","nodeMa","setDetailMsg","stop","audioFilePath","fs","wx","getFileSystemManager","that","scheduleOnce","LOGD","unlinkSync","fileStr","readFileSync","MsgFactory","sendChatMsg","roomId","tableId","onBtnChatDetail","event","sendMsg","LOGE","AudioHelper","getMusicPlayManager","volume","_btnRecordStatePressed","startRecord","recorder","getSetting","success","res","authSetting","authorize","scope","fail","MsgBoxManager","showToast","title","director","openSetting","complete","touch","_point","_startPoint","pauseRecord","resumeRecord","oriIndex","indexp","getRandomNumberBefore","changeNumber","spriteFrame","onBigBtnClick","par0","shareWithType","onShareType","clickStatShareTypeInviteFriend","getReady","state","isStatus","PlayStatus","PLAY_STATUS_GAMEOVER","TABLEDSTAT_IDLE","iscreator","showTipsWindow","friendModel","reqDisbind","tipsString","preFabPath","comName","showPopWinByPreFab","preFabNode","window","parentScene","testArray","setTitleContentAndButtons","onClickRightButton","waitAnswer","ansDisbind","_roomId","onClickLeftButton","clickStatEventTypeFriendRoomDissolveClick","JSON","stringify","setTipsSString","callBack","userId","setDissolvePregrossForCreator","optime","noDissolve","disbindsOwer","name","nameList","setDissolvePregrossForAnswer","push","showWindowTipsForFriend","disbindsR","anser","tipsWindow","changePregross","changeStateToWait","onClose","nameA","setDissolveFailDetailTextString","i","LOGW","setIsOver","deleteDisbindState","refreshDisbindState","disbind","states","stateDic","before","zero","one","oneL","zeroL","concat","preFabNodeAction","reqSeatId","myIndex","leftindex","rightindex","score","getScore","setScore","updateAllScore","delta","getDelta","upDataScore","scroe","lblScoreChange","lblName","deltaStr","getScoreLabel","callFunc","opacity","flyAni","sequence","delayTime","fadeOut","runAction","reSetAddScore","lblScore","scoreNode","setBtnInviteState","onDuiJuBtnClick","clickStatEventTypeFriendRoomDuiju","showResult","_reset","trigger","STOP_MATCHING","_gameResult","game_result_wnd","instantiate","getScene","addChild","showFtResult","onDestroy","tableChatModel","clear","ignoreScope","update","dt"],"mappings":"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","file":"FriendModule.js","sourceRoot":"../../../../../../assets/Script/ComponentScript/window","sourcesContent":["\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        btnBack : cc.Button,\n        jifenNode : cc.Node,\n        jifenLeftNode : cc.Node,\n        jifenRightNode : cc.Node,\n        bigBtnNode : cc.Node,\n        bottomNode : cc.Node,\n        lblDiFen : cc.Label,\n        btnInvite : cc.Button,\n        btnReady : cc.Button,\n        btnDuiJu : cc.Button,\n        btnRecord : cc.Button,\n        btnChat : cc.Button,\n        disbinds : [],\n        namesForSeat :[],\n        lblNum: cc.Label,\n        shouldLeave : false,\n        disbindResult : 0,\n        recordNode:cc.Node,\n        recordProgressNode : cc.Node,\n        recordProgressSprite : cc.Sprite,\n        recordProgressFrame : [cc.SpriteFrame],\n        recordNowIndex : 3,\n        recordBackNode : cc.Node,\n        rbar: cc.Sprite,\n        recordTip : cc.Node,\n        leftMsgAni:cc.Node,\n        rightMsgAni:cc.Node,\n        selfMsgAni:cc.Node,\n        chatNode : cc.Node,\n        leftMsgNode:cc.Node,\n        rightMsgNode:cc.Node,\n        selfMsgNode:cc.Node,\n        game_result : cc.Prefab,\n        allMsgShowTime : 2,\n        leftShowTime : 0,\n        rightShowTime : 0,\n        selfShowTime : 0\n    },\n\n    ctor:function () {\n        this.resetStartTime();\n        this._isOnRecord = false;\n        this._maxRecordTime = 8;\n        this._cancelRecord = false;\n        this.chatStringList = [\"咱们一会儿再开一场!\",\"炸的漂亮!\",\"哎呀,一不小心又赢了。\",\"来呀,互相伤害呀!\",\n            \"稍等一会儿,我马上回来。\",\"来来来，炸我呀!\",\"你的牌打得也太好了!\",\"我等的假花儿都谢了!\"];\n    },\n\n    resetStartTime:function () {\n        this._recordTime = 0;\n    },\n\n    setTableScene:function (val) {\n        this._tableScene = val;\n        this.refresh();\n    },\n\n    refresh:function () {\n        var ftInfo = this._tableScene.tableInfo().ftInfo;\n        this.setBtnReadyState(!ftInfo.allComplete && this._tableScene._mySeatinfo.model.m_state == ddz.Enums.SeatState.SEATDZSTAT_WAIT);\n        this._tableScene.myAvatar.active = this._tableScene._tableState.normalInfo.m_state != ddz.Enums.TableState.TABLEDSTAT_PLAYING;\n        // this._tableScene._leftPlayerController.setClockVisible(false);\n        // this._tableScene._rightPlayerController.setClockVisible(false);\n        this.updateDuiJuBtnLabel();\n\n        if (debugMode){\n            this.lblNum.string = \"牌桌号:\" + this._tableScene.tableInfo().ftInfo.ftId;\n        }\n\n        if (this._tableScene._tableState && this._tableScene._tableState.normalInfo.m_call > -1){\n            this._tableScene._refreshMultipleLabel(false, true, true);\n        }\n    },\n\n    updateMultiple:function (baseScore, multiple) {\n        this.lblDiFen.string = baseScore + \"分 x \" + multiple + \"倍\";\n    },\n\n    updateDuiJuBtnLabel:function () {\n        var lbl = this.btnDuiJu.node.getChildByName('Label').getComponent(cc.Label);\n        lbl.string = this._tableScene.tableInfo().ftInfo.curRound+\"/\" + this._tableScene.tableInfo().ftInfo.totalRound + \"局\";\n    },\n\n    endResultShow : function () {\n        if(this.shouldLeave && this._tableScene.tableInfo().ftInfo.curRound < 1){\n            hall.GlobalFuncs.gotoDdz();\n            return;\n        }\n        // hall.GlobalFuncs.gotoDdz();\n        // if (hall.GlobalFuncs && hall.GlobalFuncs.gotoDdz)\n        if(this.disbindResult == 1){\n            if(ddz.detailsModel.resuslts.length <= 0 || ddz.detailsModel.isNowin == 1){\n                hall.GlobalFuncs.gotoDdz();\n            }else {\n                ty.BiLog.clickStat(ty.UserInfo.clickStatEventType.clickStatEventTypeEndFriendGame,\n                    [this._tableScene.tableInfo().ftInfo.totalRound,\n                        this._tableScene.tableInfo().ftInfo.curRound,\n                        ddz.Share.shareKeywordReplace.goodCard]);\n                hall.GlobalFuncs.onShowDetail();\n                this.shouldLeave = true;\n                ty.Timer.setTimer(this,this.leaveAction,300);\n            }\n        }\n    },\n    leaveAction : function () {\n        this.unscheduleAllCallbacks();\n        hall.GlobalFuncs.gotoDdz();\n    },\n    reciveOnHide : function () {\n    },\n    onLoad : function() {\n        ty.NotificationCenter.listen(ddz.EventType.UPDATE_PLAYER_INFO, this._onUpdateInfo, this);\n        ty.NotificationCenter.listen(ddz.EventType.GAME_READY, this._onGameReady, this);\n        ty.NotificationCenter.listen(ddz.EventType.ACTION_FT_DISBIND,this.reciveFtDisbind,this);\n        ty.NotificationCenter.listen(ddz.EventType.ACTION_FT_REQ_DISBIND,this.reciveDisbind,this);\n        ty.NotificationCenter.listen(ddz.EventType.ACTION_FT_REQ_DISBIND_ANSWER,this.reciveDisbindAnswer,this);\n        ty.NotificationCenter.listen(ddz.EventType.ACTION_FT_REQ_DISBIND_RESULT,this.reciveDisbindResult,this);\n        // ty.NotificationCenter.listen(ddz.EventType.ACTION_CAN_ROOM_LEAVE,this.reciveCanRoomLeave,this);\n        ty.NotificationCenter.listen(ddz.EventType.ACTION_END_RESULT_SHOW,this.endResultShow,this);\n        ty.NotificationCenter.listen(ddz.EventType.GAME_HIDE,this.reciveOnHide,this);\n\n        ty.NotificationCenter.listen(ddz.EventType.FTINFO_CHANGE, this.onFtInfoChange,this);\n\n        ddz.NetWorkCenter.canNotLeave = true;\n\n        var backButtonH = ddz.GlobalFuncs.getBackButtonPositionY();\n        if (backButtonH){\n            this.btnBack.node.y = backButtonH;\n        }\n\n        this.btnRecord.node.on(cc.Node.EventType.TOUCH_START, this._onRecordBtnTouchBegan, this, true);\n        this.btnRecord.node.on(cc.Node.EventType.TOUCH_MOVE, this._onRecordBtnTouchMoved, this, true);\n        this.btnRecord.node.on(cc.Node.EventType.TOUCH_END, this._onRecordBtnTouchEnded, this, true);\n        this.btnRecord.node.on(cc.Node.EventType.TOUCH_CANCEL, this._onRecordBtnTouchCancel, this, true);\n\n        // var that = this;\n        // ty.Timer.setTimer(this, function () {\n        //     that.upDataScore('my', 200, 6);\n        // }, 5, 0);\n\n        ty.NotificationCenter.listen(ddz.EventType.STOP_RECORD, this._onRecordComplete, this);\n        ty.NotificationCenter.listen(ddz.EventType.ERROR_RECORD, this._onRecordError, this);\n        ty.NotificationCenter.listen(ddz.EventType.START_PLAY_TABLE_CHAT, this._onStartPlayTableChat, this);\n        ty.NotificationCenter.listen(ddz.EventType.SHOW_TABLE_CHAT, this._onShowPlayTableChat, this);\n        ty.NotificationCenter.listen(ddz.EventType.END_PLAY_TABLE_CHAT, this._onEndTableChat, this);\n\n        ty.NotificationCenter.listen(ddz.EventType.REMOVE_TABLE_ANI, this._onRemoveAni, this);\n\n        if(ty.UserInfo.systemType == ty.UserInfo.SYSTEMTYPE.iPhoneXType){\n            var wid = this.bottomNode.getComponent(cc.Widget);\n            wid.bottom = 30;\n            var widL = this.jifenLeftNode.getComponent(cc.Widget);\n            widL.top = 160;\n            var widR = this.jifenRightNode.getComponent(cc.Widget);\n            widR.top = 160;\n        }\n        this.initScore();\n    },\n\n    _onUpdateInfo:function (obj) {\n        var userPanel;\n        if (obj.pos == 'left'){\n            userPanel = this.jifenLeftNode;\n        }\n        else if (obj.pos == 'right'){\n            userPanel = this.jifenRightNode;\n        }\n        userPanel.active = true;\n        if (obj.type == 'leave' || obj.type == 'none'){\n            userPanel.active = false;\n        }\n    },\n    _onGameReady : function () {\n        this.jifenLeftNode.active = true;\n        this.jifenRightNode.active = true;\n    },\n\n    onBtnChat : function () {\n        this.chatNode.active = true;\n    },\n\n    _onRemoveAni:function () {\n        this.leftMsgAni.removeFromParent();\n        this.rightMsgAni.removeFromParent();\n        this.selfMsgAni.removeFromParent();\n    },\n\n    _onStartPlayTableChat:function (seatId) {\n        //打开相应动画\n        if (seatId == ddz.GlobalFuncs.GetNextIndex(this._tableScene._mySeatIndex)) {\n            //是我的下家说话\n            this._showChatAni(this.rightMsgAni);\n        } else if (seatId == ddz.GlobalFuncs.getPreIndex(this._tableScene._mySeatIndex)) {\n            //是我的上家说话\n            this._showChatAni(this.leftMsgAni);\n        } else if (seatId == this._tableScene._mySeatIndex){\n            //是我自己在说话\n            this._showChatAni(this.selfMsgAni);\n        }\n    },\n    _onShowPlayTableChat : function (result) {\n        var seatId = parseInt(result.seatId);\n        if (seatId == ddz.GlobalFuncs.GetNextIndex(this._tableScene._mySeatIndex)) {\n            //是我的下家说话\n            this.rightShowTime = this.allMsgShowTime;\n            this._showChatMsgRight(this.rightMsgNode,result.msg);\n        } else if (seatId == ddz.GlobalFuncs.getPreIndex(this._tableScene._mySeatIndex)) {\n            //是我的上家说话\n            this.leftShowTime = this.allMsgShowTime;\n            this._showChatMsgRight(this.leftMsgNode,result.msg);\n        } else if (seatId == this._tableScene._mySeatIndex){\n            //是我自己在说话\n            this.selfShowTime = this.allMsgShowTime;\n            this._showChatMsgRight(this.selfMsgNode,result.msg);\n        }\n    },\n\n    _onEndTableChat:function (seatId) {\n        //关闭相应动画\n        if (seatId == ddz.GlobalFuncs.GetNextIndex(this._tableScene._mySeatIndex)) {\n            //是我的下家停止说话\n            this._stopChatAni(this.rightMsgAni);\n        } else if (seatId == ddz.GlobalFuncs.getPreIndex(this._tableScene._mySeatIndex)) {\n            //是我的上家停止说话\n            this._stopChatAni(this.leftMsgAni);\n        }\n        else if (seatId == this._tableScene._mySeatIndex){\n            //是我自己停止说话\n            this._stopChatAni(this.selfMsgAni);\n        }\n    },\n\n    _showChatAni:function (aniNode) {\n        aniNode.active = true;\n        var ani = aniNode.getComponent(cc.Animation);\n        ani.play('table_chat_ani');\n    },\n    _showChatMsgRight : function (msgNode,msgString) {\n        msgNode.active = true;\n        var nodeMa = msgNode.getComponent(\"ddz_item_ft_chat\");\n        nodeMa.setDetailMsg(msgString);\n    },\n\n    _stopChatAni:function (aniNode) {\n        aniNode.active = false;\n        var ani = aniNode.getComponent(cc.Animation);\n        ani.stop('table_chat_ani');\n    },\n\n    _onRecordComplete:function (audioFilePath) {\n        var fs = wx.getFileSystemManager();\n\n        if (this.recordNode.active){\n            this.recordNode.active = false;\n            this._isOnRecord = false;\n        }\n\n        if (this._recordTime < 1){\n            var that = this;\n            that.recordTip.active = true;\n            this.scheduleOnce(function () {\n                that.recordTip.active = false;\n            },3);\n            ddz.LOGD(null, \"录音小于1S,不发送!\");\n            fs.unlinkSync(audioFilePath);\n            return;\n        }\n        var tableInfo = this._tableScene.tableInfo();\n\n\n        var fileStr = fs.readFileSync(audioFilePath, 'base64');\n\n\n        // ddz.LOGD(null, \"音频文件:\" + fileStr + \":结束\");\n        // var filePath = wx.env.USER_DATA_PATH + '/seat_' + 2 + '_msg.' + ddz.recordFileType;\n        // fs.writeFileSync(filePath ,fileStr , 'base64');\n        //\n        // var musicPlayManager = wx.createInnerAudioContext();\n        // musicPlayManager.autoplay = true;\n        // musicPlayManager.loop = false;\n        // musicPlayManager.volume = 1;\n        // musicPlayManager.src = filePath;\n\n        // fs.unlinkSync(audioFilePath);\n\n        // wx.uploadFile({\n        //     url:'http://www.tuvovo.com/tu.php',\n        //     filePath : audioFilePath,\n        //     name : 'file',\n        //     success:function () {\n        //         hall.LOGD(null, \"上传文件成功:\" + JSON.stringify(arguments))\n        //     },\n        //     fail:function () {\n        //         hall.LOGD(null, \"上传文件失败:\" + JSON.stringify(arguments))\n        //     }\n        // });\n\n        hall.MsgFactory.sendChatMsg(tableInfo.roomId(), tableInfo.tableId(), this._tableScene._mySeatIndex, fileStr, 2,0);\n    },\n\n    onBtnChatDetail : function (event,type) {\n        this.chatNode.active = false;\n        if(type == \"cancel\"){\n            return;\n        }\n        var sendMsg = this.chatStringList[parseInt(type)];\n        var tableInfo = this._tableScene.tableInfo();\n        hall.MsgFactory.sendChatMsg(tableInfo.roomId(), tableInfo.tableId(), this._tableScene._mySeatIndex, sendMsg, 0,0);\n    },\n\n    _onRecordError:function(){\n        hall.LOGE(\"\",\"file = [FriendModule] fun = [_onRecordError] 语音错误\");\n        if (this.recordNode.active){\n            this.recordNode.active = false;\n            this._isOnRecord = false;\n        }\n    },\n\n    _onRecordBtnTouchBegan:function (event) {\n        ddz.LOGD(null, \"Beganevent:\" + event);\n        ddz.AudioHelper.getMusicPlayManager().volume = 0;\n        this.resetStartTime();\n        // this._cancelRecord = false;\n        this.recordNode.active = true;\n        this._btnRecordStatePressed = true;\n        this.recordProgressNode.active = true;\n        this.recordBackNode.active = false;\n\n        var that = this;\n        var startRecord = function () {\n            if (!that._btnRecordStatePressed){\n                return;\n            }\n            that._isOnRecord = true;\n            that.recordNode.active = true;\n            hall.recorder.startRecord(that._maxRecordTime);\n        };\n\n        wx.getSetting({\n            success:function(res) {\n                if (!res.authSetting['scope.record']) {\n                    wx.authorize({\n                        scope : \"scope.record\",\n                        success : function () {\n                            startRecord();\n                        },\n                        fail:function () {\n                            hall.MsgBoxManager.showToast({title : '授权失败,语音功能不可用,请手动进行授权!'});\n                            ty.Timer.setTimer(cc.director, function () {\n                                wx.openSetting();\n                            }, 2, 0);\n                        },\n                        complete:function () {\n                        }\n                    });\n                }\n                else{\n                    startRecord();\n                }\n            }\n        });\n    },\n\n    _onRecordBtnTouchMoved:function (event) {\n        ddz.LOGD(null, \"Movedevent:\" + event);\n        ddz.AudioHelper.getMusicPlayManager().volume = 0;\n        if (event.touch._point.y - event.touch._startPoint.y > 20){\n            // this._cancelRecord = true;\n            if(this._isOnRecord){\n                this._isOnRecord = false;\n                // this.recordNode.active = true;\n                this.recordProgressNode.active = false;\n                this.recordBackNode.active = true;\n                // hall.recorder.stop(true);\n                hall.recorder.pauseRecord();\n            }\n        }else {\n            if(!this._isOnRecord){\n                this._isOnRecord = true;\n                // this.recordNode.active = true;\n                this.recordProgressNode.active = true;\n                this.recordBackNode.active = false;\n                hall.recorder.resumeRecord();\n            }\n\n            var oriIndex = this.recordNowIndex;\n            var indexp = hall.GlobalFuncs.getRandomNumberBefore(2);\n            var changeNumber = hall.GlobalFuncs.getRandomNumberBefore(3);\n            oriIndex = indexp == 0 ? oriIndex - changeNumber : oriIndex + changeNumber;\n            oriIndex = oriIndex < 0 ? 0 : oriIndex;\n            oriIndex = oriIndex > 6 ? 6 : oriIndex;\n            this.recordNowIndex = oriIndex;\n            this.recordProgressSprite.spriteFrame = this.recordProgressFrame[oriIndex];\n        }\n    },\n\n    _onRecordBtnTouchEnded:function (event) {\n        ddz.LOGD(null, \"Endedevent:\" + event);\n        ddz.AudioHelper.getMusicPlayManager().volume = 1;\n        this._btnRecordStatePressed = false;\n        // this.recordNode.active = false;\n        hall.recorder.stop(false);\n    },\n\n    _onRecordBtnTouchCancel:function (event) {\n        ddz.LOGD(null, \"Cancelevent:\" + event);\n        ddz.AudioHelper.getMusicPlayManager().volume = 1;\n        this._btnRecordStatePressed = false;\n        this._isOnRecord = false;\n        this.recordNode.active = false;\n        hall.recorder.stop(true);\n    },\n\n    onFtInfoChange:function () {\n        this.updateDuiJuBtnLabel();\n    },\n\n    onBigBtnClick:function (event, par0) {\n        var tableInfo = this._tableScene.tableInfo();\n        ddz.LOGD(\"FriendModule\", \"par0:\" + par0);\n        if(this.shouldLeave){\n            this.unscheduleAllCallbacks();\n            hall.GlobalFuncs.gotoDdz();\n            return;\n        }\n\n        switch (par0){\n            case 'invire':{\n                //邀请好友\n                ddz.Share.shareWithType(ddz.Share.onShareType.clickStatShareTypeInviteFriend);\n                break;\n            }\n            case 'ready':{\n                //准备\n                ddz.MsgFactory.getReady(tableInfo.roomId(), tableInfo.tableId(), this._tableScene._mySeatIndex);\n                break;\n            }\n            case 'back':{\n                //解散,返回\n                var state = this._tableScene._tableState.normalInfo.m_state;\n                // var gameStatus = this._tableScene._status;\n                // this._tableScene.isStatus(ddz.Enums.PlayStatus.PLAY_STATUS_GAMEOVER\n                if(this._tableScene.isStatus(ddz.Enums.PlayStatus.PLAY_STATUS_GAMEOVER)){\n                    return;\n                }\n                if (state == ddz.Enums.TableState.TABLEDSTAT_IDLE && this._tableScene.tableInfo().ftInfo.curRound == 0) {\n                    if (tableInfo.ftInfo.iscreator) {\n                        this.showTipsWindow(\"你确定要解散牌桌吗?\");\n                    }else {\n                        ddz.friendModel.reqDisbind(tableInfo.roomId(), tableInfo.tableId(), this._tableScene._mySeatIndex);\n                    }\n                }\n                else{\n                    this.showTipsWindow(\"你确定要发起投票中途退出吗?\");\n                }\n                break;\n            }\n        }\n    },\n\n    showTipsWindow : function (tipsString) {\n        var preFabPath = \"prefabs/ddz_window_tips\";\n        var  comName = \"ddz_tipsWindow\";\n        var that = this;\n        hall.GlobalFuncs.showPopWinByPreFab(preFabPath, function (preFabNode) {\n            var window = preFabNode.getComponent(comName);\n            window.parentScene = that;\n            var testArray = [\n                {title :\"取消\"}, {title :\"确定\"}\n            ];\n            window.setTitleContentAndButtons(\"提示\",tipsString, testArray);\n        });\n    },\n    onClickRightButton : function () {\n        var tableInfo;\n        if (this.waitAnswer){\n            tableInfo = this._tableScene.tableInfo();\n            ddz.friendModel.ansDisbind(this._tableScene._roomId,tableInfo.tableId(),this._tableScene._mySeatIndex,0);\n            // return;\n        }else {\n            tableInfo = this._tableScene.tableInfo();\n            ddz.friendModel.reqDisbind(tableInfo.roomId(), tableInfo.tableId(), this._tableScene._mySeatIndex)\n        }\n        this.waitAnswer = false;\n    },\n    onClickLeftButton : function () {\n        if (this.waitAnswer){\n            var tableInfo = this._tableScene.tableInfo();\n            ddz.friendModel.ansDisbind(this._tableScene._roomId,tableInfo.tableId(),this._tableScene._mySeatIndex,1);\n            this.waitAnswer = false;\n        }\n    },\n    reciveFtDisbind : function (result) {\n        ty.BiLog.clickStat(ty.UserInfo.clickStatEventType.clickStatEventTypeFriendRoomDissolveClick, [\"success\"]);\n        if(this.disbinds && this.disbinds.length && this.disbinds.length > 0){\n            return;\n        }\n        hall.LOGE(\"===\",\"====reciveFtDisbind=========\"+JSON.stringify(result));\n        this.shouldLeave = true;\n        var preFabPath = \"prefabs/dissolveNode\";\n        var comName = \"ddz_window_dissolve\";\n        // var that = this;\n        hall.GlobalFuncs.showPopWinByPreFab(preFabPath, function (preFabNode) {\n            var window = preFabNode.getComponent(comName);\n            // var tableInfo = that._tableScene.tableInfo();\n            if(!ddz.NetWorkCenter.canNotLeave){\n                window.setTipsSString(\"你已解散牌桌\");\n            }else {\n                window.setTipsSString(\"房主已解散牌桌\");\n            }\n        });\n    },\n    reciveDisbind : function (result) {\n        this.disbinds = [];\n        hall.LOGD(\"===\",\"====reciveDisbind=========\"+JSON.stringify(result));\n        var that = this;\n        var callBack = function (preFabNode,comName) {\n            var window = preFabNode.getComponent(comName);\n            window.parentScene = that;\n            if(result.userId == ty.UserInfo.userId){//发起者\n                window.setDissolvePregrossForCreator(result.optime,[1,-1,-1]);\n                window.noDissolve = true;\n                that.disbindsOwer = true;\n            }else {\n                var tableInfo = that._tableScene.tableInfo();\n                var name;\n                if (tableInfo.nameList.length > 2){\n                    name = tableInfo.nameList[result.seatId-1];\n                }else {\n                    name = \"玩家未知\";\n                }\n                window.setDissolvePregrossForAnswer(result.optime,[1,-1,-1],name);\n                window.noDissolve = true;\n                that.disbindsOwer = false;\n                that.waitAnswer = true;\n            }\n            that.disbinds.push(1);\n        };\n        ddz.GlobalFuncs.showWindowTipsForFriend(callBack);\n    },\n\n    reciveDisbindAnswer : function (result) {\n        hall.LOGD(\"===\",\"====reciveDisbindAnswer=========\"+JSON.stringify(result));\n        var disbindsR = result.disbinds;\n        var anser = disbindsR[result.seatId-1];\n        this.disbinds.push(anser);\n        var window;\n        if(ddz.friendModel.tipsWindow){\n            window = ddz.friendModel.tipsWindow.getComponent(\"ddz_tipsWindow\");\n        }else {\n            return;\n        }\n        window.changePregross(this.disbinds);\n\n        if(ty.UserInfo.userId == result.userId){\n            if(!this.disbindsOwer){\n                window.changeStateToWait(anser);\n            }\n        }\n    },\n\n    reciveDisbindResult : function (result) {\n        this.waitAnswer = false;\n        ddz.NetWorkCenter.canNotLeave = true;\n        //出结果啦~~~~\n        hall.LOGD(\"++++\",\"=======reciveDisbindResult=====\"+JSON.stringify(result));\n        var window;\n        if(ddz.friendModel.tipsWindow){\n            window = ddz.friendModel.tipsWindow.getComponent(\"ddz_tipsWindow\");\n        }else {\n            return;\n        }\n        // window.noDissolve = false;\n        window.onClose();\n        var disbindResult = result.disbindResult;\n        this.disbindResult = disbindResult;\n        var disbinds = result.disbinds;\n        var preFabPath = \"prefabs/dissolveNode\";\n        var comName = \"ddz_window_dissolve\";\n        var that = this;\n        hall.GlobalFuncs.showPopWinByPreFab(preFabPath, function (preFabNode) {\n            var window = preFabNode.getComponent(comName);\n            var tableInfo = that._tableScene.tableInfo();\n            var nameA = [];\n            if(disbindResult == 0){\n                if (tableInfo.nameList.length < 3){\n                    window.setDissolveFailDetailTextString(\"玩家1\",\"玩家2\");\n                    return;\n                }\n                for (var i = 0 ; i < 3; i ++){\n                    if(disbinds[i] == 0){\n                        var name = tableInfo.nameList[i];\n                        nameA.push(name);\n                    }\n                }\n                window.setDissolveFailDetailTextString(nameA,false);\n                hall.LOGW(\"==\",\"=======被拒绝=====\");\n            }\n            else {\n                if (tableInfo.nameList.length < 3){\n                    window.setDissolveFailDetailTextString(\"玩家1\",\"玩家2\");\n                    return;\n                }\n                for (var i = 0 ; i < 3; i ++){\n                    if(disbinds[i] == 1){\n                        var name = tableInfo.nameList[i];\n                        nameA.push(name);\n                    }\n                }\n                window.setDissolveFailDetailTextString(nameA,true);\n\n                ddz.detailsModel.setIsOver(true);\n                that.shouldLeave = true;\n                hall.LOGW(\"==\",\"=======解散成功=====\");\n            }\n        });\n    },\n\n    // \"disbind\":{\n    //     \"reqSeatId\":2,\n    //     \"states\":[\n    //         -1,\n    //         1,\n    //         -1\n    //     ],\n    //     \"optime\":84\n    // },\n\n    deleteDisbindState : function(){\n\n    },\n    refreshDisbindState : function (disbind) {\n\n        var states = disbind.states;\n        var stateDic = {\"before\":[],\"one\":[],\"zero\":[]};\n        for (var i = 0 ; i < states.length ; i ++){\n            if(states[i] == -1){\n                stateDic.before.push(states[i]);\n            }else if(states[i] == 0){\n                stateDic.zero.push(states[i]);\n            }else {\n                stateDic.one.push(states[i]);\n            }\n        }\n        var oneL = stateDic.one;\n        var zeroL = stateDic.zero;\n        this.disbinds = oneL.concat(zeroL);\n        var that = this;\n        var preFabNodeAction = function (preFabNode,comName) {\n            var window = preFabNode.getComponent(comName);\n            window.parentScene = that;\n            if(disbind.reqSeatId == that._tableScene._mySeatIndex){//发起者\n                window.setDissolvePregrossForCreator(disbind.optime,that.disbinds);\n                window.noDissolve = true;\n                that.disbindsOwer = true;\n            }else {\n                var tableInfo = that._tableScene.tableInfo();\n                var name;\n                if (tableInfo.nameList.length > 2){\n                    name = tableInfo.nameList[disbind.reqSeatId-1];\n                }else {\n                    name = \"玩家未知\";\n                }\n                window.setDissolvePregrossForAnswer(disbind.optime,that.disbinds,name);\n                window.noDissolve = true;\n                that.disbindsOwer = false;\n                if(states[that._tableScene._mySeatIndex -1] == -1){\n                    that.waitAnswer = true;\n                }else {\n                    that.waitAnswer = false;\n                    window.changeStateToWait(states[that._tableScene._mySeatIndex -1]);\n                }\n            }\n        };\n        ddz.GlobalFuncs.showWindowTipsForFriend(preFabNodeAction);\n    },\n\n    initScore:function () {\n\n        var myIndex = this._tableScene._mySeatIndex;\n        var leftindex = ddz.GlobalFuncs.getPreIndex(myIndex);\n        var rightindex = ddz.GlobalFuncs.GetNextIndex(myIndex);\n\n        var ftInfo = this._tableScene.tableInfo().ftInfo;\n\n        var score = ftInfo.getScore(myIndex - 1);\n        this.setScore('my', score);\n\n        score = ftInfo.getScore(leftindex - 1);\n        this.setScore('left', score);\n\n        score = ftInfo.getScore(rightindex - 1);\n        this.setScore('right', score);\n    },\n\n    updateAllScore:function () {\n\n        var myIndex = this._tableScene._mySeatIndex;\n        var leftindex = ddz.GlobalFuncs.getPreIndex(myIndex);\n        var rightindex = ddz.GlobalFuncs.GetNextIndex(myIndex);\n\n        var ftInfo = this._tableScene.tableInfo().ftInfo;\n\n        var score = ftInfo.getScore(myIndex - 1);\n        var delta = ftInfo.getDelta(myIndex - 1);\n\n        this.upDataScore('my', score, delta);\n\n        score = ftInfo.getScore(leftindex - 1);\n        delta = ftInfo.getDelta(leftindex - 1);\n\n        this.upDataScore('left', score, delta);\n\n        score = ftInfo.getScore(rightindex - 1);\n        delta = ftInfo.getDelta(rightindex - 1);\n\n        this.upDataScore('right', score, delta);\n    },\n\n    //更新分数\n    upDataScore:function (pos, scroe, delta) {\n        var lblScoreChange, lblName;\n        var deltaStr = \"\";\n        if (delta >= 0){\n            deltaStr = \"+\" + delta;\n            lblName = \"lblJiFenChangeAdd\";\n        }\n        else{\n            deltaStr = \"\" + delta;\n            lblName = \"lblJiFenChange\";\n        }\n\n        switch (pos){\n            case 'my':{\n                lblScoreChange = this.getScoreLabel(this.jifenNode, lblName);\n                break;\n            }\n            case 'left':{\n                lblScoreChange = this.getScoreLabel(this.jifenLeftNode, lblName);\n                break;\n            }\n            case 'right':{\n                lblScoreChange = this.getScoreLabel(this.jifenRightNode, lblName);\n                break;\n            }\n        }\n\n        lblScoreChange.string = deltaStr;\n        var that = this;\n        that.setScore(pos, scroe);\n        var callBack = cc.callFunc(function () {\n            lblScoreChange.node.opacity = 255;\n            lblScoreChange.string = \"\";\n        });\n\n        var flyAni = cc.sequence(cc.delayTime(5), cc.fadeOut(0.2), callBack);\n        lblScoreChange.node.runAction(flyAni);\n    },\n\n    reSetAddScore:function () {\n        this.getScoreLabel(this.jifenNode, 'lblJiFenChangeAdd').string = \"\";\n        this.getScoreLabel(this.jifenNode, 'lblJiFenChange').string = \"\";\n\n        this.getScoreLabel(this.jifenLeftNode, 'lblJiFenChangeAdd').string = \"\";\n        this.getScoreLabel(this.jifenLeftNode, 'lblJiFenChange').string = \"\";\n\n        this.getScoreLabel(this.jifenRightNode, 'lblJiFenChangeAdd').string = \"\";\n        this.getScoreLabel(this.jifenRightNode, 'lblJiFenChange').string = \"\";\n    },\n\n    setScore:function (pos, scroe) {\n        var lblScore;\n        switch (pos){\n            case 'my':{\n                lblScore = this.getScoreLabel(this.jifenNode, 'lblJiFen');\n                break;\n            }\n            case 'left':{\n                lblScore = this.getScoreLabel(this.jifenLeftNode, 'lblJiFen');\n                break;\n            }\n            case 'right':{\n                lblScore = this.getScoreLabel(this.jifenRightNode, 'lblJiFen');\n                break;\n            }\n        }\n\n        if(scroe > 0){\n            scroe = \"+\" + scroe;\n        }\n        lblScore.string = scroe +\"\";\n    },\n\n    getScoreLabel:function (scoreNode, lblName) {\n        return scoreNode.getChildByName(lblName).getComponent(cc.Label);\n    },\n\n    setBtnInviteState:function (val) {\n        this.btnInvite.node.active = val;\n    },\n\n    setBtnReadyState:function (val) {\n        if (val){\n            this.lblDiFen.string = \"\";\n        }\n        // this.btnContinue.node.active = false;\n        this.btnReady.node.active = false;\n\n        var btnReady;\n        if (this._tableScene.tableInfo().ftInfo.curRound == 0)  {\n            btnReady = this.btnReady;\n            btnReady.node.active = val;\n        }\n    },\n\n    // getBtnReady:function () {\n    //     if (this._tableScene.tableInfo().ftInfo.curRound == 0)  {\n    //         return this.btnReady;\n    //     }\n    //     // return this.btnContinue;\n    // },\n\n    onDuiJuBtnClick:function (event) {\n        ty.BiLog.clickStat(ty.UserInfo.clickStatEventType.clickStatEventTypeFriendRoomDuiju, []);\n        //打开对局流水面板\n        hall.GlobalFuncs.onShowDetail();\n    },\n\n    showResult:function (result) {\n        ddz.LOGD(\"\",\"file = [DdzTableScene] fun = [_startGameOverAnimation] 好友桌显示结算界面\");\n        this._tableScene._reset();\n        ty.NotificationCenter.trigger(ddz.EventType.STOP_MATCHING);\n        // this.matchNode.active = false;\n        if (!this._gameResult){\n            var game_result_wnd = cc.instantiate(this.game_result);\n            cc.director.getScene().addChild(game_result_wnd);\n            this._gameResult = game_result_wnd.getComponent(\"ddz_game_result\");\n            this._gameResult.setTableScene(this._tableScene);\n        }\n\n        if (result['curRound'] < result['totalRound']){\n            this._gameResult.showFtResult(result,true);\n        } else {\n            this._gameResult.showFtResult(result, false);\n        }\n    },\n\n\n    // //继续\n    // _normalContinue: function() {\n    //     ddz.LOGD(this._TAG, \"_normalContinue\");\n    //     ddz.AudioHelper.playEffect(ddz.EffectPath_mp3.button_click_sound, false);\n    //     this.reStart();\n    // },\n    //\n    // //重新开始\n    // reStart: function(bLeave) { //bLeave表示是否离开牌桌，如果不离开，则是原牌桌人继续游戏\n    //     if (!this.isMode(ddz.Enums.PlayMode.PLAY_MODE_SINGLE)) {\n    //         //send leave room\n    //         var time = 0;\n    //         if (bLeave) {\n    //             ddz.MsgFactory.getRoomLeave(hall.ME.normalInfo.userId, ddz.GameId, this._roomId, ty.SystemInfo.clientId);\n    //             time = 2;\n    //         }\n    //         //延迟2秒发送，确保顺序\n    //         var that = this;\n    //         var ctid = this._tableInfo.m_customTableId;\n    //         ty.Timer.setTimer(this, function () {\n    //             that._sendQuickStart(that, ctid);\n    //         },time , 0);\n    //     }\n    //     this._reset();\n    // },\n    // //快速开始\n    // _sendQuickStart: function(target, ctid) {\n    //     if (ctid) {\n    //         hall.MsgFactory.roomAction(\"quick_start\", ctid);\n    //     } else {\n    //         ddz.MsgFactory.getQuickStart(hall.ME.normalInfo.userId, ddz.GameId, this._tableInfo.roomId(), hall.staticSystemInfo.version, null);\n    //     }\n    // },\n\n\n    onDestroy :function () {\n\n        // this.btnRecord.node.off(cc.Node.EventType.TOUCH_START, this._onRecordBtnTouchBegan, this);\n        // this.btnRecord.node.off(cc.Node.EventType.TOUCH_MOVE, this._onRecordBtnTouchMoved, this);\n        // this.btnRecord.node.off(cc.Node.EventType.TOUCH_END, this._onRecordBtnTouchEnded, this);\n        ddz.NetWorkCenter.canNotLeave = false;\n        ddz.tableChatModel.clear();\n        ty.NotificationCenter.ignoreScope(this);\n        if(ddz.friendModel.tipsWindow){\n            ddz.friendModel.tipsWindow.removeFromParent();\n        }\n        ddz.friendModel.tipsWindow = null;\n        this._tableScene = null;\n        this.unscheduleAllCallbacks();\n    },\n\n    update:function (dt) {\n        this.rightShowTime -= dt;\n        this.rightMsgNode.active = this.rightShowTime >= 0;\n        this.leftShowTime -= dt;\n        this.leftMsgNode.active = this.leftShowTime >= 0;\n        this.selfShowTime -= dt;\n        this.selfMsgNode.active = this.selfShowTime >= 0;\n        if (this._isOnRecord){\n            //正在录音,要更新进度条\n            if (this._recordTime < this._maxRecordTime){\n                this._recordTime += dt;\n                // this.rbar.fillRange = -(this._recordTime/this._maxRecordTime);\n                // // ddz.LOGD(null, \"当前进度:\" + this.rbar.fillRange);\n            }\n        }\n    }\n});\n"]}