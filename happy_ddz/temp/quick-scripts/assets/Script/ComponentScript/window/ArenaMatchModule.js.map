{"version":3,"sources":["ArenaMatchModule.js"],"names":["cc","Class","extends","Component","properties","btnBack","Button","jifenNode","Node","jifenLeftNode","jifenRightNode","bigBtnNode","bottomNode","lblDiFen","Label","lblRank","lblNum","bigLabel","smallLabel","ctor","setTableScene","val","_tableScene","refresh","disableChatBtn","updateMultiple","baseScore","multiple","string","onLoad","ty","NotificationCenter","listen","ddz","EventType","RECIVE_TABLE_INFO","showStage","GAME_READY","hideStage","ACTION_CHALLENGE","hideAll","MACH_RANK_CHANGE","onRankChange","SHOW_MATCHING","resetScore","node","active","UserInfo","systemType","SYSTEMTYPE","iPhoneXType","widL","getComponent","Widget","top","widR","hall","ME","matchInfo","curMatchAddition","rankName","myHead","tableInfo","switchStage","_isOnReady","state","getMatchStageDes","updateAllScore","refreshShow","_onRemoveAni","leftMsgAni","removeFromParent","rightMsgAni","_onStartPlayTableChat","seatId","setScore","initScore","result","myIndex","_mySeatIndex","leftindex","GlobalFuncs","getPreIndex","rightindex","GetNextIndex","seatsInfo","mySeatInfo","leftInfo","rightInfo","upDataScore","seats","score","mscore","delta","pos","scroe","lblScoreChange","lblName","deltaStr","getScoreLabel","that","callBack","callFunc","opacity","flyAni","sequence","delayTime","fadeOut","runAction","reSetAddScore","lblScore","reset","_leftPlayerController","setChatButtonActive","_rightPlayerController","_operateController","initStat","stopAllActions","scoreNode","getChildByName","onDestroy","ignoreScope","disbindsWindow"],"mappings":";;;;;;AACAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,iBAAUL,GAAGM,MADL;AAERC,mBAAYP,GAAGQ,IAFP;AAGRC,uBAAgBT,GAAGQ,IAHX;AAIRE,wBAAiBV,GAAGQ,IAJZ;AAKRG,oBAAaX,GAAGQ,IALR;AAMRI,oBAAaZ,GAAGQ,IANR;AAORK,kBAAWb,GAAGc,KAPN;AAQRC,iBAASf,GAAGc,KARJ;AASRE,gBAAQhB,GAAGc,KATH;AAURG,kBAAUjB,GAAGc,KAVL;AAWRI,oBAAYlB,GAAGc;AAXP,KAHP;;AAiBLK,UAAK,gBAAY,CAEhB,CAnBI;;AAqBLC,mBAAc,uBAAUC,GAAV,EAAe;AACzB,aAAKC,WAAL,GAAmBD,GAAnB;AACA,aAAKE,OAAL;AACH,KAxBI;;AA0BLA,aAAQ,mBAAY;AAChB,aAAKC,cAAL;AACH,KA5BI;;AA8BLC,oBAAe,wBAAUC,SAAV,EAAqBC,QAArB,EAA+B;AAC1C,aAAKd,QAAL,CAAce,MAAd,GAAuBF,YAAY,MAAZ,GAAqBC,QAArB,GAAgC,GAAvD;AACH,KAhCI;AAiCLE,YAAS,kBAAW;AAChB;AACA;AACA;AACA;;AAEAC,WAAGC,kBAAH,CAAsBC,MAAtB,CAA6BC,IAAIC,SAAJ,CAAcC,iBAA3C,EAA8D,KAAKC,SAAnE,EAA8E,IAA9E;AACAN,WAAGC,kBAAH,CAAsBC,MAAtB,CAA6BC,IAAIC,SAAJ,CAAcG,UAA3C,EAAuD,KAAKC,SAA5D,EAAuE,IAAvE;AACAR,WAAGC,kBAAH,CAAsBC,MAAtB,CAA6BC,IAAIC,SAAJ,CAAcK,gBAA3C,EAA6D,KAAKC,OAAlE,EAA2E,IAA3E;AACAV,WAAGC,kBAAH,CAAsBC,MAAtB,CAA6BC,IAAIC,SAAJ,CAAcO,gBAA3C,EAA6D,KAAKC,YAAlE,EAAgF,IAAhF;AACAZ,WAAGC,kBAAH,CAAsBC,MAAtB,CAA6BC,IAAIC,SAAJ,CAAcS,aAA3C,EAA0D,KAAKC,UAA/D,EAA2E,IAA3E;AACA,aAAKR,SAAL;AACA,aAAK/B,OAAL,CAAawC,IAAb,CAAkBC,MAAlB,GAA2B,KAA3B;;AAEA,YAAGhB,GAAGiB,QAAH,CAAYC,UAAZ,IAA0BlB,GAAGiB,QAAH,CAAYE,UAAZ,CAAuBC,WAApD,EAAgE;AAC5D;AACA;AACA,gBAAIC,OAAO,KAAK1C,aAAL,CAAmB2C,YAAnB,CAAgCpD,GAAGqD,MAAnC,CAAX;AACAF,iBAAKG,GAAL,GAAW,GAAX;AACA,gBAAIC,OAAO,KAAK7C,cAAL,CAAoB0C,YAApB,CAAiCpD,GAAGqD,MAApC,CAAX;AACAE,iBAAKD,GAAL,GAAW,GAAX;AACH;AACJ,KAvDI;;AAyDLZ,kBAAa,wBAAY;AACrB,aAAK3B,OAAL,CAAaa,MAAb,GAAsB4B,KAAKC,EAAL,CAAQC,SAAR,CAAkBC,gBAAlB,GAAqCH,KAAKC,EAAL,CAAQC,SAAR,CAAkBC,gBAAlB,CAAmCC,QAAxE,GAAmF,KAAzG;AACH,KA3DI;;AA6DLpB,aAAS,mBAAW;AAChB,aAAKlB,WAAL,CAAiBuC,MAAjB,CAAwBf,MAAxB,GAAiC,KAAjC;AACA,aAAKnC,UAAL,CAAgBmC,MAAhB,GAAyB,KAAzB;AACA,aAAKvC,SAAL,CAAeuC,MAAf,GAAwB,KAAxB;AACA,aAAKrC,aAAL,CAAmBqC,MAAnB,GAA4B,KAA5B;AACA,aAAKpC,cAAL,CAAoBoC,MAApB,GAA6B,KAA7B;AACA,aAAKjC,QAAL,CAAcgC,IAAd,CAAmBC,MAAnB,GAA4B,KAA5B;AACH,KApEI;;AAsELV,eAAW,mBAAS0B,SAAT,EAAoB;AAC3B,aAAKC,WAAL,CAAiB,KAAKzC,WAAL,CAAiB0C,UAAlC;AACH,KAxEI;;AA0EL1B,eAAW,qBAAW;AAClB,aAAKyB,WAAL,CAAiB,IAAjB;AACH,KA5EI;;AA8ELvC,oBAAe,0BAAY;AACvB;AACA;AACH,KAjFI;;AAmFLuC,iBAAa,qBAASE,KAAT,EAAgB;AACzB,aAAK3C,WAAL,CAAiBuC,MAAjB,CAAwBf,MAAxB,GAAiC,IAAjC;AACA,aAAKtB,cAAL;AACA;AACA;AACA;AACA,aAAKb,UAAL,CAAgBmC,MAAhB,GAAyB,CAACmB,KAA1B;AACA,aAAK1D,SAAL,CAAeuC,MAAf,GAAwBmB,KAAxB;AACA,aAAKxD,aAAL,CAAmBqC,MAAnB,GAA4BmB,KAA5B;AACA,aAAKvD,cAAL,CAAoBoC,MAApB,GAA6BmB,KAA7B;AACA,aAAKpD,QAAL,CAAcgC,IAAd,CAAmBC,MAAnB,GAA4BmB,KAA5B;AACA,aAAKrD,UAAL,CAAgBkC,MAAhB,GAAyBmB,KAAzB;;AAEA,aAAKvB,YAAL;AACA,aAAKzB,QAAL,CAAcW,MAAd,GAAuB4B,KAAKC,EAAL,CAAQC,SAAR,CAAkBQ,gBAAlB,EAAvB;AACA,aAAKC,cAAL;AACH,KAnGI;;AAqGLC,iBAAa,uBAAW;AACpB,aAAKD,cAAL;AACH,KAvGI;;AA0GLE,kBAAa,wBAAY;AACrB,aAAKC,UAAL,CAAgBC,gBAAhB;AACA,aAAKC,WAAL,CAAiBD,gBAAjB;AACH,KA7GI;;AAgHLE,2BAAsB,+BAAUC,MAAV,EAAkB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH,KA1HI;;AA4HL9B,gBAAW,sBAAY;AACnB,aAAK+B,QAAL,CAAc,IAAd,EAAoB,IAApB;AACA,aAAKA,QAAL,CAAc,MAAd,EAAsB,IAAtB;AACA,aAAKA,QAAL,CAAc,OAAd,EAAuB,IAAvB;AACH,KAhII;;AAkILC,eAAU,qBAAY;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH,KAjJI;;AAmJLT,oBAAe,wBAAUU,MAAV,EAAkB;AAC7B,YAAIC,UAAU,KAAKxD,WAAL,CAAiByD,YAA/B;AACA,YAAIC,YAAY/C,IAAIgD,WAAJ,CAAgBC,WAAhB,CAA4BJ,OAA5B,CAAhB;AACA,YAAIK,aAAalD,IAAIgD,WAAJ,CAAgBG,YAAhB,CAA6BN,OAA7B,CAAjB;;AAEA,YAAIO,YAAY,IAAhB;AACA,YAAGR,MAAH,EAAW;AACP,gBAAIS,aAAaT,OAAO,SAASC,OAAhB,CAAjB;AACA,gBAAIS,WAAWV,OAAO,SAASG,SAAhB,CAAf;AACA,gBAAIQ,YAAYX,OAAO,SAASM,UAAhB,CAAhB;AACA,iBAAKM,WAAL,CAAiB,IAAjB,EAAuBH,WAAW,CAAX,CAAvB,EAAsCA,WAAW,CAAX,CAAtC;AACA,iBAAKG,WAAL,CAAiB,MAAjB,EAAyBF,SAAS,CAAT,CAAzB,EAAsCA,SAAS,CAAT,CAAtC;AACA,iBAAKE,WAAL,CAAiB,OAAjB,EAA0BD,UAAU,CAAV,CAA1B,EAAwCA,UAAU,CAAV,CAAxC;AAEH,SARD,MAQO;AACHH,wBAAY,KAAK/D,WAAL,CAAiBwC,SAAjB,GAA6B4B,KAAzC;AACA,gBAAIC,QAAQN,UAAUP,UAAU,CAApB,EAAuBc,MAAnC;AACA,gBAAIC,QAAQ,IAAZ;AACA,iBAAKJ,WAAL,CAAiB,IAAjB,EAAuBE,KAAvB,EAA8BE,KAA9B;;AAEAF,oBAAQN,UAAUL,YAAY,CAAtB,EAAyBY,MAAjC;AACA,iBAAKH,WAAL,CAAiB,MAAjB,EAAyBE,KAAzB,EAAgCE,KAAhC;;AAEAF,oBAAQN,UAAUF,aAAa,CAAvB,EAA0BS,MAAlC;AACA,iBAAKH,WAAL,CAAiB,OAAjB,EAA0BE,KAA1B,EAAiCE,KAAjC;AACH;AACJ,KA7KI;;AA+KL;AACAJ,iBAAY,qBAAUK,GAAV,EAAeC,KAAf,EAAsBF,KAAtB,EAA6B;AACrC,YAAIG,cAAJ,EAAoBC,OAApB;AACA,YAAIC,WAAW,EAAf;AACA,YAAGL,SAAS,IAAZ,EAAkB;AACdK,uBAAW,EAAX;AACAD,sBAAU,gBAAV;AACH,SAHD,MAIK,IAAIJ,SAAS,CAAb,EAAe;AAChBK,uBAAW,MAAML,KAAjB;AACAI,sBAAU,mBAAV;AACH,SAHI,MAID;AACAC,uBAAW,KAAKL,KAAhB;AACAI,sBAAU,gBAAV;AACH;;AAED,gBAAQH,GAAR;AACI,iBAAK,IAAL;AAAU;AACNE,qCAAiB,KAAKG,aAAL,CAAmB,KAAK5F,SAAxB,EAAmC0F,OAAnC,CAAjB;AACA;AACH;AACD,iBAAK,MAAL;AAAY;AACRD,qCAAiB,KAAKG,aAAL,CAAmB,KAAK1F,aAAxB,EAAuCwF,OAAvC,CAAjB;AACA;AACH;AACD,iBAAK,OAAL;AAAa;AACTD,qCAAiB,KAAKG,aAAL,CAAmB,KAAKzF,cAAxB,EAAwCuF,OAAxC,CAAjB;AACA;AACH;AAZL;;AAgBAD,uBAAepE,MAAf,GAAwBsE,QAAxB;AACA,YAAIE,OAAO,IAAX;;AAEA,YAAIC,WAAWrG,GAAGsG,QAAH,CAAY,YAAY;AACnCF,iBAAKzB,QAAL,CAAcmB,GAAd,EAAmBC,KAAnB;AACAC,2BAAenD,IAAf,CAAoB0D,OAApB,GAA8B,GAA9B;AACAP,2BAAepE,MAAf,GAAwB,EAAxB;AACH,SAJc,CAAf;;AAMA,YAAI4E,SAASxG,GAAGyG,QAAH,CAAYzG,GAAG0G,SAAH,CAAa,CAAb,CAAZ,EAA6B1G,GAAG2G,OAAH,CAAW,GAAX,CAA7B,EAA8CN,QAA9C,CAAb;AACAL,uBAAenD,IAAf,CAAoB+D,SAApB,CAA8BJ,MAA9B;AACH,KA3NI;;AA6NLK,mBAAc,yBAAY;AACtB,aAAKV,aAAL,CAAmB,KAAK5F,SAAxB,EAAmC,mBAAnC,EAAwDqB,MAAxD,GAAiE,EAAjE;AACA,aAAKuE,aAAL,CAAmB,KAAK5F,SAAxB,EAAmC,gBAAnC,EAAqDqB,MAArD,GAA8D,EAA9D;;AAEA,aAAKuE,aAAL,CAAmB,KAAK1F,aAAxB,EAAuC,mBAAvC,EAA4DmB,MAA5D,GAAqE,EAArE;AACA,aAAKuE,aAAL,CAAmB,KAAK1F,aAAxB,EAAuC,gBAAvC,EAAyDmB,MAAzD,GAAkE,EAAlE;;AAEA,aAAKuE,aAAL,CAAmB,KAAKzF,cAAxB,EAAwC,mBAAxC,EAA6DkB,MAA7D,GAAsE,EAAtE;AACA,aAAKuE,aAAL,CAAmB,KAAKzF,cAAxB,EAAwC,gBAAxC,EAA0DkB,MAA1D,GAAmE,EAAnE;AACH,KAtOI;;AAwOL+C,cAAS,kBAAUmB,GAAV,EAAeC,KAAf,EAAsB;AAC3B,YAAIe,QAAJ;AACA,gBAAQhB,GAAR;AACI,iBAAK,IAAL;AAAU;AACNgB,+BAAW,KAAKX,aAAL,CAAmB,KAAK5F,SAAxB,EAAmC,UAAnC,CAAX;AACA;AACH;AACD,iBAAK,MAAL;AAAY;AACRuG,+BAAW,KAAKX,aAAL,CAAmB,KAAK1F,aAAxB,EAAuC,UAAvC,CAAX;AACA;AACH;AACD,iBAAK,OAAL;AAAa;AACTqG,+BAAW,KAAKX,aAAL,CAAmB,KAAKzF,cAAxB,EAAwC,UAAxC,CAAX;AACA;AACH;AAZL;;AAeAoG,iBAASlF,MAAT,GAAkBmE,QAAO,EAAzB;AACH,KA1PI;;AA4PLgB,WAAO,iBAAW;AACd,aAAKzF,WAAL,CAAiB0F,qBAAjB,CAAuCC,mBAAvC,CAA2D,KAA3D;AACA,aAAK3F,WAAL,CAAiB4F,sBAAjB,CAAwCD,mBAAxC,CAA4D,KAA5D;AACA,aAAK3F,WAAL,CAAiB6F,kBAAjB,CAAoCF,mBAApC,CAAwD,KAAxD;AACA,aAAKG,QAAL,GAAgB,IAAhB;AACA,aAAKvG,QAAL,CAAce,MAAd,GAAuB,EAAvB;AACA,aAAKnB,aAAL,CAAmBqC,MAAnB,GAA4B,KAA5B;AACA,aAAKpC,cAAL,CAAoBoC,MAApB,GAA6B,KAA7B;AACA,aAAKlC,UAAL,CAAgBkC,MAAhB,GAAyB,KAAzB;AACA;;AAEA,YAAIkD,cAAJ;;AAEAA,yBAAiB,KAAKG,aAAL,CAAmB,KAAK5F,SAAxB,EAAmC,mBAAnC,CAAjB;AACAyF,uBAAepE,MAAf,GAAwB,EAAxB;AACAoE,uBAAenD,IAAf,CAAoBwE,cAApB;;AAEArB,yBAAiB,KAAKG,aAAL,CAAmB,KAAK5F,SAAxB,EAAmC,gBAAnC,CAAjB;AACAyF,uBAAepE,MAAf,GAAwB,EAAxB;AACAoE,uBAAenD,IAAf,CAAoBwE,cAApB;;AAEArB,yBAAiB,KAAKG,aAAL,CAAmB,KAAK1F,aAAxB,EAAuC,mBAAvC,CAAjB;AACAuF,uBAAepE,MAAf,GAAwB,EAAxB;AACAoE,uBAAenD,IAAf,CAAoBwE,cAApB;;AAEArB,yBAAiB,KAAKG,aAAL,CAAmB,KAAK1F,aAAxB,EAAuC,gBAAvC,CAAjB;AACAuF,uBAAepE,MAAf,GAAwB,EAAxB;AACAoE,uBAAenD,IAAf,CAAoBwE,cAApB;;AAEArB,yBAAiB,KAAKG,aAAL,CAAmB,KAAKzF,cAAxB,EAAwC,mBAAxC,CAAjB;AACAsF,uBAAepE,MAAf,GAAwB,EAAxB;AACAoE,uBAAenD,IAAf,CAAoBwE,cAApB;;AAEArB,yBAAiB,KAAKG,aAAL,CAAmB,KAAKzF,cAAxB,EAAwC,gBAAxC,CAAjB;AACAsF,uBAAepE,MAAf,GAAwB,EAAxB;AACAoE,uBAAenD,IAAf,CAAoBwE,cAApB;AACH,KAhSI;;AAkSLlB,mBAAc,uBAAUmB,SAAV,EAAqBrB,OAArB,EAA8B;AACxC,eAAOqB,UAAUC,cAAV,CAAyBtB,OAAzB,EAAkC7C,YAAlC,CAA+CpD,GAAGc,KAAlD,CAAP;AACH,KApSI;;AAsSL0G,eAAW,qBAAY;AACnB1F,WAAGC,kBAAH,CAAsB0F,WAAtB,CAAkC,IAAlC;AACA,YAAG,KAAKC,cAAR,EAAuB;AACnB,iBAAKA,cAAL,CAAoBnD,gBAApB;AACH;AACD,aAAKmD,cAAL,GAAsB,IAAtB;AACA,aAAKpG,WAAL,GAAmB,IAAnB;AACH;AA7SI,CAAT","file":"ArenaMatchModule.js","sourceRoot":"../../../../../../assets/Script/ComponentScript/window","sourcesContent":["\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        btnBack : cc.Button,\n        jifenNode : cc.Node,\n        jifenLeftNode : cc.Node,\n        jifenRightNode : cc.Node,\n        bigBtnNode : cc.Node,\n        bottomNode : cc.Node,\n        lblDiFen : cc.Label,\n        lblRank: cc.Label,\n        lblNum: cc.Label,\n        bigLabel: cc.Label,\n        smallLabel: cc.Label,\n    },\n\n    ctor:function () {\n\n    },\n\n    setTableScene:function (val) {\n        this._tableScene = val;\n        this.refresh();\n    },\n\n    refresh:function () {\n        this.disableChatBtn();\n    },\n\n    updateMultiple:function (baseScore, multiple) {\n        this.lblDiFen.string = baseScore + \"分 x \" + multiple + \"倍\";\n    },\n    onLoad : function() {\n        //var backButtonH = ddz.GlobalFuncs.getBackButtonPositionY();\n        //if (backButtonH){\n        //    this.btnBack.node.y = backButtonH;\n        //}\n\n        ty.NotificationCenter.listen(ddz.EventType.RECIVE_TABLE_INFO, this.showStage, this);\n        ty.NotificationCenter.listen(ddz.EventType.GAME_READY, this.hideStage, this);\n        ty.NotificationCenter.listen(ddz.EventType.ACTION_CHALLENGE, this.hideAll, this);\n        ty.NotificationCenter.listen(ddz.EventType.MACH_RANK_CHANGE, this.onRankChange, this);\n        ty.NotificationCenter.listen(ddz.EventType.SHOW_MATCHING, this.resetScore, this);\n        this.showStage();\n        this.btnBack.node.active = false;\n\n        if(ty.UserInfo.systemType == ty.UserInfo.SYSTEMTYPE.iPhoneXType){\n            // var wid = this.bottomNode.getComponent(cc.Widget);\n            // wid.bottom = 30;\n            var widL = this.jifenLeftNode.getComponent(cc.Widget);\n            widL.top = 160;\n            var widR = this.jifenRightNode.getComponent(cc.Widget);\n            widR.top = 160;\n        }\n    },\n\n    onRankChange:function () {\n        this.lblRank.string = hall.ME.matchInfo.curMatchAddition ? hall.ME.matchInfo.curMatchAddition.rankName : \"-/-\";\n    },\n\n    hideAll: function() {\n        this._tableScene.myHead.active = false;\n        this.bigBtnNode.active = false;\n        this.jifenNode.active = false;\n        this.jifenLeftNode.active = false;\n        this.jifenRightNode.active = false;\n        this.lblDiFen.node.active = false;\n    },\n\n    showStage: function(tableInfo) {\n        this.switchStage(this._tableScene._isOnReady);\n    },\n\n    hideStage: function() {\n        this.switchStage(true);\n    },\n\n    disableChatBtn:function () {\n        // this._tableScene._leftPlayerController.setChatButtonActive(false);\n        // this._tableScene._rightPlayerController.setChatButtonActive(false);\n    },\n\n    switchStage: function(state) {\n        this._tableScene.myHead.active = true;\n        this.disableChatBtn();\n        //if(this._tableScene._isOnReady) {\n        //    this._tableScene.myAvatar.active = false;\n        //}\n        this.bigBtnNode.active = !state;\n        this.jifenNode.active = state;\n        this.jifenLeftNode.active = state;\n        this.jifenRightNode.active = state;\n        this.lblDiFen.node.active = state;\n        this.bottomNode.active = state;\n\n        this.onRankChange();\n        this.bigLabel.string = hall.ME.matchInfo.getMatchStageDes();\n        this.updateAllScore();\n    },\n\n    refreshShow: function() {\n        this.updateAllScore();\n    },\n\n\n    _onRemoveAni:function () {\n        this.leftMsgAni.removeFromParent();\n        this.rightMsgAni.removeFromParent();\n    },\n\n\n    _onStartPlayTableChat:function (seatId) {\n        //打开相应动画\n        //if (seatId == ddz.GlobalFuncs.GetNextIndex(this._tableScene._mySeatIndex)) {\n        //    //是我的下家说话\n        //    this._showChatAni(this.rightMsgAni);\n        //\n        //} else if (seatId == ddz.GlobalFuncs.getPreIndex(this._tableScene._mySeatIndex)) {\n        //    //是我的上家说话\n        //    this._showChatAni(this.leftMsgAni);\n        //}\n    },\n\n    resetScore:function () {\n        this.setScore('my', '--');\n        this.setScore('left', '--');\n        this.setScore('right', '--');\n    },\n\n    initScore:function () {\n        //var myIndex = this._tableScene._mySeatIndex;\n        //var leftindex = ddz.GlobalFuncs.getPreIndex(myIndex);\n        //var rightindex = ddz.GlobalFuncs.GetNextIndex(myIndex);\n        //\n        //var ftInfo = this._tableScene.tableInfo().ftInfo;\n        //\n        //var score = ftInfo.getScore(myIndex - 1);\n        //this.setScore('my', score);\n        //\n        //score = ftInfo.getScore(leftindex - 1);\n        //this.setScore('left', score);\n        //\n        //score = ftInfo.getScore(rightindex - 1);\n        //this.setScore('right', score);\n    },\n\n    updateAllScore:function (result) {\n        var myIndex = this._tableScene._mySeatIndex;\n        var leftindex = ddz.GlobalFuncs.getPreIndex(myIndex);\n        var rightindex = ddz.GlobalFuncs.GetNextIndex(myIndex);\n\n        var seatsInfo = null;\n        if(result) {\n            var mySeatInfo = result[\"seat\" + myIndex];\n            var leftInfo = result[\"seat\" + leftindex];\n            var rightInfo = result[\"seat\" + rightindex];\n            this.upDataScore('my', mySeatInfo[1], mySeatInfo[0]);\n            this.upDataScore('left', leftInfo[1], leftInfo[0]);\n            this.upDataScore('right', rightInfo[1], rightInfo[0]);\n\n        } else {\n            seatsInfo = this._tableScene.tableInfo().seats;\n            var score = seatsInfo[myIndex - 1].mscore;\n            var delta = null;\n            this.upDataScore('my', score, delta);\n\n            score = seatsInfo[leftindex - 1].mscore;\n            this.upDataScore('left', score, delta);\n\n            score = seatsInfo[rightindex - 1].mscore;\n            this.upDataScore('right', score, delta);\n        }\n    },\n\n    //更新分数\n    upDataScore:function (pos, scroe, delta) {\n        var lblScoreChange, lblName;\n        var deltaStr = \"\";\n        if(delta == null) {\n            deltaStr = \"\";\n            lblName = \"lblJiFenChange\";\n        }\n        else if (delta >= 0){\n            deltaStr = \"+\" + delta;\n            lblName = \"lblJiFenChangeAdd\";\n        }\n        else{\n            deltaStr = \"\" + delta;\n            lblName = \"lblJiFenChange\";\n        }\n\n        switch (pos){\n            case 'my':{\n                lblScoreChange = this.getScoreLabel(this.jifenNode, lblName);\n                break;\n            }\n            case 'left':{\n                lblScoreChange = this.getScoreLabel(this.jifenLeftNode, lblName);\n                break;\n            }\n            case 'right':{\n                lblScoreChange = this.getScoreLabel(this.jifenRightNode, lblName);\n                break;\n            }\n        }\n\n\n        lblScoreChange.string = deltaStr;\n        var that = this;\n\n        var callBack = cc.callFunc(function () {\n            that.setScore(pos, scroe);\n            lblScoreChange.node.opacity = 255;\n            lblScoreChange.string = \"\";\n        });\n\n        var flyAni = cc.sequence(cc.delayTime(2), cc.fadeOut(0.2), callBack);\n        lblScoreChange.node.runAction(flyAni);\n    },\n\n    reSetAddScore:function () {\n        this.getScoreLabel(this.jifenNode, 'lblJiFenChangeAdd').string = \"\";\n        this.getScoreLabel(this.jifenNode, 'lblJiFenChange').string = \"\";\n\n        this.getScoreLabel(this.jifenLeftNode, 'lblJiFenChangeAdd').string = \"\";\n        this.getScoreLabel(this.jifenLeftNode, 'lblJiFenChange').string = \"\";\n\n        this.getScoreLabel(this.jifenRightNode, 'lblJiFenChangeAdd').string = \"\";\n        this.getScoreLabel(this.jifenRightNode, 'lblJiFenChange').string = \"\";\n    },\n\n    setScore:function (pos, scroe) {\n        var lblScore;\n        switch (pos){\n            case 'my':{\n                lblScore = this.getScoreLabel(this.jifenNode, 'lblJiFen');\n                break;\n            }\n            case 'left':{\n                lblScore = this.getScoreLabel(this.jifenLeftNode, 'lblJiFen');\n                break;\n            }\n            case 'right':{\n                lblScore = this.getScoreLabel(this.jifenRightNode, 'lblJiFen');\n                break;\n            }\n        }\n\n        lblScore.string = scroe +\"\";\n    },\n\n    reset: function() {\n        this._tableScene._leftPlayerController.setChatButtonActive(false);\n        this._tableScene._rightPlayerController.setChatButtonActive(false);\n        this._tableScene._operateController.setChatButtonActive(false);\n        this.initStat = true;\n        this.lblDiFen.string = \"\";\n        this.jifenLeftNode.active = false;\n        this.jifenRightNode.active = false;\n        this.bottomNode.active = false;\n        //this._tableScene.myAvatar.active = false;\n\n        var lblScoreChange;\n\n        lblScoreChange = this.getScoreLabel(this.jifenNode, \"lblJiFenChangeAdd\");\n        lblScoreChange.string = \"\";\n        lblScoreChange.node.stopAllActions();\n\n        lblScoreChange = this.getScoreLabel(this.jifenNode, \"lblJiFenChange\");\n        lblScoreChange.string = \"\";\n        lblScoreChange.node.stopAllActions();\n\n        lblScoreChange = this.getScoreLabel(this.jifenLeftNode, \"lblJiFenChangeAdd\");\n        lblScoreChange.string = \"\";\n        lblScoreChange.node.stopAllActions();\n\n        lblScoreChange = this.getScoreLabel(this.jifenLeftNode, \"lblJiFenChange\");\n        lblScoreChange.string = \"\";\n        lblScoreChange.node.stopAllActions();\n\n        lblScoreChange = this.getScoreLabel(this.jifenRightNode, \"lblJiFenChangeAdd\");\n        lblScoreChange.string = \"\";\n        lblScoreChange.node.stopAllActions();\n\n        lblScoreChange = this.getScoreLabel(this.jifenRightNode, \"lblJiFenChange\");\n        lblScoreChange.string = \"\";\n        lblScoreChange.node.stopAllActions();\n    },\n\n    getScoreLabel:function (scoreNode, lblName) {\n        return scoreNode.getChildByName(lblName).getComponent(cc.Label);\n    },\n\n    onDestroy :function () {\n        ty.NotificationCenter.ignoreScope(this);\n        if(this.disbindsWindow){\n            this.disbindsWindow.removeFromParent();\n        }\n        this.disbindsWindow = null;\n        this._tableScene = null;\n    },\n});"]}