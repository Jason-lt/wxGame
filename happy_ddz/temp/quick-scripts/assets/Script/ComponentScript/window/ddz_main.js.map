{"version":3,"sources":["ddz_main.js"],"names":["cc","Class","extends","Component","ctor","_counter","_TAG","properties","leftSeconds","winnerCount","rewardDes","startButtonList","default","type","Node","mainBtnBar","topButton","Button","buttom","bottomBar","giftBagBtnNode","noticeNode","inviteeList","messageNode","giftBagNode","notifyList","parentScene","serializable","notifyNode","startLabel","Label","ledNode","ledBg","Sprite","ledRichText","RichText","haveReward","menuColumn","redDotSpr","count","money","onLoad","couponCount","hall","ME","udataInfo","m_couponCount","GlobalFuncs","ReadStringFromLocalStorage","ddz","matchModel","MATCH_REWARD_DES","ty","NotificationCenter","listen","EventType","UPDATE_MATCH_INFO","onUpDateMatchInfo","getMatchDes","UPDATE_MATCH_DES","updateMatchInfo","updateNotifyInfo","UPDATE_COMMON_CONFIG","REMOVE_DDZ_MAIN_ANI","onRemoveAni","CMD_LED_RECEIVE","playLed","MATCH_GIVE_UP","onMatchGiveUp","UPDATE_BUTTON_TEXT","updateButtonText","IS_HAVE_REWARD","isHaveReward","active","_height","getMainInterY","y","updateGiftBagCount","updateBtnState","UPDATE_REWARD_COUNT","updateMessageCount","bind","UPDATE_GIFTBAG_COUNT","UPDATE_BTN_STATE","gameModel","getOpenBox","checkShareReward","Share","SharePointType","getDayFirstLogin","getDayInviteReward","changeEnterBtnState","result","model","gameWorld","m_ledBeWork","_ledList","m_ledList","index","_moveTime","that","_playLed","data","length","string","color","text","size","node","getContentSize","height","showMove","moveTo","p","x","hideMove","delay","delayTime","stopAllActions","runAction","sequence","callFunc","m_ledCapacity","m_ledLast","loadingAction","adManager","hideAd","AdManagerTYWX","getAdNodeByTag","hideAdNode","sxAdManager","hide","unLoadingAction","info","getCurUpdateInfo","lotteryInfo","desc","shareKeywordReplace","bonusTotal","isOncePlay","ONCEPLAYGAME","isNewUser","matchDes","getCurDes","histories","todayM","curLottery","curWinnerCount","savaInfo","saveInfo","matchId","record","stageIndex","_stageIndex","onClickCenterButton","event","shareType","onShareType","clickStatShareTypeMainTips","shareWithType","update","dt","onDestroy","ignoreScope","updateRewardMassage","resultMap","showList","i","rewardState","bindRewardCount","push","tips","ReadValueFromLocalStorage","SHOW_LOGIN_REWARD","tipsList","split","reward","openMenuColumn","debugMode","TCP","connectStatus","CONNECT_STATUS_OK","MsgBoxManager","showToast","title","LOGD","com","getComponent","updateCeLaMunuInfo","notifyInfo","autoShowCount","indexStr","UPDATE_NOTIFY_INFO","JSON","stringify","indexList","parse","notify","indexOf","autoShow","showPopWinByPreFab","preFabNode","window","setDetailTypeWithInfoMap","onNoticeButton","_count","getInfo","gongZhonghaoCardPoint","onBubbleTips","pointId","leftCount","gongZhonghaoMenuPoint","shareToGetreward","rewards","_rewards","removeAllChildren"],"mappings":"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","file":"ddz_main.js","sourceRoot":"../../../../../../assets/Script/ComponentScript/window","sourcesContent":["\n\n\n// var ddz_main = cc.instantiate(this.tipsWindow);\n// this.node.addChild(ddz_main);\n// var window = ddz_main.getComponent('ddz_main');\n// window.setTitleString(\"闯八关平分100万奖金\");\n// window.setDetailInformation(\"12345678\",\"12:54:51\");\n\ncc.Class({\n    extends: cc.Component,\n    ctor:function () {\n        this._counter = 0;\n        this._TAG = \"ddz_main.js\";\n    },\n\n    properties: {\n\n        leftSeconds:0,\n        winnerCount : 0,\n        rewardDes : \"\",\n        startButtonList : {\n            default : null,\n            type : cc.Node\n        },\n        \n\n        mainBtnBar:cc.Node,\n\n        topButton : {\n            default : null,\n            type : cc.Button\n        },\n        \n        buttom : {\n            default : null,\n            type : cc.Node\n        },\n\n        bottomBar : {\n            default : null,\n            type : cc.Node\n        },\n\n\n        giftBagBtnNode:cc.Node,\n\n        noticeNode: {\n            default : null,\n            type : cc.Node\n        },\n\n        // noticeLabel: {\n        //     default : null,\n        //     type : cc.Label\n        // },\n\n        inviteeList :[],\n\n        messageNode : {\n            default : null,\n            type : cc.Node\n        },\n\n        giftBagNode : {\n            default : null,\n            type : cc.Node\n        },\n\n        notifyList :[],\n\n        parentScene: {\n            default: null,\n            serializable: false\n        },\n\n        notifyNode : {\n            default : null,\n            type : cc.Node\n        },\n\n        startLabel : {\n            default : null,\n            type : cc.Label\n        },\n\n        ledNode : {\n            default : null,\n            type : cc.Node\n        },\n\n        ledBg : {\n            default : null,\n            type : cc.Sprite\n        },\n\n        ledRichText : {\n            default : null,\n            type : cc.RichText\n        },\n\n        haveReward:cc.Node,\n\n        menuColumn:cc.Node,\n\n        redDotSpr:cc.Node,\n\n\n        count : \"\",\n        money : \"\"\n    },\n    onLoad :function () {\n        var couponCount = hall.ME.udataInfo.m_couponCount;\n        // hall.MsgFactory.getBagInfo();\n        // this.addTipsWindowWith(\"4\",\"10\",\"5\");\n        this.rewardDes = hall.GlobalFuncs.ReadStringFromLocalStorage(ddz.matchModel.MATCH_REWARD_DES, \"闯七关瓜分100万红包\");\n        \n        ty.NotificationCenter.listen(ddz.EventType.UPDATE_MATCH_INFO, this.onUpDateMatchInfo, this);\n\n        ddz.matchModel.getMatchDes();\n        ty.NotificationCenter.listen(ddz.EventType.UPDATE_MATCH_DES, this.updateMatchInfo, this);\n\n        this.updateNotifyInfo();\n        ty.NotificationCenter.listen(ddz.EventType.UPDATE_COMMON_CONFIG, this.updateNotifyInfo, this);\n\n        ty.NotificationCenter.listen(ddz.EventType.REMOVE_DDZ_MAIN_ANI, this.onRemoveAni, this);\n\n        ty.NotificationCenter.listen(ddz.EventType.CMD_LED_RECEIVE, this.playLed,this);\n        ty.NotificationCenter.listen(ddz.EventType.MATCH_GIVE_UP, this.onMatchGiveUp, this);\n        ty.NotificationCenter.listen(ty.EventType.UPDATE_BUTTON_TEXT, this.updateButtonText, this);\n\n        ty.NotificationCenter.listen(ddz.EventType.IS_HAVE_REWARD, this.isHaveReward,this);\n\n        this.ledNode.active = false;\n\n        var _height = ddz.GlobalFuncs.getMainInterY();\n        if (_height){\n            this.buttom.y = _height;\n            this.ledNode.y = this.ledNode.y + _height/3;\n        }\n        this.updateGiftBagCount();\n        this.updateBtnState();\n        ty.NotificationCenter.listen(ddz.EventType.UPDATE_REWARD_COUNT, this.updateMessageCount.bind(this), this);\n        ty.NotificationCenter.listen(ddz.EventType.UPDATE_GIFTBAG_COUNT, this.updateGiftBagCount.bind(this), this);\n        ty.NotificationCenter.listen(ddz.EventType.UPDATE_BTN_STATE, this.updateBtnState.bind(this), this);\n\n        ddz.gameModel.getOpenBox();\n        ddz.gameModel.checkShareReward(ddz.Share.SharePointType.getDayFirstLogin);\n        ddz.gameModel.getDayInviteReward();\n        // hall.GlobalFuncs.btnScaleEffect(this.topButton.node,1.13,0.9);\n    },\n\n    onMatchGiveUp:function () {\n        this.changeEnterBtnState(1);\n    },\n\n    playLed : function (result) {\n        var model = hall.gameWorld.model;\n        model.m_ledBeWork = true;\n        var _ledList = model.m_ledList; // {\"text\": result[i].text, \"color\": cc.color(result[i].color), \"size\": 22}\n        this.ledNode.active = true;\n        var index = 0;\n        var _moveTime = 0.6;\n        var that = this;\n        var _playLed = function(){\n            var data = _ledList[index];\n            if (data && data.length > 0) {\n                that.ledRichText.string = \"<color=#\" + data[0].color+ \">\"+ data[0].text + \"</color>\";\n                var size = that.ledBg.node.getContentSize();\n                that.ledRichText.node.y = -size.height;\n                var showMove = cc.moveTo(_moveTime, cc.p(that.ledRichText.node.x, -1));\n                var hideMove = cc.moveTo(_moveTime, cc.p(that.ledRichText.node.x, size.height));\n                var delay = cc.delayTime(3);\n                that.ledRichText.node.stopAllActions();\n                that.ledRichText.node.runAction(cc.sequence(showMove,delay,hideMove,cc.callFunc(function(){\n                    _playLed();\n                    if (index == model.m_ledCapacity) {\n                        model.m_ledBeWork = false;\n                        // this.ledNode.active = false;\n                        model.m_ledLast = 0;\n                        model.m_ledList = [];\n                    }\n                }, that)));\n                index += 1;\n            }else {\n                that.ledNode.active = false;\n                model.m_ledBeWork = false;\n                model.m_ledLast = 0;\n                model.m_ledList = [];\n            }\n        };\n        _playLed();\n    },\n\n    loadingAction : function () {\n        this.buttom.active = false;\n\n        this.startButtonList.active = false;\n        this.bottomBar.active = false;\n        this.menuColumn.active = false;\n        hall.adManager.hideAd();\n        if (hall.AdManagerTYWX && hall.AdManagerTYWX.getAdNodeByTag(\"myFirstAdNode\")) {\n            hall.AdManagerTYWX.getAdNodeByTag(\"myFirstAdNode\").hideAdNode();\n        }\n        if (hall.sxAdManager) {\n            hall.sxAdManager.hide();\n        }\n    },\n    unLoadingAction : function () {\n        this.buttom.active = true;\n\n        this.menuColumn.active = true;\n        this.startButtonList.active = true;\n        this.bottomBar.active = true;\n\n        var _height = ddz.GlobalFuncs.getMainInterY();\n        if (_height){\n            this.buttom.y = _height;\n        }\n    },\n    onUpDateMatchInfo:function () {\n        var info = ddz.matchModel.getCurUpdateInfo();\n        if(!info || !info.lotteryInfo){\n            return;\n        }\n\n        var rewardDes = info.lotteryInfo.desc;\n        ddz.Share.shareKeywordReplace.bonusTotal = rewardDes;\n\n        this.leftSeconds = info.lotteryInfo.leftSeconds;\n    },\n\n    updateBtnState:function(){\n        var isOncePlay = hall.GlobalFuncs.ReadStringFromLocalStorage(ddz.gameModel.ONCEPLAYGAME, false);\n        if (ddz.gameModel.isNewUser && !isOncePlay) {\n            // this.startButtonList.active = false;\n            // this.mainLeftBtnList.active = false;\n            // this.mainRightBtnList.active = false;\n            // hall.adManager.hideAd();\n            // if (hall.AdManagerTYWX && hall.AdManagerTYWX.getAdNodeByTag(\"myFirstAdNode\")) {\n            //     hall.AdManagerTYWX.getAdNodeByTag(\"myFirstAdNode\").hideAdNode();\n            // }\n            // if (hall.sxAdManager) {\n            //     hall.sxAdManager.hide();\n            // }\n        }else {\n            // this.startButtonList.active = true;\n            // this.mainLeftBtnList.active = true;\n            // this.mainRightBtnList.active = true;\n        }\n    },\n\n    updateMatchInfo: function () {\n        /*\n         　\"histories\":{\n         　　　　　　\"winnerCount\":2,\n         　　　　　　\"matchCount\":2,\n         　　　　　　\"curLottery\":{\n         　　　　　　　　\"winnerCount\":2,\n         　　　　　　　　\"lotteryTime\":\"2018-04-08 19:15\",\n         　　　　　　　　\"rewards\":[\n         　　　　　　　　　　{\n         　　　　　　　　　　　　\"count\":2,\n         　　　　　　　　　　　　\"itemId\":\"item:1311\"\n         　　　　　　　　　　},\n         　　　　　　　　　　{\n         　　　　　　　　　　　　\"count\":1200000,\n         　　　　　　　　　　　　\"itemId\":\"user:chip\"\n         　　　　　　　　　　},\n         　　　　　　　　　　{\n         　　　　　　　　　　　　\"count\":10000,\n         　　　　　　　　　　　　\"itemId\":\"user:coupon\"\n         　　　　　　　　　　}\n         　　　　　　　　]\n         　　　　　　},\n         　　　　　　\"records\":Array[2]\n         　　　　},\n\n         \"saveInfo\":{\n         \"record\":{\n         \"stageIndex\":2,\n         \"state\":2,\n         \"gameFlow\":false,\n         \"enterTime\":1526141228\n         },\n         \"needResume\":0\n         }\n         */\n        var matchDes = ddz.matchModel.getCurDes();\n        var histories = matchDes.histories;\n        if (histories){\n            var todayM = histories.curLottery;\n            if(todayM && todayM.winnerCount && todayM.winnerCount > 0){\n                ddz.Share.shareKeywordReplace.curWinnerCount = todayM.winnerCount;\n            }\n        }\n\n        var savaInfo = matchDes.saveInfo;\n        if(matchDes.matchId == 6789 && savaInfo && savaInfo.record &&  savaInfo.record.stageIndex){\n            this.changeEnterBtnState(savaInfo.record.stageIndex);\n        }\n    },\n    changeEnterBtnState:function (_stageIndex) {\n        this.startLabel.string = \"第\" + _stageIndex + \"关\"\n    },\n\n    onClickCenterButton:function (event) {\n        var shareType = ddz.Share.onShareType.clickStatShareTypeMainTips;\n        ddz.Share.shareWithType(shareType);\n    },\n    update:function (dt) {\n    },\n    onDestroy:function () {\n        var model = hall.gameWorld.model;\n        model.m_ledBeWork = false;\n        ty.NotificationCenter.ignoreScope(this);\n    },\n\n    updateRewardMassage : function (result) {\n        var resultMap;\n        if(result){\n            resultMap = result.result;\n        }\n        var showList = [];\n        if(resultMap && resultMap.inviteeList && resultMap.inviteeList.length > 0){\n            var inviteeList = resultMap.inviteeList;\n            for (var i = 0; i < inviteeList.length; i ++){\n                if(inviteeList[i].rewardState == 1){\n                    inviteeList[i].bindRewardCount = resultMap.bindRewardCount;\n                    inviteeList[i].type = 1;\n                    showList.push(inviteeList[i]);\n                }\n            }\n        }\n\n        //查询未展示的登录奖励\n        var tips =   hall.GlobalFuncs.ReadValueFromLocalStorage(ddz.matchModel.SHOW_LOGIN_REWARD, []);\n        if(tips[0]){\n            var tipsList = tips[0].split(',');\n            if(tipsList && tipsList.length > 0){\n                for (var i = 0 ; i < tipsList.length ; i ++ ){\n                    var reward = {};\n                    reward.type = 2;\n                    reward.bindRewardCount = tipsList[i];\n                    showList.push(reward);\n                }\n            }\n        }\n\n        if(showList.length > 0){\n            this.inviteeList = showList;\n        }\n    },\n\n    // 打开菜单栏\n    openMenuColumn:function(){\n        //判断网络状态是否可以响应按钮事件\n        if(!debugMode){\n            if (ty.TCP.connectStatus != ty.TCP.CONNECT_STATUS_OK){\n                hall.MsgBoxManager.showToast({title : \"正在登录，请稍候\"});\n                ddz.LOGD(null, \"TCP is not ok! Please wait!\");\n                return;\n            }\n        }\n        // this.menuColumn.active = true;\n        var com = this.menuColumn.getComponent(\"ddz_ceLaMenu\");\n        com.updateCeLaMunuInfo();\n        // hall.adManager.hideAd();\n        if (hall.AdManagerTYWX && hall.AdManagerTYWX.getAdNodeByTag(\"myFirstAdNode\")) {\n            hall.AdManagerTYWX.getAdNodeByTag(\"myFirstAdNode\").hideAdNode();\n        }\n    },\n\n    updateNotifyInfo:function() {\n        // this.redDotSpr.active = (ddz.gameModel.notifyInfo.unReadCount + ddz.gameModel.messageCount) > 0;\n\n        var isOncePlay = hall.GlobalFuncs.ReadStringFromLocalStorage(ddz.gameModel.ONCEPLAYGAME, false);\n        if (!ddz.gameModel.isNewUser || isOncePlay) {\n            if(ddz.gameModel.notifyInfo.autoShowCount){\n                var indexStr = hall.GlobalFuncs.ReadStringFromLocalStorage(ddz.matchModel.UPDATE_NOTIFY_INFO, JSON.stringify([]));\n                var indexList = JSON.parse(indexStr);\n                var notifyList = ddz.gameModel.notifyInfo.info;\n                for (var i = 0; i < notifyList.length; i++){\n                    var notify = notifyList[i];\n                    if (indexList.indexOf(notify.index) == -1 && notify.autoShow){\n                        hall.GlobalFuncs.showPopWinByPreFab('prefabs/notifyWindow', function (preFabNode) {\n                            var window = preFabNode.getComponent('ddz_notifyWindow');\n                            window.setDetailTypeWithInfoMap(notify,\"auto\");\n                        });\n                    }\n                }\n            }\n        }\n    },\n\n    onNoticeButton : function() {\n        // ty.BiLog.clickStat(ty.UserInfo.clickStatEventType.clickStatEventTypeButtonClick, [\"notice\"]);\n        // ddz.AudioHelper.playEffect(ddz.EffectPath_mp3.button_click_sound, false);\n        // hall.GlobalFuncs.showPopWinByPreFab('prefabs/notifyWindow', function (preFabNode) {\n        //     var window = preFabNode.getComponent('ddz_notifyWindow');\n        //     window.setListType();\n        // });\n    },\n    updateMessageCount : function (data) {\n        var _count = 0;\n        if (data.inviteeList && data.inviteeList.length > 0) {\n            for (var i = 0; i < data.inviteeList.length; i++) {\n                if (data.inviteeList[i].rewardState == 0) {\n                    _count ++;\n                }\n            }\n        }\n\n        hall.LOGD(\"==\",\" file = [ddz_main] fun = [updateMessageCount] _count = \" + _count);\n\n        this.messageNode.active = _count && _count > 0;\n    },\n\n    updateGiftBagCount : function () {\n        if(ddz.gameModel.notifyInfo.getInfo) {\n            if (ddz.gameModel.notifyInfo.autoShowCount) {\n                // this.giftBagNode.active = false;\n            } else {\n                if (ddz.gameModel.gongZhonghaoCardPoint > 0) {\n                    // this.giftBagNode.active = true;\n                    var tips = \"关注公众号,领豪华礼包\";\n                    hall.GlobalFuncs.onBubbleTips(this.giftBagBtnNode, tips);\n                } else {\n                    // this.giftBagNode.active = ddz.gameModel.gongZhonghaoMenuPoint > 0;\n                }\n            }\n        }\n    },\n\n    updateButtonText:function(data){\n        if (data.pointId && data.pointId == ddz.Share.SharePointType.getDayFirstLogin){\n            if (data.leftCount > 0) {\n                if (ddz.gameModel.gongZhonghaoMenuPoint > 0 && ddz.gameModel.gongZhonghaoCardPoint <= 0){\n                    var tips = \"从公众号登录,领天天礼包\";\n                    hall.GlobalFuncs.onBubbleTips(this.giftBagBtnNode,tips);\n                }\n                ddz.gameModel.shareToGetreward(ddz.Share.SharePointType.getDayFirstLogin);\n            }\n        }\n    },\n\n    isHaveReward:function(data){\n        var _count = 0;\n        if (data.rewards){  // 未领取\n            var _rewards = data.rewards;\n            if (_rewards['item:1311'] > 0) {\n                _count = _count + _rewards['item:1311'];\n            }\n            if (_rewards['user:chip'] > 0){\n                _count = _count + _rewards['user:chip'];\n            }\n        }\n        this.haveReward.active = _count > 0;\n    },\n\n    onRemoveAni:function () {\n        hall.LOGD(\"==\",\" file = [ddz_main] fun = [onRemoveAni] \");\n        this.notifyNode.removeAllChildren();\n        // this.topButton.node.stopAllActions();\n\n    }\n\n});\n"]}