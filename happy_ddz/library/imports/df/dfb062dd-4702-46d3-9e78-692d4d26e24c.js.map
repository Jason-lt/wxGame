{"version":3,"sources":["../../../../../assets/Script/ddz/assets/Script/ddz/DdzGlobalFuncs.js"],"names":["ddz","GlobalFuncs","SortCardFunc","c1","c2","info1","_info","info2","_type","_value","_color","SortCardFuncForInfo","_sortByPoint","o1","o2","point","GetNextIndex","index","totalnum","getPreIndex","getTopIndex","getMyIndex","GetCardsOriginInterval","container","cardWidth","iNum","cardsLayerWidth","getBoundingBox","width","maxlen","CARD_MAX_INTERVAL","origin","interval","breakline","minlen","CARD_MIN_INTERVAL","Math","ceil","numberToPoint","num","numberToValue","pointToValue","valueToPoint","value","getLaiziNumByValue","getLaiziNumByPoint","canShowTag","len","setToCenter","node","winSize","cc","director","getWinSize","x","y","height","formatTime","h","floor","m","s","parseInt","mh","ms","ss","drawGameCanvas","webC","_renderContext","clearColor","clear","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","getBackButtonPositionY","systemTy","ty","UserInfo","systemType","sceneSize","reultHeight","SYSTEMTYPE","iphoneOtherType","iPhoneXType","ANDROIDOther","iPhone7P8PType","ANDROIDVIVO85","getCeLabgSizeY","getBannerIntervalY","getMainInterY","size","getOpenData","update","wechatTypeA","wechatType","split","hall","MsgBoxManager","showToast","GameWorld","weChatVersionTips","wx","hasOwnProperty","openDataContext","getOpenDataContext","judgeweChatVersion","upDateRankData","val","postMessage","method","sumReward","userId","upDateRankDataChip","chip","getUserInfo","getFriendUserIds","getFriendUidCallBack","sharedCanvas","canvas","context","getContext","Timer","cancelTimer","FriendUids","myUserIdIndex","indexOf","splice","LOGD","JSON","stringify","setTimer","showGroupRank","rankType","nowWeek","ReadStringFromLocalStorage","matchModel","LAST_RANK_WEEK","shareTicket","week","showFriendRank","showOrigin","playZuanShi","isShowTips","manager","rewardNumber","isChip","isHongbao","isJiPaiQi","LOGW","loader","loadRes","err","prefab","preFabNode","instantiate","getScene","addChild","com","getComponent","parentScene","setCountWithNumber","ani","Animation","clipName","getClips","name","anim","getAnimationState","setTipsRichText","once","play","changeDiamondToHongbao","changeDiamondToJiPaiQi","changeDiamondToChip","bind","playMultiReward","coinNum","diamondNum","jipaiqiNum","countNum","_title","updateRewardInfo","showWindowTipsForFriend","callBack","preFabPath","comName","friendModel","tipsWindow","animation","anim1","playShareZuanShi","tips","strRich","tipsNode","removeFromParent","updateDiamondCount","updateTipsText","updateCoinText","checkFailCount","matchName","canShowMatchRevivalPanel","lastFailDate","LAST_FAIL_DATE","curDate","GlobalTimer","getCurDay","countString","FAIL_NUMBER_LIST","countDic","parse","setInLocalStorage","gameModel","setTempDataWithArenaFailTime","setTempDataWithMatchFailTime","nowNumber","getFailCondition","failCount","config","resurgenceConfig","matchConfig","curWait","getCurWaitInfo","cityConfig","fightMatch","arenaMatch","arenaMatchNew","matchId","isInBSGS","userConfig","isNewUser","newUserProtect","newUser","oldUser","stageIndex","i","length","configDic","stageIndexMax","stageIndexMin","failCondition","j","failDic","failCountMin","failCountMax","revivalShareKey","resurgenceCondition","conditionType","requestCount","getFightMatchAdConfigJson","tgCount","showArenaReviveWindow","arenaMatchDes","showPopWinByPreFab","window","setMatchInfo","showRevivalWindow","matchRevivalPanel","setContentWithFailCondition","showShareGuideWindow","isWin","chipNumber","multiple","adsCounts","setRewardAndCompersation","showTipsWindowWithString","widthTips","buttonS","tiString","setTitleContentAndButtonsString","title","callFunc","showDiamondInsufficient","shareType","Share","onShareType","clickStatShareTypeGetDiamondHall","shareWithType","showNormalTipsWindow","buttons","normalWindow","showDropEffect","baseScale","pNode","scale","seq","sequence","scaleTo","runAction","showShareMomentsItem","type","data","BiLog","clickStat","clickStatEventType","clickStatEventTypeButtonClick","setShareImageType","setDayLoginRewardCount","dayLoginCount","day","nowHour","getCurHours","setTodayLoginRewardDic","lastGetStateString","LAST_GETDAYREWARD_TIME","lastGetStateDic","dayGetList","lastGetHour","nowDic","removeMatchResultPanel","requestAnimationFrame","NotificationCenter","trigger","EventType","REMOVE_ALL_MATCH_RESULT_PANEL","isFristGetReward","lastDate","LAST_GET_REWARD_DAY","curDay","noteToFriend","noteType","moneyCount","serverConfig","getServerConfigJson","version","mv","couponCount","ME","udataInfo","m_couponCount","exchangedCoupon","m_exchangedCoupon","getMoneyStringWithCoupons","MsgFactory","sendRewardMsgToFriends","giftBtnClick","gongZhonghaoMenuPoint","onOfficialAccountGuide"],"mappings":"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","file":"DdzGlobalFuncs.js","sourceRoot":"../../../../../assets/Script/ddz","sourcesContent":["//\n// ddz_global.js\n// highladder\n//\n// Created by guangy on 2016-03-08\n// \n//斗地主global\n\nddz.GlobalFuncs = {};\n\nddz.GlobalFuncs.SortCardFunc = function(c1, c2) {\n\tvar info1 = c1._info;\n\tvar info2 = c2._info;\n\n\tif (info1._type < info2._type){\n\t\treturn 1;\n\t}\n\telse if (info1._type >info2._type){\n\t\treturn -1\n\t}\n\telse{\n\t\tif (info1._value < info2._value) {\n\t\t\treturn 1;\n\t\t} else if (info1._value > info2._value) {\n\t\t\treturn -1\n\t\t}\n\t\telse{\n\t\t\treturn info2._color - info1._color;\n\t\t}\n\t}\n};\nddz.GlobalFuncs.SortCardFuncForInfo = function(c1, c2) {\n\tvar info1 = c1;\n\tvar info2 = c2;\n\n\tif (info1._type < info2._type){\n\t\treturn 1;\n\t}\n\telse if (info1._type >info2._type){\n\t\treturn -1\n\t}\n\telse{\n\t\tif (info1._value < info2._value) {\n\t\t\treturn 1;\n\t\t} else if (info1._value > info2._value) {\n\t\t\treturn -1\n\t\t}\n\t\telse{\n\t\t\treturn info2._color - info1._color;\n\t\t}\n\t}\n};\n/**\n * 按牌的point排序\n * @param  {[type]} o1 [description]\n * @param  {[type]} o2 [description]\n * @return {[type]}    [description]\n */\nddz.GlobalFuncs._sortByPoint = function (o1, o2) {\n\treturn o1.point - o2.point;\n};\n\nddz.GlobalFuncs.GetNextIndex = function(index, totalnum) {\n\tif (typeof(totalnum) == \"undefined\") {\n\t\treturn index % 3 + 1;\n\t}\n\treturn index % totalnum + 1;\n};\n\nddz.GlobalFuncs.getPreIndex = function(index, totalnum) {\n\tif (typeof(totalnum) == 'undefined') {\n\t\treturn index == 1 ? 3 : index - 1;\n\t}\n\treturn index == 1 ? totalnum : index - 1;\n};\n\nddz.GlobalFuncs.getTopIndex = function  (index,totalnum) {\n\tif (typeof(totalnum) == 'undefined') {\n\t\treturn index == 1 ? 2 : 1;\n\t}\n\treturn index == 1 ? 2 : 1;\n};\n\nddz.GlobalFuncs.getMyIndex = function  (index, totalnum) {\n\tif (typeof(totalnum) == 'undefined') {\n\t\treturn index%2+1;\n\t}\n\treturn index%totalnum +1;\n};\n\nddz.GlobalFuncs.GetCardsOriginInterval = function(container, cardWidth, iNum) {\n\tvar cardsLayerWidth = container.getBoundingBox().width;\n\t//被挡扑克牌最多允许显示0.5宽度，所以当这个最大宽度小于容器宽度时，必须按最大显示且有偏移， 否则按容器百分比显示\n\tvar maxlen = cardWidth * (iNum - 1) * ddz.CARD_MAX_INTERVAL + cardWidth;\n\tvar origin, interval;\n\t//指分行的位置，默认应该是个极大值，表示不分行\n\tvar breakline = 10;\n\tif (maxlen > cardsLayerWidth) {\n\t\t// hall.LOGW('global', \"poker more than need\");\n\t\torigin = 0;\n\t\tinterval = (cardsLayerWidth - cardWidth) / (iNum - 1);\n\t\tvar minlen = cardWidth * (iNum - 1) * ddz.CARD_MIN_INTERVAL + cardWidth;\n\t\tif (minlen > cardsLayerWidth) {\n\t\t\tbreakline = Math.ceil((cardsLayerWidth - cardWidth) / (cardWidth * ddz.CARD_MIN_INTERVAL));\n\t\t\tinterval = (cardsLayerWidth - cardWidth) / (breakline - 1);\n\t\t}\n\n\t} else {\n\t\t//这里初始位置设定为0.2, 有必要写入global中\n\t\torigin = (cardsLayerWidth - maxlen) / 2;\n\t\tinterval = ddz.CARD_MAX_INTERVAL * cardWidth;\n\t\t// hall.LOGW('global', \"origin : \" + origin + \"  interval : \" + interval);\n\t}\n\n\treturn {\n\t\t\"origin\": origin,\n\t\t\"interval\": interval,\n\t\t\"breakline\": breakline\n\t};\n};\n\n/**\n *\n * @param num\n * @returns {number}\n * @constructor\n */\nddz.GlobalFuncs.numberToPoint = function(num) {\n\tvar point = num % 13;\n\tif (num == 52 || num == 53) {\n\t\tpoint = num % 13 + 13;\n\t}\n\tif (num > 53) { // 癞子牌\n\t\tpoint = num - 54;\n\t}\n\treturn point;\n};\n\n/**\n * 根据牌序号获取牌权重值\n * @param num 牌序号\n * @returns {number} 权重值\n */\nddz.GlobalFuncs.numberToValue = function(num) {\n\tvar point = this.numberToPoint(num);\n\treturn this.pointToValue(point);\n\t// if (num < 0) {\n\t// \thall.LOGW('global', \"error, num < 0 in ddz.GlobalFuncs.numberToValue!!\");\n\t// \treturn -1;\n\t// }\n\t// if (num > 53) {\n\t// \treturn 15; //癞子牌\n\t// } else if (num == 53) { //大王\n\t// \treturn 14;\n\t// } else if (num == 52) { //小王\n\t// \treturn 13;\n\t// } else {\n\t// \tvar point = num % 13 + 1;\n\t// \tif (point < 3) { // A = 11, 2 = 12\n\t// \t\treturn point + 10;\n\t// \t} else {\n\t// \t\treturn point - 3; // 3 = 0, 4 = 1...\n\t// \t}\n\t// }\n\t// return -1;\n};\n\n/**\n * 根据牌点数获取牌权重值\n * @param point 牌点数\n * @returns {*} 牌权重值\n */\nddz.GlobalFuncs.pointToValue = function(point) {\n\tif (point == -1) {\n\t\treturn -1\n\t} else if (point <= 12) {\n\t\treturn (point - 2 + 13) % 13\n\t} else {\n\t\treturn point\n\t}\n};\n\n/**\n * 权重转点数\n * @param value 权重\n * @returns {*}\n */\nddz.GlobalFuncs.valueToPoint = function(value){\n\tif (value == -1) {\n\t\treturn -1\n\t} else if (value <= 12) {\n\t\treturn (value + 2) % 13\n\t} else {\n\t\treturn value\n\t}\n};\n\n\n// ddz.GlobalFuncs.getLaiziNumByValue = function(value) { //获得需要转换成相应value的癞子number，例如癞子牌当做5打出，则value = 2\n// \tif (value >= 0 && value < 11) {\n// \t\treturn 56 + value;\n// \t} else if (value < 13) {\n// \t\treturn 43 + value;\n// \t} else {\n// \t\thall.LOGW('global', \"error! value should not larger than 12\");\n// \t}\n// };\n\nddz.GlobalFuncs.getLaiziNumByValue = function(value) {\n\tvar point = this.valueToPoint(value);\n\treturn this.getLaiziNumByPoint(point);\n};\n\nddz.GlobalFuncs.getLaiziNumByPoint = function(point) {\n\treturn point + 54;\n};\n\nddz.GlobalFuncs.canShowTag = function (breakline, len, index) {\n\treturn index == len - 1 || (index + 1) % breakline  == 0;\n};\n\nddz.GlobalFuncs.setToCenter = function (node) {\n\tvar winSize = cc.director.getWinSize();\n\tnode.x = winSize.width/2;\n\tnode.y = winSize.height/2;\n};\n\n/**\n * 秒转换为时间\n * @param value 秒\n */\nddz.GlobalFuncs.formatTime = function (value) {\n\tvar h = Math.floor(value / 3600);\n\tvar m = Math.floor((value % 3600)/60);\n\tvar s = parseInt(value % 60);\n\n\tvar mh = h < 10 ? \"0\" + h : \"\" + h;\n\tvar ms = m < 10 ? \"0\" + m : \"\" + m;\n\tvar ss = s < 10 ? \"0\" + s : \"\" + s;\n\n\treturn mh +  \":\" + ms + \":\" + ss;\n};\n\nddz.GlobalFuncs.drawGameCanvas = function () {\n\tvar webC = cc._renderContext;\n\t// webC.enable(webC.SCISSOR_TEST);\n\twebC.clearColor(183/255, 220/255,181/255, 1);//底部颜色\n\twebC.clear(webC.COLOR_BUFFER_BIT | webC.DEPTH_BUFFER_BIT);\n};\n\n// ddz.GlobalFuncs.getWindowWidthscaling = function () {\n// \tvar winSize = cc.director.getWinSize();\n// \treturn winSize.width/640;\n// };\n\nddz.GlobalFuncs.getBackButtonPositionY = function () {\n\tvar systemTy = ty.UserInfo.systemType;\n\tvar sceneSize = cc.director.getWinSize();\n\tvar reultHeight = 0;\n\tif (systemTy == ty.UserInfo.SYSTEMTYPE.iphoneOtherType){//其他iPhone\n\t\treultHeight = sceneSize.height/2-49;\n\t}else if(systemTy == ty.UserInfo.SYSTEMTYPE.iPhoneXType){ //iPhoneX\n\t\treultHeight = sceneSize.height/2-102;\n\t}else if(systemTy == ty.UserInfo.SYSTEMTYPE.ANDROIDOther){ //cc.sys.OS_ANDROID\n\t\treultHeight = sceneSize.height/2-54;\n\t}else if(systemTy == ty.UserInfo.SYSTEMTYPE.iPhone7P8PType){ //8p\n\t\treultHeight = sceneSize.height/2-46;\n\t} else if(systemTy == ty.UserInfo.SYSTEMTYPE.ANDROIDVIVO85){ //vivo Y85A\n\t\treultHeight = sceneSize.height/2-104;\n\t}\n\treturn reultHeight;\n};\n\nddz.GlobalFuncs.getCeLabgSizeY = function () {\n\tvar systemTy = ty.UserInfo.systemType;\n\tvar reultHeight = 0;\n\tif (systemTy == ty.UserInfo.SYSTEMTYPE.iphoneOtherType){//其他iPhone\n\t\treultHeight = 49;\n\t}else if(systemTy == ty.UserInfo.SYSTEMTYPE.iPhoneXType){ //iPhoneX\n\t\treultHeight = 102;\n\t}else if(systemTy == ty.UserInfo.SYSTEMTYPE.ANDROIDOther){ //cc.sys.OS_ANDROID\n\t\treultHeight = 54;\n\t}else if(systemTy == ty.UserInfo.SYSTEMTYPE.iPhone7P8PType){ //8p\n\t\treultHeight = 46;\n\t} else if(systemTy == ty.UserInfo.SYSTEMTYPE.ANDROIDVIVO85){ //vivo Y85A\n\t\treultHeight = 104;\n\t}\n\treturn reultHeight;\n};\n\nddz.GlobalFuncs.getBannerIntervalY = function () {\n\tvar systemTy = ty.UserInfo.systemType;\n\tvar reultHeight = 0;\n\tif(systemTy == ty.UserInfo.SYSTEMTYPE.iPhoneXType){ //iPhoneX\n\t\treultHeight = 20;\n\t}\n\treturn reultHeight;\n};\n\nddz.GlobalFuncs.getMainInterY = function () {\n\tvar systemTy = ty.UserInfo.systemType;\n\tvar reultHeight = 0;\n\tvar size = cc.director.getWinSize();\n\tif(systemTy == ty.UserInfo.SYSTEMTYPE.iPhoneXType || (size.height / size.width >= 2)){ //iPhoneX\n\t\treultHeight = -102;\n\t}\n\treturn reultHeight;\n};\n\n\nddz.GlobalFuncs.getOpenData = function (update) {\n\tvar wechatTypeA = ty.UserInfo.wechatType.split(\".\");\n\tif(wechatTypeA[1] && wechatTypeA[1]< 6){\n\t\tif(!update){\n\t\t\thall.MsgBoxManager.showToast({\"title\":ddz.GameWorld.weChatVersionTips});\n\t\t}\n\t\treturn null;\n\t}else {\n\t\tif(wechatTypeA[1] && wechatTypeA[1] == 6 &&wechatTypeA[2] && wechatTypeA[2] < 2){\n\t\t\tif(!update){\n\t\t\t\thall.MsgBoxManager.showToast({\"title\":ddz.GameWorld.weChatVersionTips});\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\t}\n\tif (wx.hasOwnProperty('getOpenDataContext')){\n\t\tvar openDataContext = wx.getOpenDataContext();\n\t\tif (openDataContext){\n\t\t\treturn openDataContext\n\t\t}\n\t}\n\n\treturn null;\n};\n\n//判断微信版本号,6.7.1及以上\nddz.GlobalFuncs.judgeweChatVersion = function(){\n\tvar wechatTypeA = ty.UserInfo.wechatType.split(\".\");\n\n\tif (wechatTypeA[1] != null && wechatTypeA[1] >= 7){\n\t\tif (wechatTypeA[2] != null && wechatTypeA[2] >= 1) {\n\t\t\treturn true\n\t\t}\n\t}\n\n\treturn false;\n};\n\n\n/**\n * 更新自己的排行榜数据\n * @param val\n */\nddz.GlobalFuncs.upDateRankData = function (val) {\n\tvar openDataContext = ddz.GlobalFuncs.getOpenData(true);\n\tif(!openDataContext){\n\t\treturn;\n\t}\n\topenDataContext.postMessage({\n\t\tmethod:'updateRank',\n\t\tsumReward: val,\n\t\tuserId:ty.UserInfo.userId\n\t})\n};\nddz.GlobalFuncs.upDateRankDataChip = function (val) {\n\tvar openDataContext = ddz.GlobalFuncs.getOpenData(true);\n\tif(!openDataContext){\n\t\treturn;\n\t}\n\topenDataContext.postMessage({\n\t\tmethod:'updateRankChip',\n\t\tchip: val,\n\t\tuserId:ty.UserInfo.userId\n\t})\n};\nddz.GlobalFuncs.getUserInfo = function () {\n\tvar openDataContext = ddz.GlobalFuncs.getOpenData(true);\n\tif(!openDataContext){\n\t\treturn;\n\t}\n\topenDataContext.postMessage({\n\t\tmethod:'getUserInfo'\n\t})\n};\n\n/**\n * 获取同玩好友的uid数组\n */\nddz.GlobalFuncs.getFriendUserIds = function () {\n\tvar openDataContext = ddz.GlobalFuncs.getOpenData(true);\n\tif(!openDataContext){\n\t\treturn;\n\t}\n\n\tvar getFriendUidCallBack = function () {\n\t\tvar openDataContext = wx.getOpenDataContext();\n\t\tvar sharedCanvas = openDataContext.canvas;\n\n\t\tif (sharedCanvas && sharedCanvas.hasOwnProperty('2d')) {\n\t\t\tvar context = sharedCanvas.getContext(\"2d\");\n\t\t\tif (context.hasOwnProperty('friendUids')) {\n\t\t\t\tty.Timer.cancelTimer(cc.director, getFriendUidCallBack);\n\t\t\t\tty.UserInfo.FriendUids = context['friendUids'];\n\t\t\t\tvar myUserIdIndex = ty.UserInfo.FriendUids.indexOf(ty.UserInfo.userId);\n\t\t\t\tif (myUserIdIndex > -1){//从好友列表中,删除自己的ID\n\t\t\t\t\tty.UserInfo.FriendUids.splice(myUserIdIndex, 1);\n\t\t\t\t}\n\t\t\t\tddz.LOGD('ddz.GlobalFuncs.getFriendUserIds', JSON.stringify(ty.UserInfo.FriendUids));\n\t\t\t\tdelete context['friendUids'];\n\t\t\t}\n\t\t}\n\n\t};\n\n\tty.Timer.setTimer(cc.director, getFriendUidCallBack, 1/30);\n\topenDataContext.postMessage({\n\t\tmethod:'getFriendUserIds'\n\t})\n};\n\n/**\n * 更新自己的群排行榜数据\n * @param val 群shareTicket\n */\nddz.GlobalFuncs.showGroupRank = function (val,rankType) {\n\tvar nowWeek = hall.GlobalFuncs.ReadStringFromLocalStorage(ddz.matchModel.LAST_RANK_WEEK, \"\");\n\tvar openDataContext = ddz.GlobalFuncs.getOpenData();\n\tif(!openDataContext){\n\t\treturn;\n\t}\n\topenDataContext.postMessage({\n\t\tmethod:'showGroupRank',\n\t\tshareTicket: val,\n\t\tweek:nowWeek,\n\t\tuserId:ty.UserInfo.userId,\n\t\trankType : rankType\n\t})\n};\n\n/**\n * 更新自己的好友排行榜数\n */\nddz.GlobalFuncs.showFriendRank = function (shareTicket,rankType) {\n\tvar nowWeek = hall.GlobalFuncs.ReadStringFromLocalStorage(ddz.matchModel.LAST_RANK_WEEK, \"\");\n\tvar openDataContext = ddz.GlobalFuncs.getOpenData();\n\tif(!openDataContext){\n\t\treturn;\n\t}\n\topenDataContext.postMessage({\n\t\tmethod:'showFriendRank',\n\t\tweek:nowWeek,\n\t\tuserId:ty.UserInfo.userId,\n\t\trankType : rankType\n\t})\n};\n/**\n * 初始化\n */\nddz.GlobalFuncs.showOrigin = function () {\n\tvar openDataContext = ddz.GlobalFuncs.getOpenData();\n\tif(!openDataContext){\n\t\treturn;\n\t}\n\topenDataContext.postMessage({\n\t\tmethod:'showOrigin'\n\t})\n};\n\nddz.GlobalFuncs.playZuanShi = function (isShowTips,manager,rewardNumber,isChip,isHongbao,isJiPaiQi) {\n\thall.LOGW(\"==\",\" file = [DdzGlobalFuncs] fun = [playZuanShi] isShowTips = \" + isShowTips);\n\tcc.loader.loadRes('prefabs/zuanshi/zuanshi', function (err, prefab) {\n\t\tvar preFabNode = cc.instantiate(prefab);\n\t\tcc.director.getScene().addChild(preFabNode,777777);\n\t\tddz.GlobalFuncs.setToCenter(preFabNode);\n\t\tvar com = preFabNode.getComponent('ddz_zuanShiAni');\n\t\tcom.parentScene = manager;\n\t\tif(rewardNumber){\n\t\t\tcom.setCountWithNumber(rewardNumber);\n\t\t}\n\n\t\tif(!isChip){\n\t\t\tvar ani = preFabNode.getComponent(cc.Animation);\n\t\t\tvar clipName = ani.getClips()[0].name;\n\t\t\tvar anim = ani.getAnimationState(clipName);\n\t\t\tcom.setTipsRichText(isShowTips);\n\t\t\tanim.once(\"finished\", function () {\n\t\t\t});\n\t\t\tanim.play();\n\t\t}else {\n\t\t\tif (isHongbao) {\n\t\t\t\tcom.changeDiamondToHongbao();\n\t\t\t}else {\n\t\t\t\tif (isJiPaiQi) {\n\t\t\t\t\tcom.changeDiamondToJiPaiQi();\n\t\t\t\t}else {\n\t\t\t\t\tcom.changeDiamondToChip();\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\t}.bind(this));\n};\n\nddz.GlobalFuncs.playMultiReward = function (coinNum,diamondNum,jipaiqiNum,countNum,_title) {\n\tcc.loader.loadRes('prefabs/ddz_multiReward', function (err, prefab) {\n\t\tvar preFabNode = cc.instantiate(prefab);\n\t\tcc.director.getScene().addChild(preFabNode,777777);\n\t\tddz.GlobalFuncs.setToCenter(preFabNode);\n\t\tvar com = preFabNode.getComponent('multiReward');\n\t\tcom.updateRewardInfo(coinNum,diamondNum,jipaiqiNum,countNum,_title);\n\t\t\n\t}.bind(this));\n};\n\nddz.GlobalFuncs.showWindowTipsForFriend = function (callBack) {\n\tvar preFabPath = \"prefabs/ddz_window_tips\";\n\tvar comName = \"ddz_tipsWindow\";\n\tif(ddz.friendModel.tipsWindow){\n\t\thall.LOGW(\"==ddz.friendModel.tipsWindow==\",\"======ddz.friendModel.tipsWindow======\");\n\t\tcc.director.getScene().addChild(ddz.friendModel.tipsWindow);\n\t\tcallBack(ddz.friendModel.tipsWindow,comName);\n\t\tvar animation = ddz.friendModel.tipsWindow.getComponent(cc.Animation);\n\t\tvar anim1 = animation.getAnimationState('tipsWindowNode');\n\t\tanim1.play();\n\t}else {\n\t\thall.LOGW(\"===\",\"======!!!!ddz.friendModel.tipsWindow======\");\n\t\tcc.loader.loadRes(preFabPath, function (err, prefab) {\n\t\t\tvar preFabNode = cc.instantiate(prefab);\n\t\t\tddz.friendModel.tipsWindow = preFabNode;\n\t\t\tcc.director.getScene().addChild(preFabNode);\n\t\t\tddz.GlobalFuncs.setToCenter(preFabNode);\n\t\t\tcallBack(preFabNode,comName);\n\t\t});\n\t}\n};\n\nddz.GlobalFuncs.playShareZuanShi = function (rewardNumber,tips,strRich) {\n\thall.LOGW(\"==\",\" file = [DdzGlobalFuncs] fun = [playShareZuanShi] rewardNumber = \" + rewardNumber);\n\tif(ddz.tipsNode){\n\t\tddz.tipsNode.removeFromParent();\n\t\tddz.tipsNode = null;\n\t}\n\tcc.loader.loadRes('prefabs/conversionSuccess', function (err, prefab) {\n\t\tvar preFabNode = cc.instantiate(prefab);\n\t\tcc.director.getScene().addChild(preFabNode);\n\t\tif (ddz.tipsNode) {\n\t\t\tddz.tipsNode.removeFromParent();\n\t\t\tddz.tipsNode = null;\n\t\t}\n\t\tddz.tipsNode = preFabNode;\n\t\tvar winSize = cc.director.getWinSize();\n\t\tpreFabNode.x = winSize.width/2;\n\t\tpreFabNode.y = winSize.height/2 + 103;\n\n\t\tvar com = preFabNode.getComponent('conversionSuccess');\n\t\tcom.updateDiamondCount(rewardNumber);\n\t\t\n\t\tif (tips) {\n\t\t\tcom.updateTipsText(tips);\n\t\t}\n\t\tif (strRich) {\n\t\t\tcom.updateCoinText(strRich);\n\t\t}\n\n\t}.bind(this));\n};\n//\n// /**\n//  * 检查是否为当天第一次失败\n//  * @returns {boolean}\n//  */\n// ddz.GlobalFuncs.checkFirstFail = function () {\n//\n// \tvar lastFailDate = hall.GlobalFuncs.ReadStringFromLocalStorage(ddz.matchModel.LAST_FAIL_DATE, \"\");\n// \tvar curDate = hall.GlobalTimer.getCurDay();\n// \tif (lastFailDate != curDate){\n// \t\thall.GlobalFuncs.setInLocalStorage(ddz.matchModel.LAST_FAIL_DATE, curDate);\n// \t\treturn true;\n// \t}\n// \treturn false;\n// };\n//\n/**\n * 检查某个比赛当天失败的次数\n * @returns {int}\n */\nddz.GlobalFuncs.checkFailCount = function (matchName) {\n\tddz.matchModel.canShowMatchRevivalPanel = false;\n\t// FAIL_NUMBER_LIST\n\tvar lastFailDate = hall.GlobalFuncs.ReadStringFromLocalStorage(ddz.matchModel.LAST_FAIL_DATE, \"\");\n\tvar curDate = hall.GlobalTimer.getCurDay();\n\tvar countString = hall.GlobalFuncs.ReadStringFromLocalStorage(ddz.matchModel.FAIL_NUMBER_LIST, \"\");\n\tvar countDic = {};\n\tif(countString != \"\"){\n\t\tcountDic = JSON.parse(countString);\n\t}\n\tif (lastFailDate != curDate){\n\t\tcountDic = {};\n\t\thall.GlobalFuncs.setInLocalStorage(ddz.matchModel.LAST_FAIL_DATE, curDate);\n\t\tcountDic[matchName] = 1;\n\t\thall.GlobalFuncs.setInLocalStorage(ddz.matchModel.FAIL_NUMBER_LIST, JSON.stringify(countDic));\n\t\tif(matchName == \"arena\"){\n\t\t\tddz.gameModel.setTempDataWithArenaFailTime(1);\n\t\t}else {\n\t\t\tddz.gameModel.setTempDataWithMatchFailTime(1);\n\t\t}\n\t\thall.GlobalFuncs.setInLocalStorage(ddz.matchModel.FAIL_NUMBER_LIST, JSON.stringify(countDic));\n\t\treturn 1;\n\t}\n\tif(!countDic[matchName]){\n\t\tcountDic[matchName] = 1;\n\t\thall.GlobalFuncs.setInLocalStorage(ddz.matchModel.FAIL_NUMBER_LIST, JSON.stringify(countDic));\n\t\tif(matchName == \"arena\"){\n\t\t\tddz.gameModel.setTempDataWithArenaFailTime(1);\n\t\t}else {\n\t\t\tddz.gameModel.setTempDataWithMatchFailTime(1);\n\t\t}\n\t\thall.GlobalFuncs.setInLocalStorage(ddz.matchModel.FAIL_NUMBER_LIST, JSON.stringify(countDic));\n\t\treturn 1;\n\t}\n\tvar nowNumber = parseInt(countDic[matchName]);\n\tnowNumber += 1;\n\tcountDic[matchName] = nowNumber;\n\tif(matchName == \"arena\"){\n\t\tddz.gameModel.setTempDataWithArenaFailTime(nowNumber);\n\t}else {\n\t\tddz.gameModel.setTempDataWithMatchFailTime(nowNumber);\n\t}\n\thall.GlobalFuncs.setInLocalStorage(ddz.matchModel.FAIL_NUMBER_LIST, JSON.stringify(countDic));\n\treturn nowNumber;\n};\n\nddz.GlobalFuncs.getFailCondition = function (matchName,failCount) {\n\tvar config = ddz.gameModel.resurgenceConfig;\n\tif(!config){\n\t\treturn null;\n\t\t// config = ddz.Share.resurgenceConfig;\n\t}\n\tvar matchConfig;\n\tvar curWait = ddz.matchModel.getCurWaitInfo();\n\tif (config.hasOwnProperty('cityConfig')){\n\n\t\tvar cityConfig = config.cityConfig;\n\n\t\tmatchConfig = cityConfig.fightMatch;\n\t\tif(matchName == \"arena\"){\n\t\t\tmatchConfig = cityConfig.arenaMatch;\n\t\t\tif (cityConfig.hasOwnProperty('arenaMatchNew') && curWait){\n\t\t\t\tmatchConfig = cityConfig.arenaMatchNew[curWait.matchId];\n\t\t\t}\n\t\t}\n\n\t\t//新老配置兼容,有新配置,取新配置\n\t\tmatchConfig = ty.UserInfo.isInBSGS ? matchConfig['bsgsCity'] : matchConfig['otherCity']; //以特征为标准取值\n\t}\n\telse{\n\t\tmatchConfig = config.fightMatch;\n\t\tif(matchName == \"arena\"){\n\t\t\tmatchConfig = config.arenaMatch;\n\t\t}\n\t}\n\n\tvar userConfig;\n\tif(curWait){\n\t\tvar isNewUser = curWait.newUserProtect == 1;\n\t\tif(isNewUser){\n\t\t\tuserConfig = matchConfig.newUser;\n\t\t}else {\n\t\t\tuserConfig = matchConfig.oldUser;\n\t\t}\n\t\tvar stageIndex = curWait.stageIndex;\n\t\tfor (var i = 0 ; i < userConfig.length ; i ++){\n\t\t\tvar configDic = userConfig[i];\n\t\t\tif(stageIndex <= configDic.stageIndexMax && stageIndex >= configDic.stageIndexMin){\n\t\t\t\tvar failCondition = configDic.failCondition;\n\t\t\t\tfor (var j = 0 ; j < failCondition.length ; j ++){\n\t\t\t\t\tvar failDic = failCondition[j];\n\t\t\t\t\tif(failCount >= failDic.failCountMin && failCount <= failDic.failCountMax){\n\t\t\t\t\t\tddz.matchModel.revivalShareKey = matchName;\n\t\t\t\t\t\tif (failDic.resurgenceCondition.conditionType == \"ad\"){\n\t\t\t\t\t\t\t//修改看次数\n\t\t\t\t\t\t\tfailDic.resurgenceCondition.requestCount =  ddz.gameModel.getFightMatchAdConfigJson(stageIndex, ty.UserInfo.tgCount, failCount, isNewUser);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn failDic;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn null;\n};\n\nddz.GlobalFuncs.showArenaReviveWindow = function (arenaMatchDes, stageIndex) {\n\tvar preFabPath = \"prefabs/ddz_window_revive\";\n\tvar  comName = \"ddz_window_revive\";\n\thall.GlobalFuncs.showPopWinByPreFab(preFabPath, function (preFabNode) {\n\t\tvar window = preFabNode.getComponent(comName);\n\t\twindow.setMatchInfo(arenaMatchDes, stageIndex);\n\t});\n};\n\nddz.GlobalFuncs.showRevivalWindow = function (failCondition,matchName) {\n\n\t// if (failCondition.resurgenceCondition.conditionType == \"ad\" && !hall.adManager.canPlay)\n\t// {\n\t// \t//当前复活是用广告方式,要检查广告是否播放成功,如果无可播放广告,不再弹出此窗口,让玩家使用钻石复活\n\t// \treturn;\n\t// }\n\n\tvar preFabPath = \"prefabs/ddz_window_revival\";\n\tvar  comName = \"ddz_revivalWindow\";\n\tif(ddz.matchRevivalPanel){\n\t\tddz.matchRevivalPanel.setContentWithFailCondition(failCondition,matchName);\n\t\t// var animation = ddz.matchRevivalPanel.getComponent(cc.Animation);\n\t\t// animation.play('tipsWindowNode');\n\t\treturn;\n\t}\n\thall.GlobalFuncs.showPopWinByPreFab(preFabPath, function (preFabNode) {\n\t\tvar window = preFabNode.getComponent(comName);\n\t\tddz.matchRevivalPanel = window;\n\t\twindow.setContentWithFailCondition(failCondition,matchName);\n\t});\n};\n\n\nddz.GlobalFuncs.showShareGuideWindow = function (isWin,chipNumber,multiple,adsCounts) {\n\n\tvar preFabPath = \"prefabs/ddz_window_revival\";\n\tvar  comName = \"ddz_revivalWindow\";\n\tif(ddz.matchRevivalPanel){\n\t\tddz.matchRevivalPanel.setRewardAndCompersation(isWin,chipNumber,multiple,adsCounts);\n\t\treturn\n\t}\n\thall.GlobalFuncs.showPopWinByPreFab(preFabPath, function (preFabNode) {\n\t\tvar window = preFabNode.getComponent(comName);\n\t\twindow.setRewardAndCompersation(isWin,chipNumber,multiple,adsCounts);\n\t\tddz.matchRevivalPanel = window;\n\t});\n};\n\nddz.GlobalFuncs.showTipsWindowWithString = function (widthTips,buttonS) {\n\tvar preFabPath = \"prefabs/ddz_window_normal\";\n\tvar  comName = \"ddz_window_normal\";\n\thall.GlobalFuncs.showPopWinByPreFab(preFabPath, function (preFabNode) {\n\t\tvar window = preFabNode.getComponent(comName);\n\n\t\tvar tiString = \"邀请好友\";\n\t\tif(buttonS){\n\t\t\ttiString = buttonS;\n\t\t}\n\t\twindow.setTitleContentAndButtonsString(\"提示\",widthTips,[{title:tiString,callFunc : function () {\n\t\t}}]);\n\t});\n};\n\n// 钻石不足\nddz.GlobalFuncs.showDiamondInsufficient = function (widthTips,buttonS) {\n\tvar preFabPath = \"prefabs/ddz_window_normal\";\n\tvar  comName = \"ddz_window_normal\";\n\thall.GlobalFuncs.showPopWinByPreFab(preFabPath, function (preFabNode) {\n\t\tvar window = preFabNode.getComponent(comName);\n\t\tvar tiString = \"邀请好友\";\n\t\tif(buttonS){\n\t\t\ttiString = buttonS;\n\t\t}\n\t\twindow.setTitleContentAndButtonsString(\"提示\",widthTips,[{title:tiString,callFunc : function () {\n\t\t\tvar shareType = ddz.Share.onShareType.clickStatShareTypeGetDiamondHall;\n\t\t\tddz.Share.shareWithType(shareType);\n\t\t}}]);\n\t});\n};\n\n\nddz.GlobalFuncs.showNormalTipsWindow = function (widthTips,buttons,title) {\n\tvar preFabPath = \"prefabs/ddz_window_normal\";\n\tvar  comName = \"ddz_window_normal\";\n\tif(ddz.gameModel.normalWindow){\n\t\tvar window = ddz.gameModel.normalWindow.getComponent(comName);\n\t\tvar _title = \"提示\";\n\t\tif(title){\n\t\t\t_title = title;\n\t\t}\n\t\twindow.setTitleContentAndButtonsString(_title,widthTips,buttons);\n\t\tvar animation = ddz.gameModel.normalWindow.getComponent(cc.Animation);\n\t\tvar anim1 = animation.getAnimationState('tipsWindowNode');\n\t\tanim1.play();\n\t\treturn;\n\t}\n\thall.GlobalFuncs.showPopWinByPreFab(preFabPath, function (preFabNode) {\n\t\tvar window = preFabNode.getComponent(comName);\n\t\tddz.gameModel.normalWindow = preFabNode;\n\t\tvar _title = \"提示\";\n\t\tif(title){\n\t\t\t_title = title;\n\t\t}\n\t\twindow.setTitleContentAndButtonsString(_title,widthTips,buttons);\n\t\t// [{title:确定\"\",callFunc : function () {}}]\n\t});\n};\n\nddz.GlobalFuncs.showDropEffect = function (baseScale, pNode) {\n\tpNode.scale = baseScale * 1.15;\n\tvar seq = cc.sequence(cc.scaleTo(0.1, baseScale * 0.93),cc.scaleTo(0.015, baseScale));\n\tpNode.runAction(seq);\n};\n\nddz.GlobalFuncs.showShareMomentsItem = function (type,data) {\n\tty.BiLog.clickStat(ty.UserInfo.clickStatEventType.clickStatEventTypeButtonClick, [\"shareMoments\",type]);\n\n\tcc.loader.loadRes('prefabs/ddz_item_shareMoments', function (err, prefab) {\n\t\tvar preFabNode = cc.instantiate(prefab);\n\t\tcc.director.getScene().addChild(preFabNode);\n\t\tddz.GlobalFuncs.setToCenter(preFabNode);\n\n\t\tvar com = preFabNode.getComponent('ddz_item_shareMoments');\n\t\tcom.setShareImageType(type,data);\n\t}.bind(this));\n};\n//检测当前今日登陆可领取的钻石数量\nddz.GlobalFuncs.setDayLoginRewardCount = function () {\n\tddz.gameModel.dayLoginCount = 0;\n\tvar day = hall.GlobalTimer.getCurDay();\n\tvar nowHour = hall.GlobalTimer.getCurHours();\n\tif(nowHour < 10){\n\t\tddz.GlobalFuncs.setTodayLoginRewardDic(day);\n\t\treturn 0;\n\t}\n\tvar lastGetStateString = hall.GlobalFuncs.ReadStringFromLocalStorage(ddz.gameModel.LAST_GETDAYREWARD_TIME, \"\");\n\tif(lastGetStateString == \"\" || lastGetStateString.indexOf(\"{\") < 0){\n\t\tddz.GlobalFuncs.setTodayLoginRewardDic(day);\n\t\treturn 1;\n\t}\n\tvar lastGetStateDic = JSON.parse(lastGetStateString);\n\tif(!lastGetStateDic[day]){\n\t\tddz.GlobalFuncs.setTodayLoginRewardDic(day);\n\t\treturn 1;\n\t}\n\tvar dayGetList = lastGetStateDic[day];\n\tddz.gameModel.dayLoginCount = dayGetList.length;\n\tif(dayGetList.length == 0){\n\t\treturn 1;\n\t}\n\tvar lastGetHour = dayGetList[dayGetList.length-1];\n\tif(lastGetHour < 18){\n\t\tif(nowHour < 18){\n\t\t\treturn -1;\n\t\t}else {\n\t\t\treturn 1;\n\t\t}\n\t}else {\n\t\treturn -1;\n\t}\n};\nddz.GlobalFuncs.setTodayLoginRewardDic = function (day) {\n\tvar nowDic = {};\n\tnowDic[day] = [];\n\thall.GlobalFuncs.setInLocalStorage(ddz.gameModel.LAST_GETDAYREWARD_TIME,JSON.stringify(nowDic));\n};\n\nddz.GlobalFuncs.removeMatchResultPanel = function (com) {\n\trequestAnimationFrame(function () {\n\t\tty.NotificationCenter.trigger(ddz.EventType.REMOVE_ALL_MATCH_RESULT_PANEL, com);\n\t})\n};\n\nddz.GlobalFuncs.isFristGetReward = function () {\n\tvar lastDate = hall.GlobalFuncs.ReadStringFromLocalStorage(hall.LAST_GET_REWARD_DAY, \"\");\n\tvar curDay = hall.GlobalTimer.getCurDay();\n\tif (lastDate != curDay){\n\t\thall.GlobalFuncs.setInLocalStorage(hall.LAST_GET_REWARD_DAY, curDay);\n\t\treturn true;\n\t}\n\treturn false;\n};\n\n\nddz.GlobalFuncs.noteToFriend = function (noteType , moneyCount) {\n\tvar serverConfig = ddz.gameModel.getServerConfigJson();\n\tif (serverConfig && serverConfig.version >= 5.7){\n\t\tif (ddz.GlobalFuncs.isFristGetReward()) {\n\t\t\t//本日第一次领红包,通知给所有好友\n\t\t\tvar mv = 0;\n\t\t\tif (moneyCount){\n\t\t\t\tmv = moneyCount;\n\t\t\t}else{\n\t\t\t\tvar couponCount = hall.ME.udataInfo.m_couponCount;\n\t\t\t\tvar exchangedCoupon = hall.ME.udataInfo.m_exchangedCoupon;\n\t\t\t\tmv = hall.GlobalFuncs.getMoneyStringWithCoupons(couponCount + exchangedCoupon);\n\t\t\t}\n\n\t\t\tddz.MsgFactory.sendRewardMsgToFriends(ty.UserInfo.FriendUids, mv, noteType);\n\t\t}\n\t}\n};\n\nddz.GlobalFuncs.giftBtnClick = function () {\n\tif (ddz.gameModel.gongZhonghaoMenuPoint > 0) {\n\t\thall.GlobalFuncs.onOfficialAccountGuide();\n\t}else {\n\t\tddz.GlobalFuncs.showNormalTipsWindow(\"今天的免费礼包已领取\\n明天奖励更给力哦~\",[{title:\"确定\",callFunc:function () {\n\t\t}}],\"天天礼包\");\n\t}\n};"]}