{"version":3,"sources":["../../../../../assets/Script/hall/assets/Script/hall/HallNetWorkCenter.js"],"names":["hall","hallNetWorkCenter","_TAG","boot","LOGD","cmdMap","ddz","EventType","MSG_USER_INFO","onReceiveUserInfo","MSG_BAG_INFO","onReceiveBagInfo","MSG_GAME_DATA","onReceiveGameData","MSG_TODO_TASKS","onTodoTask","MSG_DATA_CHANGED","onUpdateChangedData","MSG_USER","onUserName","MSG_PROD_DELIVERY","onProdDelivery","MSG_LOGIN_REWARD","onLoginReward","MSG_LED","onLed","MSG_TODO_QUICK_START","_onTodoQuickStart","ty","UPDATE_UER_INFO","onUPDATE_UER_INFO","MSG_LOG_OUT","onLogout","MSG_ROOM","onRoomAction","MSG_MODULE_TIP","onModuleTip","MSG_MESSAGE","onMessage","MSG_CUSTOM_RANK","onRankList","MSG_COMPLAIN","onComplain","MSG_STORE_INFO","onStoreInfo","MSG_TABLE_POPWND","onClassicPopwnd","MSG_STORE","onStore","MSG_CUSTOMTABLE","onCustomTable","MSG_ROOM_ONLINE_INFO","onRoomOnlineInfo","MSG_CASH","onCash","MSG_CHARGE_NOTIFY","onChargeNotify","NotificationCenter","listen","TCP_OPENED","onTCP_Open","TCP_RECEIVE","onReceiveTCP_Msg","MSG_ON_LOC","_onLocInfo","GET_USER_FEATURE_SUCCESS","_userFeature","shut","ignoreScope","MsgFactory","bindUser","value","msgCmd","cmd","result","gameId","SystemInfo","hallId","func","call","CMD_STORE_INFO","errMsg","error","info","MsgBoxManager","showToast","title","larr","matchModel","cleanWaitInfo","gameid","parseInt","roomid","tableid","seatId","sceneInfo","UserInfo","onShowParam","wx","getLaunchOptionsSync","LOGW","JSON","stringify","scene","scene_id","query","shareTicket","queryS","GlobalFuncs","replaceToStringWithDic","qrCodeOption","withQrCode","par","hasOwnProperty","path","runOption","from","topage","gameModel","getDayInviteReward","isClickShareReward","shareToGetreward","Share","SharePointType","gongZhongHaoCard","param1","param2","getBoxReward","gongZhongHaoMenu","addApplet","sourceCode","BiLog","clickStat","clickStatEventType","clickStatEventTypeUserFrom","inviteCode","clickStatShareType","imageType","bindInviteCode_ID","onShareType","clickStatShareTypeSeekHelpFriend","getHelpBoxReward","clickStatShareTypeInviteFriend","ftID","clickStatEventTypeInviteFriendCardSuccess","clickStatShareTypeGiveProp","treasureID","clickStatEventTypeGivePropSuccess","clickStatShareTypeNewUserGifts","giftID","getNewGiftReward","curDay","GlobalTimer","getCurDay","lastDay","ReadStringFromLocalStorage","LAST_LOGIN_TIME","inviteName","userId","setInLocalStorage","string","showTipsWindowWithString","appid","isOnShare","playAnimationAfterShareWithType","getMatchRecords","_boxUserId","getOpenGid","friendModel","enterFriendTable","waitGetRevial","type","needCount","matchType","curCount","i","sharePoint","firstFail","getQuickStart","staticSystemInfo","version","isInAtScene","trigger","REMOVE_TABLE_ANI","gotoRank","matchResultPanel","matchRevivalPanel","arenaResultPanel","gameResultPanel","hongBaoPanel","bannerResurgenceWindow","gotoDdz","clickStatEventTypeTCP_Success","onUserInfo","bindGame","sendVersion","funList","matchUpdate","getMatchDes","getOldUserChipReward","getArenaMatchConfig","getAlmsConfig","getServerConfig","getBringConfig","getTableBannerConfig","getTableTopBannerConfig","getGoldTableBannerConfig","getMatchTableBannerConfig","getRoomListBannerConfig","getBannerResurgenceConfig","getSkipCustomConfig","getRewardMethod","getBoxShareSuccessTips","queryInviteConfig","getCommonConfig","getFightMatchAdConfig","getMatchingMassageConfig","getResurgenceConfigConfig","getRewardAnbuchangConfigConfig","getcongratulationGetRedPacketConfig","getShareMomentsConfig","getTempData","getOpenBox","getDiversionConfig","getTimeStamp","getSystemMessageInfo","getFriendUserIds","runOneFun","length","shift","requestAnimationFrame","val","data","loc","featureInfo","isInBSGS","checkBSGS","ip","isBringVersion","ME","parseBagInfo","onGameData","getHallInfo","gameWorld","model","m_todoTask","parseTodoTask","argument","curValue","getGameData","getBagInfo","getUserInfo","action","code","MSG_NAME_BACK","ACTION_SYNC_TIMESTAMP","GET_TIMESTAMP","params","UPDATE_PAY_SUCCESS","success","loginRewardinfo","parse","MSG_REWARD_SUCCESS","_bBindGame","parseUserInfo","UPDATE_COIN_NUMBER","SET_LOSS_MONEY_NUMBER","UPDATE_CELA_MENU_INFO","checkShareReward","firstUseJiPaiQi","curScene","cc","director","getScene","name","getDayFirstLogin","getStoreInfo","queryWatchVideoReward","parseGameData","hallGData","m_winchipstats","MSG_GDATA_BACK","checkMsgWithGameId","GameId","gdataInfo","m_loginsum","getEveryTaskInfo","getPersonalMsg","getGlobalMsg","scope","parseLed","text","m_ledBeWork","CMD_LED_RECEIVE","parseGameLed","param","userInfo","interval","objectInfo","m_heart","heartbeat","isOtherLogin","err","UPDATE_CASH_RESULT","msgInfo","praseModultTip","list","parseSysInfo","MSG_SYS_MESSAGE_BACK","parseReceiveInfo","MSG_REC_MESSAGE_BACK","parseSendInfo","MSG_SEND_MESSAGE_BACK","msgTitle","unReadCount","sysUnread","HAS_MAIL_KEY","RECIVE_MESSAGE_LIST","notifyMailMessage","messageCount","msgs","indexOf","_info","index_2","versions","slice","timer","time","content","sign","msgid","id","get","attachment","UPDATE_COMMON_CONFIG","itemlist","countNum","coinNum","diamondNum","jipaiqinum","itemId","count","playMultiReward","messageRewardTitle","str","parseMatchStore","STORE_INFO_UPDATE","UPDATE_POP_WINDOW","MSG_CUSTOMTABLE_GAMEDATA","MSG_CUSTOMTABLE_FIGHTDATA"],"mappings":"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","file":"HallNetWorkCenter.js","sourceRoot":"../../../../../assets/Script/hall","sourcesContent":["/**\n * 大厅消息中心\n */\nhall.hallNetWorkCenter = {\n    _TAG : 'hall.hallNetWorkCenter',\n    boot : function (){\n        hall.LOGD(this._TAG, \"boot!\");\n\n        this.cmdMap = {};\n        //注册消息监听\n\n        this.cmdMap[ddz.EventType.MSG_USER_INFO] = this.onReceiveUserInfo;\n        this.cmdMap[ddz.EventType.MSG_BAG_INFO] = this.onReceiveBagInfo;\n        this.cmdMap[ddz.EventType.MSG_GAME_DATA] = this.onReceiveGameData;\n        this.cmdMap[ddz.EventType.MSG_TODO_TASKS] = this.onTodoTask;\n        this.cmdMap[ddz.EventType.MSG_DATA_CHANGED] = this.onUpdateChangedData;\n        this.cmdMap[ddz.EventType.MSG_USER] = this.onUserName;\n\n        this.cmdMap[ddz.EventType.MSG_PROD_DELIVERY] = this.onProdDelivery;\n\n        this.cmdMap[ddz.EventType.MSG_LOGIN_REWARD] = this.onLoginReward;\n\n        this.cmdMap[ddz.EventType.MSG_LED] = this.onLed;\n        this.cmdMap[ddz.EventType.MSG_TODO_QUICK_START] = this._onTodoQuickStart;\n        this.cmdMap[ty.EventType.UPDATE_UER_INFO] = this.onUPDATE_UER_INFO;\n        this.cmdMap[ty.EventType.MSG_LOG_OUT] = this.onLogout;\n\n        this.cmdMap[ddz.EventType.MSG_ROOM] = this.onRoomAction;\n        this.cmdMap[ddz.EventType.MSG_MODULE_TIP] = this.onModuleTip;\n        this.cmdMap[ddz.EventType.MSG_MESSAGE] = this.onMessage;\n        this.cmdMap[ddz.EventType.MSG_CUSTOM_RANK] = this.onRankList;\n        this.cmdMap[ddz.EventType.MSG_COMPLAIN] = this.onComplain;\n        this.cmdMap[ddz.EventType.MSG_STORE_INFO] = this.onStoreInfo;\n\n        this.cmdMap[ddz.EventType.MSG_TABLE_POPWND] = this.onClassicPopwnd;\n        this.cmdMap[ddz.EventType.MSG_STORE] = this.onStore;\n        this.cmdMap[ddz.EventType.MSG_CUSTOMTABLE] = this.onCustomTable;\n\n        this.cmdMap[ddz.EventType.MSG_ROOM_ONLINE_INFO] = this.onRoomOnlineInfo;\n\n        this.cmdMap[ddz.EventType.MSG_CASH] = this.onCash;\n\n        // 商城购买;\n        this.cmdMap[ddz.EventType.MSG_CHARGE_NOTIFY] = this.onChargeNotify;\n        \n        //注册监听\n        ty.NotificationCenter.listen(ty.EventType.TCP_OPENED, this.onTCP_Open, this);\n        ty.NotificationCenter.listen(ty.EventType.TCP_RECEIVE, this.onReceiveTCP_Msg, this);\n        ty.NotificationCenter.listen(ddz.EventType.MSG_ON_LOC, this._onLocInfo, this);\n\n        ty.NotificationCenter.listen(ty.EventType.GET_USER_FEATURE_SUCCESS, this._userFeature, this);\n    },\n    \n    shut : function(){\n        this.cmdMap = {};\n        ty.NotificationCenter.ignoreScope(this);\n    },\n\n    //\n    onTCP_Open : function(){\n        //发送BindUser\n        hall.MsgFactory.bindUser();\n    },\n    /**\n     * 收到TCP消息\n     */\n    onReceiveTCP_Msg : function(value){\n        var msgCmd = value.cmd;\n        var result = value.result;\n        if (result){\n            var gameId = result.gameId;\n            if (gameId === ty.SystemInfo.hallId){\n                //大厅消息在这里处理，其它游戏，在自己的插件里监听消息，并用gameId进行过滤\n                var func = this.cmdMap[msgCmd];\n                if (func){\n                    // func(value);\n                    func.call(this, value);\n                }\n                else{\n                    // ty.NotificationCenter.trigger(msgCmd, value);\n                    hall.LOGD(this._TAG, \"未注册关于消息 ： \" + msgCmd + \" 的监听！\");\n                }\n            }else if (value.cmd == ddz.EventType.CMD_STORE_INFO) {  // store_config 特殊处理下,大厅共用,此消息没有传gameId\n                var func = this.cmdMap[msgCmd];\n                if (func){\n                    func.call(this, value);\n                }\n                else{\n                    hall.LOGD(this._TAG, \"未注册关于消息 ： \" + msgCmd + \" 的监听！\");\n                }\n            }else if (value.cmd == ddz.EventType.MSG_LED){      // 'led' 消息,\n                var func = this.cmdMap[msgCmd];\n                if (func){\n                    func.call(this, value);\n                }\n                else{\n                    hall.LOGD(this._TAG, \"未注册关于消息 ： \" + msgCmd + \" 的监听！\");\n                }\n            }\n        }\n\n        else{\n            if (msgCmd == ty.EventType.MSG_LOG_OUT){\n                var errMsg = value.error ? value.error.info : null;\n                if (errMsg){\n                    hall.MsgBoxManager.showToast({title : errMsg});\n                }\n            }\n        }\n    },\n\n    _onLocInfo: function (larr) {\n        // hall.MsgBoxManager.showToast({title:'' + larr.toString()});\n        ddz.LOGD(\"\",\"file = [HallNetWorkCenter] fun =[_onLocInfo] \");\n        ddz.matchModel.cleanWaitInfo();\n\n        var gameid = parseInt(larr[0]);\n        var roomid = parseInt(larr[1]);\n        var tableid = parseInt(larr[2]);\n        var seatId = parseInt(larr[3]);\n\n        // var sceneInfo = wx.getLaunchOptionsSync();\n        var sceneInfo = ty.UserInfo.onShowParam || wx.getLaunchOptionsSync();\n        // hall.LOGW(null, \"+++++++++sceneInfo++++++++\"+JSON.stringify(sceneInfo));\n        // var scene = sceneInfo.scene;\n        // var query = sceneInfo.query;\n        hall.LOGW(null, \"file = [HallNetWorkCenter] fun = [_onLocInfo] sceneInfo = \"+JSON.stringify(sceneInfo));\n        // var shareTicket;\n        var scene = ty.UserInfo.scene_id || sceneInfo.scene;\n        var query = sceneInfo.query;\n        var shareTicket = sceneInfo.shareTicket;\n        var queryS = hall.GlobalFuncs.replaceToStringWithDic(query);\n\n        if (ddz.qrCodeOption.withQrCode(scene)){\n            //是否为从小程序码进入\n            var par = \"\";\n            if (query.hasOwnProperty('scene')){\n                //个人小程序码\n                par = query.scene;\n            }\n            else if (sceneInfo.hasOwnProperty('path')){\n                par = sceneInfo.path;\n            }\n            ddz.qrCodeOption.runOption(par, scene);\n        }\n\n        if (scene == 1074 && query && query.from == \"fuhao_guanfang\") { // 公众号会话下发的小程序消息卡片\n            if (query.topage&&query.topage == \"fuli\") {\n                // hall.GlobalFuncs.showDiamondWindowWithType('invite');\n                hall.LOGW(\"\",\"file = [HallNetWorkCenter] fun = [_onLocInfo] fuli\");\n                ddz.gameModel.getDayInviteReward();\n                ddz.isClickShareReward = true;\n            }else {\n                ddz.gameModel.shareToGetreward(ddz.Share.SharePointType.gongZhongHaoCard);\n            }\n            if (query.param1 && query.param2){\n                ddz.gameModel.getBoxReward(parseInt(query.param1), query.param2);\n            }\n        }else if(scene == 1035 && query && query.from == \"fuhao_guanfang\") { // 公众号自定义菜单\n            ddz.gameModel.shareToGetreward(ddz.Share.SharePointType.gongZhongHaoMenu);\n        }else if(scene == 1104) { // 小程序进入\n            hall.LOGW(\"\",\"file = [HallNetWorkCenter] fun = [_onLocInfo] 小程序进入\");\n            ddz.gameModel.shareToGetreward(ddz.Share.SharePointType.addApplet);\n        }\n\n        if(query && query.sourceCode){\n            ty.BiLog.clickStat(ty.UserInfo.clickStatEventType.clickStatEventTypeUserFrom,[scene,query.inviteCode,ddz.Share.clickStatShareType[query.sourceCode],\n                query.imageType,\"GameStart\"]);\n            //邀请得钻石\n            if (query.inviteCode) {\n                ddz.gameModel.bindInviteCode_ID(parseInt(query.inviteCode));\n                // ddz.gameModel.bindNewInviteCode(parseInt(query.inviteCode));\n\n                if(query.sourceCode == ddz.Share.onShareType.clickStatShareTypeSeekHelpFriend){\n                    ddz.gameModel.getHelpBoxReward(parseInt(query.inviteCode));\n                }\n            }\n\n            //好友房打点\n            if(query.sourceCode == ddz.Share.onShareType.clickStatShareTypeInviteFriend){\n                var ftID = query.ftID ? query.ftID : \"0000\";\n                ty.BiLog.clickStat(ty.UserInfo.clickStatEventType.clickStatEventTypeInviteFriendCardSuccess,\n                    [ftID,query.inviteCode]);\n            }\n\n            //宝箱\n            if(query.sourceCode == ddz.Share.onShareType.clickStatShareTypeGiveProp){\n                var treasureID = query.treasureID ? query.treasureID : \"\";\n                ty.BiLog.clickStat(ty.UserInfo.clickStatEventType.clickStatEventTypeGivePropSuccess,\n                    [treasureID,query.inviteCode]);\n            }\n\n            //新人限时宝箱\n            if(query.sourceCode == ddz.Share.onShareType.clickStatShareTypeNewUserGifts){\n                var giftID = query.giftID ? query.giftID : \"\";\n                ddz.gameModel.getNewGiftReward(query.inviteCode,giftID);\n            }\n\n            //第一次登录展示帮助某某获得一颗钻石\n            var curDay = hall.GlobalTimer.getCurDay();\n            var lastDay=hall.GlobalFuncs.ReadStringFromLocalStorage(ddz.Share.LAST_LOGIN_TIME,\"\");\n            if (curDay != lastDay && query.inviteName\n                && query.sourceCode != ddz.Share.onShareType.clickStatShareTypeInviteFriend\n                && query.sourceCode != ddz.Share.onShareType.clickStatShareTypeGiveProp\n                && query.inviteCode != ty.UserInfo.userId) {\n                hall.GlobalFuncs.setInLocalStorage(ddz.Share.LAST_LOGIN_TIME,curDay);\n                var string =\n                    \"<color=#1A6951>成功帮助 \"+query.inviteName+\n                    \" 获得</color><img src='dda_button_diamond_black' height=34 width=42/><color=#1A6951> +1<c/><br/><color=#1A6951>每期仅能帮助一位好友哦</c>\";\n                ddz.GlobalFuncs.showTipsWindowWithString(string,\"确定\");\n            }\n        }else {\n            ty.BiLog.clickStat(ty.UserInfo.clickStatEventType.clickStatEventTypeUserFrom,[scene,query.from,query.appid,\n                \"GameStart\"]);\n        }\n\n        hall.GlobalFuncs.setInLocalStorage(ddz.Share.LAST_LOGIN_TIME,hall.GlobalTimer.getCurDay());\n\n        //存储本次登录时间最为最后登录时间\n        if(ddz.Share.isOnShare){\n            ddz.Share.playAnimationAfterShareWithType();\n        }\n        ddz.MsgFactory.getMatchRecords();\n        ddz.Share.isOnShare = false;\n\n        if (ty.SystemInfo.treasureID != \"\" && query.inviteCode) {\n            var _boxUserId = query.inviteCode;\n            ddz.Share.getOpenGid(shareTicket,_boxUserId);\n            // ddz.gameModel.getBoxReward(parseInt(_boxUserId),ty.SystemInfo.treasureID,_openGid);\n            ty.SystemInfo.shareTicket = \"\";\n        }\n        if (ty.SystemInfo.ftID != \"\") {\n            ddz.friendModel.enterFriendTable(ty.SystemInfo.ftID);\n            ty.SystemInfo.shareTicket = \"\";\n        }\n\n        // if (ddz.waitGetRevial && ddz.waitGetRevial.type == 'showWindow'){\n        //     //分享到了好友,再次拉起面板,让玩家分享到群\n        //     ddz.LOGD(\"ddz.waitGetRevial.type\", \"分享到了个人!\" + ddz.waitGetRevial.type);\n        //     ddz.GlobalFuncs.showRevialWindow(true,1);\n        //     ddz.waitGetRevial = null;\n        // }\n\n        if (ddz.waitGetRevial && ddz.waitGetRevial.type == 'send'){\n            var needCount = ddz.waitGetRevial.needCount;\n            if(ddz.waitGetRevial.matchType == 'arena') {\n                ddz.waitGetRevial.type = 'waitRecive';\n                ddz.waitGetRevial.curCount = 0;\n            } else {\n                ddz.waitGetRevial = {\n                    type : 'waitRecive',\n                    curCount : 0,\n                    needCount : needCount\n                };\n            }\n            //发送得钻石的消息\n            for (var i = 0; i < needCount; i++){\n                ddz.gameModel.shareToGetreward(ddz.waitGetRevial.sharePoint || ddz.Share.SharePointType.firstFail);\n            }\n        }\n\n        // }\n        var shareTicket;\n        if (roomid != 0 && tableid != 0) {\n            hall.MsgFactory.getQuickStart(ty.UserInfo.userId, gameid, roomid, hall.staticSystemInfo.version, null, null, null, tableid);\n            if(seatId > 5){\n                if(ty.SystemInfo.shareTicket != \"\" ){\n                    shareTicket = ty.SystemInfo.shareTicket;\n                    if (hall.GlobalFuncs.isInAtScene(\"TableScene\")){\n                        ty.NotificationCenter.trigger(ddz.EventType.REMOVE_TABLE_ANI);\n                    }\n                    hall.GlobalFuncs.gotoRank(shareTicket);\n                }\n            }\n        }\n        else{\n            ty.NotificationCenter.trigger(ddz.EventType.REMOVE_TABLE_ANI);\n            if(ty.SystemInfo.shareTicket != \"\" ){\n                shareTicket = ty.SystemInfo.shareTicket;\n                hall.GlobalFuncs.gotoRank(shareTicket);\n            }\n            else {\n                if (!ddz.matchResultPanel && !ddz.matchRevivalPanel && !ddz.arenaResultPanel \n                    && !ddz.gameResultPanel && !ddz.hongBaoPanel && !ddz.bannerResurgenceWindow){\n                    hall.GlobalFuncs.gotoDdz();\n                }\n            }\n        }\n        ty.SystemInfo.shareTicket = \"\";\n    },\n\n    //==================消息回调方法开始=========================\n\n    onReceiveUserInfo : function(value){\n        //发送bindGame信息\n        ty.BiLog.clickStat(ty.UserInfo.clickStatEventType.clickStatEventTypeTCP_Success, []);\n        this.onUserInfo(value);\n        hall.MsgFactory.bindGame(ty.SystemInfo.gameId);\n        ddz.gameModel.sendVersion();\n        var funList = [\n            ddz.matchModel.matchUpdate,\n            ddz.matchModel.getMatchDes,\n            ddz.gameModel.getOldUserChipReward,\n            ddz.gameModel.getArenaMatchConfig,\n            ddz.gameModel.getAlmsConfig,\n            ddz.gameModel.getServerConfig,\n            ddz.gameModel.getBringConfig,\n            ddz.gameModel.getTableBannerConfig,\n            ddz.gameModel.getTableTopBannerConfig,\n            ddz.gameModel.getGoldTableBannerConfig,\n            ddz.gameModel.getMatchTableBannerConfig,\n            ddz.gameModel.getRoomListBannerConfig,\n            ddz.gameModel.getBannerResurgenceConfig,\n            ddz.gameModel.getSkipCustomConfig,\n            ddz.gameModel.getRewardMethod,\n            ddz.gameModel.getBoxShareSuccessTips,\n            ddz.gameModel.queryInviteConfig,\n            ddz.gameModel.getCommonConfig,\n            // ddz.gameModel.getShareCommonConfig,\n            ddz.gameModel.getFightMatchAdConfig,\n            ddz.gameModel.getMatchingMassageConfig,\n            ddz.gameModel.getResurgenceConfigConfig,\n            ddz.gameModel.getRewardAnbuchangConfigConfig,\n            ddz.gameModel.getcongratulationGetRedPacketConfig,\n            ddz.gameModel.getShareMomentsConfig,\n            ddz.gameModel.getTempData,\n            ddz.gameModel.getOpenBox,\n            ddz.gameModel.getDayInviteReward,\n            ddz.gameModel.getDiversionConfig\n        ];\n\n        hall.MsgFactory.getTimeStamp();\n        hall.MsgFactory.getSystemMessageInfo();\n        ddz.GlobalFuncs.getFriendUserIds();\n\n        var runOneFun = function () {\n            if (funList.length > 0){\n                var func = funList.shift();\n                func();\n                requestAnimationFrame(runOneFun);\n            }\n        };\n\n        runOneFun();\n    },\n\n    _userFeature:function (val) {\n        // if (!val.retmsg) {\n        //     return\n        // }\n        // hall.LOGW(\"\",\"file = [HallNetWorkCenter] fun = [_userFeature] val = \" + JSON.stringify(val));\n        // ty.UserInfo.featureInfo = val.retmsg;\n        // ty.UserInfo.isInBSGS = hall.GlobalFuncs.checkBSGS(ty.UserInfo.featureInfo.last_login_city); //是否在北上广深\n        // ty.UserInfo.ip = ty.UserInfo.featureInfo.last_login_ip; //上一次登录的IP\n        // if (ddz.gameModel.isBringVersion) {\n        //     ty.UserInfo.isInBSGS = true;\n        // }\n\n        if (val.data && val.data.loc) {\n            hall.LOGW(\"\",\"file = [HallNetWorkCenter] fun = [_userFeature] val = \" + JSON.stringify(val));\n            ty.UserInfo.featureInfo = val.data;\n            ty.UserInfo.isInBSGS = hall.GlobalFuncs.checkBSGS(ty.UserInfo.featureInfo.loc[2]); //是否在北上广深\n            ty.UserInfo.ip = ty.UserInfo.featureInfo.ip; //\n            if (ddz.gameModel.isBringVersion) {\n                ty.UserInfo.isInBSGS = true;\n            }\n        }\n\n        hall.LOGW(\"\",\"file = [HallNetWorkCenter] fun = [_userFeature] ty.UserInfo.isInBSGS = \" + ty.UserInfo.isInBSGS);\n\n    },\n\n    onReceiveBagInfo : function (value) {\n        if (typeof(value) == 'undefined') {\n            return;\n        }\n        hall.ME.parseBagInfo(value);\n    },\n\n    onReceiveGameData : function(value){\n        hall.LOGW(null, \"file = [HallNetWorkCenter] fun = [onReceiveGameData] \");\n        this.onGameData(value);\n        hall.MsgFactory.getHallInfo(ty.SystemInfo.gameId);\n    },\n\n    onTodoTask: function(value) {\n        if (value && value[\"result\"]) {\n            hall.gameWorld.model.m_todoTask.parseTodoTask(value[\"result\"]);\n        }\n    },\n\n    onUpdateChangedData: function(argument) {\n        hall.LOGD(this._TAG, \"onUpdateGold -------------------------\");\n        //解析数据\n        if (typeof(argument) != 'undefined') {\n            //hall.ME.parseUserInfo(argument[0]);\n            var result = argument[\"result\"];\n            if (typeof(result) != 'undefined' && typeof(result['changes']) != 'undefined') {\n                var gameId = result.gameId;\n                hall.LOGD(this._TAG, 'gameid = ' + gameId);\n                for (var i = 0; i < result['changes'].length; i++) {\n                    var curValue = result[\"changes\"][i];\n                    if (typeof(curValue) == 'undefined') {\n                        continue;\n                    }\n\n                    if (curValue == 'gdata') {\n                        hall.LOGD(this._TAG, \"update_notify,更新gdata\");\n                        hall.MsgFactory.getGameData(gameId);\n                    } else if (curValue == 'item') {\n                        hall.LOGD(this._TAG, \"update_notify,更新道具\");\n                        hall.MsgFactory.getBagInfo();\n                    }\n                    //金币，钻石\n                    else if (curValue == \"udata\") {\n                        hall.LOGD(this._TAG, \"update_notify,更新钻石金币\");\n                        hall.MsgFactory.getUserInfo(gameId);\n                    }\n                }\n            }\n        }\n    },\n    onUserName: function(argument) {\n        var data = argument[\"result\"];\n        if (typeof(data) != 'undefined') {\n            var action = data[\"action\"];\n            if (action == \"get_name\") {\n                var code = data[\"code\"];\n                if (code == 0 || !code) {\n                    ty.NotificationCenter.trigger(ddz.EventType.MSG_NAME_BACK, data);\n                } else {\n                    hall.MsgBoxManager.showToast({title : \"你输入的ID不正确，请输入有效ID.\"});\n                }\n            }else if (action == ddz.EventType.ACTION_SYNC_TIMESTAMP) {\n                //获取当前时间戳\n                ty.NotificationCenter.trigger(ddz.EventType.GET_TIMESTAMP, data);\n            }\n        }\n    },\n    onProdDelivery: function(params) {\n        hall.LOGW(\"\",\"file = [HallNetWorkCenter] fun = [onProdDelivery] params = \" + JSON.stringify(params));\n        ty.NotificationCenter.trigger(ddz.EventType.UPDATE_PAY_SUCCESS, params);\n    },\n\n\n    onLoginReward: function(argument) {\n        var result = argument[0][\"result\"];\n        if (typeof(result) != 'undefined') {\n            var success = result[\"success\"];\n            if (success) {\n                hall.ME.loginRewardinfo.parse(result);\n                ty.NotificationCenter.trigger(ddz.EventType.MSG_REWARD_SUCCESS);\n            }\n        }\n    },\n\n    // 获取登录信息,登录成功，会返回五个比赛场里面第一个界面的信息，比如进入经典场，的第一个界面\n    onUserInfo: function(argument) {\n        if (typeof(argument) == 'undefined') {\n            return;\n        }\n        if (this._bBindGame) {\n            // 获取大厅的game_data\n            // hall.MsgFactory.getGameData(ty.SystemInfo.hallId);\n            // hall.MsgFactory.bindGame(ddz.GameId);\n        }\n\n        ddz.LOGD(\"\",\"file = [HallNetWorkCenter] fun = [onUserInfo] \");\n\n        ty.UserInfo.userId = argument[\"result\"][\"userId\"];\n        ddz.LOGD(null, \"onUserInfo argument = \" + JSON.stringify(argument));\n        hall.ME.parseUserInfo(argument);\n\n        // 更新UserInfo\n        ty.NotificationCenter.trigger(ty.EventType.UPDATE_UER_INFO, hall.ME);\n\n        // 刷新金币\n        ty.NotificationCenter.trigger(ddz.EventType.UPDATE_COIN_NUMBER);\n\n        // 刷新剩余奖金\n        ty.NotificationCenter.trigger(ddz.EventType.SET_LOSS_MONEY_NUMBER);\n\n        ty.NotificationCenter.trigger(ddz.EventType.UPDATE_CELA_MENU_INFO);\n\n        ddz.gameModel.checkShareReward(ddz.Share.SharePointType.gongZhongHaoCard);\n        ddz.gameModel.checkShareReward(ddz.Share.SharePointType.gongZhongHaoMenu);\n        ddz.gameModel.checkShareReward(ddz.Share.SharePointType.firstUseJiPaiQi);\n        ddz.gameModel.checkShareReward(ddz.Share.SharePointType.addApplet);\n\n        var curScene = cc.director.getScene();\n        if (curScene.name == \"Ddz\") {\n            ddz.gameModel.checkShareReward(ddz.Share.SharePointType.getDayFirstLogin);\n        }\n        hall.MsgFactory.getBagInfo();\n        hall.MsgFactory.getStoreInfo(\"update\");\n\n        ddz.gameModel.queryWatchVideoReward();\n    },\n\n    // 返回gameData\n    onGameData: function(argument) {\n        hall.LOGD(this._TAG, 'onGameData');\n        if (typeof(argument) != \"undefined\") {\n            hall.ME.parseGameData(argument);\n\n            if (hall.ME.hallGData.m_winchipstats && hall.ME.hallGData.m_winchipstats.length > 0) {\n                ty.NotificationCenter.trigger(ddz.EventType.MSG_GDATA_BACK);\n            }\n\n            if (!hall.GlobalFuncs.checkMsgWithGameId(argument, ddz.GameId)) {\n                // 大厅的game_data，返回，暂时没内容\n                // return;\n            }\n\n            // 更新GameData，暂时跟更新UserInfo一起用\n            // ty.NotificationCenter.trigger(hall.EventType.UPDATE_UER_INFO, hall.ME);\n            // if (this._bBindGame) {\n            //     this._bBindGame = false;\n                if (hall.ME.gdataInfo.m_loginsum == 1) {\n                    // 新手获取新手奖励，新手奖励实在bind_game之后在地主的游戏服发放的\n                    hall.MsgFactory.getUserInfo(ddz.GameId);\n                }\n\n                // 获取任务\n                hall.MsgFactory.getEveryTaskInfo(ddz.GameId, 'update');\n                //获取个人消息和系统消息\n                hall.MsgFactory.getPersonalMsg();\n                hall.MsgFactory.getGlobalMsg();\n            // }\n        }\n    },\n\n    onLed: function(params) {\n        // hall.LOGD(null, params);\n        var result = params['result'];\n        if (result && result.scope == \"hall6\") {\n            hall.gameWorld.parseLed(result.text);\n            var model = hall.gameWorld.model;\n            //若是之前消息已经播放完\n            if (!model.m_ledBeWork) {\n                ty.NotificationCenter.trigger(ddz.EventType.CMD_LED_RECEIVE, result);\n            }\n        }else if (result && result.scope == \"6\") {\n            hall.gameWorld.parseGameLed(result.text);\n            var model = hall.gameWorld.model;\n            //若是之前消息已经播放完\n            if (!model.m_ledBeWork) {\n                ty.NotificationCenter.trigger(ddz.EventType.CMD_LED_RECEIVE, result);\n            }\n        }\n    },\n\n    _onTodoQuickStart: function(param) {\n        hall.MsgFactory.getQuickStart(ty.UserInfo.userId, param[\"gameid\"], param[\"roomid\"], hall.staticSystemInfo.version, null, null, null);\n    },\n\n    // 用户数据加载完之后，开始启动心跳\n    onUPDATE_UER_INFO: function(userInfo) {\n        var interval = userInfo.objectInfo.m_heart.heartbeat;\n        // 开始心跳逻辑\n        // ty.HeartBeat.startHeartBeat(interval, 10);\n    },\n\n    onLogout: function(argument) {\n        hall.ME.isOtherLogin = true;\n        var err = argument[\"error\"];\n        if (err) {\n            hall.MsgBoxManager.showToast({title : err[\"info\"]});\n\n            // h5.CommonWindow.createSimple(err[\"info\"], function() {\n            //     var scene = h5.EntranceLayer.createScene();\n            //     cc.director.runScene(scene);\n            // });\n        }\n    },\n    // 组局 /////////////\n    onRoomAction: function(params) {\n        hall.LOGD(null, this._TAG, \"onRoomAction -------------------- \");\n    },\n    onCash : function (argument) {\n        ty.NotificationCenter.trigger(ddz.EventType.UPDATE_CASH_RESULT,argument);\n    },\n\n    onChargeNotify:function(params) {\n\n    },\n\n    onModuleTip: function(argument) {\n        var data = argument[\"result\"];\n        if (typeof(data) != 'undefined') {\n            var action = data[\"action\"];\n            if (action == \"update\") {\n                hall.ME.msgInfo.praseModultTip(data[\"modules\"]);\n            }\n        }\n    },\n\n    onRankList : function (argument) {\n        ty.NotificationCenter.trigger(ddz.EventType.MSG_CUSTOM_RANK,argument);\n    },\n\n    onMessage: function(argument) {\n        var data = argument[\"result\"];\n        if (typeof(data) != 'undefined') {\n            var action = data[\"action\"];\n            var list = data[\"list\"];\n            if (action == \"sys_msg_list\") {\n                hall.ME.msgInfo.parseSysInfo(list);\n                ty.NotificationCenter.trigger(ddz.EventType.MSG_SYS_MESSAGE_BACK);\n            } else if (action == \"msg_receive_list\") {\n                hall.ME.msgInfo.parseReceiveInfo(list);\n                ty.NotificationCenter.trigger(ddz.EventType.MSG_REC_MESSAGE_BACK);\n            } else if (action == \"msg_send_list\") {\n                hall.ME.msgInfo.parseSendInfo(list);\n                ty.NotificationCenter.trigger(ddz.EventType.MSG_SEND_MESSAGE_BACK);\n            } else if (action == \"msg_send\") {\n\n                var code = data[\"code\"];\n                var msgTitle = code == 0 ? \"发送成功\" : \"发送失败\";\n                hall.MsgBoxManager.showToast({title : msgTitle});\n\n            } else if (action == \"unread_count\") {\n                var unReadCount = data[\"chat_unread\"];\n                var sysUnread = data[\"sys_unread\"];\n                if (unReadCount /*+ sysUnread*/) {\n                    hall.GlobalFuncs.setInLocalStorage(hall.HAS_MAIL_KEY, true);\n                } else {\n                    hall.GlobalFuncs.setInLocalStorage(hall.HAS_MAIL_KEY, false);\n                }\n            } else if (action == \"list\") {\n                ty.NotificationCenter.trigger(ddz.EventType.RECIVE_MESSAGE_LIST,data);\n\n            }else if (action == \"m_list\") {\n                ddz.gameModel.notifyMailMessage = [];\n                ddz.gameModel.messageCount = 0;\n                var list = data.msgs;\n                if (list.length > 0) {\n                    for (var i = 0; i < list.length; i++){\n                        //      \"index\": 13,\n                        //     \"versions\": \"新版本更新公告\",\n                        //     \"timer\": \"2018.6.6\",\n                        //     \"title\": \"新版本更新公告\",\n                        //     \"content\": \"亲爱的玩家：\\n\\n1、免费领奖励（观看视频）奖励限时翻倍，玩家可领取更多免费福利。\\n2、邀请好友上线钻石奖励3倍活动开启。\\n上述活动持续至6月8日23:59。\",\n                        //     \"sign\": \"富豪斗地主运营团队\",\n                        if (list[i].text.indexOf(\"fuhao\") >= 0) {\n                            var _info = {};\n                            var index_2 = list[i].text.indexOf(\"#\");\n                            if (index_2 > 0) {\n                                _info.versions = list[i].text.slice(list[i].text.indexOf(\"fuhao\") + 5,index_2);\n                                _info.title = list[i].text.slice(list[i].text.indexOf(\"fuhao\") + 5,index_2);\n                            }\n\n                            _info.timer = list[i].time;\n\n                            _info.content = list[i].text;\n                            _info.sign = \"富豪斗地主运营团队\";\n                            _info.msgid = list[i].id;\n                            _info.get = list[i].get;\n                            _info.attachment = list[i].attachment;\n                            if (list[i].get == 0) {\n                                ddz.gameModel.messageCount ++;\n                            }\n                            ddz.gameModel.notifyMailMessage[i] = _info;\n                        }\n                    }\n                    ty.NotificationCenter.trigger(ddz.EventType.UPDATE_COMMON_CONFIG);\n                }\n            }else if (action == \"m_receive\") {\n                hall.MsgFactory.getSystemMessageInfo();\n                var itemlist = data[\"itemlist\"];\n                var countNum = itemlist.length;\n                var coinNum;\n                var diamondNum;\n                var jipaiqinum;\n                if (countNum > 0) {\n                    for (var i = 0; i < countNum; i++){\n                        if (itemlist[i].itemId == \"user:chip\") {\n                            coinNum = itemlist[i].count;\n                        }else if (itemlist[i].itemId == \"item:1311\") {\n                            diamondNum = itemlist[i].count;\n                        }else if (itemlist[i].itemId == \"item:1363\") {\n                            jipaiqinum = itemlist[i].count;\n                        }\n                    }\n                    ddz.GlobalFuncs.playMultiReward(coinNum,diamondNum,jipaiqinum,countNum,ddz.gameModel.messageRewardTitle);\n                }\n            }\n        }\n    },\n\n    onComplain: function(argument) {\n        var result = argument;\n        var error = result[\"error\"];\n        var str;\n        if (error) {\n            str = error[\"info\"];\n        } else {\n            var data = result[\"result\"][\"success\"];\n            str = data[\"info\"];\n        }\n        hall.MsgBoxManager.showToast({title : str});\n    },\n\n\n    //返回商店信息\n    onStoreInfo: function(argument) {\n        if (typeof(argument) != 'undefined' && typeof(argument[\"result\"]) != 'undefined') {\n            hall.gameWorld.parseMatchStore(argument[\"result\"]);\n            ty.NotificationCenter.trigger(ddz.EventType.STORE_INFO_UPDATE);\n        }\n    },\n\n\n    //发送quickstart成功后，返回的信息\n    onClassicPopwnd: function(argument) {\n        hall.LOGD(this._TAG, \"onClassicPopwnd receivemsg-------------------------\");\n        ty.NotificationCenter.trigger(ddz.EventType.UPDATE_POP_WINDOW, argument);\n    },\n\n    onStore: function(argument) {\n        var data = argument[0][\"result\"];\n        if (typeof(data) != 'undefined') {\n            var action = data[\"action\"];\n            var code = data[\"code\"];\n            if (action == \"jewel_give\") {\n                if (code == 0) {\n                    // h5.ToastLayer.create(\"已发出赠送请求\");\n                } else {\n                    var info = data[\"info\"];\n                    // h5.CommonWindow.createSimple(info);\n                }\n            }\n        }\n    },\n\n    onCustomTable: function(params) {\n        var data = params['result'];\n        if (data) {\n            var action = data[\"action\"];\n            if (action == \"game_data\") {\n                // hall.CustomRoomManager.parsePersonalData(data);\n                ty.NotificationCenter.trigger(ddz.EventType.MSG_CUSTOMTABLE_GAMEDATA, data);\n            } else if (action == \"fight_data\") {\n                // hall.CustomRoomManager.parseFightData(data);\n                ty.NotificationCenter.trigger(ddz.EventType.MSG_CUSTOMTABLE_FIGHTDATA, data);\n            }\n        }\n    },\n\n    onRoomOnlineInfo : function (value) {\n        //这里没有应用\n    }\n\n};\n\n//模块启动\nhall.hallNetWorkCenter.boot();"]}