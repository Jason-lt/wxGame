{"version":3,"sources":["../../../../../assets/Script/hall/assets/Script/hall/GlobalFuncs.js"],"names":["hall","GlobalFuncs","SceneGather","SliceStringToLength","str","length","len","tmp","s","i","charCode","charCodeAt","slice","formatGold","score","tar","scoreText","arr","endStr","sp","isInteger","indexOf","split","wanStr","substr","yiStr","PrintArray","index","LOGD","FindInArray","obj","FindInArrayBuFun","array","func","element","GetSubArrayExceptIndex","indexs","newarr","sort","SortNumberFunc","splice","c1","c2","GetLevelByExp","exp","level","parseInt","Math","pow","GetExpByLevel","ChangeSpriteTexure","sprite","texureName","frme","cc","spriteFrameCache","getSpriteFrame","setSpriteFrame","ChangeSpriteTexureWithSize","size","f_size","getOriginalSize","setScaleX","width","setScaleY","height","ReadBoolFromLocalStorage","key","def_value","sys","localStorage","getItem","bv","ReadNumFromLocalStorage","Number","ReadStringFromLocalStorage","String","ReadValueFromLocalStorage","Array","setInLocalStorage","value","setItem","e","DownloadImg","url","filePath","cobj","callback","params","LOGE","configObj","ty","Http","httpGet","retObj","result","JSON","parse","call","formatSeconds","theTime","theTime1","theTime2","formatMinSeconds","_keyStr","base64encode","input","output","chr1","chr2","chr3","enc1","enc2","enc3","enc4","_utf8_encode","isNaN","charAt","base64decode","base64decodeRaw","_utf8_decode","replace","push","string","utftext","n","c","fromCharCode","c3","checkMsgWithGameId","param","gameId","pgameId","gotoDdzTable","noDelete","curScene","director","getScene","name","NotificationCenter","trigger","ddz","EventType","REMOVE_MATCHING","toSceneName","isInAtScene","gameModel","isLoadTableScene","ACTION_ENTER_TABLE","REMOVE_DDZ_MAIN_ANI","pushScene","_TAG","sceneName","onLaunched","loadScene","data","popScene","pop","gotoDdz","gotoMallScene","gotoRechargeScene","gotoRoomListScene","_playMode","logicScene","no","children","window","getComponent","setPlayMode","gotoRank","shareTicketS","changeButtonToRank","showDiamondWindowWithType","type","onShowDetail","LOGW","_layer","getChildByTag","com","setParentScene","createDetail","loader","loadRes","err","prefab","_gameDetail","instantiate","addChild","setTag","setToCenter","ani","Animation","clipName","getClips","anim","getAnimationState","once","play","onHistory","_gameHistory","createHistory","onPersonalInfo","_info","info","updateInfo","onGoldChoosePlayMode","onCollectDeskTop","preFabNode","onOfficialAccountGuide","isAddApplet","addAppletGetDiamond","openWindow","onbetBoxAbstract","onBubbleTips","node","tips","posx","posy","isTable","x","y","setTips","onTreasureBox","box_share","windoubles","setBoxShareInfo","onSkipCustom","state","BiLog","clickStat","UserInfo","clickStatEventType","clickStatEventTypeShowWindow","updateWindowInfo","onNewUserGifts","onShareDiamondReward","ddz_dayWelfare","updateShareInfo","onEnterQueue","preFabPath","comName","AudioHelper","playMusic","MusicPath_mp3","table_background_music","SystemInfo","tableBgMusicVolume","showPopWinByPreFab","enterQueue","playAni","SHOW_MATCHING","getSpDataPath","isDiZhu","isMale","CreateUuid","hexDigits","floor","random","uuid","join","getLocalUuid","local_uuid","LOCAL_UUID_KEY","getRandomNumberBefore","number","getShareRandomNumberWithShareList","shareList","returnRandom","nowIndex","weight","replaceKeyWordInString","repString","concat","replaceMap","Share","shareKeywordReplace","reg","RegExp","replaceToStringWithDic","dic","stringify","getMoneyStringWithCoupons","couponCount","money","toFixed","getButtonTitle","_shareType","richText","shareConfig","_buttonTitle","buttonTitle","isInBSGS","buttonTitleBSGS","_string","getSharePoint","sharePoint","isEmptyObject","sliceStringToLength","btnEffect","scale","self","on","Node","TOUCH_START","setScale","TOUCH_END","TOUCH_CANCEL","btnScaleEffect","nScale","stopAllActions","normalScale","scale_1","scaleTo","scale_2","delay","delayTime","seq1","sequence","runAction","repeatForever","checkNeedLoadRemoteRes","localVersion","LOCAL_VERSION_KEY","version","checkBSGS","cityName","keyWord","bsgsCitys"],"mappings":"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","file":"GlobalFuncs.js","sourceRoot":"../../../../../assets/Script/hall","sourcesContent":["//\n//  ddz_global.js\n//  ddz\n//\n//  Created by weitongming on 14-03-05.\n//  放置项目中需要用到的全局变量或配置信息\n\nhall.GlobalFuncs = {};\nhall.SceneGather = [];  // scene jihe\n// hall.GlobalFuncs.gotoddz = function(roomid, type){\n// \t if (h5.playScene) {\n// \t \treturn;\n// \t }\n// \tvar params = {\n//             \"resources\": [{\n//                 \"resources\": h5.Resources.ddz_image,\n//                 \"text\": \"正在加载图片...\",\n//                 \"type\": \"image\"\n//             }],\n//             \"preload\": true,\n//             \"callback\": function() {\n//             \tddz.init();\n//                 var scene = ddz.PlayScene.createScene(roomid, type);\t//暂时设为2人斗地主\n//                 cc.director.runScene(scene);\n//             }\n//         };\n//         var scene = h5.LoadingScene.createScene(params);\n//         cc.director.runScene(scene);\n// }\n\nhall.GlobalFuncs.SliceStringToLength = function(str, length) { //先算出整个字符串的长度，并获得第length - 2个字符串的位置，给\"..\"留2个位置\n\tif(!str) {\n\t\treturn str;\n\t}\n\tvar len = 0;\n\tvar tmp = 0;\n\tvar s;\n\tfor (var i = 0; i < str.length; i++) {\n\t\tvar charCode = str.charCodeAt(i);\n\t\tif (charCode >= 0 && charCode <= 128) {\n\t\t\ttmp += 1;\n\t\t} else { // 如果是中文则长度加2\n\t\t\ttmp += 2;\n\t\t}\n\t\tif (tmp <= length - 2) {\n\t\t\tlen++;\n\t\t}\n\t}\n\tif (tmp <= length) {\n\t\ts = str.slice(0);\n\t} else {\n\t\ts = str.slice(0, len);\n\t\ts += \"..\";\n\t}\n\treturn s;\n};\n\n// 规划金币\nhall.GlobalFuncs.formatGold = function(score){\n\tif(!score){\n\t\treturn \"0\";\n\t}\n\tvar tar = \"\";\n\tif (score < 0){\n\t\ttar = \"-\";\n\t\tscore = -score;\n\t}\n\tvar scoreText = \"\";\n\tvar arr;\n\tvar endStr;\n\tvar sp;\n\tvar isInteger = false;\n\tif (score < 10000){\n\t\tscoreText = score + \"\";\n\t}else if (score >= 10000 && score < 100000000) {\n\t\tscoreText = (score / 10000) + \"\";\n\t\tif (scoreText.indexOf(\".\") == -1){\n\t\t\tisInteger = true;\n\t\t\tscoreText += \".000\";\n\t\t}else {\n\t\t\tisInteger = false;\n\t\t\tscoreText += \"000\";\n\t\t}\n\t\tarr = scoreText.split(\".\");\n\t\tvar wanStr = arr[0];\n\t\tsp = 1;\n\t\tif (wanStr.length == 1){\n\t\t\tsp = 2;\n\t\t}\n\t\telse if (wanStr.length == 2){\n\t\t\tsp = 1;\n\t\t}\n\t\telse if (wanStr.length == 3){\n\t\t\tsp = 0;\n\t\t}\n\t\telse if (wanStr.length == 4){\n\t\t\tsp = 0;\n\t\t}\n\t\tendStr = arr[1].substr(0,sp);\n\t\tscoreText = wanStr + \".\" + endStr + \"万\";\n\t\tif (sp == 0 || isInteger) {\n\t\t\tscoreText = wanStr + \"万\";\n\t\t}\n\n\t}else {\n\t\tscoreText = (score / 100000000) + \"\";\n\n\t\tif (scoreText.indexOf(\".\") == -1){\n\t\t\tisInteger = true;\n\t\t\tscoreText += \".000\";\n\t\t}\n\t\telse{\n\t\t\tisInteger = false;\n\t\t\tscoreText += \"000\";\n\t\t}\n\n\t\tarr =  scoreText.split(\".\");\n\n\t\tvar yiStr = arr[0];\n\t\tsp = 1;\n\t\tif (yiStr.length == 1){\n\t\t\tsp = 2;\n\t\t}\n\t\telse if (yiStr.length == 2){\n\t\t\tsp = 1;\n\t\t}\n\t\telse if (yiStr.length == 3){\n\t\t\tsp = 0;\n\t\t}\n\t\telse{\n\t\t\tsp = 0;\n\t\t}\n\n\t\tendStr = arr[1].substr(0,sp);\n\n\t\tscoreText = yiStr + \".\" + endStr + \"亿\";\n\t\tif (sp == 0 || isInteger) {\n\t\t\tscoreText = yiStr + \"亿\";\n\t\t}\n\t}\n\treturn tar + scoreText;\n};\n\nhall.GlobalFuncs.PrintArray = function(arr) {\n\tvar s = \"\";\n\tfor (var index = 0; index < arr.length; index++) {\n\t\ts += arr[index];\n\t\ts += \" \";\n\t}\n\thall.LOGD(null, 'global', s);\n};\n\nhall.GlobalFuncs.FindInArray = function(arr, obj) {\n\tvar len = arr.length;\n\tfor (var index = 0; index < len; index++) {\n\t\tif (arr[index] === obj) {\n\t\t\treturn index;\n\t\t}\n\t}\n\treturn -1;\n};\n\nhall.GlobalFuncs.FindInArrayBuFun = function(array, func) { //array.find是ECMA2015才提供，可能在一些设备上不支持\n    for (var i = 0, len = array.length; i < len; i++) {\n        var element = array[i];\n        if (func(element)) {\n            return element;\n        }\n    }\n    return null;\n};\n\nhall.GlobalFuncs.GetSubArrayExceptIndex = function(arr, indexs) {\n\tvar newarr = arr.slice(0);\n\tindexs.sort(hall.GlobalFuncs.SortNumberFunc);\n\tfor (var i = indexs.length - 1; i >= 0; i--) {\n\t\tnewarr.splice(indexs[i], 1);\n\t}\n\treturn newarr;\n};\n\nhall.GlobalFuncs.SortNumberFunc = function(c1, c2) { //数字数组， 从小到大排列的排序函数\n\treturn c1 - c2;\n};\n\n//根据经验判断当前处于多少级\nhall.GlobalFuncs.GetLevelByExp = function(exp) {\n\tvar level = 0;\n\twhile (exp > 0) {\n\t\texp -= parseInt(5 * Math.pow(level, 3.5) + 3 * Math.pow(level, 1.5) + 50);\n\t\tlevel++;\n\t}\n\treturn level - 1;\n};\n\n//是指升到level级时候的总经验, level必须大于0\nhall.GlobalFuncs.GetExpByLevel = function(level) {\n\tvar exp = 0;\n\tfor (var i = 0; i < level; i++) {\n\t\texp += parseInt(5 * Math.pow(i - 1, 3.5) + 3 * Math.pow(i - 1, 1.5) + 50);\n\t}\n\treturn exp;\n};\n\nhall.GlobalFuncs.ChangeSpriteTexure = function(sprite, texureName) { //用setSpriteFrame一定会自动适应大小，如果需要强制不改变大小，需要设置scale，这会导致变形，所以去掉bAdjustSize参数\n\tvar frme = cc.spriteFrameCache.getSpriteFrame(texureName);\n    if(frme)\n        sprite.setSpriteFrame(frme);\n};\n\nhall.GlobalFuncs.ChangeSpriteTexureWithSize = function(sprite, texureName, size) { //强制拉伸缩放frame自动适应大小，可能会导致扭曲，为了尽量少改动代码，不在上面方法增加参数，而是新建一个方法\n\tvar frme = cc.spriteFrameCache.getSpriteFrame(texureName);\n\tvar f_size = frme.getOriginalSize();\n\tsprite.setScaleX(size.width / f_size.width);\n\tsprite.setScaleY(size.height / f_size.height);\n\tsprite.setSpriteFrame(frme);\n};\n\nhall.GlobalFuncs.ReadBoolFromLocalStorage = function(key, def_value) {\n\tif(!cc.sys.localStorage.getItem) {\n\t\treturn def_value;\n\t}\n\tvar tmp = cc.sys.localStorage.getItem(key);\n\tif (!tmp) {\n\t\treturn def_value;\n\t}\n\tvar bv = tmp === \"true\" ? true : false;\n\treturn bv;\n};\n\nhall.GlobalFuncs.ReadNumFromLocalStorage = function(key, def_value) {\n\tif(!cc.sys.localStorage.getItem) {\n\t\treturn def_value;\n\t}\n\tvar tmp = cc.sys.localStorage.getItem(key);\n\tif (!tmp) {\n\t\treturn def_value;\n\t}\n\treturn Number(tmp);\n};\n\nhall.GlobalFuncs.ReadStringFromLocalStorage = function(key, def_value) {\n\tif(!cc.sys.localStorage.getItem) {\n\t\treturn def_value;\n\t}\n\tvar tmp = cc.sys.localStorage.getItem(key);\n\tif (!tmp) {\n\t\treturn def_value;\n\t}\n\treturn String(tmp);\n};\nhall.GlobalFuncs.ReadValueFromLocalStorage = function(key, def_value) {\n\tif(!cc.sys.localStorage.getItem) {\n\t\treturn def_value;\n\t}\n\tvar tmp = cc.sys.localStorage.getItem(key);\n\tif (!tmp) {\n\t\treturn def_value;\n\t}\n\treturn Array(tmp);\n};\n\nhall.GlobalFuncs.setInLocalStorage = function(key, value){\n\ttry{\n\t\tcc.sys.localStorage.setItem(key, value+\"\");\n\t}catch(e){}\n};\n\nhall.GlobalFuncs.DownloadImg = function(url, filePath, cobj, callback, params) {\n\tif (url.indexOf('http') < 0) {\n\t\thall.LOGE('global', 'Invalid url to download, return!!!!!!');\n\t\treturn;\n\t}\n\tvar configObj = {\n\t\t'imageUrl': url\n\t};\n\tty.Http.httpGet(\"proxyImage\", configObj, function(retObj) {\n\t\tvar result = JSON.parse(retObj);\n\t\tif (result[\"statusCode\"] == \"200\" && result[\"openErr\"] != 1 && result[\"writeErr\"] != 1) {\n\t\t\tcallback.call(cobj,result[\"path\"], params);\n\t\t}\n\t}, \"\");\n};\n\n//格式化秒 00:00:00 value ---秒\nhall.GlobalFuncs.formatSeconds = function(value) {\n\tvar theTime = parseInt(value); // 秒\n\tvar theTime1 = 0; // 分\n\tvar theTime2 = 0; // 小时\n\tif (theTime > 60) {\n\t\ttheTime1 = parseInt(theTime / 60);\n\t\ttheTime = parseInt(theTime % 60);\n\t\tif (theTime1 > 60) {\n\t\t\ttheTime2 = parseInt(theTime1 / 60);\n\t\t\ttheTime1 = parseInt(theTime1 % 60);\n\t\t}\n\t}\n\tvar result = \"\";\n\tif (theTime > 9)\n\t\tresult = \"\" + parseInt(theTime);\n\telse\n\t\tresult = \"0\" + parseInt(theTime);\n\tif (theTime1 >= 0) {\n\t\tif (theTime1 > 9)\n\t\t\tresult = \"\" + parseInt(theTime1) + \":\" + result;\n\t\telse\n\t\t\tresult = \"0\" + parseInt(theTime1) + \":\" + result;\n\t}\n\tif (theTime2 >= 0) {\n\t\tif (theTime2 > 9)\n\t\t\tresult = \"\" + parseInt(theTime2) + \":\" + result;\n\t\telse\n\t\t\tresult = \"0\" + parseInt(theTime2) + \":\" + result;\n\t}\n\treturn result;\n};\n//格式化秒 00:00:00 value ---毫秒\nhall.GlobalFuncs.formatMinSeconds = function(value) {\n\tvar theTime = parseInt(value); // 秒*10\n\tvar theTime1 = 0; // 秒\n\tvar theTime2 = 0; // 分\n\tif (theTime > 10) {\n\t\ttheTime1 = parseInt(theTime / 10);\n\t\ttheTime = parseInt(theTime % 10);\n\t\tif (theTime1 > 60) {\n\t\t\ttheTime2 = parseInt(theTime1 / 60);\n\t\t\ttheTime1 = parseInt(theTime1 % 60);\n\t\t}\n\t}\n\tvar result = \"\";\n\tif (theTime > 9)\n\t\tresult = \"\" + parseInt(theTime);\n\telse\n\t\tresult = \"0\" + parseInt(theTime);\n\tif (theTime1 >= 0) {\n\t\tif (theTime1 > 9)\n\t\t\tresult = \"\" + parseInt(theTime1) + \":\" + result;\n\t\telse\n\t\t\tresult = \"0\" + parseInt(theTime1) + \":\" + result;\n\t}\n\tif (theTime2 >= 0) {\n\t\tif (theTime2 > 9)\n\t\t\tresult = \"\" + parseInt(theTime2) + \":\" + result;\n\t\telse\n\t\t\tresult = \"0\" + parseInt(theTime2) + \":\" + result;\n\t}\n\treturn result;\n};\n/**\n *\n *  Base64 encode / decode\n *  http://www.webtoolkit.info/\n *\n **/\nvar _keyStr = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\n\nhall.GlobalFuncs.base64encode = function(input) {\n\tvar output = \"\";\n\tvar chr1, chr2, chr3, enc1, enc2, enc3, enc4;\n\tvar i = 0;\n\n\tinput = hall.GlobalFuncs._utf8_encode(input);\n\tvar len = input.length;\n\twhile (i < len) {\n\n\t\tchr1 = input.charCodeAt(i++);\n\t\tchr2 = input.charCodeAt(i++);\n\t\tchr3 = input.charCodeAt(i++);\n\n\t\tenc1 = chr1 >> 2;\n\t\tenc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\n\t\tenc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\n\t\tenc4 = chr3 & 63;\n\n\t\tif (isNaN(chr2)) {\n\t\t\tenc3 = enc4 = 64;\n\t\t} else if (isNaN(chr3)) {\n\t\t\tenc4 = 64;\n\t\t}\n\n\t\toutput = output +\n\t\t\t_keyStr.charAt(enc1) + _keyStr.charAt(enc2) +\n\t\t\t_keyStr.charAt(enc3) + _keyStr.charAt(enc4);\n\n\t}\n\n\treturn output;\n};\n\nhall.GlobalFuncs.base64decode = function(input) {\n    var output = hall.GlobalFuncs.base64decodeRaw(input);\n    return hall.GlobalFuncs._utf8_decode(output);\n};\n\n// public method for decoding\nhall.GlobalFuncs.base64decodeRaw = function(input) {\n\t\n\tvar chr1, chr2, chr3;\n\tvar enc1, enc2, enc3, enc4;\n\tvar i = 0;\n\n\tinput = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, \"\");\n\tvar len = input.length;\n\tvar output = [];\n\twhile (i < len) {\n\n\t\tenc1 = _keyStr.indexOf(input.charAt(i++));\n\t\tenc2 = _keyStr.indexOf(input.charAt(i++));\n\t\tenc3 = _keyStr.indexOf(input.charAt(i++));\n\t\tenc4 = _keyStr.indexOf(input.charAt(i++));\n\n\t\tchr1 = (enc1 << 2) | (enc2 >> 4);\n\t\tchr2 = ((enc2 & 15) << 4) | (enc3 >> 2);\n\t\tchr3 = ((enc3 & 3) << 6) | enc4;\n\n\t\toutput.push(chr1);\n\n\t\tif (enc3 != 64) {\n\t\t\toutput.push(chr2);\n\t\t}\n\t\tif (enc4 != 64) {\n\t\t\toutput.push(chr3);\n\t\t}\n\t}\n\treturn output;\n};\n\n// private method for UTF-8 encoding\nhall.GlobalFuncs._utf8_encode = function(string) {\n\tstring = string.replace(/\\r\\n/g, \"\\n\");\n\tvar utftext = \"\";\n\tfor (var n = 0, len = string.length; n < len; n++) {\n\t\tvar c = string.charCodeAt(n);\n\t\tif (c < 128) {\n\t\t\tutftext += String.fromCharCode(c);\n\t\t} else if ((c > 127) && (c < 2048)) {\n\t\t\tutftext += String.fromCharCode((c >> 6) | 192);\n\t\t\tutftext += String.fromCharCode((c & 63) | 128);\n\t\t} else {\n\t\t\tutftext += String.fromCharCode((c >> 12) | 224);\n\t\t\tutftext += String.fromCharCode(((c >> 6) & 63) | 128);\n\t\t\tutftext += String.fromCharCode((c & 63) | 128);\n\t\t}\n\n\t}\n\n\treturn utftext;\n};\n\n// private method for UTF-8 decoding\nhall.GlobalFuncs._utf8_decode = function(array) {\n\tvar string = \"\";\n\tvar i = 0, c1, c2;\n\tvar c = c1 = c2 = 0;\n\tvar len = array.length;\n\twhile (i < len) {\n\t\tc = array[i];\n\t\tif (c < 128) {\n\t\t\tstring += String.fromCharCode(c);\n\t\t\ti++;\n\t\t} else if ((c > 191) && (c < 224)) {\n\t\t\tc2 = array[i + 1];\n\t\t\tstring += String.fromCharCode(((c & 31) << 6) | (c2 & 63));\n\t\t\ti += 2;\n\t\t} else {\n\t\t\tc2 = array[i + 1];\n\t\t\tc3 = array[i + 2];\n\t\t\tstring += String.fromCharCode(((c & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63));\n\t\t\ti += 3;\n\t\t}\n\t}\n\treturn string;\n};\n\n/**\n * 校验消息是否是当前游戏的\n * param - json对象\n * gameId - 待比较的游戏gameId\n */\nhall.GlobalFuncs.checkMsgWithGameId = function(param, gameId) {\n\tvar pgameId = param['result']['gameId'];\n\tif (pgameId == gameId) {\n\t\thall.LOGE('global', 'EQUAL!!!!!!');\n\t\treturn true;\n\t}\n\treturn false;\n};\n\n/**\n * 进入斗地主牌桌u\n */\nhall.GlobalFuncs.gotoDdzTable = function(){\n\tvar noDelete = false;\n\tvar curScene = cc.director.getScene();\n\tif (curScene.name != \"TableScene\") {\n\t\tnoDelete = true;\n\t\tty.NotificationCenter.trigger(ddz.EventType.REMOVE_MATCHING,noDelete);\n\t}\n\n\tvar toSceneName = \"TableScene\";\n    if (hall.GlobalFuncs.isInAtScene(toSceneName)){\n\t\tddz.gameModel.isLoadTableScene = false;\n        return;\n    }\n\tty.NotificationCenter.trigger(ddz.EventType.ACTION_ENTER_TABLE);\n\tty.NotificationCenter.trigger(ddz.EventType.REMOVE_DDZ_MAIN_ANI);\n\t// requestAnimationFrame(function(){\n\t// \thall.LOGW('global', '下一帧执行 跳转TableScene');\n\t// \tcc.director.loadScene(toSceneName);\n\t// });\n\t//这里要重写\n\t// cc.director.loadScene(toSceneName);\n\thall.GlobalFuncs.pushScene(toSceneName);\n};\n\nhall.GlobalFuncs.isInAtScene = function (toSceneName) {\n\tvar curScene = cc.director.getScene();\n\thall.LOGD(this._TAG, \"file = [GlobalFuncs] fun = [isInAtScene] curScene : \" + curScene.name);\n\treturn curScene.name == toSceneName;\n};\n\nhall.GlobalFuncs.pushScene = function(sceneName,onLaunched){\n\t// hall.SceneGather = [];\n\tif (sceneName == \"TableScene\" || sceneName == \"Ddz\") {\n\t\thall.SceneGather = [];\n\t\tcc.director.loadScene(sceneName,onLaunched);\n\t\treturn;\n\t}\n\n\tvar index = -1;\n\n\tfor (var i = 0; i < hall.SceneGather.length; i++){\n\t\tif (hall.SceneGather[i].name == sceneName){\n\t\t\tindex = i;\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tif (index == -1) {\n\n\t}else {\n\t\thall.SceneGather.splice(index,1);\n\t}\n\tvar data = {};\n\tdata.name = sceneName;\n\tdata.onLaunched = onLaunched;\n\thall.SceneGather.push(data);\n\n\t// hall.LOGW(\"\",\"file = [GlobalFuncs] fun = [pushScene] hall.SceneGather = \" + JSON.stringify(hall.SceneGather));\n\tcc.director.loadScene(sceneName,onLaunched);\n};\n\nhall.GlobalFuncs.popScene = function(){\n\t// hall.SceneGather = [];\n\tvar curScene = cc.director.getScene();\n\tif (hall.SceneGather.length > 0) {\n\t\tvar data = hall.SceneGather.pop();\n\t\tvar sceneName = data.name;\n\t\tvar onLaunched = data.onLaunched;\n\t\tif (curScene.name == sceneName) {\n\t\t\tdata = hall.SceneGather.pop();\n\t\t\tif (!data) {\n\t\t\t\tsceneName = \"Ddz\";\n\t\t\t\tonLaunched = null;\n\t\t\t}else {\n\t\t\t\tsceneName = data.name;\n\t\t\t\tonLaunched = data.onLaunched;\n\t\t\t}\n\t\t}\n\t\tif (sceneName == \"TableScene\") {\n\t\t\tsceneName = \"Ddz\";\n\t\t}\n\t\t// hall.LOGW(\"\",\"file = [GlobalFunc] fun = [popScene] hall.SceneGather = \" + JSON.stringify(hall.SceneGather));\n\t\t// cc.director.loadScene(sceneName,onLaunched);\n\t\thall.GlobalFuncs.pushScene(sceneName,onLaunched);\n\t}else {\n\t\tvar toSceneName = \"Ddz\";\n\t\thall.GlobalFuncs.pushScene(toSceneName);\n\t}\n};\n\nhall.GlobalFuncs.gotoDdz = function(){\n\n\tvar curScene = cc.director.getScene();\n\thall.LOGD(this._TAG, \" file = [GlobalFuncs] fun = [gotoDdz] curScene : \" + curScene.name);\n\n\tvar toSceneName = \"Ddz\";\n\t// if (curScene.name == toSceneName || curScene.name == \"ddz_rank\" || curScene.name == \"ddz_reward\"|| curScene.name == \"ddz_diamond\"){\n\t// \treturn;\n\t// }\n\tif (curScene.name !=  \"TableScene\"){\n\t\treturn;\n\t}\n\t// cc.director.loadScene(toSceneName);\n\thall.GlobalFuncs.pushScene(toSceneName);\n};\n\nhall.GlobalFuncs.gotoMallScene = function(){\n\tvar curScene = cc.director.getScene();\n\thall.LOGD(this._TAG,\"file = [GlobalFuncs] fun = [gotoMallScene] curScene : \" + curScene.name);\n\n\tvar toSceneName = \"MallScene\";\n\t// 商场,及钻石 scene 点击不处理\n\tif (curScene.name == toSceneName) {\n\t\treturn\n\t}\n\t// cc.director.loadScene(toSceneName);\n\thall.GlobalFuncs.pushScene(toSceneName);\n};\n\nhall.GlobalFuncs.gotoRechargeScene = function(){\n\tvar curScene = cc.director.getScene();\n\thall.LOGD(this._TAG,\"file = [GlobalFuncs] fun = [gotoRechargeScene] curScene : \" + curScene.name);\n\n\tvar toSceneName = \"rechargeScene\";\n\t// var toSceneName = \"MallScene\";\n\t// 商场,及钻石 scene 点击不处理\n\tif (curScene.name == toSceneName) {\n\t\treturn\n\t}\n\t// cc.director.loadScene(toSceneName);\n\thall.GlobalFuncs.pushScene(toSceneName);\n};\n\nhall.GlobalFuncs.gotoRoomListScene = function(_playMode){\n\tvar curScene = cc.director.getScene();\n\thall.LOGD(this._TAG,\"file = [GlobalFuncs] fun = [gotoRoomListScene] curScene : \" + curScene.name);\n\tty.NotificationCenter.trigger(ddz.EventType.REMOVE_DDZ_MAIN_ANI);\n\tvar toSceneName = \"RoomListScene\";\n\t//\n\tvar onLaunched = function () {\n\t\tvar logicScene = cc.director.getScene();\n\t\tvar no = logicScene.children[0];\n\t\tvar window = no.getComponent(\"RoomListScene\");\n\t\twindow.setPlayMode(_playMode);\n\t};\n\tif (curScene.name == toSceneName) {\n\t\tonLaunched();\n\t\treturn\n\t}\n\t// cc.director.loadScene(toSceneName,onLaunched);\n\thall.GlobalFuncs.pushScene(toSceneName,onLaunched);\n};\n\nhall.GlobalFuncs.gotoRank = function(shareTicketS){\n\tty.NotificationCenter.trigger(ddz.EventType.REMOVE_DDZ_MAIN_ANI);\n\tvar curScene = cc.director.getScene();\n\thall.LOGD(this._TAG, \"file = [GlobalFuncs] fun = [gotoRank] curScene : \" + curScene.name);\n\n\tvar toSceneName = \"ddz_rank\";\n\n\tvar onLaunched = function () {\n\t\tvar logicScene = cc.director.getScene();\n\t\tvar no = logicScene.children[0];\n\t\tvar window = no.getComponent(\"ddz_rank\");\n\t\twindow.changeButtonToRank(shareTicketS);\n\t};\n\tif (curScene.name == toSceneName){\n\t\tonLaunched();\n\t\treturn;\n\t}\n\t// cc.director.loadScene(toSceneName,onLaunched);\n\thall.GlobalFuncs.pushScene(toSceneName,onLaunched);\n};\n\nhall.GlobalFuncs.showDiamondWindowWithType = function (type) {\n\tvar sceneName = 'ddz_diamond_friend';\n\t\n\tvar curScene = cc.director.getScene();\n\tif(curScene.name == sceneName){\n\t\treturn;\n\t}\n\tvar onLaunched = function () {\n\t};\n\n\thall.GlobalFuncs.pushScene(sceneName,onLaunched);\n};\n// 对局详情\nhall.GlobalFuncs.onShowDetail = function () {\n\thall.LOGW('',\"加载 对局流水prefab\");\n\tvar curScene = cc.director.getScene();\n\t// 防止重复叠加\n\tvar _layer = curScene.getChildByTag(100050);\n\tif (_layer) {\n\t\tvar com = _layer.getComponent('ddz_window_gameDetail');\n\t\tif (curScene.name ==  \"TableScene\"){\n\t\t\tcom.setParentScene(curScene.children[0].getComponent('DdzTableScene'));\n\t\t}\n\t\tcom.createDetail();\n\t\treturn\n\t}\n\tcc.loader.loadRes('prefabs/ddz_window_gameDetail', function (err, prefab) {\n\t\tvar _gameDetail = cc.instantiate(prefab);\n\t\tcurScene.addChild(_gameDetail);\n\t\t_gameDetail.setTag(100050);\n\t\tddz.GlobalFuncs.setToCenter(_gameDetail);\n\n\t\tvar com = _gameDetail.getComponent('ddz_window_gameDetail');\n\t\tif (curScene.name ==  \"TableScene\"){\n\t\t\tcom.setParentScene(curScene.children[0].getComponent('DdzTableScene'));\n\t\t}\n\t\t// com.createDetail();\n\t\tvar ani = _gameDetail.getComponent(cc.Animation);\n\t\tvar clipName = ani.getClips()[0].name;\n\t\tvar anim = ani.getAnimationState(clipName);\n\t\tanim.once(\"finished\", function () {\n\t\t\tcom.createDetail();\n\t\t});\n\t\tanim.play();\n\n\t});\n};\n\n// 历史战绩\nhall.GlobalFuncs.onHistory = function () {\n\thall.LOGW('',\"加载 历史战绩prefab\");\n\tcc.loader.loadRes('prefabs/ddz_window_history', function (err, prefab) {\n\t\tvar _gameHistory = cc.instantiate(prefab);\n\t\t// cc.director.getScene().addChild(preFabNode);\n\t\tcc.director.getScene().addChild(_gameHistory,777777);\n\t\tddz.GlobalFuncs.setToCenter(_gameHistory);\n\t\tvar ani = _gameHistory.getComponent(cc.Animation);\n\t\tvar clipName = ani.getClips()[0].name;\n\t\tvar anim = ani.getAnimationState(clipName);\n\t\tvar com = _gameHistory.getComponent('ddz_window_history');\n\t\tanim.once(\"finished\", function () {\n\t\t\tcom.createHistory();\n\t\t});\n\t\tanim.play();\n\t});\n};\n\n// 个人信息\nhall.GlobalFuncs.onPersonalInfo = function () {\n\tcc.loader.loadRes('prefabs/personalInfo', function (err, prefab) {\n\t\tvar _info = cc.instantiate(prefab);\n\t\t// cc.director.getScene().addChild(preFabNode);\n\t\tcc.director.getScene().addChild(_info);\n\t\tddz.GlobalFuncs.setToCenter(_info);\n\t\tvar info = _info.getComponent(\"personalInfo\");\n\t\tinfo.updateInfo();\n\t});\n};\n\n// 金币场玩法选择\nhall.GlobalFuncs.onGoldChoosePlayMode = function () {\n\t// cc.loader.loadRes('prefabs/choosePlayMode', function (err, prefab) {\n\t// \tvar preFabNode = cc.instantiate(prefab);\n\t// \tcc.director.getScene().addChild(preFabNode);\n\t// \tddz.GlobalFuncs.setToCenter(preFabNode);\n\t// \tvar com = preFabNode.getComponent(\"choosePlayMode\");\n\t// });\n},\n\n// Android 收藏桌面引导\nhall.GlobalFuncs.onCollectDeskTop = function () {\n\tcc.loader.loadRes('prefabs/collectDeskTop', function (err, prefab) {\n\t\tvar preFabNode = cc.instantiate(prefab);\n\t\tcc.director.getScene().addChild(preFabNode);\n\t\tddz.GlobalFuncs.setToCenter(preFabNode);\n\t\tvar com = preFabNode.getComponent(\"collectDeskTop\");\n\t});\n},\n\n// 关注公众号引导\nhall.GlobalFuncs.onOfficialAccountGuide = function (isAddApplet) {\n\tcc.loader.loadRes('prefabs/officialAccountGuide', function (err, prefab) {\n\t\tvar preFabNode = cc.instantiate(prefab);\n\t\tcc.director.getScene().addChild(preFabNode,777777);\n\t\tddz.GlobalFuncs.setToCenter(preFabNode);\n\t\tvar com = preFabNode.getComponent(\"officialAccountGuide\");\n\t\tif (isAddApplet){\n\t\t\tcom.addAppletGetDiamond();\n\t\t}else {\n\t\t\tcom.openWindow();\n\t\t}\n\n\t});\n},\n\n// 倍数宝箱说明\nhall.GlobalFuncs.onbetBoxAbstract = function () {\n\tvar curScene = cc.director.getScene();\n\tcc.loader.loadRes('prefabs/betBoxAbstract', function (err, prefab) {\n\t\tvar preFabNode = cc.instantiate(prefab);\n\t\tcc.director.getScene().addChild(preFabNode);\n\t\tddz.GlobalFuncs.setToCenter(preFabNode);\n\t\tvar com = preFabNode.getComponent(\"betBoxAbstract\");\n\n\t\tif (curScene.name ==  \"TableScene\"){\n\t\t\tcom.setParentScene(curScene.children[0].getComponent('DdzTableScene'));\n\t\t\tcom.updateInfo();\n\t\t}\n\t});\n},\n\n// 关注公众号气泡提示\nhall.GlobalFuncs.onBubbleTips = function (node,tips,posx,posy,isTable) {\n\tcc.loader.loadRes('prefabs/ddz_bubble_tips', function (err, prefab) {\n\t\tvar preFabNode = cc.instantiate(prefab);\n\t\tpreFabNode.x = -100;\n\t\tif (posx != null) {\n\t\t\tpreFabNode.x = posx;\n\t\t}\n\t\tpreFabNode.y = 70;\n\t\tif (posy != null) {\n\t\t\tpreFabNode.y = posy;\n\t\t}\n\t\tnode.addChild(preFabNode);\n\t\tvar com = preFabNode.getComponent(\"ddz_bubble_tips\");\n\t\tcom.setTips(tips,isTable);\n\t});\n},\n\n// 免费宝箱\nhall.GlobalFuncs.onTreasureBox = function (box_share,windoubles) {\n\tcc.loader.loadRes('prefabs/treasure_box', function (err, prefab) {\n\t\tvar preFabNode = cc.instantiate(prefab);\n\t\tcc.director.getScene().addChild(preFabNode);\n\t\tddz.GlobalFuncs.setToCenter(preFabNode);\n\t\tvar com = preFabNode.getComponent('treasure_box');\n\t\tcom.setBoxShareInfo(box_share,windoubles);\n\t});\n},\n\n// // 好友互助宝箱\n// hall.GlobalFuncs.onFriendHelpBox = function (data) {\n// \tif (ddz.ddz_helpBox) {\n// \t\tddz.ddz_helpBox.updateRewardInfo(data);\n// \t\treturn;\n// \t}\n// \tcc.loader.loadRes('prefabs/ddz_helpBox', function (err, prefab) {\n// \t\tvar preFabNode = cc.instantiate(prefab);\n// \t\tcc.director.getScene().addChild(preFabNode,777777);\n// \t\tddz.GlobalFuncs.setToCenter(preFabNode);\n// \t\tddz.ddz_helpBox = preFabNode.getComponent('ddz_helpBox');\n// \t\tddz.ddz_helpBox.updateRewardInfo(data);\n// \t});\n// },\n// 跳关弹窗\nhall.GlobalFuncs.onSkipCustom = function (state) {\n\tty.BiLog.clickStat(ty.UserInfo.clickStatEventType.clickStatEventTypeShowWindow,\n\t\t[\"skipWindow\",state]);\n\tcc.loader.loadRes('prefabs/ddz_window_skip', function (err, prefab) {\n\t\tvar preFabNode = cc.instantiate(prefab);\n\t\tcc.director.getScene().addChild(preFabNode,777777);\n\t\tddz.GlobalFuncs.setToCenter(preFabNode);\n\t\tvar com = preFabNode.getComponent('ddz_window_skip');\n\t\tcom.updateWindowInfo(state);\n\t});\n},\n\n// 新人限时礼包\nhall.GlobalFuncs.onNewUserGifts = function (data) {\n\t// if (ddz.ddz_newUserBox) {\n\t// \tddz.ddz_newUserBox.setCountDownWithNumber(data);\n\t// \treturn;\n\t// }\n\t// cc.loader.loadRes('prefabs/treasure_box_newer', function (err, prefab) {\n\t// \tvar preFabNode = cc.instantiate(prefab);\n\t// \tcc.director.getScene().addChild(preFabNode);\n\t// \tddz.GlobalFuncs.setToCenter(preFabNode);\n\t// \tddz.ddz_newUserBox = preFabNode.getComponent('treasure_box_newer');\n\t// \tddz.ddz_newUserBox.setCountDownWithNumber(data);\n\t// });\n},\n\n// 每日邀请福利\nhall.GlobalFuncs.onShareDiamondReward = function (data) {\n\tif (ddz.ddz_dayWelfare) {\n\t\tddz.ddz_dayWelfare.updateShareInfo(data);\n\t\treturn;\n\t}\n\tcc.loader.loadRes('prefabs/ddz_diamond', function (err, prefab) {\n\t\tvar preFabNode = cc.instantiate(prefab);\n\t\tcc.director.getScene().addChild(preFabNode);\n\t\tddz.GlobalFuncs.setToCenter(preFabNode);\n\t\tddz.ddz_dayWelfare = preFabNode.getComponent('ddz_diamond_windows');\n\t\tddz.ddz_dayWelfare.updateShareInfo(data);\n\t\tddz.ddz_dayWelfare.updateWindowInfo(1);\n\t});\n},\n\n// // 停服提示\n// hall.GlobalFuncs.onWithdrawalMaintain = function (timerStr) {\n// \tvar curScene = cc.director.getScene();\n// \tvar preFabNode = curScene.getChildByTag(100051);\n// \tif (!timerStr) {\n// \t\tif (preFabNode) {\n// \t\t\tpreFabNode.removeFromParent();\n// \t\t}\n// \t\treturn\n// \t}\n//\n// \tcc.loader.loadRes('prefabs/withdrawalMaintain', function (err, prefab) {\n// \t\tpreFabNode = cc.instantiate(prefab);\n// \t\tpreFabNode.setTag(100051);\n// \t\tcurScene.addChild(preFabNode);\n// \t\tddz.GlobalFuncs.setToCenter(preFabNode);\n// \t\tvar com = preFabNode.getComponent(\"withdrawalMaintain\");\n// \t\tcom.setTips(timerStr);\n// \t});\n// },\n//\nhall.GlobalFuncs.onEnterQueue = function(){\n\tvar preFabPath = 'prefabs/enter_queue';\n\tvar comName = \"enter_queue\";\n\tddz.AudioHelper.playMusic(ddz.MusicPath_mp3.table_background_music, true, ty.SystemInfo.tableBgMusicVolume);\n\thall.GlobalFuncs.showPopWinByPreFab(preFabPath, function (preFabNode) {\n\t\tvar com = preFabNode.getComponent(comName);\n\t\tcom.enterQueue();\n\t\tcom.playAni(true);\n\t\tty.NotificationCenter.trigger(ddz.EventType.SHOW_MATCHING);\n\t});\n};\n\t\nhall.GlobalFuncs.getSpDataPath = function (isDiZhu, isMale) {\n\t// var spDataPath;\n\t// if (isDiZhu){\n\t// \tif (isMale){\n\t// \t\tspDataPath = \"spine/ddz_newoneself_dizhu\";\n\t// \t}else{\n\t// \t\tspDataPath = \"spine/ddz_newoneself_dizhupo\";\n\t// \t}\n\t// }\n\t// else{\n\t// \tif (isMale){\n\t// \t\tspDataPath = \"spine/ddz_newoneself_nongmin\";\n\t// \t}else{\n\t// \t\tspDataPath = \"spine/ddz_newoneself_nvwa\";\n\t// \t}\n\t// }\n\t// return spDataPath;\n};\n\n/**\n * 生成32位的UUID\n * @returns {string}\n * @constructor\n */\nhall.GlobalFuncs.CreateUuid = function () {\n\tvar s = [];\n\tvar hexDigits = \"0123456789abcdef\";\n\tfor (var i = 0; i < 36; i++) {\n\t\ts[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1);\n\t}\n\ts[14] = \"4\";  // bits 12-15 of the time_hi_and_version field to 0010\n\ts[19] = hexDigits.substr((s[19] & 0x3) | 0x8, 1);  // bits 6-7 of the clock_seq_hi_and_reserved to 01\n\ts[8] = s[13] = s[18] = s[23] = \"\";\n\n\tvar uuid = s.join(\"\");\n\treturn uuid;\n};\n\nhall.GlobalFuncs.getLocalUuid = function () {\n\n\tvar local_uuid = hall.GlobalFuncs.ReadStringFromLocalStorage(hall.LOCAL_UUID_KEY, \"\");\n\tif (!local_uuid){\n\t\tlocal_uuid = hall.GlobalFuncs.CreateUuid();\n\t\thall.GlobalFuncs.setInLocalStorage(hall.LOCAL_UUID_KEY, local_uuid)\n\t}\n\treturn local_uuid;\n};\n\n//返回一个100以内小于number的数\nhall.GlobalFuncs.getRandomNumberBefore = function(number) {\n\treturn (Math.floor(Math.random()*100))%number;\n};\n//返回一个100以内小于number的数\nhall.GlobalFuncs.getShareRandomNumberWithShareList = function(shareList) {\n\tvar returnRandom = hall.GlobalFuncs.getRandomNumberBefore(100) ;\n\tvar nowIndex = 0;\n\tif(shareList && shareList.length && shareList.length > 0){\n\t\twhile (returnRandom > shareList[nowIndex].weight){\n\t\t\treturnRandom -= shareList[nowIndex].weight;\n\t\t\tnowIndex ++ ;\n\t\t\tif(nowIndex >= shareList.length){\n\t\t\t\tnowIndex = 0;\n\t\t\t}\n\t\t}\n\t}\n\treturn nowIndex;\n};\n//用关键字替换文本\nhall.GlobalFuncs.replaceKeyWordInString = function(string) {\n\tvar repString = \"\".concat(string);\n\tvar replaceMap = ddz.Share.shareKeywordReplace;\n\tfor (var key in replaceMap){\n\t\tvar reg = new RegExp(key,\"g\");\n\t\trepString = repString.replace(reg,replaceMap[key]);\n\t}\n\treturn repString;\n};\n//字典转换成字符串(打点)\nhall.GlobalFuncs.replaceToStringWithDic = function(dic) {\n\treturn  \"query:\" + JSON.stringify(dic);\n};\n//返回一个保留2位小数的数字字符串\nhall.GlobalFuncs.getMoneyStringWithCoupons = function(couponCount) {\n\tvar money = (couponCount/100).toFixed(2) +\"\";\n\treturn money;\n};\n\n//获取按钮分享文本\nhall.GlobalFuncs.getButtonTitle = function(_shareType) {\n\tvar richText = \"分享\";\n\tif (_shareType && ddz.gameModel.shareConfig) {\n\t\tif (ddz.gameModel.shareConfig[_shareType]) {\n\t\t\tvar _buttonTitle = ddz.gameModel.shareConfig[_shareType].buttonTitle;\n\t\t\tif (ty.UserInfo.isInBSGS && ddz.gameModel.shareConfig[_shareType].buttonTitleBSGS) {\n\t\t\t\t_buttonTitle = ddz.gameModel.shareConfig[_shareType].buttonTitleBSGS;\n\t\t\t}\n\t\t\tif (_buttonTitle) {\n\t\t\t\tvar _string = hall.GlobalFuncs.replaceKeyWordInString(_buttonTitle);\n\t\t\t\trichText = _string;\n\t\t\t}\n\t\t}\n\t}\n\treturn richText;\n};\n\n//获取分享点\nhall.GlobalFuncs.getSharePoint = function(_shareType) {\n\tvar sharePoint = 0;\n\tif (_shareType && ddz.gameModel.shareConfig) {\n\t\tif (ddz.gameModel.shareConfig[_shareType]) {\n\t\t\tsharePoint =  ddz.gameModel.shareConfig[_shareType].sharePoint;\n\t\t}\n\t}\n\treturn sharePoint;\n};\n\nhall.GlobalFuncs.isEmptyObject = function (obj) {\n\tfor (var name in obj) {\n\t\treturn false;\n\t}\n\treturn true;\n};\n\nhall.GlobalFuncs.sliceStringToLength  = function (str, length) {\n\tvar len = 0;\n\tvar tmp = 0;\n\tvar s;\n\tfor (var i = 0; i < str.length; i++) {\n\t\tvar charCode = str.charCodeAt(i);\n\t\tif (charCode >= 0 && charCode <= 128) {\n\t\t\ttmp += 1;\n\t\t} else { // 如果是中文则长度加2\n\t\t\ttmp += 2;\n\t\t}\n\t\tif (tmp <= length - 2) {\n\t\t\tlen++;\n\t\t}\n\t}\n\tif (tmp <= length) {\n\t\ts = str.slice(0);\n\t} else {\n\t\ts = str.slice(0, len);\n\t\ts += \"..\";\n\t}\n\treturn s;\n};\n\n// 按钮特效 scale 缩放大小\nhall.GlobalFuncs.btnEffect = function (node,scale,self){\n\tnode.on(cc.Node.EventType.TOUCH_START, function(){\n\t\tnode.setScale(scale);\n\t}, self, true);\n\t// node.on(cc.Node.EventType.TOUCH_MOVE, function(){\n    //\n\t// }, self, true);\n\tnode.on(cc.Node.EventType.TOUCH_END, function(){\n\t\tnode.setScale(1);\n\t}, self, true);\n\tnode.on(cc.Node.EventType.TOUCH_CANCEL, function(){\n\t\tnode.setScale(1);\n\t}, self, true);\n};\n\n// 按钮缩放,放大特效\n// 按钮特效 scale 缩放大小\nhall.GlobalFuncs.btnScaleEffect = function (node,scale,nScale){\n\tnode.stopAllActions();\n\tvar normalScale = 1;\n\tif (nScale){\n\t\tnormalScale = nScale;\n\t}\n\tvar scale_1 = cc.scaleTo(0.2, scale, scale);\n\tvar scale_2 = cc.scaleTo(0.2, normalScale, normalScale);\n\tvar delay = cc.delayTime(1.3);\n\tvar seq1 = cc.sequence(scale_1, scale_2,scale_1, scale_2,delay);\n\tnode.runAction(seq1.repeatForever());\n};\n\nhall.GlobalFuncs.checkNeedLoadRemoteRes = function () {\n\tvar localVersion = hall.GlobalFuncs.ReadStringFromLocalStorage(ddz.LOCAL_VERSION_KEY, \"\");\n\tif (localVersion != ty.SystemInfo.version){\n\t\thall.GlobalFuncs.setInLocalStorage(ddz.LOCAL_VERSION_KEY, ty.SystemInfo.version);\n\t\treturn true;\n\t}\n\treturn false;\n};\n\n/**\n * 从预制件加载弹窗\n * @param preFabPath 预制件路径\n * @param func 回调\n */\nhall.GlobalFuncs.showPopWinByPreFab = function (preFabPath, func) {\n\tcc.loader.loadRes(preFabPath, function (err, prefab) {\n\t\tvar preFabNode = cc.instantiate(prefab);\n\t\tcc.director.getScene().addChild(preFabNode,666666);\n\t\tddz.GlobalFuncs.setToCenter(preFabNode);\n\t\t// if (preFabPath == \"ani/ddz_matching/Matching\"){\n\t\t//     preFabNode.y += 160;\n\t\t// }\n\t\tfunc(preFabNode);\n\t});\n};\n\n/**\n * 检查城市名是否为北上广深\n * @param cityName 城市名\n * @returns {boolean}\n */\nhall.GlobalFuncs.checkBSGS = function (cityName) {\n\n\tif (!cityName || cityName == \"未知\") {\n\t\treturn true\n\t}\n\tvar keyWord;\n\tfor (var key in ty.SystemInfo.bsgsCitys){\n\t\tkeyWord = ty.SystemInfo.bsgsCitys[key];\n\t\tif (cityName.indexOf(keyWord) > -1){\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n};\n\nhall.GlobalFuncs._TAG = \"hall.GlobalFuncs\";"]}