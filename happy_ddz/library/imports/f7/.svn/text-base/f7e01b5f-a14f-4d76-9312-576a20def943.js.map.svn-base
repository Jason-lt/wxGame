{"version":3,"sources":["../../../../../../assets/Script/ComponentScript/component/assets/Script/ComponentScript/component/ddz_cell_roomlist.js"],"names":["cc","Class","extends","Component","properties","roomName","default","type","Label","leftLabel","rightLabel","leftRichText","RichText","rightRichText","selectKuang","Node","redBar","awardText","bgSprite","Sprite","bgSpriteFrame","SpriteFrame","leftSprite","rightSprite","onLoad","isSelect","cellIndex","ty","NotificationCenter","listen","ddz","EventType","UPDATE_ROOMLIST_KUANG","setSelect","SAVE_MATCH_SUCCESS","onSaveMatch","addDataWithObject","objc","setDetailInformation","resultMap","LOGD","JSON","stringify","string","name","indexOf","isLaizi","spriteFrame","setRightRichText","condition","roomID","id","mixId","play_mode","onLineNum","hall","gameWorld","getRoomOnlineInfo","userCount","node","active","setLeftRichText","gameDes","setAwardText","index","_gameId","SystemInfo","gameId","hallId","MsgFactory","getQuickStart","UserInfo","userId","staticSystemInfo","version","_isAward","_des","num","setColor","color","str","_index","_isSelect","onClickCell","BiLog","clickStat","clickStatEventType","clickStatEventTypeButtonClick","matchModel","getCurWaitInfo","saveMatch","onDestroy","ignoreScope"],"mappings":"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","file":"ddz_cell_roomlist.js","sourceRoot":"../../../../../../assets/Script/ComponentScript/component","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/class/index.html\n// Learn Attribute:\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/reference/attributes/index.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/life-cycle-callbacks/index.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        roomName : {\n            default : null,\n            type : cc.Label\n        },\n\n        leftLabel:cc.Label,\n\n        rightLabel:cc.Label,\n        \n        leftRichText : {\n            default : null,\n            type : cc.RichText\n        },\n        rightRichText : {\n            default : null,\n            type : cc.RichText\n        },\n        selectKuang : {\n            default : null,\n            type : cc.Node\n        },\n        redBar : {\n            default : null,\n            type : cc.Node\n        },\n        awardText : {\n            default : null,\n            type : cc.RichText\n        },\n\n        bgSprite:cc.Sprite,\n        bgSpriteFrame:[cc.SpriteFrame],\n\n        leftSprite:cc.Sprite,\n        rightSprite:cc.Sprite,\n\n    },\n\n    onLoad:function () {\n        this.isSelect(false);\n        this.cellIndex = -1;\n        ty.NotificationCenter.listen(ddz.EventType.UPDATE_ROOMLIST_KUANG,this.setSelect,this);\n        ty.NotificationCenter.listen(ddz.EventType.SAVE_MATCH_SUCCESS, this.onSaveMatch, this);\n    },\n\n    addDataWithObject : function (objc) {\n        this.setDetailInformation(objc);\n    },\n\n    setDetailInformation:function (resultMap) {\n        ddz.LOGD(\"\",\"file = [ddz_cell_roomlist] fun = [setDetailInformation] resultMap = \" + JSON.stringify(resultMap));\n        this.roomName.string = resultMap.name;\n        if (resultMap.name.indexOf(\"癞子\") >= 0){\n            this.isLaizi = true;\n            this.bgSprite.spriteFrame = this.bgSpriteFrame[1];\n            this.leftSprite.spriteFrame = this.bgSpriteFrame[5];\n            this.rightSprite.spriteFrame = this.bgSpriteFrame[4];\n        }else {\n            this.isLaizi = false;\n            this.bgSprite.spriteFrame = this.bgSpriteFrame[0];\n            this.leftSprite.spriteFrame = this.bgSpriteFrame[3];\n            this.rightSprite.spriteFrame = this.bgSpriteFrame[2];\n        }\n        // this.baseScore.string = resultMap.entry;\n        this.setRightRichText(resultMap.condition);\n        this.roomID = resultMap.id;\n        if (resultMap.mixId){\n            this.mixId = resultMap.mixId;\n        }\n        this.play_mode = resultMap.play_mode;\n        \n        var onLineNum = hall.gameWorld.getRoomOnlineInfo(this.roomID);\n        if (resultMap.userCount) {\n            onLineNum = resultMap.userCount;\n        }\n        if (onLineNum != null) {\n            if (onLineNum < 0) {\n                this.leftLabel.node.active = false;\n            } else {\n                this.leftLabel.node.active = true;\n                this.setLeftRichText(onLineNum);\n            }\n        }\n\n        if (resultMap.gameDes && resultMap.gameDes != \"\") {\n            this.setAwardText(true,resultMap.gameDes);\n        }else {\n            this.setAwardText(false);\n        }\n    },\n\n    onSaveMatch:function () {\n        if (this.cellIndex == this.index) {\n            var _gameId = ty.SystemInfo.gameId || ty.SystemInfo.hallId;\n            hall.MsgFactory.getQuickStart(ty.UserInfo.userId, _gameId, this.roomID, hall.staticSystemInfo.version, null, null, null,null,this.mixId,this.play_mode);\n            this.cellIndex = -1;\n        }\n    },\n\n    setAwardText:function (_isAward,_des) {\n        this.redBar.active = _isAward;\n        if (_des) {\n            this.awardText.string = \"<color=#ffffff> \" + _des + \"</c>\";\n        }\n    },\n\n    setLeftRichText:function (num) {\n        // this.leftRichText.string = \"<img src='ddz_roomlist_smallPerson' /><color=#1A6951> \" + num + \"</c>\";\n        this.leftLabel.string = num;\n        if (this.isLaizi) {\n            this.leftLabel.node.setColor(cc.color(255 ,229 ,162));\n        }else {\n            this.leftLabel.node.setColor(cc.color(167 ,227 ,255));\n        }\n\n    },\n\n    setRightRichText:function(str) {\n        // this.rightRichText.string = \"<img src='ddz_coin_green' height=33.6 width=33.6/><color=#1A6951> \" + str + \"</c>\";\n        this.rightLabel.string = str;\n        if (this.isLaizi) {\n            this.rightLabel.node.setColor(cc.color(255 ,229 ,162));\n        }else {\n            this.rightLabel.node.setColor(cc.color(167 ,227 ,255));\n        }\n    },\n\n    setSelect:function (_index) {\n        this.isSelect(false);\n        if (this.index == _index) {\n            this.isSelect(true);\n        }\n    },\n\n    // 选中框\n    isSelect:function (_isSelect) {\n        this.selectKuang.active = _isSelect;\n    },\n\n    onClickCell:function () {\n        ty.BiLog.clickStat(ty.UserInfo.clickStatEventType.clickStatEventTypeButtonClick,\n            [\"roomListClick\",this.roomName.string]);\n        if (ddz.matchModel.getCurWaitInfo()){\n            this.cellIndex = this.index;\n            ddz.LOGD(null,\"file = [ddz_cell_roomlist] fun = [onclickCell] 保存进度\");\n            ddz.MsgFactory.saveMatch();\n        } else {\n            ddz.LOGD(null,\"file = [ddz_cell_roomlist] fun = [onclickCell] 快速开始\");\n            this.cellIndex = -1;\n            var _gameId = ty.SystemInfo.gameId || ty.SystemInfo.hallId;\n            hall.MsgFactory.getQuickStart(ty.UserInfo.userId, _gameId, this.roomID, hall.staticSystemInfo.version, null, null, null,null,this.mixId,this.play_mode);\n        }\n    },\n\n    onDestroy : function () {\n        ty.NotificationCenter.ignoreScope(this);\n    },\n\n});\n"]}