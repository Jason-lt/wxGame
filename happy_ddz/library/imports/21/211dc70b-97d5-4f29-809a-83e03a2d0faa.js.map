{"version":3,"sources":["../../../../../../assets/Script/ComponentScript/window/assets/Script/ComponentScript/window/ddz_notifyWindow.js"],"names":["cc","Class","extends","Component","properties","tableView","default","type","Node","backBg","Button","titleLabe","Label","coloseButton","contentSpr","contentLabel","shade","initialLabel","signLabel","infoMap","rewardBg","diamondNode","diamondLabel","chipNode","chipLabel","jipaiqiNode","jipaiqiLabel","getRewardBtn","onLoad","animation","getComponent","Animation","anim1","getAnimationState","isAction","play","that","on","node","active","size","director","getWinSize","setContentSize","hall","AdManagerTYWX","getAdNodeByTag","hideAdNode","setListType","setOrigData","updateWind","setTitleLabe","setDetailTypeWithInfoMap","setContent","content","sign","setReward","attachment","msgid","versions","title","infoList","ddz","gameModel","notifyInfo","info","LOGD","JSON","stringify","window","messageInfo","notifyMailMessage","allInfo","concat","length","i","timer","_timer_2","indexOf","slice","timeArr","split","timerArr","dayTime","j","seqTime","sortFunc","n1","n2","info1","info2","sort","setDataArray","setShowInitialLabel","isScroll","isVal","GlobalFuncs","isEmptyObject","assets","itemId","string","count","onClickGetReward","MsgFactory","getMessageReward","messageRewardTitle","interactable","str","singStr","index","_str","LOGW","index_2","playEndAnimation","closeWindow","indexStr","ReadStringFromLocalStorage","matchModel","UPDATE_NOTIFY_INFO","indexList","parse","autoShow","autoShowCount","ty","NotificationCenter","trigger","EventType","UPDATE_GIFTBAG_COUNT","readed","unReadCount","push","setInLocalStorage","UPDATE_COMMON_CONFIG","destroy","onClose","event","onDestroy","showAdNode"],"mappings":"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","file":"ddz_notifyWindow.js","sourceRoot":"../../../../../../assets/Script/ComponentScript/window","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/class/index.html\n// Learn Attribute:\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/reference/attributes/index.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/life-cycle-callbacks/index.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n\n        tableView : {\n            default : null,\n            type : cc.Node\n        },\n        backBg : {\n            default : null,\n            type  : cc.Button\n        },\n        titleLabe : {\n            default : null,\n            type  : cc.Label\n        },\n        coloseButton : {\n            default : null,\n            type : cc.Button\n        },\n\n        contentSpr : {\n            default : null,\n            type : cc.Node\n        },\n        contentLabel : {\n            default : null,\n            type  : cc.Label\n        },\n        shade : {\n            default : null,\n            type : cc.Node\n        },\n        initialLabel : {\n            default : null,\n            type  : cc.Label\n        },\n        signLabel : {\n            default : null,\n            type  : cc.Label\n        },\n        infoMap : null,\n        type : \"\",\n\n        rewardBg:{\n            default : null,\n            type : cc.Node\n        },\n\n        diamondNode: {\n            default : null,\n            type : cc.Node\n        },\n\n        diamondLabel : {\n            default : null,\n            type  : cc.Label\n        },\n\n        chipNode: {\n            default : null,\n            type : cc.Node\n        },\n\n        chipLabel : {\n            default : null,\n            type  : cc.Label\n        },\n\n        jipaiqiNode: {\n            default : null,\n            type : cc.Node\n        },\n\n        jipaiqiLabel : {\n            default : null,\n            type  : cc.Label\n        },\n\n        getRewardBtn : {\n            default : null,\n            type  : cc.Button\n        },\n\n    },\n\n    onLoad : function () {\n        var animation = this.getComponent(cc.Animation);\n        var anim1 = animation.getAnimationState('windowShowAniWithBg');\n        this.isAction = true;\n        anim1.play();\n        var that = this;\n        anim1.on('finished', function(){\n            that.isAction = false;\n        },this);\n        this.backBg.node.active = true;\n        var size = cc.director.getWinSize();\n        this.backBg.node.setContentSize(size);\n        this.shade.setContentSize(size);\n\n        if (hall.AdManagerTYWX && hall.AdManagerTYWX.getAdNodeByTag(\"myFirstAdNode\")) {\n            hall.AdManagerTYWX.getAdNodeByTag(\"myFirstAdNode\").hideAdNode();\n        }\n\n        // if (hall.sxAdManager) {\n        //     hall.sxAdManager.hide();\n        // }\n    },\n\n    setListType : function () {\n        this.setOrigData();\n        this.updateWind(true);\n        this.setTitleLabe(\"公告\");\n    },\n    setDetailTypeWithInfoMap : function (infoMap,type) {\n        this.infoMap = infoMap;\n        this.type = type;\n        this.updateWind(false);\n        this.shade.active = type == \"auto\";\n        this.setContent(infoMap.content,infoMap.sign);\n        this.setReward(infoMap.attachment);\n        this.msgid = infoMap.msgid;\n        this.versions = infoMap.versions;\n        this.setTitleLabe(infoMap.title);\n    },\n\n    setOrigData : function () {\n        var infoList = ddz.gameModel.notifyInfo.info;\n        ddz.LOGD(\"\",\"file = [ddz_notifyWindow] fun = [setOrigData] notifyInfo = \" + JSON.stringify(ddz.gameModel.notifyInfo));\n        var window = this.tableView.getComponent('ddz_tableView');\n        var messageInfo = ddz.gameModel.notifyMailMessage;\n        var allInfo = infoList.concat(messageInfo);\n        // window.setDataArray(ddz.gameModel.notifyInfo.info);\n\n        if (allInfo && allInfo.length > 0) {\n            for (var i = 0; i < allInfo.length; i++) {\n\n                if (allInfo[i] && allInfo[i].timer && allInfo[i].timer!= \"\") {\n                    var _timer_2 = allInfo[i].timer;\n                    if (allInfo[i].timer.indexOf(\" \") > 0) {\n                        _timer_2 = allInfo[i].timer.slice(0,allInfo[i].timer.indexOf(\" \"));\n                        allInfo[i].timeArr = allInfo[i].timer.slice(allInfo[i].timer.indexOf(\" \")+1).split(\":\"); //时间\n                        // allInfo[i].timeArr = for\n                    }\n                    allInfo[i].timerArr = _timer_2.split(\"-\");  //日期\n                    allInfo[i].dayTime = \"\";\n                    for (var j = 0; j < allInfo[i].timerArr.length; j++) {\n                        allInfo[i].dayTime = allInfo[i].dayTime + allInfo[i].timerArr[j] + \"\";\n                    }\n                    if (allInfo[i].timeArr && allInfo[i].timeArr.length > 0) {\n                        allInfo[i].seqTime = \"\";\n                        for (var j = 0; j < allInfo[i].timeArr.length; j++) {\n                            allInfo[i].seqTime = allInfo[i].seqTime + allInfo[i].timeArr[j] + \"\";\n                        }\n                    }\n\n                }\n            }\n        }\n\n        var sortFunc = function(n1, n2) {\n            var info1 = n1.dayTime;\n            var info2 = n2.dayTime;\n\n            if (info1 < info2){\n                return 1\n            }else {\n                if (!n1.seqTime) {\n                    return 1\n                }else if (!n2.seqTime) {\n                    return 1\n                }else {\n                    return n2.seqTime - n1.seqTime\n                }\n            }\n\n        };\n\n        // var sortFunc = function(n1, n2) {\n        //     var info1 = n1.timerArr;\n        //     var info2 = n2.timerArr;\n        //\n        //     if (info1.length != 3){\n        //         ddz.LOGD(\"\",\"  info1.length != 3  \");\n        //         return -1\n        //     }else if (info2.length != 3){\n        //         ddz.LOGD(\"\",\"  info2.length != 3  \");\n        //         return -1\n        //     }\n        //     else if (info1[0] < info2[0]){\n        //         return -1;\n        //     }\n        //     else if (info1[1] < info2[1]){\n        //         return -1\n        //     }\n        //     else if (info1[2] < info2[2]){\n        //         return -1\n        //     }\n        //     else {\n        //         // return 1\n        //         if (n1.timeArr && n1.timeArr.length == 3){\n        //             if (n1.timeArr[0] < n2.timeArr[0]){\n        //                 return -1;\n        //             }\n        //             else if (n1.timeArr[1] < n2.timeArr[1]){\n        //                 return -1\n        //             }\n        //             else if (n1.timeArr[2] < n2.timeArr[2]){\n        //                 return -1\n        //             }else {\n        //                 return 1\n        //             }\n        //         }else {\n        //             return 1\n        //         }\n        //     }\n        // };\n        allInfo.sort(sortFunc);\n\n\n        window.setDataArray(allInfo);\n        if(infoList && infoList.length && infoList.length > 0){\n            this.setShowInitialLabel(false);\n        }else {\n            this.setShowInitialLabel(true);\n        }\n    },\n\n    updateWind:function(isScroll){\n        this.tableView.active = isScroll;\n        this.contentSpr.active = !isScroll;\n        this.shade.active = isScroll;\n    },\n\n    setShowInitialLabel:function(isVal){\n        this.initialLabel.node.active = isVal\n    },\n\n    //设置奖励 显示icon\n    setReward:function(attachment){\n        if(attachment && !hall.GlobalFuncs.isEmptyObject(attachment)) {\n            if (attachment.assets && attachment.assets.length > 0) {\n                this.rewardBg.active = true;\n                this.diamondNode.active = false;\n                this.chipNode.active = false;\n                this.jipaiqiNode.active = false;\n                for (var i = 0; i < attachment.assets.length; i++) {\n                    if (attachment.assets[i].itemId == \"item:1311\"){\n                        this.diamondNode.active = true;\n                        this.diamondLabel.string = attachment.assets[i].count;\n                    }else if (attachment.assets[i].itemId == \"user:chip\"){\n                        this.chipNode.active = true;\n                        this.chipLabel.string = attachment.assets[i].count;\n                    }\n                    else if (attachment.assets[i].itemId == \"item:1363\"){\n                        this.jipaiqiNode.active = true;\n                        this.jipaiqiLabel.string = attachment.assets[i].count;\n                    }\n                }\n            }\n            else {\n                this.rewardBg.active = false;\n            }\n        }else {\n            this.rewardBg.active = false;\n        }\n    },\n\n    onClickGetReward:function(){\n        if (this.msgid) {\n            hall.MsgFactory.getMessageReward(this.msgid);\n            ddz.gameModel.messageRewardTitle = this.versions;\n            this.getRewardBtn.interactable = false;\n        }\n    },\n\n    setContent:function(str,singStr){\n        var str = str  || \"\";\n        var index = str.indexOf(\"fuhao\");\n        if (index == -1) {\n            this.contentLabel.string = str;\n        }else {\n            var _str = str.slice(index + 5);\n            hall.LOGW(\"\",\"file = [ddz_notifyWindow] fun = [setContent] _str = \" + _str);\n            var index_2 = _str.indexOf(\"#\");\n            if (index_2 >= 0) {\n                var info = _str.slice(index_2 + 1);\n                hall.LOGW(\"\",\"file = [ddz_notifyWindow] fun = [setContent] info = \" + info);\n                this.contentLabel.string = info;\n            }else {\n                this.contentLabel.string = _str;\n                hall.LOGW(\"\",\"file = [ddz_notifyWindow] fun = [setContent] 123 = \");\n            }\n\n        }\n\n        // this.contentLabel.string = str || \"\";\n        this.signLabel.string = singStr || \"\";\n    },\n\n    setTitleLabe:function(str){\n        this.titleLabe.string = str;\n    },\n\n    playEndAnimation : function () {\n        // if(this.infoMap && this.type == 'auto'){\n        //     var animation = this.getComponent(cc.Animation);\n        //     var anim1 = animation.getAnimationState('windowCloseAniTop');\n        //     anim1.play();\n        //     var that = this;\n        //     anim1.on('finished', function(){\n        //         that.closeWindow();\n        //     },this);\n        // }else {\n        //     this.closeWindow();\n        // }\n\n        this.closeWindow();\n    },\n\n    closeWindow : function () {\n        this.backBg.node.active = false;\n        this.isAction = false;\n        if(this.infoMap){\n            var indexStr = hall.GlobalFuncs.ReadStringFromLocalStorage(ddz.matchModel.UPDATE_NOTIFY_INFO, JSON.stringify([]));\n            var indexList = JSON.parse(indexStr);\n            if (indexList.indexOf(this.infoMap.index) == -1) {\n                if(this.infoMap.autoShow){\n                    ddz.gameModel.notifyInfo.autoShowCount --;\n                    ty.NotificationCenter.trigger(ddz.EventType.UPDATE_GIFTBAG_COUNT);\n                }\n                this.infoMap.readed = 1;\n                ddz.gameModel.notifyInfo.unReadCount --;\n                indexList.push(this.infoMap.index);\n                hall.GlobalFuncs.setInLocalStorage(ddz.matchModel.UPDATE_NOTIFY_INFO, JSON.stringify(indexList));\n                ty.NotificationCenter.trigger(ddz.EventType.UPDATE_COMMON_CONFIG,this.infoMap.index);\n            }\n        }\n        this.node.destroy();\n    },\n\n    onClose:function (event) {\n        if (this.isAction){\n            return\n        }\n        this.isAction = true;\n        this.playEndAnimation();\n    },\n    onDestroy : function () {\n        if (hall.AdManagerTYWX.getAdNodeByTag(\"myFirstAdNode\")) {\n            hall.AdManagerTYWX.getAdNodeByTag(\"myFirstAdNode\").showAdNode();\n        }\n    }\n});\n"]}