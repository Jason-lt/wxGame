{"version":3,"sources":["../../../../../../assets/Script/ComponentScript/window/assets/Script/ComponentScript/window/jipaiqi.js"],"names":["cc","Class","extends","Component","properties","poker_num_1","Label","poker_num_2","poker_num_3","poker_num_4","poker_num_5","poker_num_6","poker_num_7","poker_num_8","poker_num_9","poker_num_10","poker_num_11","poker_num_12","poker_num_13","poker_num_14","poker_num_15","jipaiqi_num","bg","Node","xiaopai","onLoad","active","ty","NotificationCenter","listen","ddz","EventType","OPEN_JIPAIJI","onOpenJipaiQi","CLOSE_JIPAIJI","onCloseJipaiQi","REMOVE_TABLE_ANI","onRemoveAni","UPDATE_CARD_NOTE","updateCardNote","UPDATE_JIPAIQI","updateGetReward","string","hall","ME","udataInfo","jiPaiQiCount","data","cardNote","myCardNote","length","i","num","ani","node","getComponent","Animation","anim","getAnimationState","once","play","sxAdManager","hide","adManager","canShowTableBanner","canShowTableTopBanner","destroyWidthBannerAd","that","trigger","OPEN_DIVERSION","onClickButton","isClickJiPaiQi","BiLog","clickStat","UserInfo","clickStatEventType","clickStatEventTypeButtonClick","gameModel","firstUseJiPaiQiPoint","shareToGetreward","Share","SharePointType","firstUseJiPaiQi","USE_NEW_CARD_NOTE","stop","onDestroy","ignoreScope"],"mappings":"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","file":"jipaiqi.js","sourceRoot":"../../../../../../assets/Script/ComponentScript/window","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        poker_num_1:cc.Label,\n        poker_num_2:cc.Label,\n        poker_num_3:cc.Label,\n        poker_num_4:cc.Label,\n        poker_num_5:cc.Label,\n        poker_num_6:cc.Label,\n        poker_num_7:cc.Label,\n        poker_num_8:cc.Label,\n        poker_num_9:cc.Label,\n        poker_num_10:cc.Label,\n        poker_num_11:cc.Label,\n        poker_num_12:cc.Label,\n        poker_num_13:cc.Label,\n        poker_num_14:cc.Label,\n        poker_num_15:cc.Label,\n\n        jipaiqi_num:cc.Label,\n        bg:cc.Node,\n        xiaopai:cc.Node,\n    },\n\n    onLoad:function(){\n        this.bg.active = false;\n        this.xiaopai.active = false;\n\n        ty.NotificationCenter.listen(ddz.EventType.OPEN_JIPAIJI, this.onOpenJipaiQi, this);\n        ty.NotificationCenter.listen(ddz.EventType.CLOSE_JIPAIJI, this.onCloseJipaiQi, this);\n        ty.NotificationCenter.listen(ddz.EventType.REMOVE_TABLE_ANI, this.onRemoveAni, this);\n        ty.NotificationCenter.listen(ddz.EventType.UPDATE_CARD_NOTE, this.updateCardNote, this);\n        ty.NotificationCenter.listen(ddz.EventType.UPDATE_JIPAIQI,this.updateGetReward,this);\n        this.jipaiqi_num.string = hall.ME.udataInfo.jiPaiQiCount;\n    },\n\n    updateGetReward:function(){\n        this.jipaiqi_num.string = hall.ME.udataInfo.jiPaiQiCount;\n    },\n\n    onOpenJipaiQi:function(data){\n        var cardNote = data.myCardNote;\n        if (cardNote.length && cardNote.length > 0) {\n            for (var i = 0; i < cardNote.length; i++){\n                this['poker_num_' + (i+1)].string = cardNote[i];\n            }\n        }else {\n            this.onCloseJipaiQi();\n            return;\n        }\n\n        this.jipaiqi_num.string = data.num;\n\n        if (!this.bg.active) {\n            this.bg.active = true;\n            this.xiaopai.active = true;\n            var ani = this.node.getComponent(cc.Animation);\n            var anim = ani.getAnimationState('jipaiqi');\n            anim.once(\"finished\", function () {\n\n            });\n            anim.play();\n            if (hall.sxAdManager) {\n                hall.sxAdManager.hide();\n            }\n\n        }\n\n        hall.adManager.canShowTableBanner = false;\n        hall.adManager.canShowTableTopBanner = false;\n        // hall.adManager.destroyBannerAd();\n        hall.adManager.destroyWidthBannerAd();\n    },\n\n    onCloseJipaiQi:function() {\n        var ani = this.node.getComponent(cc.Animation);\n        var anim = ani.getAnimationState('shouhui');\n        var that = this;\n        anim.once(\"finished\", function () {\n            that.bg.active = false;\n            that.xiaopai.active = false;\n            ty.NotificationCenter.trigger(ddz.EventType.OPEN_DIVERSION);\n        });\n        anim.play();\n    },\n\n    updateCardNote:function(data){\n        if (data.length && data.length > 0) {\n            for (var i = 0; i < data.length; i++){\n                if (this['poker_num_' + (i+1)]) {\n                    this['poker_num_' + (i+1)].string = data[i];\n                }\n            }\n        }\n    },\n\n    onClickButton:function(){\n        ddz.isClickJiPaiQi = true;\n        ty.BiLog.clickStat(ty.UserInfo.clickStatEventType.clickStatEventTypeButtonClick,\n            [\"jipaiqi\",\"click\"]);\n        if (ddz.gameModel.firstUseJiPaiQiPoint > 0){// 首次得记牌器\n            ddz.gameModel.shareToGetreward(ddz.Share.SharePointType.firstUseJiPaiQi);\n        }else {\n            ty.NotificationCenter.trigger(ddz.EventType.USE_NEW_CARD_NOTE);\n        }\n\n        // ty.NotificationCenter.trigger(ddz.EventType.USE_NEW_CARD_NOTE);\n    },\n\n    onRemoveAni:function(){\n        var ani = this.node.getComponent(cc.Animation);\n        ani.stop();\n    },\n\n    onDestroy:function () {\n        ty.NotificationCenter.ignoreScope(this);\n    }\n});\n"]}