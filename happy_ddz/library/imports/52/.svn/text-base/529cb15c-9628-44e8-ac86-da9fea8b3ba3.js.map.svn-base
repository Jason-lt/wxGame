{"version":3,"sources":["../../../../../../assets/Script/ComponentScript/Scenes/assets/Script/ComponentScript/Scenes/SeceneTest.js"],"names":["cc","Class","extends","Component","properties","rankSprite","Sprite","onLoad","openDataContext","ddz","GlobalFuncs","getOpenData","sharedCanvas","canvas","width","height","postMessage","method","pageIndex","main","texture","Texture2D","initWithElement","handleLoadedTexture","spriteFrame","SpriteFrame","ty","Timer","setTimer","onDestroy","NotificationCenter","ignoreScope"],"mappings":";;;;;;AAAA;;;;AAIAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,oBAAaL,GAAGM;AADR,KAHP;;AAOLC,YAAQ,kBAAW;;AAEf,YAAIC,kBAAkBC,IAAIC,WAAJ,CAAgBC,WAAhB,EAAtB;AACA,YAAIC,eAAeJ,gBAAgBK,MAAnC;AACAD,qBAAaE,KAAb,GAAsB,GAAtB;AACAF,qBAAaG,MAAb,GAAsB,IAAtB;;AAEA,YAAG,CAACP,eAAJ,EAAoB;AAChB;AACH;;AAED;AACAA,wBAAgBQ,WAAhB,CAA4B;AACxBC,oBAAO,eADiB;AAExBC,uBAAW;AAFa,SAA5B;;AAKA,YAAIC,OAAO,SAAPA,IAAO,GAAY;AACnB,gBAAIC,UAAU,IAAIpB,GAAGqB,SAAP,EAAd;AACAD,oBAAQE,eAAR,CAAwBV,YAAxB;AACAQ,oBAAQG,mBAAR;;AAEA,gBAAIC,cAAc,IAAIxB,GAAGyB,WAAP,CAAmBL,OAAnB,CAAlB;AACA,iBAAKf,UAAL,CAAgBmB,WAAhB,GAA8BA,WAA9B;AACH,SAPD;;AASA;;AAEAE,WAAGC,KAAH,CAASC,QAAT,CAAkB,IAAlB,EAAwBT,IAAxB,EAA8B,IAAE,EAAhC;AAEH,KArCI;AAsCLU,eAAY,qBAAY;AACpBH,WAAGI,kBAAH,CAAsBC,WAAtB,CAAkC,IAAlC;AACH;;AAED;AACA;AACA;;AAEA;AA9CK,CAAT","file":"SeceneTest.js","sourceRoot":"../../../../../../assets/Script/ComponentScript/Scenes","sourcesContent":["/**\n * Created by xujing on 2018/3/28.\n */\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        rankSprite : cc.Sprite,\n    },\n\n    onLoad :function() {\n\n        var openDataContext = ddz.GlobalFuncs.getOpenData();\n        var sharedCanvas = openDataContext.canvas;\n        sharedCanvas.width  = 512;\n        sharedCanvas.height = 1024;\n\n        if(!openDataContext){\n            return;\n        }\n\n        //发送消息通知开放数据域，生成sharedCanvas\n        openDataContext.postMessage({\n            method:'showGroupRank',\n            pageIndex: 1\n        });\n\n        var main = function () {\n            var texture = new cc.Texture2D();\n            texture.initWithElement(sharedCanvas);\n            texture.handleLoadedTexture();\n\n            var spriteFrame = new cc.SpriteFrame(texture);\n            this.rankSprite.spriteFrame = spriteFrame;\n        };\n\n        // main();\n\n        ty.Timer.setTimer(this, main, 1/60);\n\n    },\n    onDestroy : function () {\n        ty.NotificationCenter.ignoreScope(this);\n    },\n\n    // start () {\n    //\n    // },\n\n    // update (dt) {},\n});\n"]}