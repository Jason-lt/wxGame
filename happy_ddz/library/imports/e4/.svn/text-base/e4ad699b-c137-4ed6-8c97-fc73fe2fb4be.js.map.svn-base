{"version":3,"sources":["../../../../../../assets/Script/ComponentScript/window/assets/Script/ComponentScript/window/ddz_fail.js"],"names":["cc","Class","extends","Component","ctor","_curGuangQia","properties","resultTitle","default","type","Node","buttons","numberlabel","RichText","noticelabel","backButton","Button","restartButton","adResurgenceTitle","diamondResurgenceTitle","windowBtnText","titleS","count","isOnShare","conditionType","failCondition","toNext","requestCount","nowCount","adCount","adIds","nowAdId","videoIcon","topButton","getDiamondIcon","backAction","ddz","LOGD","AudioHelper","playEffect","EffectPath_mp3","back_button_click_sound","ty","NotificationCenter","trigger","EventType","REMOVE_TABLE_ANI","removeAni","hall","GlobalFuncs","popScene","onClickGetDiamondBtn","onOfficialAccountGuide","setDiamondCount","guangQiaNum","countNunber","ME","udataInfo","diamondCount","matchModel","getDiamondCountNeeded","node","active","string","window","getComponent","setTitle","isHaveDiamond","_config","gameModel","getCongratulationGetRewardJson","shareConfig","UserInfo","isInBSGS","bsgsCity","otherCity","shareNumber","ReadStringFromLocalStorage","Share","YESTERDAY_SHARE_NUMBER","fail","adManager","checkVideoAd","canPlay","checkShareReward","SharePointType","failWindw","failSix","comBtnList","isBringVersion","setButtonListWithButtons2","title","bottomType","callFunc","resurgenceWithAd","bind","resurgenceWithDiamond","left","restartQuizAction","over","overed","gameFlowOver","tipsString","gameFlowAction","gameFlow","LOGW","TCP","connectStatus","CONNECT_STATUS_OK","MsgBoxManager","showToast","button_click_sound","shareWithType","onShareType","clickStatShareTypeRevial","BiLog","clickStat","clickStatEventType","clickStatEventTypeButtonClick","matchName","adId","getRandomNumberBefore","length","bc","getBannerResurgenceConfigJson","showBannerResurgenceWindow","showRewardedVideo","seeAdGetJiPaiQi","jipaiqiAdId","isGetJiPaiQi","getDiamondToRevival","shareKeywordReplace","hadNumber","centerString","buttonText1","replaceKeyWordInString","setBottomTextWithButton","setTopTextWithButton","matchBackNextLevel","needCount","waitGetRevial","curCount","needCountR","i","shareToGetreward","sharePoint","firstFail","matchBack","removeMatchResultPanel","getReward","isWindow","seeVideoGetReward","clickStatShareTypeGetDiamondFailWindow","clickStatShareTypeGetDiamondFailSix","isGetReward","addTipsWindow","checkOldVersion","matchSignin","waitSignin","matchGiveUp","matchChallenge","onLoad","backButtonH","getBackButtonPositionY","y","playMusic","matchCondition","getFailCondition","checkFailCount","JSON","stringify","resurgenceCondition","repeatNumber","indexOf","btnScaleEffect","_toNext","listen","REMOVE_ALL_MATCH_RESULT_PANEL","shut","UPDATE_SHARE_STATE","playAnimationAfterShareWithType","UPDATE_BUTTON_TEXT","updateButtonText","REWARD_VIDEO_COMPLETE","finishShowRewardVideo","REWARD_VIDEO_COMPLETE_ERROR","errorShowRewardVideo","UPDATE_DIAMOND_NUMBER","updateDiamond","winSize","director","getWinSize","addApplet","gindex","getStageIndex","showResults","isShow","showAllWidthBannerAd","CREATE_TABLE_AD","throughCount","getSkipCustomsConfigJson","newCustoms","onSkipCustom","isEnded","getSharePoint","hideBottomBtn","firstUseJiPaiQiPoint","firstUseJiPaiQi","adGetJiPaiQi","parArr","parseInt","shareType","reultType","resultType","clickStatShareTypeGetDiamondFail","data","pointId","_shareType","titileS","getButtonTitle","leftCount","judgeweChatVersion","ani","Animation","play","preFabPath","comName","that","showPopWinByPreFab","preFabNode","parentScene","testArray","right","tips","setTitleContentAndButtons","setRightBtnText","onClickLeftButton","onClickRightButton","matchResultPanel","stopAllActions","destroy","_onPreDestroy","_super","removeFromParent","ani_2","stop","onDestroy","ignoreScope","destroyWidthBannerAd","AdManagerTYWX","getAdNodeByTag","hideAdNode"],"mappings":"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","file":"ddz_fail.js","sourceRoot":"../../../../../../assets/Script/ComponentScript/window","sourcesContent":["\n// var ddz_main = cc.instantiate(this.tipsWindow);\n// this.node.addChild(ddz_main);\n// var window = ddz_main.getComponent('ddz_fail');\n// window.setDiamondCount(\"五\",\"56\");\ncc.Class({\n    extends: cc.Component,\n    ctor:function () {\n        this._curGuangQia = 0;\n    },\n\n    properties: {\n        resultTitle : {\n            default : null,\n            type : cc.Node\n        },\n        buttons : {\n            default : null,\n            type : cc.Node\n        },\n        numberlabel :{\n            default : null,\n            type : cc.RichText\n        },\n        noticelabel :{\n            default : null,\n            type : cc.RichText\n        },\n        backButton : {\n            default : null,\n            type : cc.Button\n        },\n        restartButton : {\n            default : null,\n            type : cc.Button\n        },\n        adResurgenceTitle : \"\",\n        diamondResurgenceTitle : \"\",\n        windowBtnText : \"\",\n\n        titleS : \"使用\",\n        count : \"1\",\n\n        isOnShare : false,\n\n        conditionType : \"\",\n        failCondition : null,\n        toNext : false,\n        requestCount : 1,\n        nowCount : 0,\n        adCount : 1,\n\n        adIds : [],\n        nowAdId : '',\n        videoIcon:cc.Node,\n        topButton:cc.Button,\n\n        getDiamondIcon:cc.Node,\n\n    },\n    backAction : function () {\n        ddz.LOGD(null, \"backAction\");\n        ddz.AudioHelper.playEffect(ddz.EffectPath_mp3.back_button_click_sound, false);\n        ty.NotificationCenter.trigger(ddz.EventType.REMOVE_TABLE_ANI);\n        // var sceneName = 'Ddz';\n        // cc.director.loadScene(sceneName);\n\n        this.removeAni();\n\n        hall.GlobalFuncs.popScene();\n    },\n\n    onClickGetDiamondBtn:function(){\n        hall.GlobalFuncs.onOfficialAccountGuide(true);\n    },\n\n    setDiamondCount:function (guangQiaNum) {\n        ddz.LOGD(\"\",\"file = [ddz_fail] fun = [setDiamondCount] guangQiaNum = \" + guangQiaNum);\n        var countNunber = hall.ME.udataInfo.diamondCount;\n        var count = ddz.matchModel.getDiamondCountNeeded();\n\n        if (count > 0) {\n            this.noticelabel.node.active = true;\n            this.noticelabel.string = \"<color=#ffffff>使用 </c><img src='dda_button_diamond' height=34 width=42/>\" +\n                \"<color=#ffffff> \"+ count +\" 可继续挑战本关\\n已有</color><img src='dda_button_diamond' height=34 width=42/>\" +\n                \"<color=#ffffff> \"+ countNunber +\"</color>\";\n        }\n\n        this._curGuangQia = guangQiaNum;\n\n        var window = this.resultTitle.getComponent('ddz_resultTitle');\n        window.setTitle(this._curGuangQia, false);\n\n        // this.numberlabel.string =\"<color=#ffffff>已有 </c><img src='dda_button_diamond' height=17 width=21 /><size='36' color='#ffffff'> \"+countNunber+\" </color>\";\n        this.diamondResurgenceTitle = \"分享\";\n        this.windowBtnText = \"分享\";\n        var isHaveDiamond = false;\n        if (countNunber >= count){\n            this.diamondResurgenceTitle = \"<color=#ffffff>使用 </c><img src='dda_button_diamond' height=34 width=42/>\";\n            this.windowBtnText = \"<color=#ffffff>使用 </c><img src='dda_button_diamond' height=34 width=42/>\";\n            isHaveDiamond = true;\n        }else {\n\n            var _config = ddz.gameModel.getCongratulationGetRewardJson();\n            if (_config){\n                var shareConfig;\n                if (ty.UserInfo.isInBSGS) {\n                    shareConfig = _config.bsgsCity;\n                }else {\n                    shareConfig = _config.otherCity;\n                }\n            }\n\n            var shareNumber = hall.GlobalFuncs.ReadStringFromLocalStorage(ddz.Share.YESTERDAY_SHARE_NUMBER, 0);\n            if (shareConfig && shareConfig.fail != null && shareNumber >= shareConfig.fail){\n                this.titleS = \"获取\";\n\n                hall.adManager.checkVideoAd();\n                if (hall.adManager.canPlay) {\n                    this.diamondResurgenceTitle = \"看广告得钻石\";\n                    this.windowBtnText = \"看广告得钻石\";\n                }else {\n                    this.diamondResurgenceTitle = \"分享\";\n                    this.windowBtnText = \"分享\";\n                    ddz.gameModel.checkShareReward(ddz.Share.SharePointType.failWindw);\n                }\n            }else{\n                this.titleS = \"获取\";\n                this.diamondResurgenceTitle = \"分享\";\n                this.windowBtnText = \"分享\";\n                ddz.gameModel.checkShareReward(ddz.Share.SharePointType.failSix);\n                ddz.gameModel.checkShareReward(ddz.Share.SharePointType.failWindw);\n            }\n        }\n\n        this.restartButton.node.active = true;\n        this.numberlabel.node.active = false;\n\n        var comBtnList = this.buttons.getComponent('ddz_buttonList_2');\n        if(this.adResurgenceTitle && this.adResurgenceTitle != \"\"){\n            if (ddz.gameModel.isBringVersion) {\n                // comBtnList.hideBottomBtn(false);\n                comBtnList.setButtonListWithButtons2([{title :this.adResurgenceTitle,bottomType :0,callFunc : this.resurgenceWithAd.bind(this)}]);\n            }else {\n                hall.adManager.checkVideoAd();\n                if (this.conditionType == \"share\") {\n                    comBtnList.setButtonListWithButtons2([{title :this.adResurgenceTitle,bottomType :0,callFunc : this.resurgenceWithAd.bind(this)},\n                        {title :this.diamondResurgenceTitle,bottomType :1,callFunc : this.resurgenceWithDiamond.bind(this)}]);\n                }else {\n                    if (hall.adManager.canPlay) {\n                        comBtnList.setButtonListWithButtons2([{title :this.adResurgenceTitle,bottomType :0,callFunc : this.resurgenceWithAd.bind(this)},\n                            {title :this.diamondResurgenceTitle,bottomType :1,callFunc : this.resurgenceWithDiamond.bind(this)}]);\n                    }else {\n                        if (isHaveDiamond) {\n                            comBtnList.setButtonListWithButtons2([{title :this.diamondResurgenceTitle,bottomType :1,callFunc : this.resurgenceWithDiamond.bind(this)}]);\n                        }else {\n                            comBtnList.setButtonListWithButtons2([{title :'重新闯关',left:'ddz_table_again', bottomType :0,callFunc : this.restartQuizAction.bind(this)}]);\n                            this.restartButton.node.active = false;\n                        }\n                    }\n                }\n            }\n        }else {\n\n            hall.adManager.checkVideoAd();\n            if (hall.adManager.canPlay || isHaveDiamond) {\n                comBtnList.setButtonListWithButtons2([{title :this.diamondResurgenceTitle,bottomType :0,callFunc : this.resurgenceWithDiamond.bind(this)}]);\n            }else {\n                comBtnList.setButtonListWithButtons2([{title :'重新闯关',left:'ddz_table_again', bottomType :0,callFunc : this.restartQuizAction.bind(this)}]);\n                this.restartButton.node.active = false;\n            }\n        }\n    },\n    over:function (guangQiaNum) {\n        ddz.LOGD(\"\",\"file = [ddz_fail] fun = [over] guangQiaNum = \" + guangQiaNum);\n        this._curGuangQia = guangQiaNum;\n        var window = this.resultTitle.getComponent('ddz_resultTitle');\n        window.setTitle(this._curGuangQia, false);\n        var comBtnList = this.buttons.getComponent('ddz_buttonList_2');\n        if(this.adResurgenceTitle && this.adResurgenceTitle != \"\"){\n            comBtnList.setButtonListWithButtons2([{title :this.adResurgenceTitle,bottomType :0,callFunc : this.resurgenceWithAd.bind(this)}]);\n            this.restartButton.node.active = true;\n        }else {\n            comBtnList.setButtonListWithButtons2([{title :'重新闯关',left:'ddz_table_again', bottomType :0,callFunc : this.restartQuizAction.bind(this)}]);\n            this.restartButton.node.active = false;\n        }\n\n        this.overed = true;\n    },\n    gameFlowOver:function (guangQiaNum,tipsString) {\n        ddz.LOGD(\"\",\"file = [ddz_fail] fun = [gameFlowOver] guangQiaNum = \" + guangQiaNum);\n        this.noticelabel.node.active = true;\n        this.noticelabel.string = tipsString;\n        this._curGuangQia = guangQiaNum;\n        var window = this.resultTitle.getComponent('ddz_resultTitle');\n        window.setTitle(this._curGuangQia, false);\n        var comBtnList = this.buttons.getComponent('ddz_buttonList_2');\n        comBtnList.setButtonListWithButtons2([{title :'重闯本关',left:'ddz_table_again', bottomType :1,callFunc :this.gameFlowAction.bind(this)}]);\n        this.gameFlow = true;\n    },\n\n    // onTopButtonAction : function () {\n    //     ddz.LOGD(null, \"onTopButtonAction\");\n    //     if(this.gameFlow){\n    //         //TODO:流局的局数判断\n    //         ddz.matchModel.matchChallenge();\n    //         ddz.GlobalFuncs.removeMatchResultPanel(this);\n    //     } else{\n    //         if(this.adResurgenceTitle && this.adResurgenceTitle != \"\"){\n    //             this.resurgenceWithAd();\n    //         }else {\n    //             this.restartQuizAction();\n    //         }\n    //     }\n    // },\n    // onTempButtonAction : function () {\n    //     ddz.LOGD(null, \"onTempButtonAction\");\n    //     this.resurgenceWithDiamond();\n    // },\n    //看广告复活\n    resurgenceWithAd:function () {\n        hall.LOGW(\"====\",\"====resurgenceWithAd===\");\n        if (ty.TCP.connectStatus != ty.TCP.CONNECT_STATUS_OK){\n            hall.MsgBoxManager.showToast({title : \"正在登录，请稍候\"});\n            ddz.LOGD(null, \"TCP is not ok! Please wait!\");\n            return;\n        }\n        if(this.isOnShare){\n            return;\n        }\n        this.isOnShare = true;\n        ddz.AudioHelper.playEffect(ddz.EffectPath_mp3.button_click_sound, false);\n        if(this.conditionType == \"share\"){\n            ddz.Share.shareWithType(ddz.Share.onShareType.clickStatShareTypeRevial);\n        }else{\n            ty.BiLog.clickStat(ty.UserInfo.clickStatEventType.clickStatEventTypeButtonClick,\n                [\"watchVideo\",this.matchName]);\n            var adId = this.adIds[hall.GlobalFuncs.getRandomNumberBefore(this.adIds.length)];\n            // this.nowAdId = adId;\n\n            if (!hall.adManager.canPlay) {\n                // banner广告复活\n                var bc = ddz.gameModel.getBannerResurgenceConfigJson();\n                if (bc) {\n                    ddz.GlobalFuncs.showBannerResurgenceWindow();\n                    this.isOnShare = false;\n                }else {\n                    hall.adManager.showRewardedVideo(adId,this.matchName);\n                }\n            }else {\n                hall.adManager.showRewardedVideo(adId,this.matchName);\n            }\n        }\n    },\n\n    seeAdGetJiPaiQi:function(){\n        hall.LOGD(\"=====\",\"file = [ddz_fail] fun = [seeAdGetJiPaiQi] this.jipaiqiAdId = \" + this.jipaiqiAdId);\n        this.isGetJiPaiQi = true;\n        hall.adManager.showRewardedVideo(this.jipaiqiAdId,\"getJiPaiQi\");\n        ty.BiLog.clickStat(ty.UserInfo.clickStatEventType.clickStatEventTypeButtonClick,\n            [\"watchVideo\",\"ddzFailGetJiPaiQi\"]);\n    },\n\n    getDiamondToRevival : function () {\n        ddz.Share.shareKeywordReplace.hadNumber = this.nowCount;\n        //TODO: 替换文案\n        var centerString = \"\";\n        if (this.failCondition && this.failCondition.buttonText1) {\n            centerString = hall.GlobalFuncs.replaceKeyWordInString(this.failCondition.buttonText1);\n        }\n\n        this.adResurgenceTitle = centerString;\n        var comBtnList = this.buttons.getComponent('ddz_buttonList_2');\n        if(this.overed){\n            comBtnList.setBottomTextWithButton(this.adResurgenceTitle);\n        }else {\n            comBtnList.setTopTextWithButton(this.adResurgenceTitle);\n        }\n        hall.LOGW(\"=====\",\"===================\"+this.nowCount);\n        if(this.nowCount >= this.requestCount){\n            if (this.toNext){\n                ddz.matchModel.matchBackNextLevel();\n                // this.node.destroy();\n                return;\n            }\n            else{\n                var needCount = ddz.matchModel.getDiamondCountNeeded();\n                ddz.waitGetRevial = {\n                    type : 'waitRecive',\n                    curCount : 0,\n                    needCount : needCount\n                };\n            }\n            var needCountR = ddz.waitGetRevial.needCount;\n            //发送得钻石的消息\n            for (var i = 0; i < needCountR; i++){\n                ddz.gameModel.shareToGetreward(ddz.waitGetRevial.sharePoint || ddz.Share.SharePointType.firstFail);\n            }\n            // this.node.destroy();\n        }\n        // ddz.matchModel.matchBack(this.matchDes.roomId, this.matchDes.matchId);\n    },\n    //使用钻石复活or邀请得钻石\n    resurgenceWithDiamond : function () {\n        ddz.LOGD(null, \"resurgenceWithDiamond\");\n        ddz.AudioHelper.playEffect(ddz.EffectPath_mp3.button_click_sound, false);\n        var countNunber = hall.ME.udataInfo.diamondCount;\n        var count = ddz.matchModel.getDiamondCountNeeded();\n        if (countNunber >= count){\n            ddz.matchModel.matchBack();\n            ddz.GlobalFuncs.removeMatchResultPanel(this);\n        }\n        else{\n            this.getReward();\n            // if (this._curGuangQia && this._curGuangQia == 5){\n            //     ddz.Share.shareWithType(ddz.Share.onShareType.clickStatShareTypeGetDiamondFailSix);\n            // }else {\n            //     ddz.Share.shareWithType(ddz.Share.onShareType.clickStatShareTypeGetDiamondFail);\n            // }\n        }\n    },\n\n    //看广告的奖励还是分享\n    getReward:function(isWindow){\n        var _config = ddz.gameModel.getCongratulationGetRewardJson();\n        if (_config){\n            var shareConfig;\n            if (ty.UserInfo.isInBSGS) {\n                shareConfig = _config.bsgsCity;\n            }else {\n                shareConfig = _config.otherCity;\n            }\n        }\n\n        var shareNumber = hall.GlobalFuncs.ReadStringFromLocalStorage(ddz.Share.YESTERDAY_SHARE_NUMBER, 0);\n        if (shareConfig && shareConfig.fail != null && shareNumber >= shareConfig.fail){\n            hall.adManager.checkVideoAd();\n            if (hall.adManager.canPlay) {\n                this.seeVideoGetReward();\n            }else {\n                if (isWindow) {\n                    ddz.Share.shareWithType(ddz.Share.onShareType.clickStatShareTypeGetDiamondFailWindow);\n                }else {\n                    ddz.Share.shareWithType(ddz.Share.onShareType.clickStatShareTypeGetDiamondFailSix);\n                }\n\n            }\n        }else{\n            if (isWindow) {\n                ddz.Share.shareWithType(ddz.Share.onShareType.clickStatShareTypeGetDiamondFailWindow);\n            }else {\n                ddz.Share.shareWithType(ddz.Share.onShareType.clickStatShareTypeGetDiamondFailSix);\n            }\n        }\n    },\n\n    seeVideoGetReward:function(){\n        hall.LOGW(\"====\",\"====seeVideoGetReward===\");\n        this.isGetReward = true;\n\n        if (ty.TCP.connectStatus != ty.TCP.CONNECT_STATUS_OK){\n            hall.MsgBoxManager.showToast({title : \"正在登录，请稍候\"});\n            ddz.LOGD(null, \"TCP is not ok! Please wait!\");\n            return;\n        }\n        ty.BiLog.clickStat(ty.UserInfo.clickStatEventType.clickStatEventTypeButtonClick,\n            [\"seeVideoGetReward\",\"fail\"]);\n        // var adId = this.adIds[hall.GlobalFuncs.getRandomNumberBefore(this.adIds.length)];\n\n        hall.adManager.showRewardedVideo(\"\",\"getReward\");\n    },\n\n\n    //重新闯关\n    restartQuizAction : function () {\n        ddz.LOGD(null, \"restartQuizAction\");\n        ddz.AudioHelper.playEffect(ddz.EffectPath_mp3.button_click_sound, false);\n        // var maxIndex = ddz.matchModel.getCurDes().stages.length - 1;\n        if (this._curGuangQia > 0){\n            this.addTipsWindow();\n        }\n        else{\n            if (ddz.matchModel.checkOldVersion() && this._curGuangQia == 0){\n                //第一关就死掉,发送重新闯关\n                ddz.matchModel.matchSignin();\n            }\n            else{\n                //第一关不再特殊处理\n                // 重新闯关弹出二级菜单\n                ddz.matchModel.waitSignin = true;\n                ddz.matchModel.matchGiveUp();\n            }\n            ddz.GlobalFuncs.removeMatchResultPanel(this);\n        }\n    },\n    //流局重闯此关\n    gameFlowAction : function () {\n        ddz.matchModel.matchChallenge();\n        ddz.GlobalFuncs.removeMatchResultPanel(this);\n    },\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad:function () {\n        var backButtonH = ddz.GlobalFuncs.getBackButtonPositionY();\n        if (backButtonH){\n            this.backButton.node.y = backButtonH;\n        }\n\n        this.restartButton.node.active = false;\n        this.numberlabel.node.active = false;\n        this.noticelabel.node.active = false;\n        this.isOnShare = false;\n\n        ddz.AudioHelper.playMusic('/resources/sound/Failure.mp3', false);\n\n        var matchCondition = ddz.GlobalFuncs.getFailCondition(\"match\",ddz.GlobalFuncs.checkFailCount(\"match\"));\n        ddz.LOGD(\"file = [ddz_fail] fun = [onLoad] matchCondition = \" + JSON.stringify(matchCondition));\n        if(matchCondition){\n            // ddz.GlobalFuncs.showRevivalWindow(matchCondition,\"match\");\n            this.failCondition = matchCondition;\n            this.toNext = matchCondition.resurgenceCondition.toNext;\n            this.conditionType = matchCondition.resurgenceCondition.conditionType;\n            this.requestCount = matchCondition.resurgenceCondition.requestCount;\n            ddz.Share.shareKeywordReplace.repeatNumber = this.requestCount;\n            this.nowCount = 0;\n            ddz.Share.shareKeywordReplace.hadNumber = this.nowCount;\n            this.adIds = matchCondition.resurgenceCondition.adIds;\n\n            if (matchCondition.resurgenceCondition.requestCount > 1 &&  matchCondition.buttonText1.indexOf(\"hadNumber/repeatNumber\") ==-1){\n                matchCondition.buttonText1 += \"(hadNumber/repeatNumber)\";\n            }\n            var centerString = hall.GlobalFuncs.replaceKeyWordInString(matchCondition.buttonText1);\n            \n            this.adResurgenceTitle = centerString;\n\n            hall.GlobalFuncs.btnScaleEffect(this.topButton.node,1.13);\n            //TODO:观看不了广告\n            var bc = ddz.gameModel.getBannerResurgenceConfigJson();\n            if (bc){\n                hall.adManager.checkVideoAd();\n                if (!hall.adManager.canPlay) {\n                    if (centerString.indexOf(\"观看广告\") >=0) {\n                        var _toNext = matchCondition.resurgenceCondition.toNext;\n                        this.adResurgenceTitle = \"观看广告复活\";\n                        if (_toNext) {\n                            this.adResurgenceTitle = \"观看广告晋级\";\n                        }\n                    }\n                }\n            }\n        }\n        \n        ty.NotificationCenter.listen(ddz.EventType.REMOVE_ALL_MATCH_RESULT_PANEL, this.shut, this);\n        ty.NotificationCenter.listen(ddz.EventType.UPDATE_SHARE_STATE, this.playAnimationAfterShareWithType, this);\n        ty.NotificationCenter.listen(ty.EventType.UPDATE_BUTTON_TEXT, this.updateButtonText, this);\n        ty.NotificationCenter.listen(ddz.EventType.REWARD_VIDEO_COMPLETE,this.finishShowRewardVideo,this);\n        ty.NotificationCenter.listen(ddz.EventType.REWARD_VIDEO_COMPLETE_ERROR,this.errorShowRewardVideo,this);\n\n        ty.NotificationCenter.listen(ddz.EventType.UPDATE_DIAMOND_NUMBER,this.updateDiamond,this);\n        // ty.NotificationCenter.listen(ddz.EventType.UPDATE_JIPAIQI,this.updateGetReward,this);\n\n        var winSize = cc.director.getWinSize();\n\n        // if(ddz.matchModel.new_gift_reward){\n        //     var newGiftNode = cc.instantiate(this.newGiftPrefab);\n        //     newGiftNode.x = -winSize.width/2+80;\n        //     newGiftNode.y = 50;\n        //     this.node.addChild(newGiftNode);\n        // }\n\n        this.jipaiqiAdId = \"adunit-8bde7ac62d379503\";\n        this.isGetJiPaiQi = false;\n        // var ani = this.videoIcon.getComponent(cc.Animation);\n        // ani.play('jieidan');\n        //\n        // if (hall.ME.udataInfo.jiPaiQiCount >= 6) {\n        //     this.videoIcon.active = false;\n        // }\n\n        ddz.gameModel.checkShareReward(ddz.Share.SharePointType.addApplet);\n    },\n\n    updateDiamond:function(){\n        var gindex = ddz.matchModel.getStageIndex()-1;\n        this.setDiamondCount(gindex);\n    },\n\n\n    showResults:function(isShow){\n        this.node.active = isShow;\n\n        if (isShow){\n            hall.adManager.showAllWidthBannerAd('adunit-811cc4e234425489');\n            ty.NotificationCenter.trigger(ty.EventType.CREATE_TABLE_AD);\n        }\n\n        if (isShow && !ty.UserInfo.isInBSGS){\n            if (ddz.gameModel.throughCount == 0) {\n                var bc = ddz.gameModel.getSkipCustomsConfigJson();\n                if (bc && bc.newCustoms > 0) {\n                    hall.GlobalFuncs.onSkipCustom(1);\n                }\n            }\n        }\n    },\n\n    finishShowRewardVideo : function (isEnded) {\n        hall.LOGW(\"=====\",\"file = [ddz_fail] fun = [finishShowRewardVideo]\"+isEnded);\n\n        if (this.isGetReward) {\n            var sharePoint = hall.GlobalFuncs.getSharePoint(ddz.Share.onShareType.clickStatShareTypeGetDiamondFailSix);\n            ddz.gameModel.shareToGetreward(sharePoint);\n            // ddz.gameModel.saveRewardToBox(sharePoint);\n            var comBtnList = this.buttons.getComponent('ddz_buttonList_2');\n\n            hall.adManager.checkVideoAd();\n            if (!hall.adManager.canPlay) {\n                comBtnList.hideBottomBtn(false);\n            }\n            // comBtnList.hideBottomBtn(false);\n            this.isGetReward = false;\n        }else {\n            if (this.isGetJiPaiQi) {\n                if(isEnded){\n                    if (ddz.gameModel.firstUseJiPaiQiPoint > 0) {\n                        ddz.gameModel.shareToGetreward(ddz.Share.SharePointType.firstUseJiPaiQi);\n                    }else {\n                        ddz.gameModel.shareToGetreward(ddz.Share.SharePointType.adGetJiPaiQi);\n                    }\n                }\n                this.isGetJiPaiQi = false;\n            }else {\n                this.isOnShare = false;\n                if(isEnded){\n                    this.nowCount ++;\n                    this.getDiamondToRevival();\n                }\n            }\n        }\n    },\n\n    errorShowRewardVideo : function (parArr) {\n        hall.LOGW(\"=====\",\"file = [ddz_fail] fun = [errorShowRewardVideo]\");\n        this.isOnShare = false;\n        this.finishShowRewardVideo(parseInt(parArr[1]));\n    },\n    \n    // updateGetReward:function(){\n    //     if (hall.ME.udataInfo.jiPaiQiCount >= 6) {\n    //         this.videoIcon.active = false;\n    //     }\n    // },\n\n    playAnimationAfterShareWithType : function (shareType) {\n        this.isOnShare = false;\n        var reultType = ddz.Share.resultType;\n        if (shareType == ddz.Share.onShareType.clickStatShareTypeGetDiamondFailSix) {\n            ddz.gameModel.checkShareReward(ddz.Share.SharePointType.failSix);\n            switch (reultType) {\n                case 1:\n                    if (!ddz.gameModel.isBringVersion) {\n                        hall.MsgBoxManager.showToast({title : '请分享到微信群哦~'});\n                    }\n                    break;\n                case 2:\n                    if (!ddz.gameModel.isBringVersion) {\n                        hall.MsgBoxManager.showToast({title : '请不要频繁分享到一个群~'});\n                    }\n                    \n                    break;\n                case 3:\n                    break;\n                default:\n                    break;\n            }\n            ddz.Share.resultType = 0;\n        }else if(shareType == ddz.Share.onShareType.clickStatShareTypeRevial){\n            switch (reultType) {\n                case 1:\n                    // if(!this.failCondition.resurgenceCondition.holk ||  this.failCondition.resurgenceCondition.holk == 0){\n                    //     this.nowCount ++;\n                    //     this.getDiamondToRevival();\n                    //     return;\n                    // }else {\n                    // }\n                    if (!ddz.gameModel.isBringVersion) {\n                        hall.MsgBoxManager.showToast({title : '请分享到微信群哦~'});\n                    }\n                    break;\n                case 2:\n                    // if(!this.failCondition.resurgenceCondition.holk ||  this.failCondition.resurgenceCondition.holk == 0){\n                    //     this.nowCount ++;\n                    //     this.getDiamondToRevival();\n                    //     return;\n                    // }else {\n                    // }\n                    if (!ddz.gameModel.isBringVersion) {\n                        hall.MsgBoxManager.showToast({title : '请不要频繁分享到一个群~'});\n                    }\n                    \n                    break;\n                case 3:\n                    this.nowCount ++;\n                    break;\n                default:\n                    break;\n            }\n\n            ddz.Share.resultType = 0;\n            this.getDiamondToRevival();\n        }else if(shareType == ddz.Share.onShareType.clickStatShareTypeGetDiamondFail){\n            if (reultType > 0) {\n                hall.MsgBoxManager.showToast({title : '群友点入获得钻石，使用钻石可复活!'});\n            }\n            ddz.Share.resultType = 0;\n        }else if(shareType == ddz.Share.onShareType.clickStatShareTypeGetDiamondFailWindow){\n            ddz.gameModel.checkShareReward(ddz.Share.SharePointType.failWindw);\n            switch (reultType) {\n                case 1:\n                    if (!ddz.gameModel.isBringVersion) {\n                        hall.MsgBoxManager.showToast({title : '请分享到微信群哦~'});\n                    }\n                    break;\n                case 2:\n                    if (!ddz.gameModel.isBringVersion) {\n                        hall.MsgBoxManager.showToast({title : '请不要频繁分享到一个群~'});\n                    }\n\n                    break;\n                case 3:\n                    break;\n                default:\n                    break;\n            }\n            ddz.Share.resultType = 0;\n        }\n    },\n\n    updateButtonText:function(data){\n        if (data.pointId == ddz.Share.SharePointType.failSix){\n            var _config = ddz.gameModel.getCongratulationGetRewardJson();\n            if (_config){\n                var shareConfig;\n                if (ty.UserInfo.isInBSGS) {\n                    shareConfig = _config.bsgsCity;\n                }else {\n                    shareConfig = _config.otherCity;\n                }\n            }\n\n            var shareNumber = hall.GlobalFuncs.ReadStringFromLocalStorage(ddz.Share.YESTERDAY_SHARE_NUMBER, 0);\n            if (shareConfig && shareConfig.fail != null && shareNumber >= shareConfig.fail){\n                return\n            }\n            var _shareType = ddz.Share.onShareType.clickStatShareTypeGetDiamondFailSix;\n            var titileS = \"<color=#ffffff>\"+ hall.GlobalFuncs.getButtonTitle(_shareType) +\"</color>\";\n            if (!data.leftCount || data.leftCount <= 0) {\n                titileS = \"<color=#ffffff>\"+ hall.GlobalFuncs.getButtonTitle() +\"</color>\";\n            }else {\n                titileS = \"<color=#ffffff>\"+ hall.GlobalFuncs.getButtonTitle(_shareType) +\"</color>\";\n            }\n            this.diamondResurgenceTitle = titileS;\n            var comBtnList = this.buttons.getComponent('ddz_buttonList_2');\n            // if(this.adResurgenceTitle && this.adResurgenceTitle != \"\"){\n            //     comBtnList.setBottomTextWithButton(this.diamondResurgenceTitle);\n            // }else {\n            //     comBtnList.setBottomTextWithButton(this.diamondResurgenceTitle);\n            // }\n            comBtnList.setBottomTextWithButton(this.diamondResurgenceTitle);\n\n            if(!this.adResurgenceTitle || this.adResurgenceTitle == \"\"){\n                if (ddz.gameModel.isBringVersion) {\n                    comBtnList.hideBottomBtn(false);\n                }\n            }\n        }else if (data.pointId == ddz.Share.SharePointType.addApplet){\n            if (data.leftCount && data.leftCount > 0 && ddz.GlobalFuncs.judgeweChatVersion()){\n                this.getDiamondIcon.active = true;\n                var ani = this.getDiamondIcon.getComponent(cc.Animation);\n                ani.play('getdiamond_ani');\n            }else {\n                this.getDiamondIcon.active = false;\n            }\n        }else if (data.pointId == ddz.Share.SharePointType.failWindw){\n            var _config = ddz.gameModel.getCongratulationGetRewardJson();\n            if (_config){\n                var shareConfig;\n                if (ty.UserInfo.isInBSGS) {\n                    shareConfig = _config.bsgsCity;\n                }else {\n                    shareConfig = _config.otherCity;\n                }\n            }\n\n            var shareNumber = hall.GlobalFuncs.ReadStringFromLocalStorage(ddz.Share.YESTERDAY_SHARE_NUMBER, 0);\n            if (shareConfig && shareConfig.fail != null && shareNumber >= shareConfig.fail){\n                return\n            }\n            var _shareType = ddz.Share.onShareType.clickStatShareTypeGetDiamondFailWindow;\n            var titileS = \"<color=#ffffff>\"+ hall.GlobalFuncs.getButtonTitle(_shareType) +\"</color>\";\n            if (!data.leftCount || data.leftCount <= 0) {\n                titileS = \"<color=#ffffff>\"+ hall.GlobalFuncs.getButtonTitle() +\"</color>\";\n            }else {\n                titileS = \"<color=#ffffff>\"+ hall.GlobalFuncs.getButtonTitle(_shareType) +\"</color>\";\n            }\n            this.windowBtnText = titileS;\n        }\n    },\n\n    addTipsWindow : function () {\n        var preFabPath = \"prefabs/ddz_window_tips\";\n        var  comName = \"ddz_tipsWindow\";\n        var that = this;\n\n        var countNunber = hall.ME.udataInfo.diamondCount;\n        var count = ddz.matchModel.getDiamondCountNeeded();\n\n        hall.GlobalFuncs.showPopWinByPreFab(preFabPath, function (preFabNode) {\n            var window = preFabNode.getComponent(comName);\n            window.parentScene = that;\n            var testArray = [\n                {\n                    title :\"重闯第一关\",\n                    bottomType : 0\n                },\n                {\n                    title :that.titleS,\n                    right :\"dda_button_diamond\",\n                    bottomType :1\n                }\n            ];\n\n            var tips = \"<color=#1A6951>使用 </c><img src='dda_button_diamond_black' height=34 width=42/>\" +\n                \"<color=#1A6951> \"+ count +\" 可继续挑战本关\\n已有</color><img src='dda_button_diamond_black' height=34 width=42/>\" +\n                \"<color=#1A6951> \"+ countNunber +\"</color>\";\n\n            // window.setTitleContentAndButtons(\"提示\",\"距离领奖就差\"+loss+\"关了,确定重新闯关?\", testArray);\n            window.setTitleContentAndButtons(\"提示\",tips, testArray);\n            \n            window.setRightBtnText(that.windowBtnText);\n\n        });\n\n    },\n\n    onClickLeftButton:function () {\n        //重新闯关\n        ddz.matchModel.waitSignin = true;\n        ddz.matchModel.matchGiveUp();\n        ddz.GlobalFuncs.removeMatchResultPanel(this);\n    },\n\n    onClickRightButton:function () {\n        var countNunber = hall.ME.udataInfo.diamondCount;\n        var count = ddz.matchModel.getDiamondCountNeeded();\n        if (countNunber >= count){\n            //使用钻石\n            ddz.matchModel.matchBack();\n            ddz.GlobalFuncs.removeMatchResultPanel(this);\n        }else {\n            //邀请得钻石\n            // ddz.Share.shareWithType(ddz.Share.onShareType.clickStatShareTypeGetDiamondFailSix);\n            this.getReward(true);\n        }\n    },\n\n    shut:function () {\n        ddz.matchResultPanel = null;\n        this.topButton.node.stopAllActions();\n        this.removeAni();\n        this.node.destroy();\n    },\n    _onPreDestroy:function () {\n        this._super();\n        //删除动画\n        this.removeAni();\n    },\n    removeAni:function () {\n        if (this.resultTitle){\n            this.resultTitle.removeFromParent();\n        }\n        // var ani = this.videoIcon.getComponent(cc.Animation);\n        // ani.stop();\n        // this.videoIcon.removeFromParent();\n\n        var ani_2 = this.getDiamondIcon.getComponent(cc.Animation);\n        ani_2.stop();\n        this.getDiamondIcon.removeFromParent();\n    } ,\n    onDestroy:function () {\n        ty.NotificationCenter.ignoreScope(this);\n        hall.adManager.destroyWidthBannerAd();\n        if (hall.AdManagerTYWX && hall.AdManagerTYWX.getAdNodeByTag(\"tableAdNode\")) {\n            hall.AdManagerTYWX.getAdNodeByTag(\"tableAdNode\").hideAdNode();\n        }\n    }\n\n    // update (dt) {},\n});\n"]}