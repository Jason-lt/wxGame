{"version":3,"sources":["../../../../../../assets/Script/ComponentScript/window/assets/Script/ComponentScript/window/ddz_fail.js"],"names":["cc","Class","extends","Component","ctor","_curGuangQia","properties","resultTitle","default","type","Node","buttons","numberlabel","RichText","noticelabel","backButton","Button","restartButton","adResurgenceTitle","diamondResurgenceTitle","windowBtnText","titleS","count","isOnShare","conditionType","failCondition","toNext","requestCount","nowCount","adCount","adIds","nowAdId","topButton","getDiamondIcon","backAction","ddz","LOGD","AudioHelper","playEffect","EffectPath_mp3","back_button_click_sound","ty","NotificationCenter","trigger","EventType","REMOVE_TABLE_ANI","removeAni","hall","GlobalFuncs","popScene","onClickGetDiamondBtn","onOfficialAccountGuide","setDiamondCount","guangQiaNum","countNunber","ME","udataInfo","diamondCount","matchModel","getDiamondCountNeeded","node","active","string","window","getComponent","setTitle","isHaveDiamond","_config","gameModel","getCongratulationGetRewardJson","shareConfig","UserInfo","isInBSGS","bsgsCity","otherCity","shareNumber","ReadStringFromLocalStorage","Share","YESTERDAY_SHARE_NUMBER","fail","adManager","checkVideoAd","canPlay","checkShareReward","SharePointType","failWindw","failSix","comBtnList","isBringVersion","setButtonListWithButtons2","title","bottomType","callFunc","resurgenceWithAd","bind","resurgenceWithDiamond","left","restartQuizAction","over","overed","gameFlowOver","tipsString","gameFlowAction","gameFlow","LOGW","TCP","connectStatus","CONNECT_STATUS_OK","MsgBoxManager","showToast","button_click_sound","shareWithType","onShareType","clickStatShareTypeRevial","BiLog","clickStat","clickStatEventType","clickStatEventTypeButtonClick","matchName","adId","getRandomNumberBefore","length","showRewardedVideo","seeAdGetJiPaiQi","jipaiqiAdId","isGetJiPaiQi","getDiamondToRevival","shareKeywordReplace","hadNumber","centerString","buttonText1","replaceKeyWordInString","setBottomTextWithButton","setTopTextWithButton","matchBackNextLevel","needCount","waitGetRevial","curCount","needCountR","i","shareToGetreward","sharePoint","firstFail","matchBack","removeMatchResultPanel","getReward","isWindow","seeVideoGetReward","clickStatShareTypeGetDiamondFailWindow","clickStatShareTypeGetDiamondFailSix","isGetReward","addTipsWindow","checkOldVersion","matchSignin","waitSignin","matchGiveUp","matchChallenge","onLoad","backButtonH","getBackButtonPositionY","y","playMusic","matchCondition","getFailCondition","checkFailCount","JSON","stringify","resurgenceCondition","repeatNumber","indexOf","btnScaleEffect","bc","getBannerResurgenceConfigJson","_toNext","listen","REMOVE_ALL_MATCH_RESULT_PANEL","shut","UPDATE_SHARE_STATE","playAnimationAfterShareWithType","UPDATE_BUTTON_TEXT","updateButtonText","REWARD_VIDEO_COMPLETE","finishShowRewardVideo","REWARD_VIDEO_COMPLETE_ERROR","errorShowRewardVideo","UPDATE_DIAMOND_NUMBER","updateDiamond","addApplet","gindex","getStageIndex","showResults","isShow","showAllWidthBannerAd","CREATE_TABLE_AD","throughCount","getSkipCustomsConfigJson","newCustoms","onSkipCustom","isEnded","getSharePoint","hideBottomBtn","firstUseJiPaiQiPoint","firstUseJiPaiQi","adGetJiPaiQi","parArr","parseInt","shareType","reultType","resultType","clickStatShareTypeGetDiamondFail","data","pointId","_shareType","titileS","getButtonTitle","leftCount","judgeweChatVersion","ani","Animation","play","preFabPath","comName","that","showPopWinByPreFab","preFabNode","parentScene","testArray","right","tips","setTitleContentAndButtons","setRightBtnText","onClickLeftButton","onClickRightButton","matchResultPanel","stopAllActions","destroy","_onPreDestroy","_super","removeFromParent","ani_2","stop","onDestroy","ignoreScope","destroyWidthBannerAd","AdManagerTYWX","getAdNodeByTag","hideAdNode"],"mappings":"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","file":"ddz_fail.js","sourceRoot":"../../../../../../assets/Script/ComponentScript/window","sourcesContent":["\n// var ddz_main = cc.instantiate(this.tipsWindow);\n// this.node.addChild(ddz_main);\n// var window = ddz_main.getComponent('ddz_fail');\n// window.setDiamondCount(\"五\",\"56\");\ncc.Class({\n    extends: cc.Component,\n    ctor:function () {\n        this._curGuangQia = 0;\n    },\n\n    properties: {\n        resultTitle : {\n            default : null,\n            type : cc.Node\n        },\n        buttons : {\n            default : null,\n            type : cc.Node\n        },\n        numberlabel :{\n            default : null,\n            type : cc.RichText\n        },\n        noticelabel :{\n            default : null,\n            type : cc.RichText\n        },\n        backButton : {\n            default : null,\n            type : cc.Button\n        },\n        restartButton : {\n            default : null,\n            type : cc.Button\n        },\n        adResurgenceTitle : \"\",\n        diamondResurgenceTitle : \"\",\n        windowBtnText : \"\",\n\n        titleS : \"使用\",\n        count : \"1\",\n\n        isOnShare : false,\n\n        conditionType : \"\",\n        failCondition : null,\n        toNext : false,\n        requestCount : 1,\n        nowCount : 0,\n        adCount : 1,\n\n        adIds : [],\n        nowAdId : '',\n        \n        topButton:cc.Button,\n\n        getDiamondIcon:cc.Node,\n\n    },\n    backAction : function () {\n        ddz.LOGD(null, \"backAction\");\n        ddz.AudioHelper.playEffect(ddz.EffectPath_mp3.back_button_click_sound, false);\n        ty.NotificationCenter.trigger(ddz.EventType.REMOVE_TABLE_ANI);\n        // var sceneName = 'Ddz';\n        // cc.director.loadScene(sceneName);\n\n        this.removeAni();\n\n        hall.GlobalFuncs.popScene();\n    },\n\n    onClickGetDiamondBtn:function(){\n        hall.GlobalFuncs.onOfficialAccountGuide(true);\n    },\n\n    setDiamondCount:function (guangQiaNum) {\n        ddz.LOGD(\"\",\"file = [ddz_fail] fun = [setDiamondCount] guangQiaNum = \" + guangQiaNum);\n        var countNunber = hall.ME.udataInfo.diamondCount;\n        var count = ddz.matchModel.getDiamondCountNeeded();\n\n        if (count > 0) {\n            this.noticelabel.node.active = true;\n            this.noticelabel.string = \"<color=#ffffff>使用 </c><img src='dda_button_diamond' height=34 width=42/>\" +\n                \"<color=#ffffff> \"+ count +\" 可继续挑战本关\\n已有</color><img src='dda_button_diamond' height=34 width=42/>\" +\n                \"<color=#ffffff> \"+ countNunber +\"</color>\";\n        }\n\n        this._curGuangQia = guangQiaNum;\n\n        var window = this.resultTitle.getComponent('ddz_resultTitle');\n        window.setTitle(this._curGuangQia, false);\n\n        // this.numberlabel.string =\"<color=#ffffff>已有 </c><img src='dda_button_diamond' height=17 width=21 /><size='36' color='#ffffff'> \"+countNunber+\" </color>\";\n        this.diamondResurgenceTitle = \"分享\";\n        this.windowBtnText = \"分享\";\n        var isHaveDiamond = false;\n        if (countNunber >= count){\n            this.diamondResurgenceTitle = \"<color=#ffffff>使用 </c><img src='dda_button_diamond' height=34 width=42/>\";\n            this.windowBtnText = \"<color=#ffffff>使用 </c><img src='dda_button_diamond' height=34 width=42/>\";\n            isHaveDiamond = true;\n        }else {\n\n            var _config = ddz.gameModel.getCongratulationGetRewardJson();\n            if (_config){\n                var shareConfig;\n                if (ty.UserInfo.isInBSGS) {\n                    shareConfig = _config.bsgsCity;\n                }else {\n                    shareConfig = _config.otherCity;\n                }\n            }\n\n            var shareNumber = hall.GlobalFuncs.ReadStringFromLocalStorage(ddz.Share.YESTERDAY_SHARE_NUMBER, 0);\n            if (shareConfig && shareConfig.fail != null && shareNumber >= shareConfig.fail){\n                this.titleS = \"获取\";\n\n                hall.adManager.checkVideoAd();\n                if (hall.adManager.canPlay) {\n                    this.diamondResurgenceTitle = \"看广告得钻石\";\n                    this.windowBtnText = \"看广告得钻石\";\n                }else {\n                    this.diamondResurgenceTitle = \"分享\";\n                    this.windowBtnText = \"分享\";\n                    ddz.gameModel.checkShareReward(ddz.Share.SharePointType.failWindw);\n                }\n            }else{\n                this.titleS = \"获取\";\n                this.diamondResurgenceTitle = \"分享\";\n                this.windowBtnText = \"分享\";\n                ddz.gameModel.checkShareReward(ddz.Share.SharePointType.failSix);\n                ddz.gameModel.checkShareReward(ddz.Share.SharePointType.failWindw);\n            }\n        }\n\n        this.restartButton.node.active = true;\n        this.numberlabel.node.active = false;\n\n        var comBtnList = this.buttons.getComponent('ddz_buttonList_2');\n        if(this.adResurgenceTitle && this.adResurgenceTitle != \"\"){\n            if (ddz.gameModel.isBringVersion) {\n                // comBtnList.hideBottomBtn(false);\n                comBtnList.setButtonListWithButtons2([{title :this.adResurgenceTitle,bottomType :0,callFunc : this.resurgenceWithAd.bind(this)}]);\n            }else {\n                hall.adManager.checkVideoAd();\n                if (this.conditionType == \"share\") {\n                    comBtnList.setButtonListWithButtons2([{title :this.adResurgenceTitle,bottomType :0,callFunc : this.resurgenceWithAd.bind(this)},\n                        {title :this.diamondResurgenceTitle,bottomType :1,callFunc : this.resurgenceWithDiamond.bind(this)}]);\n                }else {\n                    if (hall.adManager.canPlay) {\n                        comBtnList.setButtonListWithButtons2([{title :this.adResurgenceTitle,bottomType :0,callFunc : this.resurgenceWithAd.bind(this)},\n                            {title :this.diamondResurgenceTitle,bottomType :1,callFunc : this.resurgenceWithDiamond.bind(this)}]);\n                    }else {\n                        if (isHaveDiamond) {\n                            comBtnList.setButtonListWithButtons2([{title :this.diamondResurgenceTitle,bottomType :1,callFunc : this.resurgenceWithDiamond.bind(this)}]);\n                        }else {\n                            comBtnList.setButtonListWithButtons2([{title :'重新闯关',left:'ddz_table_again', bottomType :0,callFunc : this.restartQuizAction.bind(this)}]);\n                            this.restartButton.node.active = false;\n                        }\n                    }\n                }\n            }\n        }else {\n\n            hall.adManager.checkVideoAd();\n            if (hall.adManager.canPlay || isHaveDiamond) {\n                comBtnList.setButtonListWithButtons2([{title :this.diamondResurgenceTitle,bottomType :0,callFunc : this.resurgenceWithDiamond.bind(this)}]);\n            }else {\n                comBtnList.setButtonListWithButtons2([{title :'重新闯关',left:'ddz_table_again', bottomType :0,callFunc : this.restartQuizAction.bind(this)}]);\n                this.restartButton.node.active = false;\n            }\n        }\n    },\n    over:function (guangQiaNum) {\n        ddz.LOGD(\"\",\"file = [ddz_fail] fun = [over] guangQiaNum = \" + guangQiaNum);\n        this._curGuangQia = guangQiaNum;\n        var window = this.resultTitle.getComponent('ddz_resultTitle');\n        window.setTitle(this._curGuangQia, false);\n        var comBtnList = this.buttons.getComponent('ddz_buttonList_2');\n        if(this.adResurgenceTitle && this.adResurgenceTitle != \"\"){\n            comBtnList.setButtonListWithButtons2([{title :this.adResurgenceTitle,bottomType :0,callFunc : this.resurgenceWithAd.bind(this)}]);\n            this.restartButton.node.active = true;\n        }else {\n            comBtnList.setButtonListWithButtons2([{title :'重新闯关',left:'ddz_table_again', bottomType :0,callFunc : this.restartQuizAction.bind(this)}]);\n            this.restartButton.node.active = false;\n        }\n\n        this.overed = true;\n    },\n    gameFlowOver:function (guangQiaNum,tipsString) {\n        ddz.LOGD(\"\",\"file = [ddz_fail] fun = [gameFlowOver] guangQiaNum = \" + guangQiaNum);\n        this.noticelabel.node.active = true;\n        this.noticelabel.string = tipsString;\n        this._curGuangQia = guangQiaNum;\n        var window = this.resultTitle.getComponent('ddz_resultTitle');\n        window.setTitle(this._curGuangQia, false);\n        var comBtnList = this.buttons.getComponent('ddz_buttonList_2');\n        comBtnList.setButtonListWithButtons2([{title :'重闯本关',left:'ddz_table_again', bottomType :1,callFunc :this.gameFlowAction.bind(this)}]);\n        this.gameFlow = true;\n    },\n\n    // onTopButtonAction : function () {\n    //     ddz.LOGD(null, \"onTopButtonAction\");\n    //     if(this.gameFlow){\n    //         //TODO:流局的局数判断\n    //         ddz.matchModel.matchChallenge();\n    //         ddz.GlobalFuncs.removeMatchResultPanel(this);\n    //     } else{\n    //         if(this.adResurgenceTitle && this.adResurgenceTitle != \"\"){\n    //             this.resurgenceWithAd();\n    //         }else {\n    //             this.restartQuizAction();\n    //         }\n    //     }\n    // },\n    // onTempButtonAction : function () {\n    //     ddz.LOGD(null, \"onTempButtonAction\");\n    //     this.resurgenceWithDiamond();\n    // },\n    //看广告复活\n    resurgenceWithAd:function () {\n        hall.LOGW(\"====\",\"====resurgenceWithAd===\");\n        if (ty.TCP.connectStatus != ty.TCP.CONNECT_STATUS_OK){\n            hall.MsgBoxManager.showToast({title : \"正在登录，请稍候\"});\n            ddz.LOGD(null, \"TCP is not ok! Please wait!\");\n            return;\n        }\n        if(this.isOnShare){\n            return;\n        }\n        this.isOnShare = true;\n        ddz.AudioHelper.playEffect(ddz.EffectPath_mp3.button_click_sound, false);\n        if(this.conditionType == \"share\"){\n            ddz.Share.shareWithType(ddz.Share.onShareType.clickStatShareTypeRevial);\n        }else{\n            ty.BiLog.clickStat(ty.UserInfo.clickStatEventType.clickStatEventTypeButtonClick,\n                [\"watchVideo\",this.matchName]);\n            var adId = this.adIds[hall.GlobalFuncs.getRandomNumberBefore(this.adIds.length)];\n            // this.nowAdId = adId;\n\n            // if (!hall.adManager.canPlay) {\n            //     // banner广告复活\n            //     var bc = ddz.gameModel.getBannerResurgenceConfigJson();\n            //     if (bc) {\n            //         ddz.GlobalFuncs.showBannerResurgenceWindow();\n            //         this.isOnShare = false;\n            //     }else {\n            //        \n            //     }\n            // }else {\n            //     hall.adManager.showRewardedVideo(adId,this.matchName);\n            // }\n\n            hall.adManager.showRewardedVideo(adId,this.matchName);\n        }\n    },\n\n    seeAdGetJiPaiQi:function(){\n        hall.LOGD(\"=====\",\"file = [ddz_fail] fun = [seeAdGetJiPaiQi] this.jipaiqiAdId = \" + this.jipaiqiAdId);\n        this.isGetJiPaiQi = true;\n        hall.adManager.showRewardedVideo(this.jipaiqiAdId,\"getJiPaiQi\");\n        ty.BiLog.clickStat(ty.UserInfo.clickStatEventType.clickStatEventTypeButtonClick,\n            [\"watchVideo\",\"ddzFailGetJiPaiQi\"]);\n    },\n\n    getDiamondToRevival : function () {\n        ddz.Share.shareKeywordReplace.hadNumber = this.nowCount;\n        //TODO: 替换文案\n        var centerString = \"\";\n        if (this.failCondition && this.failCondition.buttonText1) {\n            centerString = hall.GlobalFuncs.replaceKeyWordInString(this.failCondition.buttonText1);\n        }\n\n        this.adResurgenceTitle = centerString;\n        var comBtnList = this.buttons.getComponent('ddz_buttonList_2');\n        if(this.overed){\n            comBtnList.setBottomTextWithButton(this.adResurgenceTitle);\n        }else {\n            comBtnList.setTopTextWithButton(this.adResurgenceTitle);\n        }\n        hall.LOGW(\"=====\",\"===================\"+this.nowCount);\n        if(this.nowCount >= this.requestCount){\n            if (this.toNext){\n                ddz.matchModel.matchBackNextLevel();\n                // this.node.destroy();\n                return;\n            }\n            else{\n                var needCount = ddz.matchModel.getDiamondCountNeeded();\n                ddz.waitGetRevial = {\n                    type : 'waitRecive',\n                    curCount : 0,\n                    needCount : needCount\n                };\n            }\n            var needCountR = ddz.waitGetRevial.needCount;\n            //发送得钻石的消息\n            for (var i = 0; i < needCountR; i++){\n                ddz.gameModel.shareToGetreward(ddz.waitGetRevial.sharePoint || ddz.Share.SharePointType.firstFail);\n            }\n            // this.node.destroy();\n        }\n        // ddz.matchModel.matchBack(this.matchDes.roomId, this.matchDes.matchId);\n    },\n    //使用钻石复活or邀请得钻石\n    resurgenceWithDiamond : function () {\n        ddz.LOGD(null, \"resurgenceWithDiamond\");\n        ddz.AudioHelper.playEffect(ddz.EffectPath_mp3.button_click_sound, false);\n        var countNunber = hall.ME.udataInfo.diamondCount;\n        var count = ddz.matchModel.getDiamondCountNeeded();\n        if (countNunber >= count){\n            ddz.matchModel.matchBack();\n            ddz.GlobalFuncs.removeMatchResultPanel(this);\n        }\n        else{\n            this.getReward();\n            // if (this._curGuangQia && this._curGuangQia == 5){\n            //     ddz.Share.shareWithType(ddz.Share.onShareType.clickStatShareTypeGetDiamondFailSix);\n            // }else {\n            //     ddz.Share.shareWithType(ddz.Share.onShareType.clickStatShareTypeGetDiamondFail);\n            // }\n        }\n    },\n\n    //看广告的奖励还是分享\n    getReward:function(isWindow){\n        var _config = ddz.gameModel.getCongratulationGetRewardJson();\n        if (_config){\n            var shareConfig;\n            if (ty.UserInfo.isInBSGS) {\n                shareConfig = _config.bsgsCity;\n            }else {\n                shareConfig = _config.otherCity;\n            }\n        }\n\n        var shareNumber = hall.GlobalFuncs.ReadStringFromLocalStorage(ddz.Share.YESTERDAY_SHARE_NUMBER, 0);\n        if (shareConfig && shareConfig.fail != null && shareNumber >= shareConfig.fail){\n            hall.adManager.checkVideoAd();\n            if (hall.adManager.canPlay) {\n                this.seeVideoGetReward();\n            }else {\n                if (isWindow) {\n                    ddz.Share.shareWithType(ddz.Share.onShareType.clickStatShareTypeGetDiamondFailWindow);\n                }else {\n                    ddz.Share.shareWithType(ddz.Share.onShareType.clickStatShareTypeGetDiamondFailSix);\n                }\n\n            }\n        }else{\n            if (isWindow) {\n                ddz.Share.shareWithType(ddz.Share.onShareType.clickStatShareTypeGetDiamondFailWindow);\n            }else {\n                ddz.Share.shareWithType(ddz.Share.onShareType.clickStatShareTypeGetDiamondFailSix);\n            }\n        }\n    },\n\n    seeVideoGetReward:function(){\n        hall.LOGW(\"====\",\"====seeVideoGetReward===\");\n        this.isGetReward = true;\n\n        if (ty.TCP.connectStatus != ty.TCP.CONNECT_STATUS_OK){\n            hall.MsgBoxManager.showToast({title : \"正在登录，请稍候\"});\n            ddz.LOGD(null, \"TCP is not ok! Please wait!\");\n            return;\n        }\n        ty.BiLog.clickStat(ty.UserInfo.clickStatEventType.clickStatEventTypeButtonClick,\n            [\"seeVideoGetReward\",\"fail\"]);\n        // var adId = this.adIds[hall.GlobalFuncs.getRandomNumberBefore(this.adIds.length)];\n\n        hall.adManager.showRewardedVideo(\"\",\"getReward\");\n    },\n\n\n    //重新闯关\n    restartQuizAction : function () {\n        ddz.LOGD(null, \"restartQuizAction\");\n        ddz.AudioHelper.playEffect(ddz.EffectPath_mp3.button_click_sound, false);\n        // var maxIndex = ddz.matchModel.getCurDes().stages.length - 1;\n        if (this._curGuangQia > 0){\n            this.addTipsWindow();\n        }\n        else{\n            if (ddz.matchModel.checkOldVersion() && this._curGuangQia == 0){\n                //第一关就死掉,发送重新闯关\n                ddz.matchModel.matchSignin();\n            }\n            else{\n                //第一关不再特殊处理\n                // 重新闯关弹出二级菜单\n                ddz.matchModel.waitSignin = true;\n                ddz.matchModel.matchGiveUp();\n            }\n            ddz.GlobalFuncs.removeMatchResultPanel(this);\n        }\n    },\n    //流局重闯此关\n    gameFlowAction : function () {\n        ddz.matchModel.matchChallenge();\n        ddz.GlobalFuncs.removeMatchResultPanel(this);\n    },\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad:function () {\n        var backButtonH = ddz.GlobalFuncs.getBackButtonPositionY();\n        if (backButtonH){\n            this.backButton.node.y = backButtonH;\n        }\n\n        this.restartButton.node.active = false;\n        this.numberlabel.node.active = false;\n        this.noticelabel.node.active = false;\n        this.isOnShare = false;\n\n        ddz.AudioHelper.playMusic('/resources/sound/Failure.mp3', false);\n\n        var matchCondition = ddz.GlobalFuncs.getFailCondition(\"match\",ddz.GlobalFuncs.checkFailCount(\"match\"));\n        ddz.LOGD(\"file = [ddz_fail] fun = [onLoad] matchCondition = \" + JSON.stringify(matchCondition));\n        if(matchCondition){\n            // ddz.GlobalFuncs.showRevivalWindow(matchCondition,\"match\");\n            this.failCondition = matchCondition;\n            this.toNext = matchCondition.resurgenceCondition.toNext;\n            this.conditionType = matchCondition.resurgenceCondition.conditionType;\n            this.requestCount = matchCondition.resurgenceCondition.requestCount;\n            ddz.Share.shareKeywordReplace.repeatNumber = this.requestCount;\n            this.nowCount = 0;\n            ddz.Share.shareKeywordReplace.hadNumber = this.nowCount;\n            this.adIds = matchCondition.resurgenceCondition.adIds;\n\n            if (matchCondition.resurgenceCondition.requestCount > 1 &&  matchCondition.buttonText1.indexOf(\"hadNumber/repeatNumber\") ==-1){\n                matchCondition.buttonText1 += \"(hadNumber/repeatNumber)\";\n            }\n            var centerString = hall.GlobalFuncs.replaceKeyWordInString(matchCondition.buttonText1);\n            \n            this.adResurgenceTitle = centerString;\n\n            hall.GlobalFuncs.btnScaleEffect(this.topButton.node,1.13);\n            //TODO:观看不了广告\n            var bc = ddz.gameModel.getBannerResurgenceConfigJson();\n            if (bc){\n                hall.adManager.checkVideoAd();\n                if (!hall.adManager.canPlay) {\n                    if (centerString.indexOf(\"观看广告\") >=0) {\n                        var _toNext = matchCondition.resurgenceCondition.toNext;\n                        this.adResurgenceTitle = \"观看广告复活\";\n                        if (_toNext) {\n                            this.adResurgenceTitle = \"观看广告晋级\";\n                        }\n                    }\n                }\n            }\n        }\n        \n        ty.NotificationCenter.listen(ddz.EventType.REMOVE_ALL_MATCH_RESULT_PANEL, this.shut, this);\n        ty.NotificationCenter.listen(ddz.EventType.UPDATE_SHARE_STATE, this.playAnimationAfterShareWithType, this);\n        ty.NotificationCenter.listen(ty.EventType.UPDATE_BUTTON_TEXT, this.updateButtonText, this);\n        ty.NotificationCenter.listen(ddz.EventType.REWARD_VIDEO_COMPLETE,this.finishShowRewardVideo,this);\n        ty.NotificationCenter.listen(ddz.EventType.REWARD_VIDEO_COMPLETE_ERROR,this.errorShowRewardVideo,this);\n\n        ty.NotificationCenter.listen(ddz.EventType.UPDATE_DIAMOND_NUMBER,this.updateDiamond,this);\n        \n        this.jipaiqiAdId = \"adunit-8bde7ac62d379503\";\n        this.isGetJiPaiQi = false;\n\n        ddz.gameModel.checkShareReward(ddz.Share.SharePointType.addApplet);\n    },\n\n    updateDiamond:function(){\n        var gindex = ddz.matchModel.getStageIndex()-1;\n        this.setDiamondCount(gindex);\n    },\n\n\n    showResults:function(isShow){\n        this.node.active = isShow;\n\n        if (isShow){\n            hall.adManager.showAllWidthBannerAd('adunit-811cc4e234425489');\n            ty.NotificationCenter.trigger(ty.EventType.CREATE_TABLE_AD);\n        }\n\n        if (isShow && !ty.UserInfo.isInBSGS){\n            if (ddz.gameModel.throughCount == 0) {\n                var bc = ddz.gameModel.getSkipCustomsConfigJson();\n                if (bc && bc.newCustoms > 0) {\n                    hall.GlobalFuncs.onSkipCustom(1);\n                }\n            }\n        }\n    },\n\n    finishShowRewardVideo : function (isEnded) {\n        hall.LOGW(\"=====\",\"file = [ddz_fail] fun = [finishShowRewardVideo]\"+isEnded);\n\n        if (this.isGetReward) {\n            var sharePoint = hall.GlobalFuncs.getSharePoint(ddz.Share.onShareType.clickStatShareTypeGetDiamondFailSix);\n            ddz.gameModel.shareToGetreward(sharePoint);\n            // ddz.gameModel.saveRewardToBox(sharePoint);\n            var comBtnList = this.buttons.getComponent('ddz_buttonList_2');\n\n            hall.adManager.checkVideoAd();\n            if (!hall.adManager.canPlay) {\n                comBtnList.hideBottomBtn(false);\n            }\n            // comBtnList.hideBottomBtn(false);\n            this.isGetReward = false;\n        }else {\n            if (this.isGetJiPaiQi) {\n                if(isEnded){\n                    if (ddz.gameModel.firstUseJiPaiQiPoint > 0) {\n                        ddz.gameModel.shareToGetreward(ddz.Share.SharePointType.firstUseJiPaiQi);\n                    }else {\n                        ddz.gameModel.shareToGetreward(ddz.Share.SharePointType.adGetJiPaiQi);\n                    }\n                }\n                this.isGetJiPaiQi = false;\n            }else {\n                this.isOnShare = false;\n                if(isEnded){\n                    this.nowCount ++;\n                    this.getDiamondToRevival();\n                }\n            }\n        }\n    },\n\n    errorShowRewardVideo : function (parArr) {\n        hall.LOGW(\"=====\",\"file = [ddz_fail] fun = [errorShowRewardVideo]\");\n        this.isOnShare = false;\n        this.finishShowRewardVideo(parseInt(parArr[1]));\n    },\n\n    playAnimationAfterShareWithType : function (shareType) {\n        this.isOnShare = false;\n        var reultType = ddz.Share.resultType;\n        if (shareType == ddz.Share.onShareType.clickStatShareTypeGetDiamondFailSix) {\n            ddz.gameModel.checkShareReward(ddz.Share.SharePointType.failSix);\n            switch (reultType) {\n                case 1:\n                    if (!ddz.gameModel.isBringVersion) {\n                        hall.MsgBoxManager.showToast({title : '请分享到微信群哦~'});\n                    }\n                    break;\n                case 2:\n                    if (!ddz.gameModel.isBringVersion) {\n                        hall.MsgBoxManager.showToast({title : '请不要频繁分享到一个群~'});\n                    }\n                    \n                    break;\n                case 3:\n                    break;\n                default:\n                    break;\n            }\n            ddz.Share.resultType = 0;\n        }else if(shareType == ddz.Share.onShareType.clickStatShareTypeRevial){\n            switch (reultType) {\n                case 1:\n                    // if(!this.failCondition.resurgenceCondition.holk ||  this.failCondition.resurgenceCondition.holk == 0){\n                    //     this.nowCount ++;\n                    //     this.getDiamondToRevival();\n                    //     return;\n                    // }else {\n                    // }\n                    if (!ddz.gameModel.isBringVersion) {\n                        hall.MsgBoxManager.showToast({title : '请分享到微信群哦~'});\n                    }\n                    break;\n                case 2:\n                    // if(!this.failCondition.resurgenceCondition.holk ||  this.failCondition.resurgenceCondition.holk == 0){\n                    //     this.nowCount ++;\n                    //     this.getDiamondToRevival();\n                    //     return;\n                    // }else {\n                    // }\n                    if (!ddz.gameModel.isBringVersion) {\n                        hall.MsgBoxManager.showToast({title : '请不要频繁分享到一个群~'});\n                    }\n                    \n                    break;\n                case 3:\n                    this.nowCount ++;\n                    break;\n                default:\n                    break;\n            }\n\n            ddz.Share.resultType = 0;\n            this.getDiamondToRevival();\n        }else if(shareType == ddz.Share.onShareType.clickStatShareTypeGetDiamondFail){\n            if (reultType > 0) {\n                hall.MsgBoxManager.showToast({title : '群友点入获得钻石，使用钻石可复活!'});\n            }\n            ddz.Share.resultType = 0;\n        }else if(shareType == ddz.Share.onShareType.clickStatShareTypeGetDiamondFailWindow){\n            ddz.gameModel.checkShareReward(ddz.Share.SharePointType.failWindw);\n            switch (reultType) {\n                case 1:\n                    if (!ddz.gameModel.isBringVersion) {\n                        hall.MsgBoxManager.showToast({title : '请分享到微信群哦~'});\n                    }\n                    break;\n                case 2:\n                    if (!ddz.gameModel.isBringVersion) {\n                        hall.MsgBoxManager.showToast({title : '请不要频繁分享到一个群~'});\n                    }\n\n                    break;\n                case 3:\n                    break;\n                default:\n                    break;\n            }\n            ddz.Share.resultType = 0;\n        }\n    },\n\n    updateButtonText:function(data){\n        if (data.pointId == ddz.Share.SharePointType.failSix){\n            var _config = ddz.gameModel.getCongratulationGetRewardJson();\n            if (_config){\n                var shareConfig;\n                if (ty.UserInfo.isInBSGS) {\n                    shareConfig = _config.bsgsCity;\n                }else {\n                    shareConfig = _config.otherCity;\n                }\n            }\n\n            var shareNumber = hall.GlobalFuncs.ReadStringFromLocalStorage(ddz.Share.YESTERDAY_SHARE_NUMBER, 0);\n            if (shareConfig && shareConfig.fail != null && shareNumber >= shareConfig.fail){\n                return\n            }\n            var _shareType = ddz.Share.onShareType.clickStatShareTypeGetDiamondFailSix;\n            var titileS = \"<color=#ffffff>\"+ hall.GlobalFuncs.getButtonTitle(_shareType) +\"</color>\";\n            if (!data.leftCount || data.leftCount <= 0) {\n                titileS = \"<color=#ffffff>\"+ hall.GlobalFuncs.getButtonTitle() +\"</color>\";\n            }else {\n                titileS = \"<color=#ffffff>\"+ hall.GlobalFuncs.getButtonTitle(_shareType) +\"</color>\";\n            }\n            this.diamondResurgenceTitle = titileS;\n            var comBtnList = this.buttons.getComponent('ddz_buttonList_2');\n            // if(this.adResurgenceTitle && this.adResurgenceTitle != \"\"){\n            //     comBtnList.setBottomTextWithButton(this.diamondResurgenceTitle);\n            // }else {\n            //     comBtnList.setBottomTextWithButton(this.diamondResurgenceTitle);\n            // }\n            comBtnList.setBottomTextWithButton(this.diamondResurgenceTitle);\n\n            if(!this.adResurgenceTitle || this.adResurgenceTitle == \"\"){\n                if (ddz.gameModel.isBringVersion) {\n                    comBtnList.hideBottomBtn(false);\n                }\n            }\n        }else if (data.pointId == ddz.Share.SharePointType.addApplet){\n            if (data.leftCount && data.leftCount > 0 && ddz.GlobalFuncs.judgeweChatVersion()){\n                this.getDiamondIcon.active = true;\n                var ani = this.getDiamondIcon.getComponent(cc.Animation);\n                ani.play('getdiamond_ani');\n            }else {\n                this.getDiamondIcon.active = false;\n            }\n        }else if (data.pointId == ddz.Share.SharePointType.failWindw){\n            var _config = ddz.gameModel.getCongratulationGetRewardJson();\n            if (_config){\n                var shareConfig;\n                if (ty.UserInfo.isInBSGS) {\n                    shareConfig = _config.bsgsCity;\n                }else {\n                    shareConfig = _config.otherCity;\n                }\n            }\n\n            var shareNumber = hall.GlobalFuncs.ReadStringFromLocalStorage(ddz.Share.YESTERDAY_SHARE_NUMBER, 0);\n            if (shareConfig && shareConfig.fail != null && shareNumber >= shareConfig.fail){\n                return\n            }\n            var _shareType = ddz.Share.onShareType.clickStatShareTypeGetDiamondFailWindow;\n            var titileS = \"<color=#ffffff>\"+ hall.GlobalFuncs.getButtonTitle(_shareType) +\"</color>\";\n            if (!data.leftCount || data.leftCount <= 0) {\n                titileS = \"<color=#ffffff>\"+ hall.GlobalFuncs.getButtonTitle() +\"</color>\";\n            }else {\n                titileS = \"<color=#ffffff>\"+ hall.GlobalFuncs.getButtonTitle(_shareType) +\"</color>\";\n            }\n            this.windowBtnText = titileS;\n        }\n    },\n\n    addTipsWindow : function () {\n        var preFabPath = \"prefabs/ddz_window_tips\";\n        var  comName = \"ddz_tipsWindow\";\n        var that = this;\n\n        var countNunber = hall.ME.udataInfo.diamondCount;\n        var count = ddz.matchModel.getDiamondCountNeeded();\n\n        hall.GlobalFuncs.showPopWinByPreFab(preFabPath, function (preFabNode) {\n            var window = preFabNode.getComponent(comName);\n            window.parentScene = that;\n            var testArray = [\n                {\n                    title :\"重闯第一关\",\n                    bottomType : 0\n                },\n                {\n                    title :that.titleS,\n                    right :\"dda_button_diamond\",\n                    bottomType :1\n                }\n            ];\n\n            var tips = \"<color=#1A6951>使用 </c><img src='dda_button_diamond_black' height=34 width=42/>\" +\n                \"<color=#1A6951> \"+ count +\" 可继续挑战本关\\n已有</color><img src='dda_button_diamond_black' height=34 width=42/>\" +\n                \"<color=#1A6951> \"+ countNunber +\"</color>\";\n\n            // window.setTitleContentAndButtons(\"提示\",\"距离领奖就差\"+loss+\"关了,确定重新闯关?\", testArray);\n            window.setTitleContentAndButtons(\"提示\",tips, testArray);\n            \n            window.setRightBtnText(that.windowBtnText);\n\n        });\n\n    },\n\n    onClickLeftButton:function () {\n        //重新闯关\n        ddz.matchModel.waitSignin = true;\n        ddz.matchModel.matchGiveUp();\n        ddz.GlobalFuncs.removeMatchResultPanel(this);\n    },\n\n    onClickRightButton:function () {\n        var countNunber = hall.ME.udataInfo.diamondCount;\n        var count = ddz.matchModel.getDiamondCountNeeded();\n        if (countNunber >= count){\n            //使用钻石\n            ddz.matchModel.matchBack();\n            ddz.GlobalFuncs.removeMatchResultPanel(this);\n        }else {\n            //邀请得钻石\n            // ddz.Share.shareWithType(ddz.Share.onShareType.clickStatShareTypeGetDiamondFailSix);\n            this.getReward(true);\n        }\n    },\n\n    shut:function () {\n        ddz.matchResultPanel = null;\n        this.topButton.node.stopAllActions();\n        this.removeAni();\n        this.node.destroy();\n    },\n    _onPreDestroy:function () {\n        this._super();\n        //删除动画\n        this.removeAni();\n    },\n    removeAni:function () {\n        if (this.resultTitle){\n            this.resultTitle.removeFromParent();\n        }\n\n        var ani_2 = this.getDiamondIcon.getComponent(cc.Animation);\n        ani_2.stop();\n        this.getDiamondIcon.removeFromParent();\n    } ,\n    onDestroy:function () {\n        ty.NotificationCenter.ignoreScope(this);\n        hall.adManager.destroyWidthBannerAd();\n        if (hall.AdManagerTYWX && hall.AdManagerTYWX.getAdNodeByTag(\"tableAdNode\")) {\n            hall.AdManagerTYWX.getAdNodeByTag(\"tableAdNode\").hideAdNode();\n        }\n    }\n\n    // update (dt) {},\n});\n"]}