{"version":3,"sources":["../../../../../../assets/Script/ComponentScript/window/assets/Script/ComponentScript/window/ddz_main.js"],"names":["cc","Class","extends","Component","ctor","_counter","_TAG","properties","leftSeconds","winnerCount","rewardDes","titleLabel","default","type","Label","detailLabel","RichText","timeLabel","detailButton","Button","countLabel","startButtonList","Node","mainBtnBar","topButton","buttom","giftBagBtnNode","noticeNode","inviteeList","topButtonNode","messageNode","giftBagNode","notifyList","parentScene","serializable","notifyNode","startLabel","ledNode","ledBg","Sprite","ledRichText","haveReward","menuColumn","redDotSpr","count","money","onLoad","couponCount","hall","ME","udataInfo","m_couponCount","GlobalFuncs","ReadStringFromLocalStorage","ddz","matchModel","MATCH_REWARD_DES","setTitleString","ty","NotificationCenter","listen","EventType","UPDATE_MATCH_INFO","onUpDateMatchInfo","getMatchDes","UPDATE_MATCH_DES","updateMatchInfo","updateNotifyInfo","UPDATE_COMMON_CONFIG","CHANE_COUNT_LABEL","changeCountLabel","REMOVE_DDZ_MAIN_ANI","onRemoveAni","CMD_LED_RECEIVE","playLed","MATCH_GIVE_UP","onMatchGiveUp","UPDATE_BUTTON_TEXT","updateButtonText","IS_HAVE_REWARD","isHaveReward","node","x","width","active","backButtonH","getBackButtonPositionY","y","_height","getMainInterY","updateGiftBagCount","updateBtnState","UPDATE_REWARD_COUNT","updateMessageCount","bind","UPDATE_GIFTBAG_COUNT","UPDATE_BTN_STATE","gameModel","getOpenBox","checkShareReward","Share","SharePointType","getDayFirstLogin","getDayInviteReward","changeEnterBtnState","result","model","gameWorld","m_ledBeWork","_ledList","m_ledList","index","_moveTime","that","_playLed","data","length","string","color","text","size","getContentSize","height","showMove","moveTo","p","hideMove","delay","delayTime","stopAllActions","runAction","sequence","callFunc","m_ledCapacity","m_ledLast","loadingAction","adManager","hideAd","AdManagerTYWX","getAdNodeByTag","hideAdNode","sxAdManager","hide","unLoadingAction","info","getCurUpdateInfo","lotteryInfo","num","desc","shareKeywordReplace","bonusTotal","timeStr","formatTime","setDetailInformation","setInLocalStorage","val","isOncePlay","ONCEPLAYGAME","isNewUser","matchDes","getCurDes","histories","todayM","curLottery","curWinnerCount","savaInfo","saveInfo","matchId","record","stageIndex","_stageIndex","titleString","LOGD","fontSize","peopel","timeS","updataTime","onClickCenterButton","event","shareType","onShareType","clickStatShareTypeMainTips","shareWithType","update","dt","matchUpdate","onDestroy","ignoreScope","updateRewardMassage","resultMap","showList","i","rewardState","bindRewardCount","push","tips","ReadValueFromLocalStorage","SHOW_LOGIN_REWARD","tipsList","split","reward","openMenuColumn","debugMode","TCP","connectStatus","CONNECT_STATUS_OK","MsgBoxManager","showToast","title","com","getComponent","updateCeLaMunuInfo","notifyInfo","autoShowCount","indexStr","UPDATE_NOTIFY_INFO","JSON","stringify","indexList","parse","notify","indexOf","autoShow","showPopWinByPreFab","preFabNode","window","setDetailTypeWithInfoMap","onNoticeButton","_count","getInfo","gongZhonghaoCardPoint","onBubbleTips","pointId","leftCount","gongZhonghaoMenuPoint","shareToGetreward","rewards","_rewards","removeAllChildren"],"mappings":"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","file":"ddz_main.js","sourceRoot":"../../../../../../assets/Script/ComponentScript/window","sourcesContent":["\n\n\n// var ddz_main = cc.instantiate(this.tipsWindow);\n// this.node.addChild(ddz_main);\n// var window = ddz_main.getComponent('ddz_main');\n// window.setTitleString(\"闯八关平分100万奖金\");\n// window.setDetailInformation(\"12345678\",\"12:54:51\");\n\ncc.Class({\n    extends: cc.Component,\n    ctor:function () {\n        this._counter = 0;\n        this._TAG = \"ddz_main.js\";\n    },\n\n    properties: {\n\n        leftSeconds:0,\n        winnerCount : 0,\n        rewardDes : \"\",\n        titleLabel: {\n            default : null,\n            type : cc.Label\n        },\n        detailLabel : {\n            default : null,\n            type : cc.RichText\n        },\n        timeLabel: {\n            default : null,\n            type : cc.Label\n        },\n        detailButton : {\n            default : null,\n            type : cc.Button\n        },\n        countLabel: {\n            default : null,\n            type : cc.RichText\n        },\n        startButtonList : {\n            default : null,\n            type : cc.Node\n        },\n        \n\n        mainBtnBar:cc.Node,\n\n        topButton : {\n            default : null,\n            type : cc.Button\n        },\n        \n        buttom : {\n            default : null,\n            type : cc.Node\n        },\n\n        giftBagBtnNode:cc.Node,\n\n        noticeNode: {\n            default : null,\n            type : cc.Node\n        },\n\n        // noticeLabel: {\n        //     default : null,\n        //     type : cc.Label\n        // },\n\n        inviteeList :[],\n\n        topButtonNode : {\n            default : null,\n            type : cc.Node\n        },\n        messageNode : {\n            default : null,\n            type : cc.Node\n        },\n\n        giftBagNode : {\n            default : null,\n            type : cc.Node\n        },\n\n        notifyList :[],\n\n        parentScene: {\n            default: null,\n            serializable: false\n        },\n\n        notifyNode : {\n            default : null,\n            type : cc.Node\n        },\n\n        startLabel : {\n            default : null,\n            type : cc.Label\n        },\n\n        ledNode : {\n            default : null,\n            type : cc.Node\n        },\n\n        ledBg : {\n            default : null,\n            type : cc.Sprite\n        },\n\n        ledRichText : {\n            default : null,\n            type : cc.RichText\n        },\n\n        haveReward:cc.Node,\n\n        menuColumn:cc.Node,\n\n        redDotSpr:cc.Node,\n\n\n        count : \"\",\n        money : \"\"\n    },\n    onLoad :function () {\n        var couponCount = hall.ME.udataInfo.m_couponCount;\n        // hall.MsgFactory.getBagInfo();\n        // this.addTipsWindowWith(\"4\",\"10\",\"5\");\n        this.rewardDes = hall.GlobalFuncs.ReadStringFromLocalStorage(ddz.matchModel.MATCH_REWARD_DES, \"闯七关瓜分100万红包\");\n        this.setTitleString(\"\" + this.rewardDes);\n        \n        ty.NotificationCenter.listen(ddz.EventType.UPDATE_MATCH_INFO, this.onUpDateMatchInfo, this);\n\n        ddz.matchModel.getMatchDes();\n        ty.NotificationCenter.listen(ddz.EventType.UPDATE_MATCH_DES, this.updateMatchInfo, this);\n\n        this.updateNotifyInfo();\n        ty.NotificationCenter.listen(ddz.EventType.UPDATE_COMMON_CONFIG, this.updateNotifyInfo, this);\n\n        ty.NotificationCenter.listen(ddz.EventType.CHANE_COUNT_LABEL, this.changeCountLabel, this);\n        ty.NotificationCenter.listen(ddz.EventType.REMOVE_DDZ_MAIN_ANI, this.onRemoveAni, this);\n\n        ty.NotificationCenter.listen(ddz.EventType.CMD_LED_RECEIVE, this.playLed,this);\n        ty.NotificationCenter.listen(ddz.EventType.MATCH_GIVE_UP, this.onMatchGiveUp, this);\n        ty.NotificationCenter.listen(ty.EventType.UPDATE_BUTTON_TEXT, this.updateButtonText, this);\n\n        ty.NotificationCenter.listen(ddz.EventType.IS_HAVE_REWARD, this.isHaveReward,this);\n\n        this.detailButton.node.x = -this.detailLabel.node.width/2 + 20;\n        this.detailLabel.node.active = false;\n\n        this.ledNode.active = false;\n\n        var backButtonH = ddz.GlobalFuncs.getBackButtonPositionY();\n        if (backButtonH && backButtonH != 0){\n            this.topButtonNode.y = backButtonH;\n            // this.ledNode.y = backButtonH;\n        }\n        var _height = ddz.GlobalFuncs.getMainInterY();\n        if (_height){\n            this.buttom.y = _height;\n            this.ledNode.y = this.ledNode.y + _height/3;\n        }\n        this.updateGiftBagCount();\n        this.updateBtnState();\n        ty.NotificationCenter.listen(ddz.EventType.UPDATE_REWARD_COUNT, this.updateMessageCount.bind(this), this);\n        ty.NotificationCenter.listen(ddz.EventType.UPDATE_GIFTBAG_COUNT, this.updateGiftBagCount.bind(this), this);\n        ty.NotificationCenter.listen(ddz.EventType.UPDATE_BTN_STATE, this.updateBtnState.bind(this), this);\n\n        ddz.gameModel.getOpenBox();\n        ddz.gameModel.checkShareReward(ddz.Share.SharePointType.getDayFirstLogin);\n        ddz.gameModel.getDayInviteReward();\n        // hall.GlobalFuncs.btnScaleEffect(this.topButton.node,1.13,0.9);\n    },\n\n    onMatchGiveUp:function () {\n        this.changeEnterBtnState(1);\n    },\n\n    playLed : function (result) {\n        var model = hall.gameWorld.model;\n        model.m_ledBeWork = true;\n        var _ledList = model.m_ledList; // {\"text\": result[i].text, \"color\": cc.color(result[i].color), \"size\": 22}\n        this.ledNode.active = true;\n        var index = 0;\n        var _moveTime = 0.6;\n        var that = this;\n        var _playLed = function(){\n            var data = _ledList[index];\n            if (data && data.length > 0) {\n                that.ledRichText.string = \"<color=#\" + data[0].color+ \">\"+ data[0].text + \"</color>\";\n                var size = that.ledBg.node.getContentSize();\n                that.ledRichText.node.y = -size.height;\n                var showMove = cc.moveTo(_moveTime, cc.p(that.ledRichText.node.x, -1));\n                var hideMove = cc.moveTo(_moveTime, cc.p(that.ledRichText.node.x, size.height));\n                var delay = cc.delayTime(3);\n                that.ledRichText.node.stopAllActions();\n                that.ledRichText.node.runAction(cc.sequence(showMove,delay,hideMove,cc.callFunc(function(){\n                    _playLed();\n                    if (index == model.m_ledCapacity) {\n                        model.m_ledBeWork = false;\n                        // this.ledNode.active = false;\n                        model.m_ledLast = 0;\n                        model.m_ledList = [];\n                    }\n                }, that)));\n                index += 1;\n            }else {\n                that.ledNode.active = false;\n                model.m_ledBeWork = false;\n                model.m_ledLast = 0;\n                model.m_ledList = [];\n            }\n        };\n        _playLed();\n    },\n\n    loadingAction : function () {\n        this.buttom.active = false;\n        // this.startButtonList.active = false;\n        // this.timeLabel.node.active = false;\n        // this.detailLabel.node.active = false;\n        // this.timeLabel.node.active = false;\n\n        this.startButtonList.active = false;\n        this.menuColumn.active = false;\n        hall.adManager.hideAd();\n        if (hall.AdManagerTYWX && hall.AdManagerTYWX.getAdNodeByTag(\"myFirstAdNode\")) {\n            hall.AdManagerTYWX.getAdNodeByTag(\"myFirstAdNode\").hideAdNode();\n        }\n        if (hall.sxAdManager) {\n            hall.sxAdManager.hide();\n        }\n        this.topButtonNode.active = false;\n    },\n    unLoadingAction : function () {\n        this.buttom.active = true;\n        // this.startButtonList.active = true;\n        // this.timeLabel.node.active = true;\n        // this.detailLabel.node.active = true;\n        // this.timeLabel.node.active = true;\n        this.menuColumn.active = true;\n        this.startButtonList.active = true;\n\n        this.topButtonNode.active = true;\n        var backButtonH = ddz.GlobalFuncs.getBackButtonPositionY();\n        if (backButtonH){\n            this.topButtonNode.y = backButtonH;\n        }\n\n        var _height = ddz.GlobalFuncs.getMainInterY();\n        if (_height){\n            this.buttom.y = _height;\n        }\n    },\n    onUpDateMatchInfo:function () {\n        var info = ddz.matchModel.getCurUpdateInfo();\n        if(!info || !info.lotteryInfo){\n            return;\n        }\n        var num ;\n        if(info.lotteryInfo.winnerCount){\n            num = info.lotteryInfo.winnerCount;\n        }else {\n            num = \"1\";\n        }\n        var rewardDes = info.lotteryInfo.desc;\n        ddz.Share.shareKeywordReplace.bonusTotal = rewardDes;\n\n        this.leftSeconds = info.lotteryInfo.leftSeconds;\n        var timeStr = ddz.GlobalFuncs.formatTime(this.leftSeconds);\n\n        if (this.winnerCount == num){\n            // this.timeLabel.string = timeStr;\n        }else {\n            this.winnerCount = num;\n            this.setDetailInformation(num, timeStr);\n        }\n        if (this.rewardDes != rewardDes){\n            this.rewardDes = rewardDes;\n            hall.GlobalFuncs.setInLocalStorage(ddz.matchModel.MATCH_REWARD_DES, rewardDes);\n            this.setTitleString(\"\" + rewardDes);\n        }\n    },\n\n    changeCountLabel:function (val) {\n        // this.countLabel.node.active = val;\n    },\n\n    updateBtnState:function(){\n        var isOncePlay = hall.GlobalFuncs.ReadStringFromLocalStorage(ddz.gameModel.ONCEPLAYGAME, false);\n        if (ddz.gameModel.isNewUser && !isOncePlay) {\n            // this.startButtonList.active = false;\n            // this.mainLeftBtnList.active = false;\n            // this.mainRightBtnList.active = false;\n            // hall.adManager.hideAd();\n            if (hall.AdManagerTYWX && hall.AdManagerTYWX.getAdNodeByTag(\"myFirstAdNode\")) {\n                hall.AdManagerTYWX.getAdNodeByTag(\"myFirstAdNode\").hideAdNode();\n            }\n            if (hall.sxAdManager) {\n                hall.sxAdManager.hide();\n            }\n        }else {\n            // this.startButtonList.active = true;\n            // this.mainLeftBtnList.active = true;\n            // this.mainRightBtnList.active = true;\n        }\n    },\n\n    updateMatchInfo: function () {\n        /*\n         　\"histories\":{\n         　　　　　　\"winnerCount\":2,\n         　　　　　　\"matchCount\":2,\n         　　　　　　\"curLottery\":{\n         　　　　　　　　\"winnerCount\":2,\n         　　　　　　　　\"lotteryTime\":\"2018-04-08 19:15\",\n         　　　　　　　　\"rewards\":[\n         　　　　　　　　　　{\n         　　　　　　　　　　　　\"count\":2,\n         　　　　　　　　　　　　\"itemId\":\"item:1311\"\n         　　　　　　　　　　},\n         　　　　　　　　　　{\n         　　　　　　　　　　　　\"count\":1200000,\n         　　　　　　　　　　　　\"itemId\":\"user:chip\"\n         　　　　　　　　　　},\n         　　　　　　　　　　{\n         　　　　　　　　　　　　\"count\":10000,\n         　　　　　　　　　　　　\"itemId\":\"user:coupon\"\n         　　　　　　　　　　}\n         　　　　　　　　]\n         　　　　　　},\n         　　　　　　\"records\":Array[2]\n         　　　　},\n\n         \"saveInfo\":{\n         \"record\":{\n         \"stageIndex\":2,\n         \"state\":2,\n         \"gameFlow\":false,\n         \"enterTime\":1526141228\n         },\n         \"needResume\":0\n         }\n         */\n        var matchDes = ddz.matchModel.getCurDes();\n        this.changeCountLabel(false);\n        var histories = matchDes.histories;\n        if (histories){\n            var todayM = histories.curLottery;\n            if(todayM && todayM.winnerCount && todayM.winnerCount > 0){\n                ddz.Share.shareKeywordReplace.curWinnerCount = todayM.winnerCount;\n                // var winnerCount = todayM.winnerCount + \"\";\n                // var info = ddz.matchModel.getCurUpdateInfo();\n                // var lotteryTime;\n                // if(info && info.lotteryInfo && info.lotteryInfo.lotteryTime){\n                //     lotteryTime = info.lotteryInfo.lotteryTime;\n                // }else {\n                //     lotteryTime = \"21:00\"\n                // }\n                // var tips = \"<color=#FFFFFF>本期已通关\"+winnerCount+\"</color><color=#FFFFFF>次，奖励将于\" + lotteryTime + \"发放</c>\";\n                // this.countLabel.string = tips;\n                this.changeCountLabel(true);\n            }\n        }\n\n        var savaInfo = matchDes.saveInfo;\n        if(matchDes.matchId == 6789 && savaInfo && savaInfo.record &&  savaInfo.record.stageIndex){\n            this.changeEnterBtnState(savaInfo.record.stageIndex);\n        }\n    },\n    changeEnterBtnState:function (_stageIndex) {\n        this.startLabel.string = \"第\" + _stageIndex + \"关\"\n    },\n    setTitleString : function (titleString) {\n        hall.LOGD(this._TAG, \"setTitleString -------------------------\"+titleString.length);\n        var fontSize = 48;\n        if(titleString.length > 11){\n            fontSize = 45;\n        }\n        this.titleLabel.fontSize = fontSize;\n        this.titleLabel.string = titleString;\n    },\n\n    setDetailInformation:function (peopel,timeS) {\n        // <img src='ddz_main_acticityDetail' height=40 width=40 />\n        // this.detailLabel.node.active = true;\n        // this.detailLabel.string =\n        //     \"<img src = 'ddz_main_acticityDetail'/><color=#ffffff> 今天已有\"+peopel+\"人次领取红包 </c>\";\n        // this.detailButton.node.x = -this.detailLabel.node.width/2 + 20;\n        // this.timeLabel.string = timeS;\n        // // 个人财产信息\n        // var wimdow = this.personalAssets.getComponent(\"personalAssets\");\n        // wimdow.updateInfo();\n    },\n    updataTime :function () {\n        this.leftSeconds--;\n        var timeStr = ddz.GlobalFuncs.formatTime(this.leftSeconds);\n        // this.timeLabel.string = timeStr;\n    },\n\n    onClickCenterButton:function (event) {\n        var shareType = ddz.Share.onShareType.clickStatShareTypeMainTips;\n        ddz.Share.shareWithType(shareType);\n    },\n    update:function (dt) {\n        this._counter++;\n        if (this._counter >= 360){\n            //6秒刷新一次奖池信息\n            ddz.matchModel.matchUpdate();\n            this._counter = 0;\n            ddz.LOGD(this._TAG, \"刷新一次奖池信息\");\n        }else if(this._counter%60 == 0){\n            if (this.leftSeconds > 0){\n                this.updataTime();\n            }\n        }\n    },\n    onDestroy:function () {\n        var model = hall.gameWorld.model;\n        model.m_ledBeWork = false;\n        ty.NotificationCenter.ignoreScope(this);\n    },\n\n    updateRewardMassage : function (result) {\n        var resultMap;\n        if(result){\n            resultMap = result.result;\n        }\n        var showList = [];\n        if(resultMap && resultMap.inviteeList && resultMap.inviteeList.length > 0){\n            var inviteeList = resultMap.inviteeList;\n            for (var i = 0; i < inviteeList.length; i ++){\n                if(inviteeList[i].rewardState == 1){\n                    inviteeList[i].bindRewardCount = resultMap.bindRewardCount;\n                    inviteeList[i].type = 1;\n                    showList.push(inviteeList[i]);\n                }\n            }\n        }\n\n        //查询未展示的登录奖励\n        var tips =   hall.GlobalFuncs.ReadValueFromLocalStorage(ddz.matchModel.SHOW_LOGIN_REWARD, []);\n        if(tips[0]){\n            var tipsList = tips[0].split(',');\n            if(tipsList && tipsList.length > 0){\n                for (var i = 0 ; i < tipsList.length ; i ++ ){\n                    var reward = {};\n                    reward.type = 2;\n                    reward.bindRewardCount = tipsList[i];\n                    showList.push(reward);\n                }\n            }\n        }\n\n        if(showList.length > 0){\n            this.inviteeList = showList;\n        }\n    },\n\n    // 打开菜单栏\n    openMenuColumn:function(){\n        //判断网络状态是否可以响应按钮事件\n        if(!debugMode){\n            if (ty.TCP.connectStatus != ty.TCP.CONNECT_STATUS_OK){\n                hall.MsgBoxManager.showToast({title : \"正在登录，请稍候\"});\n                ddz.LOGD(null, \"TCP is not ok! Please wait!\");\n                return;\n            }\n        }\n        // this.menuColumn.active = true;\n        var com = this.menuColumn.getComponent(\"ddz_ceLaMenu\");\n        com.updateCeLaMunuInfo();\n        // hall.adManager.hideAd();\n        if (hall.AdManagerTYWX && hall.AdManagerTYWX.getAdNodeByTag(\"myFirstAdNode\")) {\n            hall.AdManagerTYWX.getAdNodeByTag(\"myFirstAdNode\").hideAdNode();\n        }\n        if (hall.sxAdManager) {\n            hall.sxAdManager.hide();\n        }\n    },\n\n    updateNotifyInfo:function() {\n        // this.redDotSpr.active = (ddz.gameModel.notifyInfo.unReadCount + ddz.gameModel.messageCount) > 0;\n\n        var isOncePlay = hall.GlobalFuncs.ReadStringFromLocalStorage(ddz.gameModel.ONCEPLAYGAME, false);\n        if (!ddz.gameModel.isNewUser || isOncePlay) {\n            if(ddz.gameModel.notifyInfo.autoShowCount){\n                var indexStr = hall.GlobalFuncs.ReadStringFromLocalStorage(ddz.matchModel.UPDATE_NOTIFY_INFO, JSON.stringify([]));\n                var indexList = JSON.parse(indexStr);\n                var notifyList = ddz.gameModel.notifyInfo.info;\n                for (var i = 0; i < notifyList.length; i++){\n                    var notify = notifyList[i];\n                    if (indexList.indexOf(notify.index) == -1 && notify.autoShow){\n                        hall.GlobalFuncs.showPopWinByPreFab('prefabs/notifyWindow', function (preFabNode) {\n                            var window = preFabNode.getComponent('ddz_notifyWindow');\n                            window.setDetailTypeWithInfoMap(notify,\"auto\");\n                        });\n                    }\n                }\n            }\n        }\n    },\n\n    onNoticeButton : function() {\n        // ty.BiLog.clickStat(ty.UserInfo.clickStatEventType.clickStatEventTypeButtonClick, [\"notice\"]);\n        // ddz.AudioHelper.playEffect(ddz.EffectPath_mp3.button_click_sound, false);\n        // hall.GlobalFuncs.showPopWinByPreFab('prefabs/notifyWindow', function (preFabNode) {\n        //     var window = preFabNode.getComponent('ddz_notifyWindow');\n        //     window.setListType();\n        // });\n    },\n    updateMessageCount : function (data) {\n        var _count = 0;\n        if (data.inviteeList && data.inviteeList.length > 0) {\n            for (var i = 0; i < data.inviteeList.length; i++) {\n                if (data.inviteeList[i].rewardState == 0) {\n                    _count ++;\n                }\n            }\n        }\n\n        hall.LOGD(\"==\",\" file = [ddz_main] fun = [updateMessageCount] _count = \" + _count);\n\n        this.messageNode.active = _count && _count > 0;\n    },\n\n    updateGiftBagCount : function () {\n        if(ddz.gameModel.notifyInfo.getInfo) {\n            if (ddz.gameModel.notifyInfo.autoShowCount) {\n                // this.giftBagNode.active = false;\n            } else {\n                if (ddz.gameModel.gongZhonghaoCardPoint > 0) {\n                    // this.giftBagNode.active = true;\n                    var tips = \"关注公众号,领豪华礼包\";\n                    hall.GlobalFuncs.onBubbleTips(this.giftBagBtnNode, tips);\n                } else {\n                    // this.giftBagNode.active = ddz.gameModel.gongZhonghaoMenuPoint > 0;\n                }\n            }\n        }\n    },\n\n    updateButtonText:function(data){\n        if (data.pointId && data.pointId == ddz.Share.SharePointType.getDayFirstLogin){\n            if (data.leftCount > 0) {\n                if (ddz.gameModel.gongZhonghaoMenuPoint > 0 && ddz.gameModel.gongZhonghaoCardPoint <= 0){\n                    var tips = \"从公众号登录,领天天礼包\";\n                    hall.GlobalFuncs.onBubbleTips(this.giftBagBtnNode,tips);\n                }\n                ddz.gameModel.shareToGetreward(ddz.Share.SharePointType.getDayFirstLogin);\n            }\n        }\n    },\n\n    isHaveReward:function(data){\n        var _count = 0;\n        if (data.rewards){  // 未领取\n            var _rewards = data.rewards;\n            if (_rewards['item:1311'] > 0) {\n                _count = _count + _rewards['item:1311'];\n            }\n            if (_rewards['user:chip'] > 0){\n                _count = _count + _rewards['user:chip'];\n            }\n        }\n        this.haveReward.active = _count > 0;\n    },\n\n    onRemoveAni:function () {\n        hall.LOGD(\"==\",\" file = [ddz_main] fun = [onRemoveAni] \");\n        this.notifyNode.removeAllChildren();\n        // this.topButton.node.stopAllActions();\n\n    }\n\n});\n"]}