{"version":3,"sources":["../../../../../../assets/Script/ComponentScript/window/assets/Script/ComponentScript/window/ddz_window_skip.js"],"names":["cc","Class","extends","Component","properties","titleLabel","Label","contentRichtext","RichText","centerButton","Button","ignoreButton","onLoad","ty","NotificationCenter","listen","ddz","EventType","UPDATE_SHARE_STATE","playAnimationAfterShareWithType","type","Share","onShareType","clickStatShareTypeSkipCustom","clickStatShareTypeSkipCustomNewer","reultType","resultType","gameModel","isBringVersion","hall","MsgBoxManager","showToast","title","onClose","skipCustom","matchModel","matchBackNextLevel","updateWindowInfo","state","bc","getSkipCustomsConfigJson","GlobalFuncs","setInLocalStorage","CONTINUOUSLOGIN","YESTERDAYSHARE","string","count","newCustoms","node","active","y","oldCustoms","onClickCenterBtn","BiLog","clickStat","UserInfo","clickStatEventType","clickStatEventTypeButtonClick","shareWithType","onClickIgnoreBtn","startMatchProgress","destroy","onDestroy","ignoreScope"],"mappings":"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","file":"ddz_window_skip.js","sourceRoot":"../../../../../../assets/Script/ComponentScript/window","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        titleLabel:cc.Label,\n        contentRichtext:cc.RichText,\n        centerButton:cc.Button,\n        ignoreButton:cc.Button,\n    },\n\n    onLoad:function(){\n        ty.NotificationCenter.listen(ddz.EventType.UPDATE_SHARE_STATE, this.playAnimationAfterShareWithType, this);\n    },\n    playAnimationAfterShareWithType : function (type) {\n        if (type && type == ddz.Share.onShareType.clickStatShareTypeSkipCustom ||\n            type == ddz.Share.onShareType.clickStatShareTypeSkipCustomNewer) {\n            var reultType = ddz.Share.resultType;\n            switch (reultType) {\n                case 1:\n                    if (!ddz.gameModel.isBringVersion) {\n                        hall.MsgBoxManager.showToast({title : '请分享到微信群哦~'});\n                    }\n                    break;\n                case 2:\n                    if (!ddz.gameModel.isBringVersion) {\n                        hall.MsgBoxManager.showToast({title : '请不要频繁分享到一个群~'});\n                    }\n                    \n                    break;\n                case 3:\n                    this.onClose();\n                    if (this.skipCustom > 0){\n                        ddz.matchModel.matchBackNextLevel(null,null,this.skipCustom);\n                    }\n                    break;\n                default:\n                    break;\n            }\n        }\n\n        ddz.Share.resultType = 0;\n    },\n\n    updateWindowInfo:function(state){\n        this.state = state;\n        this.skipCustom = 0;\n        var bc = ddz.gameModel.getSkipCustomsConfigJson();\n        hall.GlobalFuncs.setInLocalStorage(ddz.gameModel.CONTINUOUSLOGIN, true);\n        hall.GlobalFuncs.setInLocalStorage(ddz.gameModel.YESTERDAYSHARE, true);\n        if (state == 1){    // 新用户跳关\n            this.titleLabel.string = \"打的不错,送你新人专享权利\";\n            var count = 7;\n            if (bc && bc.newCustoms) {\n                count = bc.newCustoms;\n                this.skipCustom = bc.newCustoms;\n            }\n\n            this.contentRichtext.string = \"<color=#1A6951>分享到群直接挑战第\"+ count +\"关</c><br/><color=#1A6951>获胜就能拿红包</c><color=#FD5051> (最高100元)</c>\";\n            this.ignoreButton.node.active = false;\n            this.centerButton.node.y = -120;\n        }else if (state == 2){  //老用户连续登录\n            this.titleLabel.string = \"连续登录奖励\";\n            var count = 4;\n            if (bc && bc.oldCustoms) {\n                count = bc.oldCustoms;\n                this.skipCustom = bc.oldCustoms;\n            }\n            this.contentRichtext.string = \"<color=#1A6951>分享到群直接挑战第\"+ count +\"关</c>\";\n            this.ignoreButton.node.active = true;\n            this.centerButton.node.y = -83;\n            \n        }else if (state == 3){  //老用户回归\n            this.titleLabel.string = \"欢迎回来,回归奖励\";\n            var count = 4;\n            if (bc && bc.oldCustoms) {\n                count = bc.oldCustoms;\n                this.skipCustom = bc.oldCustoms;\n            }\n            this.contentRichtext.string = \"<color=#1A6951>分享到群直接挑战第\"+ count +\"关</c>\";\n            this.ignoreButton.node.active = true;\n            this.centerButton.node.y = -83;\n        }\n    },\n\n    onClickCenterBtn:function(){\n        ty.BiLog.clickStat(ty.UserInfo.clickStatEventType.clickStatEventTypeButtonClick,\n            [\"onSkipCustomShare\",this.state]);\n        if (this.state == 1) {\n            ddz.Share.shareWithType(ddz.Share.onShareType.clickStatShareTypeSkipCustomNewer);\n        }else {\n            ddz.Share.shareWithType(ddz.Share.onShareType.clickStatShareTypeSkipCustom);\n        }\n    },\n\n    onClickIgnoreBtn:function(){\n        ty.BiLog.clickStat(ty.UserInfo.clickStatEventType.clickStatEventTypeButtonClick,\n            [\"windowSkip\",\"ignoreBtn\"]);\n        ddz.matchModel.startMatchProgress();\n        this.onClose();\n    },\n\n    onClose:function(){\n        this.node.destroy();\n    },\n    onDestroy : function () {\n        ty.NotificationCenter.ignoreScope(this);\n    },\n});\n"]}