{"version":3,"sources":["../../../../../../assets/Script/ComponentScript/window/assets/Script/ComponentScript/window/GoldModule.js"],"names":["cc","Class","extends","Component","properties","jifenNode","Node","jifenLeftNode","jifenRightNode","lblDiFen","Label","lblNum","game_result","Prefab","tasksNode","baseScore","pouringLabel","betLabel","ctor","betScoreChangeAni","setTableScene","val","_tableScene","refresh","initScore","_onGameReady","_onUpdateInfo","pos","type","updateMultiple","multiple","active","string","onLoad","ty","NotificationCenter","listen","ddz","EventType","UPDATE_PLAYER_INFO","GAME_READY","TABLE_INFO_CHAGE","_tableInfoChange","BUY_CHIP_CHANEG","_onByInChipChange","BET_SCORE_CHANGE_ANI","UserInfo","systemType","SYSTEMTYPE","iPhoneXType","widL","getComponent","Widget","top","widR","mscore","hall","ME","getChip","setScore","trigger","STOP_MATCHING","showGoldInfo","tableInfo","obj","userPanel","_leftSeatinfo","model","m_buyinChip","_rightSeatinfo","hasData","updateAllScore","result","myIndex","_mySeatIndex","leftindex","GlobalFuncs","getPreIndex","rightindex","GetNextIndex","checkSeatIsWin","seatIndex","dizhuWin","dizhuwin","isWin","stat","dizhu","checkIsDizhu","isDizhu","call","bc","bomb","Math","pow","chuntian","base","score","delta","parseInt","deltaList","getDeltaScore","_mdel","upDataScore","_ldel","_rdel","_delta","_mScore","_lScore","_rScore","isDiZhu","winPlayer","data","LOGD","JSON","stringify","scroe","lblScoreChange","lblName","deltaStr","formatGold","getScoreLabel","that","callBack","callFunc","node","opacity","flyAni","sequence","delayTime","fadeOut","runAction","reSetAddScore","lblScore","setChip","_mySeatinfo","showResult","_reset","_gameResult","game_result_wnd","instantiate","director","getScene","addChild","show","scoreNode","getChildByName","onDestroy","ignoreScope","reset","stopAllActions","update","dt","onBack","REMOVE_MATCHING","REMOVE_TABLE_ANI","AudioHelper","playEffect","EffectPath_mp3","back_button_click_sound","tableinfo","_mixID","mixId","_roomId","roomId","_queueInfo","matchModel","getCurQueueInfo","MsgFactory","getRoomLeave","tableId"],"mappings":"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","file":"GoldModule.js","sourceRoot":"../../../../../../assets/Script/ComponentScript/window","sourcesContent":["\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        jifenNode : cc.Node,\n        jifenLeftNode : cc.Node,\n        jifenRightNode : cc.Node,\n        lblDiFen : cc.Label,\n        lblNum: cc.Label,\n        game_result : cc.Prefab,\n        tasksNode: cc.Node,\n        baseScore:cc.Node,\n        pouringLabel:cc.Label,\n        betLabel:cc.Label,\n\n        // aniDiFen:cc.Label,\n        // lblDiFen_1:cc.Label,\n        // fanbei:cc.Node,\n    },\n\n    ctor:function () {\n    },\n    betScoreChangeAni:function(){\n\n    },\n    setTableScene:function (val) {\n        this._tableScene = val;\n        // this._tableInfoChange(this._tableScene.tableInfo());\n        // this.refresh();\n    },\n\n    refresh:function () {\n        // this._tableScene.myAvatar.active = this._tableScene._tableState.normalInfo.m_state != ddz.Enums.TableState.TABLEDSTAT_PLAYING;\n\n        this.initScore();\n        // if (this._tableScene._leftSeatinfo.hasData && this._tableScene._rightSeatinfo.hasData){\n            //坐滿了,\n            this._onGameReady();\n        // }\n\n        // if (this._tableScene._leftSeatinfo.hasData){\n            this._onUpdateInfo({pos:'left', type:'sit'});\n        // }\n\n        // if (this._tableScene._rightSeatinfo.hasData){\n            this._onUpdateInfo({pos:'right', type:'sit'});\n        // }\n    },\n\n    updateMultiple:function (baseScore, multiple) {\n        // this.lblDiFen.string = baseScore + \" x \" + multiple + \"倍\";\n        this.baseScore.active = true;\n        this.pouringLabel.string = baseScore;\n        this.betLabel.string = multiple;\n    },\n\n    // hideGoldInfo:function(){\n    //     this.goldInfoNode.active = false;\n    // },\n\n    onLoad : function() {\n        // ty.NotificationCenter.trigger(ddz.EventType.UPDATE_PLAYER_INFO, {pos:'right', type:'leave'});\n        ty.NotificationCenter.listen(ddz.EventType.UPDATE_PLAYER_INFO, this._onUpdateInfo, this);\n        ty.NotificationCenter.listen(ddz.EventType.GAME_READY, this._onGameReady, this);\n        ty.NotificationCenter.listen(ddz.EventType.TABLE_INFO_CHAGE, this._tableInfoChange, this);\n        ty.NotificationCenter.listen(ddz.EventType.BUY_CHIP_CHANEG, this._onByInChipChange, this);\n        ty.NotificationCenter.listen(ddz.EventType.BET_SCORE_CHANGE_ANI, this.betScoreChangeAni, this);\n\n        // this.startAni();\n        // this.initScore();\n        if(ty.UserInfo.systemType == ty.UserInfo.SYSTEMTYPE.iPhoneXType){\n            var widL = this.jifenLeftNode.getComponent(cc.Widget);\n            widL.top = 324;\n            var widR = this.jifenRightNode.getComponent(cc.Widget);\n            widR.top = 324;\n        }\n    },\n\n\n    _onByInChipChange:function () {\n        var mscore = hall.ME.getChip();\n        this.setScore('my', mscore);\n    },\n\n    _onGameReady:function () {\n        ty.NotificationCenter.trigger(ddz.EventType.STOP_MATCHING);\n\n        this._tableScene.showGoldInfo();\n    },\n\n    _tableInfoChange:function (tableInfo) {\n\n    },\n\n    _onUpdateInfo:function (obj) {\n        var mscore = 0;\n        var userPanel;\n        if (obj.pos == 'left'){\n            mscore = this._tableScene._leftSeatinfo.model.m_buyinChip;\n            userPanel = this.jifenLeftNode;\n        }\n        else if (obj.pos == 'right'){\n            mscore = this._tableScene._rightSeatinfo.model.m_buyinChip;\n            userPanel = this.jifenRightNode;\n        }\n        userPanel.active = true;\n        if (obj.type == 'leave'){\n            mscore = 0;\n            userPanel.active = false;\n        }\n        if (obj.type == 'sit'){\n            if(this._tableScene._rightSeatinfo.hasData && this._tableScene._leftSeatinfo.hasData){\n                this._onGameReady();\n            }\n        }\n        this.setScore(obj.pos, mscore);\n    },\n\n    initScore:function () {\n\n        // var mscore = this._tableScene._mySeatinfo.model.m_buyinChip;\n        var mscore = hall.ME.getChip();\n        this.setScore('my', mscore);\n\n        mscore = this._tableScene._leftSeatinfo.model.m_buyinChip;;\n        // if (this._tableScene._leftSeatinfo.hasData){\n        //     mscore = this._tableScene._leftSeatinfo.model.m_buyinChip;\n        // }\n\n        this.setScore('left', mscore);\n\n        mscore = this._tableScene._rightSeatinfo.model.m_buyinChip;\n        // if (this._tableScene._rightSeatinfo.hasData){\n        //     mscore = this._tableScene._rightSeatinfo.model.m_buyinChip;\n        // }\n        this.setScore('right', mscore);\n    },\n\n    updateAllScore:function (result) {\n\n        var myIndex = this._tableScene._mySeatIndex;\n        var leftindex = ddz.GlobalFuncs.getPreIndex(myIndex);\n        var rightindex = ddz.GlobalFuncs.GetNextIndex(myIndex);\n\n\n        var checkSeatIsWin = function (seatIndex) {\n            var dizhuWin = result.dizhuwin;\n            var isWin = false;\n            if (seatIndex == result.stat.dizhu){\n                isWin = dizhuWin;\n            }\n            else{\n                isWin = !dizhuWin;\n            }\n            return isWin;\n        };\n\n        var checkIsDizhu = function(seatIndex){\n            var isDizhu = false;\n            if (seatIndex == result.stat.dizhu){\n                isDizhu = true;\n            }\n            return isDizhu\n        };\n\n        var call = result.stat.call;\n        var bc = result.stat.bomb;\n        bc = Math.pow(2, bc);\n        var chuntian = result.stat.chuntian;\n        var base = result.stat.base;\n\n\n        var score = hall.ME.getChip();\n        var delta = parseInt(call * bc * chuntian * base);\n        var deltaList = this.getDeltaScore(delta,result);\n        delta = deltaList._mdel;\n        this.upDataScore('my', score, delta, checkSeatIsWin(myIndex));\n\n        score = this._tableScene._leftSeatinfo.model.m_buyinChip;\n        delta = deltaList._ldel;\n        this.upDataScore('left', score, delta, checkSeatIsWin(leftindex));\n\n        score = this._tableScene._rightSeatinfo.model.m_buyinChip;\n        delta = deltaList._rdel;\n        this.upDataScore('right', score, delta, checkSeatIsWin(rightindex));\n    },\n\n    getDeltaScore:function(delta,result){\n        var _delta = delta;\n        var _mScore = hall.ME.getChip();\n        var _lScore = this._tableScene._leftSeatinfo.model.m_buyinChip;\n        var _rScore = this._tableScene._rightSeatinfo.model.m_buyinChip;\n\n        var _ldel = _delta;\n        var _rdel = _delta;\n        var _mdel = _delta;\n\n        var checkIsDizhu = function(seatIndex){\n            var isDizhu = false;\n            if (seatIndex == result.stat.dizhu){\n                isDizhu = true;\n            }\n            return isDizhu\n        };\n        var isDiZhu = false;\n        var myIndex = this._tableScene._mySeatIndex;\n        var leftindex = ddz.GlobalFuncs.getPreIndex(myIndex);\n        var rightindex = ddz.GlobalFuncs.GetNextIndex(myIndex);\n        var winPlayer = result.winPlayer\n        if (winPlayer == myIndex) {\n            isDiZhu = checkIsDizhu(myIndex);\n            if (isDiZhu) {\n                if (_ldel > _lScore) {\n                    _ldel = _lScore;\n                }\n                if (_rdel > _rScore) {\n                    _rdel = _rScore;\n                }\n                _mdel = _ldel + _rdel;\n            }else {\n                if (leftindex == result.stat.dizhu) {\n                    if (_lScore < _delta*2){\n                        _rdel = parseInt(_lScore/2);\n                        _mdel = parseInt(_lScore/2);\n                    }\n                }else {\n                    if (_rScore < _delta*2){\n                        _ldel = parseInt(_lScore/2);\n                        _mdel = parseInt(_lScore/2);\n                    }\n                }\n            }\n        }else if (winPlayer == leftindex) {\n            isDiZhu = checkIsDizhu(leftindex);\n            if (isDiZhu) {\n                if (_mdel > _mScore) {\n                    _mdel = _mScore;\n                }\n                if (_rdel > _rScore) {\n                    _rdel = _rScore;\n                }\n                _ldel = _mdel + _rdel;\n            }else {\n                if (myIndex == result.stat.dizhu) {\n                    if (_mScore < _delta*2){\n                        _rdel = parseInt(_mScore/2);\n                        _ldel = parseInt(_mScore/2);\n                    }\n                }else {\n                    if (_rScore < _delta*2){\n                        _ldel = parseInt(_rScore/2);\n                        _mdel = parseInt(_rScore/2);\n                    }\n                }\n            }\n        }else if (winPlayer == rightindex) {\n            isDiZhu = checkIsDizhu(rightindex);\n            if (isDiZhu) {\n                if (_mdel > _mScore) {\n                    _mdel = _mScore;\n                }\n                if (_ldel > _lScore) {\n                    _ldel = _rScore;\n                }\n                _rdel = _ldel + _mdel;\n            }else {\n                if (leftindex == result.stat.dizhu) {\n                    if (_lScore < _delta*2){\n                        _rdel = parseInt(_lScore/2);\n                        _mdel = parseInt(_lScore/2);\n                    }\n                }else {\n                    if (_rScore < _delta*2){\n                        _ldel = parseInt(_rScore/2);\n                        _mdel = parseInt(_rScore/2);\n                    }\n                }\n            }\n        }\n\n        var data = {};\n        data._mdel = _mdel;\n        data._ldel = _ldel;\n        data._rdel = _rdel;\n        ddz.LOGD(\"\",\"file = [GoldModule] fun = [getDeltaScore] 当前输赢分数 data = \" + JSON.stringify(data));\n        return data;\n    },\n\n    //更新分数\n    upDataScore:function (pos, scroe, delta, isWin) {\n        var lblScoreChange, lblName;\n        if (isWin) {\n            scroe = scroe + delta;\n        }else {\n            scroe = scroe - delta;\n        }\n        var deltaStr = hall.GlobalFuncs.formatGold(delta);\n        if (isWin){\n            deltaStr = \"+\" + deltaStr;\n            lblName = \"lblJiFenChangeAdd\";\n        }\n        else{\n            if (delta == 0){\n                deltaStr = \"-0\";\n            }\n            lblName = \"lblJiFenChange\";\n        }\n\n        switch (pos){\n            case 'my':{\n                lblScoreChange = this.getScoreLabel(this.jifenNode, lblName);\n                break;\n            }\n            case 'left':{\n                lblScoreChange = this.getScoreLabel(this.jifenLeftNode, lblName);\n                break;\n            }\n            case 'right':{\n                lblScoreChange = this.getScoreLabel(this.jifenRightNode, lblName);\n                break;\n            }\n        }\n\n\n        lblScoreChange.string = deltaStr;\n        var that = this;\n        that.setScore(pos, scroe);\n        var callBack = cc.callFunc(function () {\n            lblScoreChange.node.opacity = 255;\n            lblScoreChange.string = \"\";\n        });\n\n        var flyAni = cc.sequence(cc.delayTime(5), cc.fadeOut(0.2), callBack);\n        lblScoreChange.node.runAction(flyAni);\n    },\n\n    reSetAddScore:function () {\n        this.getScoreLabel(this.jifenNode, 'lblJiFenChangeAdd').string = \"\";\n        this.getScoreLabel(this.jifenNode, 'lblJiFenChange').string = \"\";\n\n        this.getScoreLabel(this.jifenLeftNode, 'lblJiFenChangeAdd').string = \"\";\n        this.getScoreLabel(this.jifenLeftNode, 'lblJiFenChange').string = \"\";\n\n        this.getScoreLabel(this.jifenRightNode, 'lblJiFenChangeAdd').string = \"\";\n        this.getScoreLabel(this.jifenRightNode, 'lblJiFenChange').string = \"\";\n    },\n\n    setScore:function (pos, scroe) {\n        var lblScore;\n        switch (pos){\n            case 'my':{\n                lblScore = this.getScoreLabel(this.jifenNode, 'lblJiFen');\n                hall.ME.setChip(scroe);\n                this._tableScene._mySeatinfo.model.m_buyinChip = scroe;\n                break;\n            }\n            case 'left':{\n                lblScore = this.getScoreLabel(this.jifenLeftNode, 'lblJiFen');\n                break;\n            }\n            case 'right':{\n                lblScore = this.getScoreLabel(this.jifenRightNode, 'lblJiFen');\n                break;\n            }\n        }\n\n        lblScore.string = hall.GlobalFuncs.formatGold(scroe) +\"\";\n    },\n\n    showResult:function (result) {\n        ddz.LOGD(\"\",\"file = [DdzTableScene] fun = [_startGameOverAnimation] 金币场显示结算界面 result = \" + JSON.stringify(result));\n        this._tableScene._reset();\n        if (!this._gameResult){\n            var game_result_wnd = cc.instantiate(this.game_result);\n            cc.director.getScene().addChild(game_result_wnd);\n            this._gameResult = game_result_wnd.getComponent(\"ddz_game_result\");\n            this._gameResult.setTableScene(this._tableScene);\n        }\n        this._gameResult.show(result);\n\n        // var mySeatIndex = this._tableScene._mySeatIndex;\n        // if (mySeatIndex == result.stat.dizhu){\n        //     var saveCardsString =  hall.GlobalFuncs.ReadStringFromLocalStorage(ddz.gameModel.ORIGINCARDS, \"\");\n        //     var saveCardsDic = JSON.parse(saveCardsString);\n        //     var cards = saveCardsDic.myCards;\n        //     var baseCards = saveCardsDic.baseCard;\n        //     cards = cards.concat(baseCards);\n        //     var saveDic = {myCards:cards,baseCard:baseCards};\n        //     hall.GlobalFuncs.setInLocalStorage(ddz.gameModel.ORIGINCARDS, JSON.stringify(saveDic));\n        // }\n\n        // this.scheduleOnce(function () {\n        //     if(result.winShare){\n        //         ddz.GlobalFuncs.showShareGuideWindow(true,result.winShare.winChip,result.winShare.rewardDoubles,result.winShare.adsCounts);\n        //         ty.BiLog.clickStat(ty.UserInfo.clickStatEventType.clickStatEventTypeShowWindow,\n        //             [\"loseTipsWindow\",result.winShare.winChip,result.winShare.rewardDoubles]);\n        //     }else if(result.loseShare){\n        //         ddz.GlobalFuncs.showShareGuideWindow(false,result.loseShare.loseChip,result.loseShare.rewardDoubles,result.loseShare.adsCounts);\n        //         ty.BiLog.clickStat(ty.UserInfo.clickStatEventType.clickStatEventTypeShowWindow,\n        //             [\"winTipsWindow\",result.loseShare.loseChip,result.loseShare.rewardDoubles]);\n        //     }else if(result.winchips){\n        //         ddz.GlobalFuncs.showShareMomentsItem(\"showy_highTotal\",result.winchips);\n        //     }else if(result.winstreak){\n        //         ddz.GlobalFuncs.showShareMomentsItem(\"showy_winningStreak\",result.winstreak);\n        //     }\n        //\n        //     // if(result.winchips){\n        //     //     ddz.GlobalFuncs.showShareMomentsItem(\"showy_highTotal\",result.winchips);\n        //     // }else if(result.winstreak){\n        //     //     ddz.GlobalFuncs.showShareMomentsItem(\"showy_winningStreak\",result.winstreak);\n        //     // }\n        //\n        // }.bind(this),1);\n    },\n\n    getScoreLabel:function (scoreNode, lblName) {\n        return scoreNode.getChildByName(lblName).getComponent(cc.Label);\n    },\n\n    onDestroy :function () {\n        ty.NotificationCenter.ignoreScope(this);\n        // this.tasksNode.removeAllChildren();\n        this._tableScene = null;\n    },\n\n    reset:function () {\n        this.lblDiFen.string = \"\";\n        this.baseScore.active = false;\n        this.jifenLeftNode.active = false;\n        this.jifenRightNode.active = false;\n\n        var lblScoreChange;\n\n        lblScoreChange = this.getScoreLabel(this.jifenNode, \"lblJiFenChangeAdd\");\n        lblScoreChange.string = \"\";\n        lblScoreChange.node.stopAllActions();\n\n        lblScoreChange = this.getScoreLabel(this.jifenNode, \"lblJiFenChange\");\n        lblScoreChange.string = \"\";\n        lblScoreChange.node.stopAllActions();\n\n        lblScoreChange = this.getScoreLabel(this.jifenLeftNode, \"lblJiFenChangeAdd\");\n        lblScoreChange.string = \"\";\n        lblScoreChange.node.stopAllActions();\n\n        lblScoreChange = this.getScoreLabel(this.jifenLeftNode, \"lblJiFenChange\");\n        lblScoreChange.string = \"\";\n        lblScoreChange.node.stopAllActions();\n\n        lblScoreChange = this.getScoreLabel(this.jifenRightNode, \"lblJiFenChangeAdd\");\n        lblScoreChange.string = \"\";\n        lblScoreChange.node.stopAllActions();\n\n        lblScoreChange = this.getScoreLabel(this.jifenRightNode, \"lblJiFenChange\");\n        lblScoreChange.string = \"\";\n        lblScoreChange.node.stopAllActions();\n\n    },\n\n    update:function (dt) {\n\n    },\n\n    onBack:function () {\n        ty.NotificationCenter.trigger(ddz.EventType.REMOVE_MATCHING);\n        ty.NotificationCenter.trigger(ddz.EventType.REMOVE_TABLE_ANI);\n        ddz.AudioHelper.playEffect(ddz.EffectPath_mp3.back_button_click_sound, false);\n        var tableinfo = this._tableScene.tableInfo();\n        var _mixID = tableinfo.mixId;\n        var _roomId = tableinfo.roomId();\n        if (!_roomId) {\n            var _queueInfo = ddz.matchModel.getCurQueueInfo();\n            _roomId = _queueInfo.roomId\n        }\n        ddz.MsgFactory.getRoomLeave(_roomId, tableinfo.tableId(), this._tableScene._mySeatIndex, _mixID);\n    },\n    onDestroy :function () {\n        ty.NotificationCenter.ignoreScope(this);\n    },\n});\n"]}