{"version":3,"sources":["../../../../../../assets/Script/ComponentScript/component/assets/Script/ComponentScript/component/ControlPanel.js"],"names":["cc","Class","extends","Component","ctor","_TAG","properties","callNode","Node","callNodeHuanle","playNode","btnNoCall","Button","btnCall1","btnCall2","btnCall3","btnNoCallHuanle","btnCallHuanle","btnNoPlay","btnTip","btnPlay","lblMsg","Label","tipsSpr","Sprite","cardTipsSpr","lblTimer","nodeTimer","chatButton","default","type","lordSpriteFrame","SpriteFrame","onLoad","node","on","_playBuchu","_playTip","_playPlay","_classicBujiao","_classic1fen","_classic2fen","_classic3fen","_grabBujiao","_grabCall","onChatButton","ty","NotificationCenter","listen","ddz","EventType","GAME_HIDE","onGameHide","state","_playcontroller","happyJiaodz","getCallNode","tableInfo","config","m_grab","_mDizhuCalled","setCallBtnText","noCallText","callText","lbl","getChildByName","getComponent","string","showCallNode","val","active","showPlayNode","init","playcontrol","_bActiveBuChu","_clockLeftTime","_reset","hideAll","setLblMsg","getState","setCardTipsSpr","spriteFrame","setTipsSpr","showBuchuSprite","showPrepare","bReady","_clearSelectedCards","_playCards","setClockVisible","setChatButtonActive","showJiaodz","call","i","interactable","showPlay","bNoCard","_resetTopCardType","ts","_tableState","hall","LOGD","normalInfo","m_topseat","_mySeatIndex","x","_selectedCards","length","_classicJiaodz","isAvtive","clickChatButton","LOCATION_SIGN","SELF","_playRechoose","playTip","_setCardsTipVisible","Enums","PlayCardsTip","PLAYCARDSTIP_PLAY","_timeOutTip","Timer","cancelTimer","str","_tableInfo","m_optimedis","MsgBoxManager","showToast","title","getIsFriend","getSceneType","SceneType","FRIEND","getIsGold","NORMAL","_scheduleClock","m_state","TableState","TABLEDSTAT_CALLING","bVisible","time","setTimer","hideClock","opacity","showClock","onDestroy","ignoreScope"],"mappings":"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","file":"ControlPanel.js","sourceRoot":"../../../../../../assets/Script/ComponentScript/component","sourcesContent":["/**\n * 操作面板\n */\ncc.Class({\n    extends: cc.Component,\n    ctor : function () {\n        this._TAG = \"ddz.ControlPanel\";\n    },\n\n    properties: {\n        callNode : cc.Node,\n        callNodeHuanle : cc.Node,\n        playNode : cc.Node,\n\n        btnNoCall : cc.Button,\n        btnCall1 : cc.Button,\n        btnCall2 : cc.Button,\n        btnCall3 : cc.Button,\n\n        btnNoCallHuanle : cc.Button,\n        btnCallHuanle : cc.Button,\n\n        btnNoPlay : cc.Button,\n        btnTip : cc.Button,\n        btnPlay : cc.Button,\n\n        lblMsg : cc.Label,\n        tipsSpr:cc.Sprite,\n        cardTipsSpr:cc.Sprite,\n        lblTimer : cc.Label,\n        nodeTimer : cc.Node,\n\n        chatButton : {      // 互动表情按钮\n            default : null,\n            type : cc.Button\n        },\n        lordSpriteFrame:[cc.SpriteFrame],\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad : function () {\n        // this.btnNoPlay.interactable = false;\n        this.btnNoPlay.node.on(\"click\" , this._playBuchu, this);\n        this.btnTip.node.on(\"click\" , this._playTip, this);\n        this.btnPlay.node.on(\"click\" , this._playPlay, this);\n\n        this.btnNoCall.node.on(\"click\" , this._classicBujiao, this);\n        this.btnCall1.node.on(\"click\" , this._classic1fen, this);\n        this.btnCall2.node.on(\"click\" , this._classic2fen, this);\n        this.btnCall3.node.on(\"click\" , this._classic3fen, this);\n\n        this.btnNoCallHuanle.node.on(\"click\" , this._grabBujiao, this);\n        this.btnCallHuanle.node.on(\"click\" , this._grabCall, this);\n        \n        this.chatButton.node.on(\"click\" , this.onChatButton, this);\n\n        ty.NotificationCenter.listen(ddz.EventType.GAME_HIDE, this.onGameHide, this);\n        this.state = 0;\n    },\n\n    onGameHide:function () {\n        // this.setClockVisible(false);\n        // this._reset();\n    },\n\n    _grabBujiao:function () {\n        this._playcontroller.happyJiaodz(0);\n    },\n\n    _grabCall:function () {\n        this._playcontroller.happyJiaodz(1);\n    },\n\n    getCallNode:function () {\n        if (this._playcontroller.tableInfo().config.m_grab == 1){\n            if (this._playcontroller._mDizhuCalled){\n                //显示抢地主,不抢\n                this.setCallBtnText('不抢','抢地主');\n            }\n            else{\n                this.setCallBtnText('不叫','叫地主');\n            }\n            return this.callNodeHuanle;\n        }\n        return this.callNode;\n    },\n\n    setCallBtnText:function (noCallText, callText) {\n        var lbl = this.btnNoCallHuanle.node.getChildByName('Label');\n        lbl.getComponent(cc.Label).string = noCallText;\n\n        lbl = this.btnCallHuanle.node.getChildByName('Label');\n        lbl.getComponent(cc.Label).string = callText;\n    },\n\n    showCallNode : function (val) {\n        this.getCallNode().active = val;\n    },\n\n    showPlayNode : function (val) {\n        this.playNode.active = val;\n    },\n\n    init: function(playcontrol) {\n\n        this._playcontroller = playcontrol;\n\n        this._bActiveBuChu = false;\n        this._clockLeftTime = -1;\n\n        this._reset();\n\n    },\n\n    _reset: function() {\n        this._bActiveBuChu = false;\n        this._clockLeftTime = -1;\n\n        this.hideAll();\n    },\n\n    setLblMsg:function (val) {\n        if (val){\n            // this.lblMsg.node.active = true;\n            this.lblMsg.node.active = false;\n            this.lblMsg.string = val;\n        }\n        else{\n            this.lblMsg.node.active = false;\n        }\n    },\n\n    getState:function(){\n        return this.state;\n    },\n\n    setCardTipsSpr:function(state){\n        if (state == null) {\n            this.cardTipsSpr.node.active = false;\n            // this.state = 0;\n        }else {\n            /* 1:1分 2:2分 3:3分 4:不出 5:不叫 6:不抢 7:出牌不符合规则 8:叫地主 9:明牌\n             *   10:你没有牌大过上家 11:抢地主 12:托管 13:要不起 14:pass\n             *\n             * */\n\n            if (this.lordSpriteFrame[state-1]) {\n                this.cardTipsSpr.node.active = true;\n                this.cardTipsSpr.spriteFrame = this.lordSpriteFrame[state-1];\n                this.state = state;\n            }\n        }\n    },\n\n\n    setTipsSpr:function(state){\n        if (state == null) {\n            this.tipsSpr.node.active = false;\n            // this.state = 0;\n        }else {\n            /* 1:1分 2:2分 3:3分 4:不出 5:不叫 6:不抢 7:出牌不符合规则 8:叫地主 9:明牌\n             *   10:你没有牌大过上家 11:抢地主 12:托管 13:要不起 14:pass\n             *\n             * */\n            if (this.lordSpriteFrame[state-1]) {\n                this.tipsSpr.node.active = true;\n                this.tipsSpr.spriteFrame = this.lordSpriteFrame[state-1];\n                this.state = state;\n            }\n\n            // switch (state) {\n            //     case 1:{\n            //\n            //         break;\n            //     }\n            //     case 2:{\n            //         break;\n            //     }\n            //     case 3:{\n            //         break;\n            //     }\n            //     case 4:{\n            //         break;\n            //     }\n            //     case 5:{\n            //         break;\n            //     }\n            //     case 6:{\n            //         break;\n            //     }\n            //     case 7:{\n            //         break;\n            //     }\n            //     case 8:{\n            //         break;\n            //     }\n            //     case 9:{\n            //         break;\n            //     }\n            //     case 10:{\n            //         break;\n            //     }\n            //     case 11:{\n            //         break;\n            //     }\n            //     case 12:{\n            //         break;\n            //     }\n            //     case 13:{\n            //         break;\n            //     }\n            //     case 14:{\n            //         break;\n            //     }\n            // }\n        }\n    },\n\n    showBuchuSprite: function() {\n        this.hideAll();\n        // this.setLblMsg(\"不出\");\n        this.setTipsSpr(4);\n    },\n\n    showPrepare: function(bReady) {\n        this.hideAll();\n        if (bReady) {\n            this.setLblMsg(\"已准备\");\n        }\n    },\n\n    //play\n    _playBuchu: function() {\n        this._playcontroller._clearSelectedCards();\n        this._playcontroller._playCards();\n        this.setTipsSpr(4);\n    },\n\n    hideAll: function() {\n        this.playNode.active = false;\n        this.callNode.active = false;\n        this.callNodeHuanle.active = false;\n        this.setLblMsg(\"\");\n        this.setTipsSpr();\n        this.setCardTipsSpr();\n        this.setClockVisible(false);\n        this.setChatButtonActive(false);\n    },\n\n    showJiaodz: function(call) {\n        this.hideAll();\n        // this.nodeTimer.active = true;\n        this.getCallNode().active = true;\n\n        for (var i = 1; i < 4; i++){\n            this['btnCall' + i].interactable = call < i;\n            if (call < i) {\n                this['btnCall' + i].node.getChildByName('bright').active = true;\n                this['btnCall' + i].node.getChildByName('hui').active = false;\n            }else {\n                this['btnCall' + i].node.getChildByName('bright').active = false;\n                this['btnCall' + i].node.getChildByName('hui').active = true;\n            }\n        }\n    },\n\n    showPlay: function(bNoCard) {\n        var bNoCard = false;\n        //出牌，显示出牌操作面板\n        if (this._playcontroller._resetTopCardType()) {\n            bNoCard = true;\n        }\n        this.hideAll();\n        this.playNode.active = true;\n        var ts = this._playcontroller._tableState;\n        hall.LOGD(this._TAG, \"in show play ,top seat : \" + ts.normalInfo.m_topseat);\n\n        if (ts.normalInfo.m_topseat == 0 || ts.normalInfo.m_topseat == this._playcontroller._mySeatIndex) { //主动出牌，应该禁止掉不出按钮\n            this.btnNoPlay.node.active = false;\n            this.btnTip.node.active = false;\n            this.btnPlay.node.active = true;\n            this.btnPlay.node.x = 0;\n        } else {\n\n            this.btnNoPlay.node.active = true;\n            if (bNoCard){\n                //没有牌可以大过上家,只显示不出按钮,并居中\n                this.btnNoPlay.node.x = 0;\n                this.btnTip.node.active = false;\n                this.btnPlay.node.active = false;\n                this.setCardTipsSpr(10);\n            }\n            else{\n                this.btnNoPlay.node.x = -209;\n                this.btnTip.node.active = true;\n                this.btnPlay.node.active = true;\n            }\n\n            this.btnPlay.node.x = 215;\n        }\n\n        if (this._playcontroller._selectedCards.length > 0) {\n            // this.setButtonEnable(ddz.RECHOOSE_BUTTON_KEY, true);\n            // this.btnPlay.interactable = true;\n        } else {\n            // this.setButtonEnable(ddz.RECHOOSE_BUTTON_KEY, false);\n            // this.btnPlay.interactable = false;\n        }\n    },\n\n    _classicBujiao: function() {\n        this._playcontroller._classicJiaodz(0);\n        this.setTipsSpr(5);\n    },\n\n    _classic1fen: function() {\n        this._playcontroller._classicJiaodz(1);\n        this.setTipsSpr(1);\n    },\n    _classic2fen: function() {\n        this._playcontroller._classicJiaodz(2);\n        this.setTipsSpr(2);\n    },\n    _classic3fen: function() {\n        this._playcontroller._classicJiaodz(3);\n        this.setTipsSpr(3);\n    },\n\n    setChatButtonActive: function(isAvtive) {\n        // this.chatButton.node.active = isAvtive;\n    },\n\n    onChatButton: function() {\n        // ddz.LOGD(null, \"onChatButton index = \" + ddz.LOCATION_SIGN.SELF);\n        this._playcontroller.clickChatButton(ddz.LOCATION_SIGN.SELF);\n    },\n    \n    _playRechoose: function() {\n        // cc.audioEngine.playMusic(ddz.Res.ClickButtonEffect);\n        this._playcontroller._clearSelectedCards();\n    },\n    _playTip: function() {\n        // cc.audioEngine.playMusic(ddz.Res.ClickButtonEffect);\n        ddz.LOGD(null, \"-----------------------_playTip-----------------------------\");\n        this._playcontroller.playTip();\n    },\n\n    _playPlay: function() {\n        // cc.audioEngine.playMusic(ddz.Res.ClickButtonEffect);\n        ddz.LOGD(null, \"-----------------------_playPlay-----------------------------\");\n        if (this._playcontroller._selectedCards.length == 0){\n            this._playcontroller._setCardsTipVisible(true, ddz.Enums.PlayCardsTip.PLAYCARDSTIP_PLAY);\n            return;\n        }\n        this._playcontroller._playCards();\n    },\n\n    _timeOutTip: function() {\n        ty.Timer.cancelTimer(this, this._timeOutTip);\n        var str = this._playcontroller._tableInfo.config.m_optimedis;\n        hall.LOGD(this._TAG, \"时间到了啊\" + str);\n        hall.MsgBoxManager.showToast({title:str});\n    },\n\n    getIsFriend:function () {\n        return this._playcontroller.tableInfo().getSceneType() == ddz.Enums.SceneType.FRIEND;\n    },\n\n    getIsGold:function () {\n        return this._playcontroller.tableInfo().getSceneType() == ddz.Enums.SceneType.NORMAL;\n    },\n\n    _scheduleClock: function() {\n        this._clockLeftTime -= 1;\n        this.lblTimer.string = \"\" + this._clockLeftTime;\n        //播放警告和动画\n        // if (this._clockLeftTime <= ddz.CLOCK_ANIMATION_SECOND && this._clockInAction == false) {\n        //     this._alarmEffectId = ddz.AudioHelper.playEffect(ddz.EffectPath[\"audio_reminded_myself\"], true);\n        // }\n        //时间到\n        if (this._clockLeftTime <= 0) {\n            ty.Timer.cancelTimer(this, this._scheduleClock);\n            if (this.getIsFriend()){\n                //好友场倒计时到0后,不作任何操作\n                return;\n            }\n            if (this._bActiveBuChu == true) {\n                var state = this._playcontroller._tableState.normalInfo.m_state;\n                if (state == ddz.Enums.TableState.TABLEDSTAT_CALLING) {\n                    this.showCallNode(false);\n                    //超时后,后端处理叫分,前端不要再发协议\n                } else {\n                    this._playBuchu();\n                    this._bActiveBuChu = false;\n                }\n            } else {\n                //3s后提示网络不好\n                // ty.Timer.setTimer(this, this._timeOutTip, 6, 0, 0);\n            }\n            this.setClockVisible(false);\n        }\n    },\n\n    setClockVisible: function(bVisible, time) {\n        ty.Timer.cancelTimer(this, this._scheduleClock);\n        this.nodeTimer.active = bVisible;\n        //如果显示时钟\n        if (bVisible) {\n            if (time >= 5 && time < 30) {\n                this._bActiveBuChu = true;\n            }\n            this._clockLeftTime = time;\n            ty.Timer.setTimer(this, this._scheduleClock, 1);\n            this.lblTimer.string = \"\" + this._clockLeftTime;\n        }\n    },\n\n    hideClock:function () {\n        this.nodeTimer.opacity = 0;\n    },\n\n    showClock:function () {\n        this.nodeTimer.opacity = 255;\n    },\n\n    // start () {\n    //\n    // },\n\n    // update (dt) {},\n\n    onDestroy:function () {\n        // if(this.btnNoPlay){\n        //     this.btnNoPlay.node.off(\"click\" , this._playBuchu, this);\n        //     this.btnTip.node.off(\"click\" , this._playTip, this);\n        //     this.btnPlay.node.off(\"click\" , this._playPlay, this);\n        //\n        //     this.btnNoCall.node.off(\"click\" , this._classicBujiao, this);\n        //     this.btnCall1.node.off(\"click\" , this._classic1fen, this);\n        //     this.btnCall2.node.off(\"click\" , this._classic2fen, this);\n        //     this.btnCall3.node.off(\"click\" , this._classic3fen, this);\n        // }\n        ty.Timer.cancelTimer(this, this._scheduleClock);\n        ty.NotificationCenter.ignoreScope(this);\n    }\n});\n"]}