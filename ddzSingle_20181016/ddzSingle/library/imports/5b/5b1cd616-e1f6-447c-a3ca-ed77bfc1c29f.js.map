{"version":3,"sources":["../../../../../../assets/Script/ComponentScript/component/assets/Script/ComponentScript/component/userChat.js"],"names":["cc","Class","extends","Component","ctor","_TAG","setArguments","tableId","_roomId","from","to","_url","_name","_parentScene","roomId","properties","bgBtn","default","type","Node","emoButtonFlower","Button","emoButtonDiamond","emoButtonEgg","emoButtonBrick","nameLabel","Label","avatar","flowerSpr","diamondSpr","eggSpr","brickSpr","coolLabel_1","coolLabel_2","coolLabel_3","coolLabel_4","shade_1","shade_2","shade_3","shade_4","infoNode","chatPanel","info_1","info_2","info_3","info_4","sexSprite","Sprite","sexSpriteFrame","SpriteFrame","signatureLabel","xingzuoSprite","xingzuoSpriteFrame","xingzuoLable","locationLabel","wechat","head_shade","headSpr","updatePos","active","com","getComponent","hideNameDisplay","slice_name","hall","GlobalFuncs","SliceStringToLength","string","ddz","gameModel","isLimit","setAvatarUrl","ty","SystemInfo","getImageWithURLBig","onClickHead","closeHead","hideChat","isShow","onLoad","node","on","onEmoButtonFlower","onEmoButtonDiamond","onEmoButtonEgg","onEmoButtonBrick","size","director","getWinSize","setContentSize","popWinAction","btnCooling","isCooling","num","isVal","i","updatePersonalInfo","_playinfo","_type","_fuhao_user_info","playcount","parseInt","winrate","winstreakmax","winchip","windoubles","throughcount","wincoupon","signcount","riserate","get1st","rewardrate","str_1","constellation","_config","constellationConfig","index","indexOf","spriteFrame","_signature","signature","m_sex","sex","Enums","PlayerSexEnum","SEX_MALE","province","district","weChatStr","micro_signal","MsgFactory","sendTableChat","LOGD","onClose","updateInfo","isVisible","setChatNode","isActive","_reSet"],"mappings":"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","file":"userChat.js","sourceRoot":"../../../../../../assets/Script/ComponentScript/component","sourcesContent":["/**\n * 互动表情\n */\ncc.Class({\n    extends: cc.Component,\n    ctor : function () {\n        this._TAG = \"UserChat\";\n\n    },\n\n    setArguments:function(tableId,_roomId,from,to,_url,_name,_parentScene){\n        this.tableId = tableId;\n        this.roomId = _roomId;\n        this.from = from;\n        this.to = to;\n        this._url = _url;\n        this._name = _name;\n    },\n    \n    properties: {\n        bgBtn : {\n            default : null,\n            type : cc.Node\n        },\n        emoButtonFlower : {     // 花\n            default : null,\n            type : cc.Button\n        },\n        emoButtonDiamond : {    // 钻石\n            default : null,\n            type : cc.Button\n        },\n        emoButtonEgg : {       // 鸡蛋\n            default : null,\n            type : cc.Button\n        },\n        emoButtonBrick : {      // 板砖\n            default : null,\n            type : cc.Button\n        },\n\n        nameLabel : cc.Label,\n        avatar : cc.Node,\n\n        flowerSpr : cc.Node,\n        diamondSpr : cc.Node,\n        eggSpr : cc.Node,\n        brickSpr : cc.Node,\n\n        coolLabel_1 : cc.Label,\n        coolLabel_2 : cc.Label,\n        coolLabel_3 : cc.Label,\n        coolLabel_4 : cc.Label,\n\n        shade_1 : cc.Node,\n        shade_2 : cc.Node,\n        shade_3 : cc.Node,\n        shade_4 : cc.Node,\n\n        infoNode : cc.Node,\n\n        chatPanel : cc.Node,\n\n        info_1 : cc.Label,\n        info_2 : cc.Label,\n        info_3 : cc.Label,\n        info_4 : cc.Label,\n\n        sexSprite:cc.Sprite,\n        sexSpriteFrame:[cc.SpriteFrame],\n        signatureLabel:cc.Label,\n        xingzuoSprite:cc.Sprite,\n        xingzuoSpriteFrame:[cc.SpriteFrame],\n        xingzuoLable:cc.Label,\n        locationLabel:cc.Label,\n        wechat:cc.Label,\n\n        head_shade:cc.Node,\n        headSpr:cc.Sprite,\n\n    },\n\n    updatePos: function() {\n        this.avatar.active = true;\n        this.nameLabel.active = true;\n\n        var com = this.avatar.getComponent('Avatar');\n        com.hideNameDisplay();\n        if (this._name) {\n            var slice_name = hall.GlobalFuncs.SliceStringToLength(this._name, 10);\n            this.nameLabel.string = slice_name;\n        }else {\n            this.nameLabel.active = false;\n        }\n\n        if (this._url) {\n            if (this.from != this.to || ddz.gameModel.isLimit) {\n                com.setAvatarUrl(this._url);\n                ty.SystemInfo.getImageWithURLBig(this._url,this.headSpr);\n            }\n        }else {\n            this.avatar.active = false;\n        }\n    },\n\n    onClickHead:function(){\n        this.head_shade.active = true;\n        // ty.SystemInfo.getImageWithURL(this._url,this.headSpr);\n        if (this.from != this.to || ddz.gameModel.isLimit) {\n            ty.SystemInfo.getImageWithURLBig(this._url,this.headSpr);\n        }\n    },\n\n    closeHead:function(){\n        this.head_shade.active = false;\n    },\n\n    hideChat:function(isShow){\n        this.chatPanel.active = isShow;\n    },\n\n    onLoad :function() {\n        this.emoButtonFlower.node.on(\"click\",this.onEmoButtonFlower,this);\n        this.emoButtonDiamond.node.on(\"click\",this.onEmoButtonDiamond,this);\n        this.emoButtonEgg.node.on(\"click\",this.onEmoButtonEgg,this);\n        this.emoButtonBrick.node.on(\"click\",this.onEmoButtonBrick,this);\n\n        var size = cc.director.getWinSize();\n        this.bgBtn.setContentSize(size);\n        this.head_shade.setContentSize(size);\n\n\n        this.popWinAction(true);\n        this.btnCooling(false,0);\n\n        this.info_1.string = \"\";\n        this.info_2.string = \"\";\n        this.info_3.string = \"\";\n        this.info_4.string = \"\";\n    },\n\n    isCooling:function(num){\n        if(num > 0) {\n            this.btnCooling(true,num)\n        }else\n        {\n            this.btnCooling(false,0);\n        }\n    },\n\n    // 按钮冷却\n    btnCooling: function(isVal,num) {\n        for (var i = 1; i <= 4; i++){\n            this['coolLabel_' + i].node.active = isVal;\n            this['coolLabel_' + i].string = num;\n            this['shade_' + i].active = isVal;\n        }\n        this.emoButtonFlower.node.active = !isVal;\n        this.emoButtonDiamond.node.active = !isVal;\n        this.emoButtonEgg.node.active = !isVal;\n        this.emoButtonBrick.node.active = !isVal;\n    },\n\n    updatePersonalInfo:function(_playinfo,_type,_fuhao_user_info){\n        // {\"playcount\":0,\"winrate\":0,\"windoubles\":0,\"winchip\":0},\n        // {\"playcount\":0,\"winrate\":0,\"throughcount\":0,\"wincoupon\":0}\n        // {\"signcount\":0,\"rewardrate\":0,\"riserate\":0,\"get1st\":0},\n        switch (_type){\n            case 'chip':{\n                this.info_1.string = \"对局数：\" + _playinfo.playcount;\n                this.info_2.string = \"胜率：\" + parseInt(_playinfo.winrate*100) + \"%\";\n                this.info_3.string = \"最大连胜：\" + _playinfo.winstreakmax;\n                this.info_4.string = \"总赢取：\" + _playinfo.winchip;\n                break;\n            }\n            case 'friend':{\n                this.info_1.string = \"对局数：\" + _playinfo.playcount;\n                this.info_2.string = \"胜率：\" + parseInt(_playinfo.winrate*100) + \"%\";\n                this.info_3.string = \"最高倍数：\" + _playinfo.windoubles;\n                this.info_4.string = \"总赢分：\" + _playinfo.winchip;\n                break;\n            }\n            case 'chuangguan':{\n                this.info_1.string = \"闯关数：\" + _playinfo.playcount;\n                this.info_2.string = \"胜率：\" + parseInt(_playinfo.winrate*100) + \"%\";\n                this.info_3.string = \"通关数：\" + _playinfo.throughcount;\n                this.info_4.string = \"总奖金：\" + _playinfo.wincoupon/100;\n                break;\n            }\n            case 'match':{\n                this.info_1.string = \"参赛数：\" + _playinfo.signcount;\n                this.info_2.string = \"晋级率：\" + parseInt(_playinfo.riserate*100) + \"%\";\n                this.info_3.string = \"冠军数：\" + _playinfo.get1st;\n                this.info_4.string = \"获奖率：\" + parseInt(_playinfo.rewardrate*100) + \"%\";\n                break;\n            }\n        }\n        if (_fuhao_user_info) {\n            var str_1 = _fuhao_user_info.constellation;\n            if (str_1 == \"\") {\n                str_1 = \"未设置\";\n            }\n            var _config = ddz.constellationConfig;\n            var index = _config.indexOf(str_1);\n            if (index >= 0){\n                this.xingzuoSprite.spriteFrame = this.xingzuoSpriteFrame[index];\n            }\n            this.xingzuoLable.string = str_1;\n\n            var _signature = _fuhao_user_info.signature;\n            if (_signature != \"\") {\n                this.signatureLabel.string = _signature;\n            }else {\n                this.signatureLabel.string = \"该玩家很懒,什么也没有留下\";\n            }\n\n            var m_sex = _fuhao_user_info.sex;\n            if (m_sex == ddz.Enums.PlayerSexEnum.SEX_MALE){ //男\n                this.sexSprite.spriteFrame = this.sexSpriteFrame[0];\n            }else {\n                this.sexSprite.spriteFrame = this.sexSpriteFrame[1];\n            }\n\n            var info_1 = _fuhao_user_info.province;\n            var info_2 = _fuhao_user_info.district;\n            if (info_1 == \"\") {\n                info_1 = \"未设置\";\n            }\n            if (info_2 == \"未设置\" || info_2 == \"\") {\n                this.locationLabel.string = info_1\n            }else {\n\n                this.locationLabel.string = info_1 + \"  \" + info_2;\n            }\n            \n            var weChatStr = _fuhao_user_info.micro_signal;\n            if (weChatStr == \"\"){\n                weChatStr = \"未设置\";\n            }\n            this.wechat.string = weChatStr;\n        }\n    },\n\n    // 点击 花\n    onEmoButtonFlower : function () {\n        ddz.MsgFactory.sendTableChat(this.roomId , this.tableId, this.from, this.to, 'flower', 1);\n        this.btnCooling();\n        this.popWinAction(false);\n    },\n\n    // 点击 钻石\n    onEmoButtonDiamond : function () {\n        ddz.MsgFactory.sendTableChat(this.roomId , this.tableId, this.from, this.to, 'diamond', 1);\n        this.btnCooling();\n        this.popWinAction(false);\n    },\n\n    // 点击 鸡蛋\n    onEmoButtonEgg : function () {\n        ddz.LOGD(null, \"onEmoButtonEgg: 点击鸡蛋\" );\n        ddz.MsgFactory.sendTableChat(this.roomId , this.tableId, this.from, this.to, 'egg', 1);\n        this.btnCooling();\n        this.popWinAction(false);\n    },\n\n    // 点击 板砖\n    onEmoButtonBrick : function () {\n        ddz.MsgFactory.sendTableChat(this.roomId , this.tableId, this.from, this.to, 'brick', 1);\n        this.btnCooling();\n        this.popWinAction(false);\n    },\n\n    onClose : function () {\n\n        this.popWinAction(false);\n    },\n\n    // 刷新个人信息\n    updateInfo:function(){\n\n    },\n\n    // 弹出窗的显示和隐藏效果\n    popWinAction:function(isVisible){\n        if(isVisible == true){\n            this.node.active = true;\n        }else{\n            this.setChatNode(false);\n        }\n    },\n\n    setChatNode:function(isActive,_reSet){\n        this.node.active = isActive;\n        // this.popWinAction(isActive);\n        if (_reSet) {\n            this.btnCooling(false,0);\n        }\n    },\n    \n});\n"]}