{"version":3,"sources":["../../../../../../assets/Script/ComponentScript/Scenes/assets/Script/ComponentScript/Scenes/ddz_rank.js"],"names":["cc","Class","extends","Component","properties","rankList","default","type","Node","backButton","Button","rankSprite","Sprite","texture","Texture2D","spriteFrame","SpriteFrame","rankType","treasureSelectedSprite","bonusSelectedSprite","shareTicket","titleLabel","RichText","titleLabel2","backAction","ddz","LOGD","AudioHelper","playEffect","EffectPath_mp3","back_button_click_sound","hall","GlobalFuncs","popScene","onTreasureButton","node","active","string","showOrigin","showRankListForShare","onBonusButton","useModel","ctor","onLoad","drawGameCanvas","backButtonH","getBackButtonPositionY","y","bottomWin","getComponent","parentScene","openDataContext","getOpenData","sharedCanvas","canvas","width","height","sprite","main","initWithElement","handleLoadedTexture","_refreshTexture","ty","Timer","setTimer","data","JSON","stringify","unscheduleAllCallbacks","showFriendRank","showGroupRank","changeButtonToRank","start","onDestroy","NotificationCenter","ignoreScope","hideBackButton","showBackButton"],"mappings":"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","file":"ddz_rank.js","sourceRoot":"../../../../../../assets/Script/ComponentScript/Scenes","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/class/index.html\n// Learn Attribute:\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/reference/attributes/index.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/life-cycle-callbacks/index.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        rankList : {\n            default : null,\n            type : cc.Node\n        },\n        backButton : {\n            default : null,\n            type : cc.Button\n        },\n        rankSprite : cc.Sprite,\n\n        texture:cc.Texture2D,\n        spriteFrame:{\n            default : null,\n            type : cc.SpriteFrame\n        },\n        rankType: 'chip',\n\n        treasureSelectedSprite : cc.Sprite,\n        bonusSelectedSprite : cc.Sprite,\n        shareTicket : \"\",\n        titleLabel : {\n            default : null,\n            type : cc.RichText\n        },\n        titleLabel2 : {\n            default : null,\n            type : cc.RichText\n        },\n    },\n    backAction : function () {\n        ddz.LOGD(null, \"backAction\");\n        ddz.AudioHelper.playEffect(ddz.EffectPath_mp3.back_button_click_sound, false);\n        hall.GlobalFuncs.popScene();\n    },\n    onTreasureButton : function () {\n        if(this.rankType == 'chip'){\n            return;\n        }\n        this.rankType = 'chip';\n        this.treasureSelectedSprite.node.active = true;\n        this.bonusSelectedSprite.node.active = false;\n        this.titleLabel.string = \"<color=#ffffff>财富榜</c>\";\n        this.titleLabel2.string = \"<color=#9C7343>奖金榜</c>\";\n        ddz.GlobalFuncs.showOrigin();\n        this.showRankListForShare();\n    },\n    onBonusButton : function () {\n        if(this.rankType == 'sumReward'){\n            return;\n        }\n        this.rankType = 'sumReward';\n        this.treasureSelectedSprite.node.active = false;\n        this.bonusSelectedSprite.node.active = true;\n        this.titleLabel.string = \"<color=#9C7343>财富榜</c>\";\n        this.titleLabel2.string = \"<color=#ffffff>奖金榜</c>\";\n        ddz.GlobalFuncs.showOrigin();\n        this.showRankListForShare();\n    },\n    useModel : function () {\n    },\n    // LIFE-CYCLE CALLBACKS:\n    ctor : function () {\n    },\n    onLoad : function () {\n        ddz.GlobalFuncs.drawGameCanvas();\n        var backButtonH = ddz.GlobalFuncs.getBackButtonPositionY();\n        if (backButtonH){\n            this.backButton.node.y = backButtonH;\n        }\n        var bottomWin = this.rankList.getComponent(\"ddz_rank_list\");\n        bottomWin.parentScene = this;\n\n        this.treasureSelectedSprite.node.active = true;\n        this.bonusSelectedSprite.node.active = false;\n        this.titleLabel.string = \"<color=#ffffff>财富榜</c>\";\n        this.titleLabel2.string = \"<color=#9C7343>奖金榜</c>\";\n        var openDataContext = ddz.GlobalFuncs.getOpenData();\n        if(!openDataContext){\n            return;\n        }\n        var sharedCanvas = openDataContext.canvas;\n        sharedCanvas.width  = 530;\n        sharedCanvas.height = 1890;\n\n        ddz.GlobalFuncs.showOrigin();\n        this.texture = new cc.Texture2D();\n        this.spriteFrame = new cc.SpriteFrame(this.texture);\n        var texture = this.texture;\n        var spriteFrame = this.spriteFrame;\n        var sprite = this.rankSprite;\n        var main = function () {\n            texture.initWithElement(sharedCanvas);\n            texture.handleLoadedTexture();\n            sprite.spriteFrame = spriteFrame;\n            sprite.spriteFrame._refreshTexture(texture);\n        };\n        main();\n        ty.Timer.setTimer(this, main, 1/10,1000);\n        // hall.adManager.hideAd();\n    },\n    showRankListForShare : function (data) {\n        hall.LOGD(\"==\",\"file = [ddz_rank] fun = [showRankListForShare] data = \" + JSON.stringify(this.shareTicket));\n        this.unscheduleAllCallbacks();\n        var openDataContext = ddz.GlobalFuncs.getOpenData();\n        if(!openDataContext){\n            return;\n        }\n        var sharedCanvas = openDataContext.canvas;\n        if(this.shareTicket == \"\"){\n            ddz.GlobalFuncs.showFriendRank(this.shareTicket,this.rankType);\n        }else {\n            ddz.GlobalFuncs.showGroupRank(this.shareTicket,this.rankType);\n        }\n        // ddz.GlobalFuncs.showGroupRank(this.shareTicket,this.rankType);\n        var texture = this.texture;\n        var spriteFrame = this.spriteFrame;\n        var sprite = this.rankSprite;\n        var main = function () {\n            texture.initWithElement(sharedCanvas);\n            texture.handleLoadedTexture();\n            sprite.spriteFrame = spriteFrame;\n            sprite.spriteFrame._refreshTexture(texture);\n        };\n        ty.Timer.setTimer(this, main, 1/10,1000);\n    },\n    changeButtonToRank : function (shareTicket) {\n        this.shareTicket = shareTicket;\n        this.showRankListForShare();\n        var bottomWin = this.rankList.getComponent(\"ddz_rank_list\");\n        bottomWin.changeButtonToRank();\n    },\n\n    start :function() {\n    },\n    onDestroy : function () {\n        ty.NotificationCenter.ignoreScope(this);\n        // wx.updateShareMenu({\n        //     withShareTicket: false\n        // });\n        this.unscheduleAllCallbacks();\n    },\n    hideBackButton : function () {\n        this.backButton.node.active = false;\n    },\n\n    showBackButton : function () {\n        this.backButton.node.active = true;\n    }\n\n    // update (dt) {},\n});\n"]}