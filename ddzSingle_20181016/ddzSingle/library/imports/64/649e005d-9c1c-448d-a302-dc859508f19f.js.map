{"version":3,"sources":["../../../../../../assets/Script/ComponentScript/component/assets/Script/ComponentScript/component/personalAssets.js"],"names":["cc","Class","extends","Component","properties","avatar","default","type","Node","coinLabel","Label","diamondLabel","jiPaiQiLabel","onLoad","string","hall","ME","udataInfo","diamondCount","ty","NotificationCenter","listen","ddz","EventType","UPDATE_DIAMOND_NUMBER","updateDiamond","updateCoin","UPDATE_COIN_NUMBER","updateInfo","wimdow","getComponent","UserInfo","userPic","gameModel","isLimit","setAvatarUrl","hideNameDisplay","num","number","getChip","GlobalFuncs","formatGold","updateJiPaiQi","onClickHeadBtn","curScene","director","getScene","BiLog","clickStat","clickStatEventType","clickStatEventTypeButtonClick","name","onPersonalInfo","onClickCoin","trigger","REMOVE_WINDOW_ANI","gotoMallScene","onClickDiamond","isClickShareReward","getDayInviteReward","onClickJiPaiQi","onDestroy","ignoreScope"],"mappings":"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","file":"personalAssets.js","sourceRoot":"../../../../../../assets/Script/ComponentScript/component","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/class/index.html\n// Learn Attribute:\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/reference/attributes/index.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/life-cycle-callbacks/index.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        avatar : {\n            default : null,\n            type : cc.Node\n        },\n\n        coinLabel : {\n            default : null,\n            type : cc.Label\n        },\n        diamondLabel : {\n            default : null,\n            type : cc.Label\n        },\n        jiPaiQiLabel : {\n            default : null,\n            type : cc.Label\n        }\n    },\n\n    onLoad:function () {\n        this.diamondLabel.string = hall.ME.udataInfo.diamondCount+\"\";\n        // this.jiPaiQiLabel.string = hall.ME.udataInfo.jiPaiQiCount+\"\";\n        ty.NotificationCenter.listen(ddz.EventType.UPDATE_DIAMOND_NUMBER,this.updateDiamond,this);\n        this.updateCoin();\n        ty.NotificationCenter.listen(ddz.EventType.UPDATE_COIN_NUMBER,this.updateCoin,this);\n        // ty.NotificationCenter.listen(ddz.EventType.UPDATE_JIPAIQI,this.updateJiPaiQi,this);\n    },\n\n    updateInfo:function () {\n        var wimdow = this.avatar.getComponent(\"Avatar\");\n        if(ty.UserInfo.userPic && ddz.gameModel.isLimit){\n            wimdow.setAvatarUrl(ty.UserInfo.userPic);\n            wimdow.hideNameDisplay();\n        }\n\n        this.updateCoin();\n        var num = hall.ME.udataInfo.diamondCount;\n        this.updateDiamond(num);\n    },\n\n    updateCoin: function () {\n        var number = hall.ME.getChip();\n        // hall.LOGD(\"\",\"file = [personalAssets] fun = [updateCoin] number = \" + number);\n        if (number) {\n            this.coinLabel.string = hall.GlobalFuncs.formatGold(number);\n        }else {\n            this.coinLabel.string = 0;\n        }\n    },\n\n    updateJiPaiQi:function(){\n        // this.jiPaiQiLabel.string = hall.ME.udataInfo.jiPaiQiCount+\"\";\n    },\n\n    updateDiamond: function (num) {\n        if (num) {\n            this.diamondLabel.string = hall.GlobalFuncs.formatGold(num);\n        }else {\n            this.diamondLabel.string = 0;\n        }\n    },\n\n    // 点击头像\n    onClickHeadBtn: function () {\n        var curScene = cc.director.getScene();\n        ty.BiLog.clickStat(ty.UserInfo.clickStatEventType.clickStatEventTypeButtonClick,[\"avatar\",curScene.name]);\n        hall.GlobalFuncs.onPersonalInfo();\n    },\n\n    // 点击金币\n    onClickCoin: function () {\n        ty.NotificationCenter.trigger(ddz.EventType.REMOVE_WINDOW_ANI);\n        var curScene = cc.director.getScene();\n        ty.BiLog.clickStat(ty.UserInfo.clickStatEventType.clickStatEventTypeButtonClick,[\"chipAdd\",curScene.name]);\n        hall.GlobalFuncs.gotoMallScene();\n    },\n\n    // 点击钻石\n    onClickDiamond: function () {\n        var curScene = cc.director.getScene();\n        ty.BiLog.clickStat(ty.UserInfo.clickStatEventType.clickStatEventTypeButtonClick,[\"diamondAdd\",curScene.name]);\n        // hall.GlobalFuncs.showDiamondWindowWithType('new');\n        // ddz.gameModel.queryNewInviteInfo();\n        ddz.isClickShareReward = true;\n        ddz.gameModel.getDayInviteReward();\n    },\n\n    // 点击记牌器\n    onClickJiPaiQi: function () {\n\n    },\n\n    onDestroy : function () {\n        ty.NotificationCenter.ignoreScope(this);\n    }\n});\n"]}