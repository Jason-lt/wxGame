{"version":3,"sources":["../../../../../../assets/Script/ComponentScript/Scenes/assets/Script/ComponentScript/Scenes/DdzTableScene.js"],"names":["DdzTableAniPlayer","require","DdzTableChatAni","cc","Class","extends","Component","ctor","ddz","GlobalFuncs","drawGameCanvas","_TAG","_leftPlayerController","_rightPlayerController","_leftChatController","_rightChatController","_operateController","_cardsBreakline","_mDizhuCalled","_cards","_selectedCards","_touchedCards","_playedCards","_extraCards","_isUserInteractive","_isInTrust","_status","Enums","PlayStatus","PLAY_STATUS_PREPARE","_touchCardIndexBegin","_touchCardIndexEnd","_multiNum","_leftSeatinfo","SeatInfo","_rightSeatinfo","_mySeatinfo","_mySeatIndex","AIRobots","mySeatIndex","_showCardIndex","_changeLaiZi","_topSeatinfo","_offLineGameLogic","offLineGameLogic","_tableInfo","_TableInfo","_tableState","_TableState","_topCardType","_playTips","_tipNum","_mode","PlayMode","PLAY_MODE_SINGLE","_type","PlayType","PLAY_TYPE_JINGDIAN","_roomId","cardPool","_laiziBaseCard","_cardAniPlayer","_chatAniPlayer","properties","cardPrefab","default","type","Prefab","cardSmallPrefab","goldPrefab","cardsContainer","Node","playedCardArea","cardsTip","Label","controlPanel","myHead","boor","landlord","leftPlayerPanel","rightPlayerPanel","bottomPlayerPanel","extraCardsNode","laiZiCardsNode","btnCancelInStruct","Button","lblStage","faPai","aniNode","chatNode","playModeNode","head_left","head_regiht","opNode","goldInfoNode","goldInfoLabel","jipaiqi","sureBtn","reStartBtn","musicOpen","musicClose","setGoldInfo","_info","node","active","string","showGoldInfo","onLoad","gameModel","isLoadTableScene","winSize","view","getFrameSize","width","height","scale","_cardBaseScale","ty","UserInfo","systemType","SYSTEMTYPE","iPhoneXType","wid","getComponent","Widget","top","widL","backButtonH","getBackButtonPositionY","y","initWithPar","LOCATION_SIGN","LEFT","RIGHT","init","setChatButtonActive","AudioHelper","playMusic","MusicPath_mp3","table_background_music","SystemInfo","tableBgMusicVolume","on","_cancelDeposite","NotificationCenter","listen","EventType","SHOW_GAME_WIN_ANI","_onShoGameWinAni","RESET_TABLE","_reset","REMOVE_TABLE_ANI","onRemoveAni","CHANGE_TO_SHOW_FROM_HODE","changeToShowFromHide","GAME_HIDE","onGameHide","CLICK_HEAD_BTN","onClickHeadBtn","SHOW_LAIZI_ON_TABLE","showLaiZiCardOnTable","USE_NEW_CARD_NOTE","userJiPaiQi","UPDATE_SELF_HEAD_IMAGE","changeSelfHead","UPDATE_SHARE_STATE","updateShareState","WX_LOGIN_SUCCESS","onWxLoginSuccess","NodePool","i","put","instantiate","smallCard","smallCardCom","push","setPosition","addChild","FIRSTLINECARDY","CARD_BIG_SIZE","myCardNote","setPlayController","isClickJiPaiQi","_initUI","wxLoginCode","that","wx","getSetting","success","res","authSetting","getOpenData","LOGD","TuyooSDK","loginWithOutAuthorization","login","initPlayGame","_initCardsInSingle","_startJiaodz","upDateGoldInfo","trigger","GAME_READY","onClickCoinStore","hall","MsgBoxManager","showToast","title","reStartGame","stopAllActions","shareType","Share","onShareType","clickStatShareTypeRestart","onClickReStart","BiLog","clickStat","clickStatEventType","clickStatEventTypeButtonClick","_config","gameConfig","getShareVideoConfigToCity","shareWithType","onClickSureBtn","onCloseMusic","stopMusic","onOpenMusic","laiZiCardNode","createNewCard","m_laiziNumber","x","cordCom","setDiZhuTag","showMask","scheduleOnce","returnCard","showBaseLaiZi","_changeHandLaiZiCards","bind","onClickCenterButton","isLaizi","laiziCard","resetWithNum","removeAllChildren","dizhuWin","dizhuIndex","normalInfo","m_dizhu","myIndex","widx","table_result_music","EffectPath_mp3","table_victory","aniName","table_lose","playLose","playWin","_flipExtraCards","bAnimation","bUpside","tmp","index","num","cardNode","size","get","card","start","onDestroy","ignoreScope","adManager","destroyWidthBannerAd","shut","off","TOUCH_END","_bgGroundTouch","matchResultPanel","arenaResultPanel","msgCache","blocked","gameWorld","model","m_ledTableList","_myChatController","_arenaPanelNode","_arenaPanel","_goldPanelNode","_goldPanel","_throughPanelNode","_throughPanel","_friendPanel","loginBtnManager","destroyTableBtn","AdManagerTYWX","getAdNodeByTag","hideAdNode","sxAdManager","hide","containerRect","rect","eventManager","addListener","event","EventListener","TOUCH_ONE_BY_ONE","swallowTouches","onTouchBegan","touch","pos","convertToNodeSpace","getLocation","rectContainsPoint","isTouchOnCards","_onTouchBegan","onTouchEnded","touchCardsEnd","onTouchMoved","touchCardsMoved","toGold","eventTouch","_point","getState","isStatus","PLAY_STATUS_GAMEOVER","_playBuchu","_clearSelectedCards","CLOSE_JIPAIJI","isAcceptGameWin","_waitShowJiaoDiZhu","setStatus","_setCardsTipVisible","_cardsIntervalX","cardCom","length","pop","_clearPlayedCards","clean","Reset","reset","showPrepare","setChatNode","showDizhuHat","to_pos","dizhuPos","getPreIndex","setDizhuHead","GetNextIndex","showDizhuHatOrigin","completeHatAni","from_pos","p","midy","midx","Math","abs","midPoint","controlPoints1","bezierToDst1","bezierTo","scaleChange","scaleTo","changePlayerAvatar","hasAnimation","refreshAvatarForeFriend","refreshAvatarForeFriendOrigin","isDiZhu","_isDizhu","nextCallBack","getEmoPos","requestAnimationFrame","data","_getPosFromIndex","cardIndex","posx","posy","cardsOriginX","firstLineCardCount","firstLineOriginX","secondLineOriginX","_rankCardsWithLaizi","lz_point","m_cardLaizi","lz_number","len","sort","SortCardFunc","isType","PLAY_TYPE_LAIZI","isHuanle","PLAY_TYPE_HUANLE","isReplay","PLAY_MODE_REPLAY","isSingle","val","isMode","isErdou","PLAY_TYPE_ERREN","tableInfo","setType","updateTableState","info","parseTableState","getMultiple","table_config","config","normal","multiNum","bc","bombCount","pow","mcc","m_call","mct","chuntian","m_state","TableState","TABLEDSTAT_PLAYING","mbc","m_bcmulti","m_bUpdatebcMulti","mshow","m_show","maxmulti","m_maxMulti","_refreshMultipleLabel","bWithAnimation","bUseServerData","forceUpdate","updateMultiple","getBaseScore","bVisible","tipType","arguments","str","PlayCardsTip","PLAYCARDSTIP_ILLEGAL","setCardTipsSpr","PLAYCARDSTIP_NOCARD","PLAYCARDSTIP_PLAY","parseMySeatInfo","parseSeatInfo","_PlayInSingle","result","checkGameOver","JSON","stringify","setMultiNum","offlineGameEndProcess","base","remouldResult","getMultiNum","seatPlayCardCount","hideAll","_startGameOverAnimation","offlingGameMarch","UPDATE_CARD_NOTE","_startPlay","removeAllPrepare","PLAY_STATUS_PLAYING","setPrepareVisible","bNoPlayLeftCardAudio","refreshCardsNum","startGame","callMulti","dizhu_index","showPlay","findActivePlayCards","runAction","sequence","delayTime","intervalTime","callFunc","PLAY_STATUS_JIAODZ","refreshOtherPlayerCardsNum","leftNum","_getCardsCnt","leftSeatIndex","changeShowLeftNum","rightNum","rightSeatIndex","updateJiaodzFromTableInfo","showJiaodz","leftCall","showJiaodzOnlyNumber","rightCall","_finishJiaodz","_startInsertExtra","getIsMale","ME","udataInfo","m_sex","PlayerSexEnum","SEX_MALE","_singleJiaodz","target","bLeft","call","getCall","m_grab","_classicJiaodz","audioName","playEffect","callFen","callNode","lblMsg","setCall","setClockVisible","happyJiaodz","file","_returnAllCards","_initMyCards","cards","playerCards","_refreshCardsLayer","_resetExtraCards","extra","dipai","objectInfo","m_baseCard","_refreshLayoutData","_getCardCountInLine","secondLineCardCount","maxCount","max","GetCardsOriginInterval","_cardsOriginX","cardsLayerWidth","getBoundingBox","cardWidth","firstLineWidth","secondLineWidth","_checkInFirstLineCards","_checkInSecondLineCards","canShowTag","showTag","setZIndex","_resetTopCardType","bNoshowCardstip","m_topseat","m_topCard","types","RobotGlobal","judgeType","findWinCardsFromArray","m_card","showTopCards","topSeatId","mySeatId","leftid","rightid","controller","bdizhu","TABLEDSTAT_CALLING","playTopCards","_insertExtraCards","_seatId","getPlayerCards","getDiPaiCard","initGame","_setSingleCardsInfo","playCardAni","mycards","rc","allTime","Timer","setTimer","addCardToPlayer","newcards","nc","_number","parent","poker","old_pos","getPosition","delay","move","moveTo","_oldP","setIsInTrust","isin","_resetPlayerCardsWithLaizi","resetCardsWithLaizi","point","numberToPoint","_findCards","return_arr","lz_pos","tip_number","j","card_number","playTip","up","btnPlay","interactable","getChildByName","playAnimationSoundByCardType","bMale","userPosition","sound","special_effect","getType","PaixingType","ROCKET","addBombCount","playRocket","BET_SCORE_CHANGE_ANI","BOMB_CARD","playBomb","AIRCRAFT_CARD","playPlane","AIRCRAFT_SINGLE_CARD","AIRCRAFT_DOUBLE_CARD","SHUNZI_CARD","playShunZi","LIANDUI_CARD","playLianDui","THREE_ONE_CARD","THREE_CARD","THREE_TWO_CARD","BOMB_TWO_CARD","BOMB_TWO_TWO_CARD","Playing_cards","_sendPlayCardInfo","params","MsgFactory","getTableCall","_playCards","checkLarger","dump","isLargerThan","getCards","clearCards","playCards","_playCardsFromServer","currentPlayPos","isMale","showBuchuSprite","filename","_playCardsInternal","_runPlayCardsAction","_groupCards","cardGroup","curSubArr","curPoint","allCardCount","lineCardCount","nextCount","_reorderCardsLayer","des","setOldPosition","scard","FindInArray","splice","audio","leftCardsNum","startY","startX","breakline","splitWidth","tox","toy","cardNum","shift","floor","showDropEffect","withOutAni","down","startDeposite","button_click_sound","_isTrustEnable","onActionWildCard","self","setLaizi","playChooseLaiziAnimation","playLaiZi","onActionReady","sid","SeatState","SEATDZSTAT_READY","getSceneType","SceneType","FRIEND","setBtnReadyState","onActionGameReady","saveDic","myCards","baseCard","basecard","setInLocalStorage","ORIGINCARDS","rcards","lcards","animationCom","Animation","ani","getAnimationState","play","stopCardAni","isPlaying","stop","timeGap","cancelTimer","showCallPanel","click_cards","showClock","getOpTime","time","onActionNext","_onOneGameCircle","bNoCard","hideClock","leftindex","userIndex","setLblMsg","setTipsSpr","onActionCall","nextIndex","preIndex","showCallNode","onActionGameStart","hasOwnProperty","onActionCard","cardTypd","sortedCards","card_types","sordPlayCards","playCardsInFriend","onActionRb","robots","tips","_clearTouchedCards","onActionGameWin","matchModel","new_gift_reward","canShowMatchRevivalPanel","canShowTableTopBanner","canShowTableBanner","isOncePlay","ReadStringFromLocalStorage","ONCEPLAYGAME","throughCount","m_playinfo","playcount","dzwin","isFlow","playGameFlow","rightindex","updateAllScore","_showCardsWhenGameOver","showResult","scoreData","m_base","setNotShowCards","left_cards","showCards","right_cards","_getIndexFromPos","firstLineIndex","secondLineIndex","tc","tmpi","begin","end","startpos","endpos","hitArea","hitSecond","_selectLegalTouchCards","touchCardsCount","nIndex","oneLongest","_findLongestFromSelectedCards","searchOneLongest","slice","hasSelect","cardOne","h","rocketWin","DOUBLE_CARD","pc","getPCArrayByPoint","nPoint","nCount","numberToValue","m","count","_isInShunzi","mypos","myVal","_value","minCnt","judgeCardVal","largerCnt","shutMatchResult","setTableScene","m_buyinChip","getAIScore","getChip","refresh","update","dt","triggerFristMsg"],"mappings":"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","file":"DdzTableScene.js","sourceRoot":"../../../../../../assets/Script/ComponentScript/Scenes","sourcesContent":["var DdzTableAniPlayer = require('DdzTableAniPlayer');\nvar DdzTableChatAni = require('DdzTableChatAni');\n\n/**\n * 牌桌组件\n */\ncc.Class({\n    extends: cc.Component,\n\n    ctor : function () {\n        ddz.GlobalFuncs.drawGameCanvas();\n\n        this._TAG = \"DdzTableScene\";\n\n        this._leftPlayerController = null;\n        this._rightPlayerController = null;\n\n        this._leftChatController = null;\n        this._rightChatController = null;\n\n        this._operateController = null;\n\n        this._cardsBreakline = 10;\n\n        this._mDizhuCalled = false; //仅用于抢地主模式，表示地主是否被叫\n\n        this._cards = [];\n        this._selectedCards = [];\n        this._touchedCards = [];\n        this._playedCards = [];\n        this._extraCards = [];\n        this._isUserInteractive = false; //玩家是否可以操作手牌\n        this._isInTrust = false; //是否处于托管状态\n        this._status = ddz.Enums.PlayStatus.PLAY_STATUS_PREPARE;\n        this._touchCardIndexBegin = -1;\n        this._touchCardIndexEnd = -1;\n        this._multiNum = 1;\n\n        //座位相关\n        this._leftSeatinfo = new ddz.SeatInfo();\n        this._rightSeatinfo = new ddz.SeatInfo();\n        this._mySeatinfo = new ddz.SeatInfo();\n        this._mySeatIndex = ddz.AIRobots.mySeatIndex || 1;\n        this._showCardIndex = 0;\n        this._changeLaiZi = false;\n\n        //二人斗地主的座位\n        this._topSeatinfo = new ddz.SeatInfo();\n\n        // 单机游戏逻辑\n        this._offLineGameLogic = ddz.offLineGameLogic();\n\n        // //table数据\n        this._tableInfo = new ddz._TableInfo();\n        this._tableState = new ddz._TableState();\n\n        //打牌逻辑存储\n        this._topCardType = null; //需要管的牌型，只能是一个牌型.不需要在每次table_info里面topcard有变动的时候都去转换，只在需要用到的时候转换\n        this._playTips = null; //轮到玩家操作时会自动寻找所有能管得上的手牌，如果没有，则进行提示，如果有，点提示按钮的时候用\n        this._tipNum = 0; //每次点提示按钮都会切换下一个提示牌，当收到下次该我出牌时重置回0\n\n        this._mode = ddz.Enums.PlayMode.PLAY_MODE_SINGLE;\n        this._type = ddz.Enums.PlayType.PLAY_TYPE_JINGDIAN; //经典，欢乐，比赛，癞子   联网版由服务器消息决定\n\n        this._roomId = null;\n\n        this.cardPool = null;\n        this._laiziBaseCard = null;\n\n        this._cardAniPlayer = new DdzTableAniPlayer(this);\n        this._chatAniPlayer = new DdzTableChatAni(this);\n    },\n\n    properties: {\n        cardPrefab : {\n            default : null,\n            type : cc.Prefab\n        },\n        cardSmallPrefab : cc.Prefab,\n        goldPrefab : cc.Prefab,\n        cardsContainer : cc.Node,   //手牌区\n        playedCardArea : cc.Node,   //出牌区\n        cardsTip : cc.Label,\n        controlPanel : cc.Node,\n        // myAvatar : cc.Node,\n        myHead : cc.Node,\n        boor : cc.Node,\n        landlord : cc.Node,\n        leftPlayerPanel : cc.Node,\n        rightPlayerPanel : cc.Node,\n        bottomPlayerPanel : cc.Node,\n        extraCardsNode : cc.Node,\n        // baseScore : cc.Node,\n        laiZiCardsNode : cc.Node,\n        btnCancelInStruct : cc.Button,\n        lblStage : cc.Label,\n        faPai: cc.Node,\n        aniNode: cc.Node,\n        chatNode: cc.Node,\n        playModeNode: cc.Node,\n        head_left: cc.Node,\n        head_regiht: cc.Node,\n\n        opNode : cc.Node,\n        goldInfoNode: cc.Node,\n        goldInfoLabel: cc.Label,\n\n        jipaiqi : cc.Node,\n\n        sureBtn:cc.Node,\n        reStartBtn:cc.Node,\n\n        musicOpen:cc.Node,\n        musicClose:cc.Node,\n\n    },\n\n    setGoldInfo:function(_info){\n        this.goldInfoLabel.node.active = true;\n        this.goldInfoLabel.string = _info;\n    },\n\n    showGoldInfo:function(){\n        this.goldInfoNode.active = true;\n    },\n\n    onLoad : function() {\n\n        ddz.GlobalFuncs.drawGameCanvas();\n        ddz.gameModel.isLoadTableScene = false;\n        var winSize = cc.view.getFrameSize();\n        if (winSize.width / winSize.height >= 10/16){\n            //宽屏分辨率适配\n            var scale = 0.7;\n            this.leftPlayerPanel.scale = scale;\n            this.rightPlayerPanel.scale = scale;\n            this.bottomPlayerPanel.scale = scale;\n            this.extraCardsNode.scale = scale;\n            this.laiZiCardsNode.scale = scale;\n            this.faPai.scale = scale;\n        }\n\n        this._cardBaseScale = this.playedCardArea.scale;\n\n        this.faPai.active = false;\n\n        // this.myHead.active = false;\n\n        if(ty.UserInfo.systemType == ty.UserInfo.SYSTEMTYPE.iPhoneXType){\n            var wid = this.leftPlayerPanel.getComponent(cc.Widget);\n            wid.top = 30;\n            var widL = this.rightPlayerPanel.getComponent(cc.Widget);\n            widL.top = 30;\n        }\n        var backButtonH = ddz.GlobalFuncs.getBackButtonPositionY();\n        if (backButtonH){\n            this.musicOpen.y = backButtonH;\n            this.musicClose.y = backButtonH;\n        }\n        // var size = cc.director.getWinSize();\n        // ddz.LOGD(null, \"当前的分辨率：w: \" + size.width + \", h：\" + size.height);\n        //\n        this._leftPlayerController = this.leftPlayerPanel.getComponent(\"PlayerPanel\");\n        this._leftPlayerController.initWithPar(true, false, this, ddz.LOCATION_SIGN.LEFT);\n\n        this._rightPlayerController = this.rightPlayerPanel.getComponent(\"PlayerPanel\");\n        this._rightPlayerController.initWithPar(false, false, this, ddz.LOCATION_SIGN.RIGHT);\n\n        this._operateController = this.controlPanel.getComponent(\"ControlPanel\");\n        this._operateController.init(this);\n\n        this._leftPlayerController.setChatButtonActive(false);\n        this._rightPlayerController.setChatButtonActive(false);\n        this._operateController.setChatButtonActive(false);\n\n        ddz.AudioHelper.playMusic(ddz.MusicPath_mp3.table_background_music, true, ty.SystemInfo.tableBgMusicVolume);\n\n\n        this.btnCancelInStruct.node.active = false;\n        this.btnCancelInStruct.node.on(\"click\" , this._cancelDeposite, this);\n\n        ty.NotificationCenter.listen(ddz.EventType.SHOW_GAME_WIN_ANI, this._onShoGameWinAni, this);\n        ty.NotificationCenter.listen(ddz.EventType.RESET_TABLE, this._reset, this);\n        ty.NotificationCenter.listen(ddz.EventType.REMOVE_TABLE_ANI, this.onRemoveAni, this);\n        ty.NotificationCenter.listen(ddz.EventType.CHANGE_TO_SHOW_FROM_HODE, this.changeToShowFromHide, this);\n        ty.NotificationCenter.listen(ddz.EventType.GAME_HIDE, this.onGameHide, this);\n        \n        ty.NotificationCenter.listen(ddz.EventType.CLICK_HEAD_BTN, this.onClickHeadBtn, this);\n        ty.NotificationCenter.listen(ddz.EventType.SHOW_LAIZI_ON_TABLE, this.showLaiZiCardOnTable, this);\n\n        ty.NotificationCenter.listen(ddz.EventType.USE_NEW_CARD_NOTE, this.userJiPaiQi,this);\n        ty.NotificationCenter.listen(ddz.EventType.UPDATE_SELF_HEAD_IMAGE, this.changeSelfHead,this);\n        ty.NotificationCenter.listen(ddz.EventType.UPDATE_SHARE_STATE,this.updateShareState,this);\n        ty.NotificationCenter.listen(ty.EventType.WX_LOGIN_SUCCESS, this.onWxLoginSuccess, this);\n        this.onWxLoginSuccess();\n        //初始化对象池,添加27张手牌\n        this.cardPool = new cc.NodePool();\n\n        var i;\n        for (i = 0; i < 27; i++){\n            this.cardPool.put(cc.instantiate(this.cardPrefab));\n        }\n\n        //初始化三张小牌\n        var smallCard, smallCardCom;\n\n        for (i = 0; i < 3; i++){\n            smallCard = cc.instantiate(this.cardSmallPrefab);\n            smallCardCom = smallCard.getComponent('Card');\n            this._extraCards.push(smallCardCom);\n\n            smallCard.setPosition(60 * (i-1), 0);\n            this.extraCardsNode.addChild(smallCard);\n\n            smallCard.active = false;\n        }\n\n        //添加癞子底牌\n        smallCard = cc.instantiate(this.cardSmallPrefab);\n        smallCardCom = smallCard.getComponent('Card');\n\n        this._laiziBaseCard = smallCardCom;\n        smallCard.setPosition(0, 0);\n        this.laiZiCardsNode.addChild(smallCard);\n        smallCard.active = false;\n\n        this.FIRSTLINECARDY = this.cardsContainer.height - ddz.CARD_BIG_SIZE.height;\n\n        this.myCardNote = [];\n        this.jipaiqi.getComponent(\"jipaiqi\").setPlayController(this);\n        ddz.isClickJiPaiQi = false;\n        this.jipaiqi.active = false;\n        this._initUI();\n    },\n\n    onWxLoginSuccess:function () {\n        if (ty.wxLoginCode){\n            //如果已经登录成功了,就检查授权\n            var that = this;\n            wx.getSetting({\n                success:function(res) {\n                    if (!res.authSetting['scope.userInfo']) {\n                        if (!ddz.GlobalFuncs.getOpenData(true)){\n                            //不能使用开放数据域的版本,还是需要使用原来的方式\n                            // hall.loginBtnManager.showLoginBtn();\n                            ddz.LOGD(\"\",\"file = [Ddz] fun = [onWxLoginSuccess] 111\");\n                            ty.TuyooSDK.loginWithOutAuthorization(ty.wxLoginCode);\n                        }\n                        else{\n                            ty.TuyooSDK.loginWithOutAuthorization(ty.wxLoginCode);\n                            ddz.LOGD(\"\",\"file = [Ddz] fun = [onWxLoginSuccess] 222\");\n                        }\n                        //把授权按钮显示在礼包位置\n                    }\n                    else{\n                        // ty.wxUserInfo = true;\n                        // that.onGetUserInfo(res);\n                        // 已经授权的,直接登录\n                        ddz.LOGD(\"\",\"file = [Ddz] fun = [onWxLoginSuccess] 已经授权,直接登录\");\n                        ty.TuyooSDK.login();\n                    }\n                }\n            });\n        }\n    },\n    \n    //初始游戏\n    initPlayGame:function(){\n        this._initCardsInSingle();\n\n        //游戏设置为叫地主状态，等待服务器返回轮到谁叫地主\n        this._startJiaodz();\n\n        this.upDateGoldInfo();\n        ty.NotificationCenter.trigger(ddz.EventType.GAME_READY);\n    },\n\n    //点击金币商城\n    onClickCoinStore:function(){\n        hall.MsgBoxManager.showToast({title:'金币可以购买商品,敬请期待'});\n    },\n\n    reStartGame:function(){\n        this._reset();\n        this.node.stopAllActions();\n        this.initPlayGame();\n        // this.node.runAction(cc.sequence(cc.delayTime(1), cc.callFunc(this.initPlayGame.bind(this), this)));\n        // this.initPlayGame();\n        this.sureBtn.active = false;\n    },\n\n    updateShareState:function(shareType){\n        if (shareType == ddz.Share.onShareType.clickStatShareTypeRestart){\n            this.reStartGame();\n        }\n    },\n\n    onClickReStart:function(){\n        ty.BiLog.clickStat(ty.UserInfo.clickStatEventType.clickStatEventTypeButtonClick,\n            [\"clickReStart\",\"click\"]);\n\n        var _config = ddz.gameConfig.getShareVideoConfigToCity();\n        if (_config && _config[\"reStart\"].type == \"share\") {\n            ddz.Share.shareWithType(ddz.Share.onShareType.clickStatShareTypeRestart);\n        }\n    },\n\n    onClickSureBtn:function(){\n        this.initPlayGame();\n        this.sureBtn.active = false;\n    },\n\n    onCloseMusic:function(){\n        ddz.AudioHelper.stopMusic();\n        this.musicOpen.active = false;\n        this.musicClose.active = true;\n    },\n\n    onOpenMusic:function(){\n        ddz.AudioHelper.playMusic(ddz.MusicPath_mp3.table_background_music, true, ty.SystemInfo.tableBgMusicVolume);\n        this.musicOpen.active = true;\n        this.musicClose.active = false;\n    },\n\n    showLaiZiCardOnTable:function () {\n        //创建一张牌,显示在中心点\n        var laiZiCardNode = this.createNewCard(this.m_laiziNumber);\n        laiZiCardNode.x = -laiZiCardNode.width/2;\n        laiZiCardNode.y = -laiZiCardNode.height/2;\n        var cordCom = laiZiCardNode.getComponent('Card');\n        cordCom.setDiZhuTag(false);\n        cordCom.showMask(false);\n        this.node.addChild(laiZiCardNode);\n\n        this.scheduleOnce(function () {\n            this.returnCard(laiZiCardNode);\n            this.showBaseLaiZi();\n            this._changeHandLaiZiCards();\n        }.bind(this), 1.5);\n    },\n    \n    // 点击tips 邀请好友按钮\n    onClickCenterButton:function(){\n        \n    },\n\n    showBaseLaiZi:function () {\n        if (this.isLaizi()){\n            this.extraCardsNode.x = -50;\n            var laiziCard = this._laiziBaseCard;\n            laiziCard.resetWithNum(this._tableState.m_laiziNumber);\n            laiziCard.node.active = true;\n        }\n    },\n\n    onRemoveAni:function () {\n        this.aniNode.removeAllChildren();\n    },\n\n    _onShoGameWinAni:function (dizhuWin) {\n        var dizhuIndex = this._tableState.normalInfo.m_dizhu;\n        var myIndex = this._mySeatIndex;\n\n        var widx = 0;\n        var table_result_music = ddz.EffectPath_mp3.table_victory;\n        var aniName;\n        if (dizhuWin){\n            if (myIndex == dizhuIndex){\n                aniName = \"shengli\";\n            }\n            else{\n                aniName = \"shibai\";\n                widx = 1;\n            }\n        }\n        else{\n            if (myIndex == dizhuIndex){\n                aniName = \"shibai\";\n                widx = 1;\n            }\n            else{\n                aniName = \"shengli\";\n            }\n        }\n\n        if (widx == 1){\n            table_result_music = ddz.EffectPath_mp3.table_lose;\n            this._cardAniPlayer.playLose();\n        }\n        else{\n            this._cardAniPlayer.playWin();\n        }\n        ddz.AudioHelper.playMusic(table_result_music, false);\n\n        // this.myRole.setAnimation(0, aniName, true);\n    },\n\n    _flipExtraCards: function (bAnimation, bUpside) {\n        ddz.LOGD(this._TAG, \"flip extra cards....\");\n        var tmp;\n        for (var index = 0; index < 3; index++) {\n            tmp = this._extraCards[index];\n            tmp.node.active = bUpside;\n        }\n    },\n\n    /**\n     * 创建一张新手牌(也有可能是从池中取出来的)\n     * @param num 数值\n     */\n    createNewCard : function (num) {\n        var cardNode;\n        if (this.cardPool.size() > 0){\n            cardNode = this.cardPool.get();\n        }\n        else{\n            cardNode = cc.instantiate(this.cardPrefab);\n        }\n        cardNode.getComponent('Card').resetWithNum(num);\n        return cardNode;\n    },\n\n    /**\n     * 手牌不用了,归还牌池\n     * @param card\n     */\n    returnCard:function (card) {\n        this.cardPool.put(card);\n    },\n\n    start : function () {\n\n    },\n\n    // update (dt) {},\n\n    onDestroy:function () {\n        ty.NotificationCenter.ignoreScope(this);\n        hall.adManager.destroyWidthBannerAd();\n        this._cardAniPlayer.shut();\n        this._cardAniPlayer = null;\n        this._chatAniPlayer.shut();\n        this._chatAniPlayer = null;\n        this.node.off(cc.Node.EventType.TOUCH_END, this._bgGroundTouch, this);\n        ddz.AudioHelper.stopMusic();\n        ddz.matchResultPanel = null;\n        ddz.arenaResultPanel = null;\n        ddz.msgCache.blocked = true;\n        hall.gameWorld.model.m_ledTableList = [];\n        // 当前场景已经销毁,chatNode 不在重复清理节点\n        if (this._rightChatController){\n            this._rightChatController = null;\n        }\n        if (this._leftChatController){\n            this._leftChatController = null;\n        }\n        if (this._myChatController){\n            this._myChatController = null;\n        }\n\n        if (this._arenaPanelNode){\n            this._arenaPanelNode = null;\n            this._arenaPanel = null;\n        }\n\n        if (this._goldPanelNode){\n            this._goldPanelNode = null;\n            this._goldPanel = null;\n        }\n\n        if (this._throughPanelNode){\n            this._throughPanelNode = null;\n            this._throughPanel = null;\n        }\n\n        if (this._friendPanel){\n            this._friendPanel = null;\n        }\n        hall.loginBtnManager.destroyTableBtn();\n\n        if (hall.AdManagerTYWX && hall.AdManagerTYWX.getAdNodeByTag(\"tableAdNode\")) {\n            hall.AdManagerTYWX.getAdNodeByTag(\"tableAdNode\").hideAdNode();\n        }\n\n        if (hall.sxAdManager) {\n            hall.sxAdManager.hide();\n        }\n    },\n    \n    /*===========*/\n\n    _initUI: function() { //先创建自身的UI，再创建子容器的UI，因为原来代码土，子容器用到了父容器内容，不先创建自身的，会出错\n        this.sureBtn.active = true;\n        //测试代码\n        this._isUserInteractive = true;\n\n        var that = this;\n        var containerRect = cc.rect(0, 0, this.cardsContainer.width, this.cardsContainer.height);\n        cc.eventManager.addListener({\n            event: cc.EventListener.TOUCH_ONE_BY_ONE,\n            swallowTouches: true,\n            onTouchBegan: function(touch, event) {\n                if (!that._isUserInteractive || that._isInTrust) {\n                    return false;\n                }\n                var pos = that.cardsContainer.convertToNodeSpace(touch.getLocation());\n                if (cc.rectContainsPoint(containerRect, pos) && that.isTouchOnCards(pos)) {\n                    return that._onTouchBegan(pos);\n                }\n                return false;\n            },\n            onTouchEnded: function(touch, event) {\n                if (!that._isUserInteractive || that._isInTrust) {\n                    return;\n                }\n                that.touchCardsEnd();\n                // var pos = that.cardsContainer.convertToNodeSpace(touch.getLocation());\n                // if (cc.rectContainsPoint(containerRect, pos) && that.isTouchOnCards(pos)) {\n                //     return that._onTouchBegan(pos);\n                // }\n            },\n            onTouchMoved: function(touch, event) {\n                if (!that._isUserInteractive || that._isInTrust) {\n                    return;\n                }\n                var pos = that.cardsContainer.convertToNodeSpace(touch.getLocation());\n                if (cc.rectContainsPoint(containerRect, pos)) {\n                    if (that.isTouchOnCards(pos)) {\n                        that.touchCardsMoved(pos);\n                    }\n                }\n            }\n        }, this.cardsContainer);\n\n        this.toGold();\n        // this._refreshMultipleLabel(false, true, true);\n        this.node.on(cc.Node.EventType.TOUCH_END, this._bgGroundTouch, this);\n    },\n    _bgGroundTouch:function (eventTouch) {\n        if (eventTouch.touch._point.y > 100){\n            if (this._operateController.getState() == 10) {\n                if (!this.isStatus(ddz.Enums.PlayStatus.PLAY_STATUS_GAMEOVER)) {\n                    this._operateController._playBuchu();\n                }\n            }else {\n                this._clearSelectedCards();\n            }\n            // if(this.cardsTip.string == \"没有牌能大过上家\"){\n            //     if (!this.isStatus(ddz.Enums.PlayStatus.PLAY_STATUS_GAMEOVER)) {\n            //         this._operateController._playBuchu();\n            //     }\n            // }else {\n            //     this._clearSelectedCards();\n            // }\n        }\n    },\n\n    _reset: function() {\n        ty.NotificationCenter.trigger(ddz.EventType.CLOSE_JIPAIJI);\n        this.myCardNote = [];\n        this.onRemoveAni();\n        ddz.gameModel.isAcceptGameWin = false;\n        this._waitShowJiaoDiZhu = false;\n        this.sureBtn.active = false;\n        this.jipaiqi.active = false;\n        this.reStartBtn.active = true;\n        this.faPai.active = false;\n        this._showCardIndex = 0;\n        this._multiNum = 1;\n        this._mDizhuCalled = false;\n        this.setStatus(ddz.Enums.PlayStatus.PLAY_STATUS_PREPARE);\n\n        this._topCardType = null;\n        this._playTips = null;\n        this._tipNum = 0;\n        this._setCardsTipVisible(false);\n\n        this.goldInfoNode.active = false;\n        this._changeLaiZi = false;\n\n        this.goldInfoLabel.node.active = false;\n\n        //触摸相关\n        this._cardsIntervalX = 0;\n        this._cardsBreakline = 10;\n        this._touchCardIndexBegin = -1;\n        this._touchCardIndexEnd = -1;\n\n        //手牌\n        var cardCom;\n        while (this._cards.length > 0){\n            cardCom = this._cards.pop();\n            this.returnCard(cardCom.node);\n        }\n\n        //////////////////////////////////////////////////////////底牌,显示背面\n        for (i = 0; i < this._extraCards.length; i++) {\n            var card = this._extraCards[i];\n            //初始是翻面状态\n            card.node.active = false;\n        }\n\n        this.extraCardsNode.x = 0;\n        this._laiziBaseCard.node.active = false;\n\n        this._selectedCards = [];\n        this._touchedCards = [];\n        this._clearPlayedCards();\n\n        //座位信息\n        if (!this._friendPanel) {\n            this._leftSeatinfo.clean();\n            this._rightSeatinfo.clean();\n        }\n        this._tableState.Reset();\n        if (this._leftPlayerController) {\n            this._leftPlayerController.reset();\n        }\n        if (this._rightPlayerController) {\n            this._rightPlayerController.reset();\n        }\n\n        this.boor.active = true;\n        this.landlord.active = false;\n\n\n        if (this._goldPanel){\n            // this.myAvatar.active = true;\n            this._goldPanel.reset();\n        }\n        this._topCardType = null;\n\n        this._leftPlayerController.setChatButtonActive(false);\n        this._rightPlayerController.setChatButtonActive(false);\n        this._operateController.setChatButtonActive(false);\n\n        this._operateController.showPrepare(false); //联网玩法默认已经准备\n\n        this._isUserInteractive = false; //玩家是否可以操作手牌\n        this._isInTrust = false; //是否处于托管状态\n        this.btnCancelInStruct.node.active = this._isInTrust;\n\n        this.head_left.stopAllActions();\n        this.head_regiht.stopAllActions();\n        if (this._rightChatController) {\n            this._rightChatController.setChatNode(false,true);\n        }\n        if (this._leftChatController) {\n            this._leftChatController.setChatNode(false,true);\n        }\n        if (this._myChatController){\n            this._myChatController.setChatNode(false,true);\n        }\n        ddz.AIRobots.reset();\n    },\n\n    showDizhuHat : function (to_pos) {\n        var dizhuIndex = ddz.AIRobots.dizhuPos;\n        if (dizhuIndex == this._mySeatIndex) {\n            this.boor.active = false;\n            this.landlord.active = true;\n        }else if (dizhuIndex == ddz.GlobalFuncs.getPreIndex(this._mySeatIndex)) { //\n            this._leftPlayerController.setDizhuHead();\n        }else if (dizhuIndex == ddz.GlobalFuncs.GetNextIndex(this._mySeatIndex)) { //\n            this._rightPlayerController.setDizhuHead();\n        }\n    },\n    showDizhuHatOrigin : function (to_pos) {\n        var dizhuIndex = ddz.AIRobots.dizhuPos;\n        if (dizhuIndex == this._mySeatIndex) {\n            this.boor.active = false;\n            this.landlord.active = true;\n        }else if (dizhuIndex == ddz.GlobalFuncs.getPreIndex(this._mySeatIndex)) { //\n            this._leftPlayerController.setDizhuHead();\n        }else if (dizhuIndex == ddz.GlobalFuncs.GetNextIndex(this._mySeatIndex)) { //\n            this._rightPlayerController.setDizhuHead();\n        }\n    },\n    completeHatAni : function () {\n        var to_pos = this.dizhuPos;\n        // to_pos.y += 50;\n        var from_pos = cc.p(0,50);\n        var midy;\n        var midx;\n\n        if (Math.abs(to_pos.x - from_pos.x) < 100){\n            midx = to_pos.x + 200;\n            midy = from_pos.y + (to_pos.y - from_pos.y)/2;\n        }else if (Math.abs(to_pos.y - from_pos.y) < 100){\n            midx = (to_pos.x - from_pos.x) / 2;\n            midy = from_pos.y;\n        }else {\n            midx = -200;\n            midy = from_pos.y + (to_pos.y - from_pos.y)/2 + 100;\n        }\n        ddz.LOGD(\"\", \"曲线运动中间点 midx = \" + midx + \"  midy = \" + midy );\n        var midPoint = cc.p(midx, midy);\n        var controlPoints1 = [     from_pos,     midPoint,     to_pos   ];\n        var bezierToDst1 = cc.bezierTo(0.7, controlPoints1);\n\n        var scaleChange = cc.scaleTo(0.7,1,1);\n\n    },\n\n    /**\n     * 变身\n     */\n    changePlayerAvatar : function (hasAnimation) {\n\n        // if (this._friendPanel){\n            if(hasAnimation){\n                this._leftPlayerController.refreshAvatarForeFriend();\n                this._rightPlayerController.refreshAvatarForeFriend();\n            }else {\n                this._leftPlayerController.refreshAvatarForeFriendOrigin();\n                this._rightPlayerController.refreshAvatarForeFriendOrigin();\n            }\n        \n\n            var isDiZhu = this._isDizhu(this._mySeatIndex);\n\n            if(isDiZhu){\n                var that = this;\n                var nextCallBack = function () {\n                    var to_pos = that.getEmoPos(that._mySeatIndex);\n                    if(hasAnimation){\n                        that.showDizhuHat(to_pos);\n                    }else {\n                        that.showDizhuHatOrigin(to_pos);\n                    }\n                };\n                requestAnimationFrame(nextCallBack);\n\n            }\n            return;\n        // }\n        \n        /**\n         * 动态加载sp动画\n         */\n        // cc.loader.loadRes(spDataPath, sp.SkeletonData, function (err, skeletonData) {\n        //     this.myRole.skeletonData = skeletonData;\n        //     this.myRole.setAnimation(0, ddz.ROLE_ACTION.CHANGTAI, true);\n        //     var scX = 0.7;\n        //     var scY = 0.7;\n        //     if (spDataPath == \"spine/ddz_newoneself_nongmin\"){\n        //         scX = -0.7;\n        //     }\n        //     else if (spDataPath == \"spine/ddz_newoneself_dizhupo\"){\n        //         //地主婆用小比例\n        //         scX = 0.6;\n        //         scY = 0.6;\n        //     }\n        //     this.myRole.node.scaleX = scX;\n        //     this.myRole.node.scaleY = scY;\n        // }.bind(this));\n    },\n\n    changeSelfHead:function(data){\n\n    },\n\n\n    _getPosFromIndex: function(index) {\n\n        var cardIndex, posx, posy, cardsOriginX;\n\n        if (index < this.firstLineCardCount){\n            cardsOriginX = this.firstLineOriginX;\n            posy = this.FIRSTLINECARDY;\n            cardIndex = index;\n        }\n        else{\n            cardsOriginX = this.secondLineOriginX;\n            posy = 0;\n            cardIndex = index - this.firstLineCardCount;\n        }\n\n        posx = cardsOriginX + this._cardsIntervalX * cardIndex;\n        return cc.p(posx, posy);\n    },\n\n    // 有癞子时从新对手牌进行排序\n    _rankCardsWithLaizi: function() {\n        var lz_point = this._tableState.normalInfo.m_cardLaizi;\n        var lz_number = this._tableState.m_laiziNumber;\n        var len = this._cards.length;\n        for (var i = 0; i < len; i++) {\n            if (this._cards[i]._info._point - 1 == lz_point) {\n                this._cards[i].resetWithNum(lz_number);\n            }\n        }\n        this._cards.sort(ddz.GlobalFuncs.SortCardFunc);\n    },\n\n    isLaizi: function() {\n        return this.isType(ddz.Enums.PlayType.PLAY_TYPE_LAIZI);\n    },\n    isHuanle: function() {\n        return this.isType(ddz.Enums.PlayType.PLAY_TYPE_HUANLE);\n    },\n\n    isReplay: function() {\n        return this._mode == ddz.Enums.PlayMode.PLAY_MODE_REPLAY;\n    },\n\n    isSingle: function(){\n        return this._mode == ddz.Enums.PlayMode.PLAY_MODE_SINGLE;\n    },\n\n    //为状态提供两个接口\n    isStatus: function(val) {\n        return this._status == val;\n    },\n    setStatus: function(val) {\n        this._status = val;\n    },\n    isType: function(val) {\n        return this._type == val;\n    },\n    //我是不是地主\n    _isDizhu: function(index) {\n        return ddz.AIRobots.dizhuPos == index;\n    },\n\n    isMode: function(val) {\n        return this._mode == val;\n    },\n    isErdou: function(){\n        //判断是否是二斗\n        return this.isType(ddz.Enums.PlayType.PLAY_TYPE_ERREN);\n    },\n    tableInfo: function() {\n        return this._tableInfo;\n    },\n\n    setType: function(val) {\n        this._type = val;\n    },\n\n    updateTableState: function(info) {\n        // ddz.LOGD(this._TAG, \"table state is : \" + JSON.stringify(info[\"stat\"]));\n        this._tableState.parseTableState(info[\"stat\"]);\n    },\n\n    /**\n     * 获取倍数\n     * @returns {number}\n     */\n    getMultiple:function () {\n        var table_config = this._tableInfo.config;\n\n        var normal = this._tableState.normalInfo;\n        // var multiNum = ddz.AIRobots.callMulti;\n        var multiNum = 1;\n        ddz.LOGD(\"\",\"file = [DdzTableScene] fun = [getMultiple] multiNum 111 = \" + multiNum);\n        //炸弹\n        // var bc = normal.m_bomb;\n        var bc = ddz.AIRobots.bombCount;\n        if (bc > 0) {\n            multiNum *= Math.pow(2, bc);\n        }\n        //抢地主加倍\n        var mcc = normal.m_call;\n        if (mcc > 0) {\n            multiNum *= mcc;\n        }\n        //春天\n        // var mct = normal.m_chuntian;\n        var mct = ddz.AIRobots.chuntian;\n        if (mct > 0) {\n            multiNum *= mct;\n        }\n        if (normal.m_state == ddz.Enums.TableState.TABLEDSTAT_PLAYING) {\n            //底牌\n            var mbc = normal.m_bcmulti;\n            if (mbc > 0) {\n                multiNum *= mbc;\n            }\n            this._tableState.m_bUpdatebcMulti = false;\n        }\n\n        //明牌加倍\n        var mshow = normal.m_show;\n        if (mshow > 0) {\n            multiNum *= mshow;\n        }\n        var maxmulti = table_config.m_maxMulti;//如果有封顶,就用封顶\n        if (maxmulti > 0 && multiNum >= maxmulti) {\n            multiNum = maxmulti;\n        }\n        ddz.LOGD(\"\",\"file = [DdzTableScene] fun = [getMultiple] multiNum = \" + multiNum);\n        return multiNum;\n    },\n\n    //刷新倍数的label字符串\n    //bUseServerData表示用服务器数据，而不使用客户端统计数据\n    _refreshMultipleLabel: function(bWithAnimation, bUseServerData, forceUpdate) {\n        // 单机的基数固定为100\n        if (bUseServerData) {\n            var multiNum = this.getMultiple();\n            if (this._multiNum != multiNum || forceUpdate) {\n                if (bWithAnimation){\n                    // ddz.AudioHelper.playEffect(ddz.EffectPath_mp3[\"multiple\"], false);\n                }\n                this._multiNum = multiNum;\n\n                if (this._goldPanel){\n                    this._goldPanel.updateMultiple(this.getBaseScore(), this._multiNum);\n                }\n                \n            }\n        }\n    },\n\n    /**\n     * 设置是否显示，或者显示的是出牌不符合规则，还是没有牌大的过上家\n     * @param bVisible\n     * @param tipType\n     * @private\n     */\n    _setCardsTipVisible: function(bVisible, tipType) {\n        if (arguments.length > 1) {\n            // this.cardsTip.node.active = true;\n            this.cardsTip.node.active = false;\n            var str = \" \";\n            if (tipType == ddz.Enums.PlayCardsTip.PLAYCARDSTIP_ILLEGAL){\n                // str = \"出牌不符合规则\";\n                this._operateController.setCardTipsSpr(7);\n            }\n            else if (tipType == ddz.Enums.PlayCardsTip.PLAYCARDSTIP_NOCARD){\n                this._operateController.setCardTipsSpr(10);\n                // str = \"没有牌能大过上家\";\n            }\n            else if (tipType == ddz.Enums.PlayCardsTip.PLAYCARDSTIP_PLAY){\n                // str = \"请选择要出的牌\";\n                this._operateController.setCardTipsSpr(7);\n            }\n            // this.cardsTip.string = str;\n        }\n        else{\n            // this.cardsTip.node.active = bVisible;\n            if (!bVisible) {\n                this._operateController.setCardTipsSpr();\n            }\n        }\n    },\n\n    parseMySeatInfo: function(info) {\n        this._mySeatinfo.parseSeatInfo(info, this._mySeatIndex);\n    },\n\n\n    _PlayInSingle: function() {\n        //单机\n        var result = ddz.AIRobots.checkGameOver();\n        ddz.LOGD(\"\",\"file = [DdzTableScene] fun = [_PlayInSingle] result = \" + JSON.stringify(result))\n        if (result) {\n            // 统计倍数等信息\n            var multiNum = this.getMultiple();\n            if(this._isDizhu(this._mySeatIndex)){\n                multiNum *= 2;\n            }\n            result['slam'] = multiNum >= 128;\n            result['chuntian'] = ddz.AIRobots.chuntian;\n\n            // 停止所有的AI计时器\n            // ddz.chatHelper.stopAllTimer();\n            this.setStatus(ddz.Enums.PlayStatus.PLAY_STATUS_GAMEOVER);\n            // this['shop_tag'].setVisible(false);\n            this._offLineGameLogic.setMultiNum(multiNum);\n            //\n            this._offLineGameLogic.offlineGameEndProcess(this._tableState,result,0,0,0);\n            //\n            var base = this.getBaseScore();\n            var dizhuPos = ddz.AIRobots.dizhuPos;\n            this._offLineGameLogic.remouldResult(result,0,0,multiNum,base,dizhuPos,222, this._tableState);\n            // this._offLineGameLogic.updateGameData(this._bottomController[\"single_coin_label\"], this._isSingleBreak);\n            this._multiNum = this._offLineGameLogic.getMultiNum();\n            // 重置三个玩家的出牌次数\n            for(var i = 0;i < 3;i++){\n                ddz.AIRobots.seatPlayCardCount[i] = 0;\n            }\n\n            // 不再显示\"不出\"图片\n            // this._operateController.showPlayNode(false);\n            this._operateController.hideAll();\n            //游戏结束\n            this.setStatus(ddz.Enums.PlayStatus.PLAY_STATUS_GAMEOVER);\n            // 开始结算动画\n            this._startGameOverAnimation(this, result);\n\n            // if (this.gameResult.not(ddz.GameResultKind.Invalid) &&\n            //     this.gameResult.not(ddz.GameResultKind.NoWin) ) {\n            //     // 牌局结束事件\n            //     var isWin = this.gameResult.not(ddz.GameResultKind.Lose);\n            //     var chapter = ddz.GameWorld.singleBreakWorld[\"bigGameId\"];\n            //     var level = ddz.GameWorld.singleBreakWorld[\"smallGameId\"];\n            //     var isChuntian = this.gameResult.is(ddz.GameResultKind.ChunTian);\n            //     var isDizhu = this._isDizhu(this._mySeatIndex);\n            //     var isDaManGuan = this.gameResult.is(ddz.GameResultKind.DaManGuan);\n            //     cc.log('ddz.SingleEvent.PlayerTableWinLoseEvent', chapter, level, isWin, isChuntian, isDizhu, isDaManGuan);\n            //     var event = new ddz.SingleEvent.PlayerTableWinLoseEvent(\n            //         chapter, level, isWin, isChuntian, isDizhu, isDaManGuan, this._multiNum\n            //     );\n            //     ty.NotificationCenter.trigger(ddz.SingleEvent.PlayerTableWinLoseEvent.eventName, event);\n            // }\n            //\n            // this.result = result;\n            return;\n        }\n\n        this._offLineGameLogic.offlingGameMarch(this, ddz.AIRobots.dizhuPos);\n        ty.NotificationCenter.trigger(ddz.EventType.UPDATE_CARD_NOTE);\n    },\n\n    _startPlay: function() {\n        // ddz.LOGD(this._TAG, \"start play now\");\n        this._isUserInteractive = true;\n        this.removeAllPrepare();\n        //在刚开始一定不用播剩2、1张的音效；在短线重连后播放意义不大；在取消托管后也会进到这，主要是\n        //不要再取消托管时重复播放剩余张数的音效\n\n        this.setStatus(ddz.Enums.PlayStatus.PLAY_STATUS_PLAYING);\n\n        // 清空选中的牌\n        this._selectedCards = [];\n        this._leftPlayerController.setPrepareVisible(false);\n        this._rightPlayerController.setPrepareVisible(false);\n        // this._operateController.setPrepareVisible(false);\n\n        var bNoPlayLeftCardAudio = true;\n        this._leftPlayerController.refreshCardsNum(bNoPlayLeftCardAudio);\n        this._rightPlayerController.refreshCardsNum(bNoPlayLeftCardAudio);\n        // this._operateController.refreshCardsNum(bNoPlayLeftCardAudio);\n\n        ddz.AIRobots.startGame();\n        this._tableState.normalInfo.m_call = ddz.AIRobots.callMulti;\n        ddz.LOGD(\"\",\"file = [DdzTableScene] fun = [_startPlay] callMulti = \" + ddz.AIRobots.callMulti);\n        var dizhu_index = ddz.AIRobots.dizhuPos; //这里不用this._tableState.normalInfo.m_dizhu;，虽然已经赋值，但既然已经明确是在单机模式，就用AI值更清晰\n        if (dizhu_index == this._mySeatIndex) {\n            this._operateController.showPlay();\n            this.findActivePlayCards();\n        }\n        else {\n            this.node.runAction(cc.sequence(cc.delayTime(ddz.AIRobots.intervalTime), cc.callFunc(this._PlayInSingle.bind(this), this)));\n        }\n\n        if (!this.jipaiqi.active) {\n            this.jipaiqi.active = true;\n        }\n\n    },\n\n    //开始叫地主\n    _startJiaodz: function() {\n        ddz.LOGD(this._TAG, \"start jiaodz now\");\n\n        this._waitShowJiaoDiZhu = true;\n\n        this.removeAllPrepare();\n\n        this._operateController.hideAll();\n        this.setStatus(ddz.Enums.PlayStatus.PLAY_STATUS_JIAODZ);\n\n       this.refreshOtherPlayerCardsNum();\n    },\n\n    refreshOtherPlayerCardsNum : function () {\n        if(this._leftPlayerController){\n            var leftNum = ddz.AIRobots._getCardsCnt(ddz.AIRobots.leftSeatIndex);\n            if(leftNum && leftNum != 0){\n                this._leftPlayerController.changeShowLeftNum(leftNum);\n            }\n        }\n        if(this._rightPlayerController){\n            var rightNum = ddz.AIRobots._getCardsCnt(ddz.AIRobots.rightSeatIndex);\n            if(rightNum && rightNum != 0){\n                this._rightPlayerController.changeShowLeftNum(rightNum);\n            }\n        }\n    },\n\n    updateJiaodzFromTableInfo : function () {\n        this._operateController.showJiaodz(this._tableState.normalInfo.m_call);\n        if(this._leftPlayerController){\n            var leftCall = this._leftSeatinfo.model.m_call;\n            this._leftPlayerController.showJiaodzOnlyNumber(leftCall);\n\n        }\n        if(this._rightPlayerController){\n            var rightCall = this._rightSeatinfo.model.m_call;\n            this._rightPlayerController.showJiaodzOnlyNumber(rightCall);\n        }\n    },\n\n    removeAllPrepare:function () {\n        // this._leftPlayerController.setPrepareVisible(false);\n        // this._rightPlayerController.setPrepareVisible(false);\n        // this._operateController.lblMsg.string = \" \";\n        if(this.playedCardArea){\n            this.playedCardArea.removeAllChildren();//清除出牌区手牌\n        }\n    },\n\n\n    _finishJiaodz: function() {\n        ddz.LOGD(this._TAG, \"finish jiaodz in play controller\");\n        this.removeAllPrepare();\n        this._startInsertExtra();\n        this.changePlayerAvatar(true);\n        this._refreshMultipleLabel(false, true, true);\n    },\n\n    getIsMale:function () {\n        //有问题,容错\n        if(hall.ME && hall.ME.udataInfo ){\n            return hall.ME.udataInfo.m_sex == ddz.Enums.PlayerSexEnum.SEX_MALE;\n        }\n        return true;\n    },\n\n    _singleJiaodz: function(target,bLeft) {\n        ddz.LOGD(\"\",\"file = [DdzTableScene] fun = [_singleJiaodz]\");\n        if (bLeft) {\n            var call = ddz.AIRobots.getCall(ddz.AIRobots.leftSeatIndex);\n            this._leftSeatinfo.model.m_call = call;\n            this._tableState.normalInfo.m_call = call;\n            this._leftPlayerController.showJiaodz(call);\n            if (this._tableInfo.config.m_grab == 1) { //抢地主\n                if (this._mySeatinfo.model.m_call == 1) { //如果玩家叫了地主，则必须再次让玩家抢地主\n                    this._operateController.showJiaodz();\n                }\n                else {\n                    this.node.runAction(cc.sequence(cc.delayTime(ddz.AIRobots.intervalTime), cc.callFunc(this._finishJiaodz.bind(this), this)));\n                }\n            }\n            else{ //叫地主模式\n                this.node.runAction(cc.sequence(cc.delayTime(ddz.AIRobots.intervalTime), cc.callFunc(this._finishJiaodz.bind(this), this)));\n            }\n        }\n        else{\n            var call = ddz.AIRobots.getCall(ddz.AIRobots.rightSeatIndex);\n            this._rightSeatinfo.model.m_call = call;\n            this._tableState.normalInfo.m_call = call;\n            this._rightPlayerController.showJiaodz(call);\n            if (this._tableInfo.config.m_grab == 0 && call == 3) { //抢地主\n                this.node.runAction(cc.sequence(cc.delayTime(ddz.AIRobots.intervalTime), cc.callFunc(this._finishJiaodz.bind(this), this)));\n            }\n            else { //叫地主\n                this.node.runAction(cc.sequence(cc.delayTime(ddz.AIRobots.intervalTime), cc.callFunc(this._singleJiaodz.bind(this), this, true)));\n            }\n        }\n        this._refreshMultipleLabel(false, true, true);\n        if (this._tableInfo.config.m_grab == 1 && !this._mDizhuCalled && call == 1) {\n            this._mDizhuCalled = true;\n        }\n    },\n\n    //经典玩法叫地主后回调\n    _classicJiaodz: function(call) {\n        if (this.faPai.active) {\n            //播放发牌动画时,不能叫分\n            return;\n        }\n        var audioName = '';\n        audioName = this.getIsMale() ? \"man_\" : \"female_\";\n        audioName += call > 0 ? call + \"_point\" : \"not_call\";\n        ddz.LOGD(this._TAG, 'playEffect=' + audioName);\n        ddz.AudioHelper.playEffect(ddz.EffectPath_mp3[audioName], false);\n        var callFen  = call > 0 ? call + \"分\" : \"不叫\";\n\n        this._operateController.callNode.active = false;\n\n        //根据叫的分设置\n        this._operateController.lblMsg.string = callFen;\n\n        this._mySeatinfo.model.m_call = call;\n        this._tableState.normalInfo.m_call = call;\n        ddz.AIRobots.setCall(call, this._mySeatIndex); //设定玩家叫分\n        //经典玩法，如果玩家叫3分直接开始，否则让下家叫地主\n        if (call == 3) {\n            this.node.runAction(cc.sequence(cc.delayTime(ddz.AIRobots.intervalTime), cc.callFunc(this._finishJiaodz.bind(this), this)));\n        }\n        else {\n            this.node.runAction(cc.sequence(cc.delayTime(ddz.AIRobots.intervalTime), cc.callFunc(this._singleJiaodz.bind(this), this)));\n        }\n        this._refreshMultipleLabel(false, true, true);\n        this._operateController.setClockVisible(false);\n        if (this.isReplay() == false) {\n            //发送叫分给服务器\n\n        }\n    },\n\n    happyJiaodz: function(call) {\n        // if (this._mDizhuCalled) {\n        //     this._refreshMultipleLabel(true, false);\n        // }\n\n        var file = this.getIsMale() ? \"man_\" : \"female_\";\n        var callFen;\n        if (this._mDizhuCalled) { //抢地主\n            if (call == 0) { //不抢\n                callFen = '不抢';\n                file += \"not_rob\";\n            } else {\n                callFen = '抢地主';\n                file += \"rob_dizhu\";\n            }\n        } else { //叫地主\n            if (call == 0) { //不叫\n                callFen = '不叫';\n                file += \"not_call\";\n            } else { //叫地主\n                callFen = '叫地主';\n                file += \"call_dizhu\";\n            }\n        }\n\n        ddz.LOGD(this._TAG, 'playEffect=' + ddz.EffectPath_mp3[file]);\n        ddz.AudioHelper.playEffect(ddz.EffectPath_mp3[file], false);\n\n        //根据叫的分设置\n        this._operateController.lblMsg.string = callFen;\n\n        this._operateController.setClockVisible(false);\n\n        //发送叫分给服务器\n\n    },\n\n    /**\n     * 归还所有手牌到牌池\n     * @private\n     */\n    _returnAllCards : function () {\n        var cardCom;\n        while (this._cards.length > 0){\n            cardCom = this._cards.pop();\n            this.returnCard(cardCom.node);\n        }\n    },\n\n\n    //初始化自己的牌\n    _initMyCards: function() {\n        //在收到脱管信息后，会收到tableinfo的消息，在tableinfo中会重新生成牌的信息，在以下情况会有bug：\n        //在不该我出牌时我选中了牌，然后点击脱管，在重新生成牌的信息后，已选中的牌的信息还存在，所以在此清空一下选中牌的信息\n        this._clearSelectedCards(true);\n        this._returnAllCards();\n\n        var cards = ddz.AIRobots.playerCards[this._mySeatIndex];\n        var card, cardCom;\n\n        for (var i = 0; i < cards.length; i++) {\n            card = this.createNewCard(cards[i]);\n            cardCom = card.getComponent('Card');\n            cardCom.showMask(false);\n            this._cards.push(cardCom);\n\n            this.cardsContainer.addChild(card);\n        }\n        this._cards.sort(ddz.GlobalFuncs.SortCardFunc);\n\n        this._refreshCardsLayer();\n    },\n\n    /**\n     * 癞子牌变身(初始化底牌,会包含此过程,所以初始化不需要再调用此方法)\n     */\n    _changeHandLaiZiCards:function () {\n        var cardCom;\n        for (var i = 0; i < this._cards.length; i++) {\n            cardCom = this._cards[i];\n            if (cardCom._info._point == this._tableState.normalInfo.m_cardLaizi) {\n                cardCom.resetWithNum(this._tableState.m_laiziNumber);\n            }\n        }\n        this._cards.sort(ddz.GlobalFuncs.SortCardFunc);\n        this._refreshCardsLayer();\n    },\n\n    _resetExtraCards: function() {\n        var extra = ddz.AIRobots.dipai;\n        this._tableState.objectInfo.m_baseCard = extra;\n        for (var i = 0; i < extra.length; i++) {\n            this._extraCards[i].resetWithNum(extra[i]);\n        }\n\n        this._extraCards.sort(ddz.GlobalFuncs.SortCardFunc);\n\n        var smallCard;\n        for (i = 0; i < 3; i++){\n            smallCard = this._extraCards[i].node;\n            smallCard.setPosition(60 * (i-1), 0);\n        }\n\n        // this._laiziBaseCard.resetWithNum(this._tableState.m_laiziNumber);\n    },\n\n    /**\n     * 刷新手牌布局数据\n     * @private\n     */\n    _refreshLayoutData:function () {\n\n        var len = this._cards.length;\n\n        this.firstLineCardCount = this._getCardCountInLine();\n        this.secondLineCardCount = len - this.firstLineCardCount;\n\n        var maxCount = Math.max(this.firstLineCardCount, this.secondLineCardCount);\n\n        var data = ddz.GlobalFuncs.GetCardsOriginInterval(this.cardsContainer, ddz.CARD_BIG_SIZE.width, maxCount);\n\n        this._cardsOriginX = data[\"origin\"];\n        this._cardsIntervalX = data[\"interval\"];\n        this._cardsBreakline = data[\"breakline\"];\n\n        var cardsLayerWidth = this.cardsContainer.getBoundingBox().width;\n        var cardWidth = ddz.CARD_BIG_SIZE.width;\n\n        this.firstLineWidth = (this.firstLineCardCount - 1) * this._cardsIntervalX + cardWidth;\n        this.secondLineWidth = (this.secondLineCardCount - 1) * this._cardsIntervalX + cardWidth;\n\n        this.firstLineOriginX = (cardsLayerWidth - this.firstLineWidth) / 2;\n        this.secondLineOriginX = (cardsLayerWidth - this.secondLineWidth) / 2;\n    },\n\n    _checkInFirstLineCards:function (pos) {\n        return pos.x > this.firstLineOriginX && pos.x < this.firstLineOriginX + this.firstLineWidth && pos.y > this.FIRSTLINECARDY;\n    },\n\n    _checkInSecondLineCards:function (pos) {\n        return pos.x > this.secondLineOriginX && pos.x < this.secondLineOriginX + this.secondLineWidth && pos.y < ddz.CARD_BIG_SIZE.height;\n    },\n\n    _refreshCardsLayer: function() {\n        ddz.LOGD(this._TAG, \"111111 _refreshCardsLayer\");\n        this._clearSelectedCards();\n        var len = this._cards.length;\n        //清空已触摸选择的牌了，因为其中的对象会被移除掉\n        this._touchedCards = [];\n        if (len <= 0) {\n            return;\n        }\n        this._refreshLayoutData();\n\n        var cardCom;\n        var canShowTag;\n        for (var index = 0; index < len; index++) {\n            canShowTag = ((index == this.firstLineCardCount - 1) || (index == len - 1));\n            cardCom = this._cards[index];\n            cardCom.node.stopAllActions();\n            cardCom.showTag(canShowTag);\n            cardCom.setDiZhuTag(this._isDizhu(this._mySeatIndex) && canShowTag);\n            cardCom.showMask(this._isInTrust);\n            cardCom.setPosition(this._getPosFromIndex(index));\n            cardCom.setZIndex(index);\n        }\n    },\n\n    //只有两种情况需要reset: 1.轮到我操作， 2.收到table_info(可能是断线重连)\n    //被动出牌管不上时候要进行特殊处理\n    //bNoshowCardstip : 只在短线重连后使用，当为true时不显示“没有牌大过上家的提示”\n    _resetTopCardType: function(bNoshowCardstip) {\n        this._tipNum = 0;\n        //轮到我主动出牌，清空topcard信息 我主动出牌时，top_card字段不为空，所以必须用top_seat判断\n        if (this._tableState.normalInfo.m_topseat == this._mySeatIndex) {\n            this._topCardType = null;\n        } else {\n            //上家出的牌的数组\n            var top = this._tableState.objectInfo.m_topCard;\n            ddz.LOGD(this._TAG, 'verify topCard.....'+JSON.stringify(top));\n            //有需要管的牌，判断手牌是否能管得上，进行提示，同时给提示按钮使用\n            if (top.length > 0) {\n                var types = ddz.RobotGlobal.judgeType(top, false);\n                //这里不进行types的判断了，如果topcard不是有效牌型，会是严重错误\n                this._topCardType = types[0];\n\n                // 计算被动提示牌\n                this._playTips = ddz.RobotGlobal.findWinCardsFromArray(types[0], this._mySeatinfo.model.m_card);\n                //管不上\n                if (this._playTips.length == 0) {\n                    ddz.LOGD(this._TAG, \"no cards larger than top card\");\n\n                    if (!bNoshowCardstip) {\n                        ddz.LOGD(this._TAG, \"!bNoshowCardstip is true ~~~~~~~ \");\n                        this._setCardsTipVisible(true, ddz.Enums.PlayCardsTip.PLAYCARDSTIP_NOCARD);\n                    }\n                    return true;\n                }\n            }\n            //上家毛牌没出\n            else {\n                ddz.LOGD(this._TAG, \"这不对吧\");\n                this._topCardType = null;\n            }\n        }\n        return false;\n    },\n\n    findActivePlayCards: function() {\n        this._playTips = ddz.AIRobots.findActivePlayCards(this._mySeatinfo.model.m_card);\n        this._tipNum = 0;\n        return this._playTips.length > 0;\n    },\n    showTopCards: function() {\n        var topSeatId = this._tableState.normalInfo.m_topseat;\n        var mySeatId = this._mySeatIndex;\n        if (topSeatId == mySeatId) { //轮到别人出牌时，不显示我出的牌\n            return;\n        }\n        var cards = this._tableState.objectInfo.m_topCard;\n\n        var leftid  = ddz.GlobalFuncs.getPreIndex(mySeatId);\n        var rightid = ddz.GlobalFuncs.GetNextIndex(mySeatId);\n\n        var controller, bdizhu;\n        if (topSeatId == rightid){\n            controller = this._rightPlayerController;\n            bdizhu = this._isDizhu(rightid);\n        }else{\n            controller = this._leftPlayerController;\n            bdizhu = this._isDizhu(leftid);\n        }\n\n        if(this._tableState.normalInfo.m_state != ddz.Enums.TableState.TABLEDSTAT_CALLING){\n            controller.playTopCards(cards, bdizhu);\n        }\n    },\n\n    _startInsertExtra: function() {\n        ddz.LOGD(this._TAG, \"start insert extra in play controller....\");\n\n        //判断是否是地主，地主的话需要把extra_cards插入手牌....\n        if (ddz.AIRobots.dizhuPos == this._mySeatIndex) {\n            this._insertExtraCards();\n        } else {\n            var _seatId = ddz.AIRobots.dizhuPos == ddz.GlobalFuncs.getPreIndex(this._mySeatIndex) ? ddz.AIRobots.leftSeatIndex : ddz.AIRobots.rightSeatIndex;\n\n            for (var i = 0; i < this._extraCards.length; i++) {\n                ddz.AIRobots.getPlayerCards(_seatId).push(ddz.AIRobots.getDiPaiCard()[i]);\n            }\n            this._startPlay();\n        }\n        //对家的明牌翻过去\n    },\n    //初始化三个座位的牌\n    _initCardsInSingle: function() {\n        // 上报单机游戏开始时间、银币数\n        // ddzsingle.reportHelper.reportGameData(ddzsingle.reportKind.REPORT_GAME_BEGIN, this._isSingleBreak);\n        this.setStatus(ddz.Enums.PlayStatus.PLAY_STATUS_PLAYING);\n        //初始化54张牌\\发牌\n        ddz.AIRobots.initGame();\n        // 设置牌的信息\n        this._setSingleCardsInfo();\n\n        // this._extraCard.setCardsNumInfo(base, -1);\n\n        // if (this._noteCardController) {\n        //     this._noteCardController.refresh();\n        // }\n\n        // ddz.AIRobots.initGame();\n\n        this.playCardAni();\n        this._showCardIndex = 0;\n        this._returnAllCards();\n        var mycards = ddz.AIRobots.getPlayerCards(this._mySeatIndex);\n        var card, cardCom;\n        for (var i = 0; i < mycards.length; i++) {\n            card = this.createNewCard(mycards[i]);\n            cardCom = card.getComponent('Card');\n            cardCom.showMask(false);\n            this._cards.push(cardCom);\n\n            card.active = false;\n            this.cardsContainer.addChild(card);\n        }\n        this._cards.sort(ddz.GlobalFuncs.SortCardFunc);\n        this._refreshLayoutData();\n\n        var rc = 17;\n        var allTime = 1;\n        ty.Timer.setTimer(this, this.addCardToPlayer, allTime/rc, rc, 17/30);\n        this._resetExtraCards();\n        this._flipExtraCards(false, true);\n    },\n\n    _setSingleCardsInfo: function() {\n        var playerCards = ddz.AIRobots.playerCards;\n        this._mySeatinfo.model.m_card = playerCards[0];\n        ddz.LOGD(this._TAG, \"file = [DdzTableScene] fun = [_setSingleCardsInfo] this._mySeatinfo.model.m_card = \" + JSON.stringify(this._mySeatinfo.model.m_card));\n        // for (var i = 0; i < this._mySeatinfo.model.m_card.length; i++) {\n        //     ddz.LOGD(this._TAG, \"file = [DdzTableScene] fun = [_setSingleCardsInfo] m_card\" + this._mySeatinfo.model.m_card[i]);\n        // }\n        this._rightSeatinfo.model.m_card = playerCards[1];\n        this._leftSeatinfo.model.m_card = playerCards[2];\n\n        // this._initMyCards();\n    },\n    _insertExtraCards: function() {\n        // ddz.LOGD(this._TAG, \"insert extra in play controller\");\n        var newcards = [];\n        var i,card,cardCom;\n        for (i = 0; i < 3; i++) {\n            card = this._extraCards[i];\n\n            var nc = this.createNewCard(card._info._number);\n            this._cards.push(nc.getComponent('Card'));\n            newcards.push(nc);\n            this._mySeatinfo.model.m_card.push(card._info._number); //seat_info里面也需要同步更新\n            nc.parent = this.cardsContainer;\n        }\n\n        this._cards.sort(ddz.GlobalFuncs.SortCardFunc);\n        this._refreshCardsLayer();\n\n        //插入手牌后显示地主标识\n        var length = this._cards.length;\n        this._cards[length - 1].setDiZhuTag(true);\n\n        for (i = 0; i < 3; i++) {\n            var poker = newcards[i];\n            var old_pos = poker.getPosition();\n            poker.setPosition(cc.p(old_pos.x, old_pos.y * 1.2));\n            var delay = cc.delayTime(0.1);\n            var move = cc.moveTo(0.2, poker.getComponent('Card')._oldP);\n            if (i == 2) {\n                poker.runAction(cc.sequence(delay, move, cc.callFunc(this._startPlay, this)));\n            } else {\n                poker.runAction(cc.sequence(delay, move));\n            }\n        }\n    },\n\n    //设置脱管状态\n    setIsInTrust: function(isin) {\n        if (this._isInTrust == isin) {\n            return;\n        }\n        this._isInTrust = isin;\n\n        this._refreshCardsLayer();\n\n        this.btnCancelInStruct.node.active = this._isInTrust;\n        //设置牌上的阴影层是否显示\n        for (var i = 0; i < this._cards.length; ++i) {\n            var card = this._cards[i];\n            card.showMask(this._isInTrust);\n        }\n    },\n    \n    _resetPlayerCardsWithLaizi: function() { //把3个玩家手牌中癞子对应点数的牌转成癞子\n\n        var lz_point = this._tableState.normalInfo.m_cardLaizi;\n        var lz_number = this._tableState.m_laiziNumber;\n\n        this._mySeatinfo.resetCardsWithLaizi(lz_point, lz_number);\n        this._leftSeatinfo.resetCardsWithLaizi(lz_point, lz_number);\n        this._rightSeatinfo.resetCardsWithLaizi(lz_point, lz_number);\n\n        var extra = this._tableState.objectInfo.m_baseCard;\n        for (var i = 0; i < extra.length; i++) {\n            var point = ddz.GlobalFuncs.numberToPoint(extra[i]);\n            if (point == lz_point) {\n                extra[i] = lz_number;\n            }\n        }\n    },\n\n\n    _findCards: function(cards) {\n        var return_arr = [];\n        var lz_pos = -1; //如果有多个癞子的话，则每用掉一个癞子，就设一次lz_pos，因为每次都是从0开始搜索，这样不会重复找到同一张癞子\n        for (var i = 0; i < cards.length; i++) {\n            var tip_number = cards[i];\n            var index = -1;\n            for (var j = 0; j < this._cards.length; j++) {\n                var card = this._cards[j];\n                var card_number = card._info._number;\n                if (card_number == tip_number && card_number <= 53) {\n                    index = j;\n                    break;\n                } else if (card_number > 53 && tip_number > 53 && j > lz_pos) {\n                    lz_pos = j;\n                    index = j;\n                    break;\n                }\n            }\n            if (index >= 0) {\n                return_arr.push(card);\n            }\n        }\n        return return_arr;\n    },\n\n    playTip: function() {\n        var len = this._playTips.length;\n        ddz.LOGD(null, \"-----------------------playTip-----------------------------\"+len);\n        if (len == 0) {\n            this._operateController._playBuchu();\n            this._setCardsTipVisible(false);\n            return;\n        }\n        //清除已提示的牌\n        this._clearSelectedCards();\n        //重新显示提示牌\n        this._selectedCards = this._findCards(this._playTips[this._tipNum]);\n        for (var i = 0; i < this._selectedCards.length; i++) {\n            this._selectedCards[i].up();\n        }\n        this._operateController.btnPlay.active = true;\n        this._operateController.btnPlay.interactable = true;\n        this._operateController.btnPlay.node.getChildByName(\"bright\").active = true;\n        this._operateController.btnPlay.node.getChildByName(\"hui\").active = false;\n        this._tipNum = (this._tipNum + 1) % len;\n    },\n\n    playAnimationSoundByCardType: function(type, bMale, userPosition) { // 由于产品要求，在播放连对和顺子动画时需要根据出牌人的位置来播放动画\n        var sound;\n        var special_effect;\n        if (!type) {\n            return\n        }\n        switch (type.getType()) { //播放动画和声音\n            case ddz.Enums.PaixingType.ROCKET:\n                sound = bMale ? \"man_rocket\" : \"female_rocket\";\n                special_effect = \"rocket\";\n                ddz.AIRobots.addBombCount();\n                this._refreshMultipleLabel(false, true, true);\n                this._cardAniPlayer.playRocket();\n                ty.NotificationCenter.trigger(ddz.EventType.BET_SCORE_CHANGE_ANI);\n                break;\n            case ddz.Enums.PaixingType.BOMB_CARD:\n                sound = bMale ? \"man_bomb\" : \"female_bomb\";\n                special_effect = \"bomb\";\n                ddz.AIRobots.addBombCount();\n                this._refreshMultipleLabel(false, true, true);\n                this._cardAniPlayer.playBomb();\n                ty.NotificationCenter.trigger(ddz.EventType.BET_SCORE_CHANGE_ANI);\n                break;\n            case ddz.Enums.PaixingType.AIRCRAFT_CARD:\n                sound = bMale ? \"man_airplane\" : \"female_airplane\";\n                special_effect = this._topCardType == null ? \"airplane_the_first_time\" : \"airplane_beiguan\";\n                this._cardAniPlayer.playPlane();\n                break;\n            case ddz.Enums.PaixingType.AIRCRAFT_SINGLE_CARD:\n            case ddz.Enums.PaixingType.AIRCRAFT_DOUBLE_CARD:\n                this._cardAniPlayer.playPlane();\n                sound = bMale ? \"man_aircraft_with_wings\" : \"female_airplane_with_wing\";\n                special_effect = this._topCardType == null ? \"airplane_the_first_time\" : \"airplane_beiguan\";\n                break;\n            case ddz.Enums.PaixingType.SHUNZI_CARD:\n                this._cardAniPlayer.playShunZi();\n                sound = bMale ? \"man_shunzi\" : \"female_shunzi\";\n                special_effect = \"shunzi\";\n                break;\n            case ddz.Enums.PaixingType.LIANDUI_CARD:\n                // this.playAnim();\n                // this._cardDuiziAnimation.playCardAction(userPosition);\n                this._cardAniPlayer.playLianDui();\n                sound = bMale ? \"man_continuous_pair\" : \"female_continuous_pair\";\n                special_effect = \"continuous_pair\";\n                break;\n            case ddz.Enums.PaixingType.THREE_ONE_CARD:\n                sound = bMale ? \"man_three_with_one\" : \"female_three_with_one\";\n                break;\n            case ddz.Enums.PaixingType.THREE_CARD:\n                sound = bMale ? \"man_three_one\" : \"female_three_one\";\n                break;\n            case ddz.Enums.PaixingType.THREE_TWO_CARD:\n                sound = bMale ? \"man_three_with_one_pair\" : \"female_three_with_one_pair\";\n                break;\n            case ddz.Enums.PaixingType.BOMB_TWO_CARD:\n                sound = bMale ? \"man_four_with_two\" : \"female_four_with_two\";\n                break;\n            case ddz.Enums.PaixingType.BOMB_TWO_TWO_CARD:\n                sound = bMale ? \"man_four_with_one_pair\" : \"female_four_with_two_pair\";\n                break;\n            // case ddz.Enums.PaixingType.SINGLE_CARD:\n            //     sound = bMale ? \"man_\" + type.getPoint() : \"female_\" + type.getPoint();\n            //     break;\n            // case ddz.Enums.PaixingType.DOUBLE_CARD:\n            //     sound = bMale ? \"man_pair\" + type.getPoint() : \"female_pair\" + type.getPoint();\n            //     break;\n            default:\n                break;\n        }\n\n        if (sound) {\n            ddz.LOGD(this._TAG, 'playEffect=' + sound);\n            ddz.AudioHelper.playEffect(ddz.EffectPath_mp3[sound], false);\n        }\n\n        if (special_effect) {\n            ddz.LOGD(this._TAG, 'playEffect=' + special_effect);\n            ddz.AudioHelper.playEffect(ddz.EffectPath_mp3[special_effect], false);\n        }\n\n        ddz.AudioHelper.playEffect(ddz.EffectPath_mp3.Playing_cards, false);\n    },\n\n\n    _sendPlayCardInfo: function(cards) {\n        var params = {\n\n            \"cards\": cards\n        };\n        ddz.MsgFactory.getTableCall(\"card\", params);\n    },\n\n    _playCards: function() {\n        ddz.LOGD(this._TAG, \"play cards in play controller\");\n\n        if (this.isLaizi() && !this._changeLaiZi){\n            hall.MsgBoxManager.showToast({title:'请等待癞子确定后,再出牌!'});\n            return;\n        }\n\n        this._setCardsTipVisible(false);\n\n        var cards = [];\n        var len = this._selectedCards.length;\n\n        if (len > 0) { //判断牌型\n\n            for (var i = 0; i < len; i++) {\n                cards.push(this._selectedCards[i]._info._number);\n            }\n\n            var types = ddz.RobotGlobal.judgeType(cards ,true);\n\n            if (types.length <= 0) {\n                ddz.LOGD(this._TAG, \"in play cards, illegal cards, return\"+JSON.stringify(cards));\n                this._setCardsTipVisible(true, ddz.Enums.PlayCardsTip.PLAYCARDSTIP_ILLEGAL);\n                return;\n            } else {\n\n                var type, checkLarger = false;\n\n                if (this._topCardType){\n                    ddz.LOGD(null, 'topCard : ......');\n                    this._topCardType.dump();\n\n                    for (var j = 0; j < types.length; j++){\n                        type = types[j];\n                        ddz.LOGD(null, \"play cards type : .......\"+type._type);\n                        type.dump();\n                        checkLarger = type.isLargerThan(this._topCardType);\n                        if (checkLarger){\n                            //只要有一个牌型能管上,就认定为可能管上\n                            break;\n                        }\n                    }\n\n                    //管不上,上家的牌\n                    if (!checkLarger) {\n                        ddz.LOGD(this._TAG, \"file = [DdzTableScene] fun = [_playCards] 要不起 _topCardType : \"+JSON.stringify(this._topCardType));\n                        this._setCardsTipVisible(true, ddz.Enums.PlayCardsTip.PLAYCARDSTIP_ILLEGAL);\n                        return;\n                    }\n                }\n                else{\n                    type = types[0];\n                }\n\n\n                if (!this.isMode(ddz.Enums.PlayMode.PLAY_MODE_SINGLE)) {\n                    //在此处单机的不设置不能出牌，联网游戏在收到card action时又设置为true了\n                    this._isUserInteractive = false;\n                }\n\n                cards = type.getCards(); // cards里面有癞子的话，变成了实际牌的值\n            }\n\n        }\n\n        if (!this.isMode(ddz.Enums.PlayMode.PLAY_MODE_SINGLE)) {\n            this._sendPlayCardInfo(cards); //发送出牌消息\n        }{\n            this._rightPlayerController.clearCards();\n            ddz.AIRobots.playCards(this._mySeatIndex, cards);\n            this.node.runAction(cc.sequence(cc.delayTime(2), cc.callFunc(this._PlayInSingle, this)));\n            if (cards.length == 0) {\n                this._playCardsFromServer(cards);\n                return;\n            }\n            //为了跟联网模式匹配\n            ddz.LOGD(this._TAG, \"file = [DdzTableScene] fun = [_playCards] currentPlayPos = \" + ddz.AIRobots.currentPlayPos);\n            this._tableState.normalInfo.m_topseat = this._mySeatIndex;\n            this._tableState.objectInfo.m_topCard = cards;\n\n        }\n\n        // 网络场在收到action card后再出牌 -收到服务器确认后再出牌\n        // this._mySeatinfo.playCards(cards);\n        // this._playCardsInternal();\n        // this._runPlayCardsAction(cards);\n        this._operateController.hideAll();\n        this._playCardsFromServer(cards);\n        //显示地主标识\n        if (this._isDizhu(this._mySeatIndex)) {\n            var length = this._cards.length;\n            if (length > 0) {\n                this._cards[length-1].setDiZhuTag();\n            }\n        }\n        if (this.reStartBtn.active) {\n            this.reStartBtn.active = false;\n        }\n\n        // 单机玩家手牌长度小于等于2张时可以托管\n        if (this._cards.length<=2) {\n            // this._titleErdouController.setDepositeButtonEnabled(true);\n        }\n    },\n\n\n    _playCardsFromServer: function(cards) { //\n        // this._clearPlayedCards(); //最后一张牌服务器替出，不会收到next消息，也就不会清除掉已出的牌。 在这里清除作保障\n        var isMale = this.getIsMale();\n\n        if (cards.length == 0) {\n            this._operateController.showBuchuSprite();\n            var filename = isMale ? \"man_no\" : \"female_no\";\n            ddz.LOGD(this._TAG, 'playEffect=' + filename);\n            ddz.AudioHelper.playEffect(ddz.EffectPath_mp3[filename], false);\n            return;\n        }\n\n        var types = ddz.RobotGlobal.judgeType(cards, false);\n        if (types.length == 0) {\n            ddz.LOGD(null, \"error in _playCardsFromServer!!! type error..\");\n        }\n        this._mySeatinfo.playCards(cards);\n\n        this._clearSelectedCards(true);\n        this._selectedCards = this._findCards(cards);\n        this._playCardsInternal();\n\n        this.playAnimationSoundByCardType(types[0], isMale);\n        this._runPlayCardsAction(cards);\n    },\n\n    /**\n     * 把所有手牌按点数进行分组\n     * @private\n     */\n    _groupCards:function () {\n        var cardGroup = [];\n        var curSubArr;\n        var cardCom, curPoint;\n        var len = this._cards.length;\n        for (var i = 0; i < len; i++){\n            cardCom = this._cards[i];\n            curPoint = cardCom._info._point;\n\n            if (cardGroup.length == 0){\n                curSubArr = [];\n                curSubArr.push(cardCom);\n                cardGroup.push(curSubArr);\n            }\n            else{\n                curSubArr = cardGroup[cardGroup.length-1];\n                if (curSubArr[curSubArr.length-1]._info._point == curPoint){\n                    //点数相同,放到同一数组里\n                    curSubArr.push(cardCom);\n                }\n                else{\n                    //点数不同,新起一个数组\n                    curSubArr = [];\n                    curSubArr.push(cardCom);\n                    cardGroup.push(curSubArr);\n                }\n            }\n        }\n\n        return cardGroup;\n    },\n\n    _getCardCountInLine:function () {\n\n        var firstLineCardCount = 0;\n        var allCardCount = this._cards.length;\n\n        if (allCardCount <= 10){\n            firstLineCardCount = allCardCount;\n        }\n        else{\n            var curSubArr;\n            var lineCardCount = 0;\n            var cardGroup = this._groupCards();\n            var nextCount;\n            for (var i = 0; i < cardGroup.length; i++){\n                curSubArr = cardGroup[i];\n                nextCount = lineCardCount + curSubArr.length;\n                if (nextCount > 10){\n                    if (allCardCount - lineCardCount <= 10){\n                        //第一行装不下,第二行能装下,最后一组放第二行\n                        firstLineCardCount = lineCardCount;\n                    }\n                    else{\n                        firstLineCardCount = 10;\n                    }\n                    break;\n                }\n\n                lineCardCount += curSubArr.length;\n            }\n        }\n\n        return firstLineCardCount;\n    },\n\n    /**\n     * 重新排序手牌(跟refresh的区别是：有动画，不会有增加牌的情况。 如果增加牌，必须用refreshCardsLayer，因为增加必须删除原来的)\n     * @private\n     */\n    _reorderCardsLayer: function() {\n        ddz.LOGD(this._TAG, \"1111111 _reorderCardsLayer\");\n        var len = this._cards.length;\n        if (len <= 0) {\n            return;\n        }\n\n        this.playedCardArea.removeAllChildren();\n        this._refreshLayoutData();\n\n        var cardCom, des, poker;\n        var canShowTag;\n        for (var index = 0; index < len; index++) {\n            canShowTag = ((index == this.firstLineCardCount - 1) || (index == len - 1));\n            cardCom = this._cards[index];\n            poker = cardCom.node;\n            des = this._getPosFromIndex(index);\n            cardCom.setOldPosition(des);\n            cardCom.setZIndex(index);\n            cardCom.showTag(canShowTag);\n            cardCom.setDiZhuTag(this._isDizhu(this._mySeatIndex) && canShowTag);\n            poker.stopAllActions();\n            poker.runAction(cc.moveTo(0.1, des));\n        }\n    },\n\n\n    /**\n     * 从手牌中移除打出牌数据\n     * @private\n     */\n    _playCardsInternal: function() {\n        //把cards中selected cards移除，以便重新排列\n        var scard, index;\n        for (var i = 0; i < this._selectedCards.length; i++) {\n            scard = this._selectedCards[i];\n            index = hall.GlobalFuncs.FindInArray(this._cards, scard);\n            if (index >= 0) {\n                this._cards.splice(index, 1);\n            } else {\n                ddz.LOGD(this._TAG, \"error, not found selected card in cards!!!!!!!!\" + scard._info._number);\n            }\n        }\n        if (this._selectedCards.length <= 0) {\n            //出的牌数为0，就不再说剩几张牌了\n            return;\n        }\n\n        //在此处增加牌型的判断\n        this._reorderCardsLayer();\n\n        var audio;\n        var isMale = this.getIsMale();\n        var leftCardsNum = this._cards.length;\n        if (leftCardsNum == 2) {\n            audio = isMale ? \"man_\" : \"female_\";\n            audio += \"I_got_left_two_cards\";\n            ddz.LOGD(this._TAG, 'playEffect=' + audio);\n            ddz.AudioHelper.playEffect(ddz.EffectPath_mp3[audio], false);\n        } else if (leftCardsNum == 1) {\n            audio = isMale ? \"man_\" : \"female_\";\n            audio += \"I_got_left_one_cards\";\n            ddz.LOGD(this._TAG, 'playEffect=' + audio);\n            ddz.AudioHelper.playEffect(ddz.EffectPath_mp3[audio], false);\n        }\n    },\n\n    _runPlayCardsAction: function(cards) {\n        var length = this._selectedCards.length;\n        if (length <= 0) {\n            return;\n        }\n\n        var startY = 0;\n        var startX = 0;\n        var breakline = 10;\n        var splitWidth = 55;\n        if (length > 10){\n            startY = this.FIRSTLINECARDY;\n            startX = 0;\n        }\n        else{\n            startY = 0;\n            startX = (this.playedCardArea.width - ((length - 1) * splitWidth + ddz.CARD_BIG_SIZE.width)) / 2;\n        }\n\n        var tox,toy;\n\n        var canShowTag,card, cardNum;\n        for (var i = 0; i < length; i++) {\n\n            canShowTag = ddz.GlobalFuncs.canShowTag(this._cardsBreakline, length, i);\n            // canShowTag = ((i == this.firstLineCardCount - 1) || (i == length - 1));\n\n            card = this._selectedCards.shift();\n            cardNum = cards[i];\n            if (this.isLaizi()){\n                //癞子场,需要把牌的点数据重新设置,因为从服务器返回后,点数会改变\n                card.resetWithNum(cardNum);\n            }\n\n            card.showTag(canShowTag);\n            card.setDiZhuTag(this._isDizhu(this._mySeatIndex) && canShowTag);\n            card.setZIndex(i);\n            card.showMask(false);\n            this._playedCards.push(card);\n            card.node.parent = this.playedCardArea;\n\n            tox = (i % breakline) * splitWidth + startX;\n            toy = startY - Math.floor(i/breakline) * 56;\n\n            card.node.setPosition(tox, toy);\n        }\n\n        ddz.GlobalFuncs.showDropEffect(this._cardBaseScale, this.playedCardArea);\n    },\n\n    _clearSelectedCards: function(withOutAni) {\n        // if (cc.isValid(this.cardsTip)){\n        //     // this.cardsTip.string = \"\";\n        //     this.cardsTip.node.active = false;\n        // }\n        this._operateController.setCardTipsSpr();\n        ddz.LOGD(this._TAG, \"clear selected cards len = ***\" + this._selectedCards.length);\n        var card;\n        while (this._selectedCards.length > 0){\n            card = this._selectedCards.pop();\n            card.down(withOutAni);\n        }\n        this._operateController.btnPlay.active = false;\n    },\n\n    //开始托管\n    startDeposite: function() {\n        if (this._isInTrust || this.isStatus(ddz.Enums.PlayStatus.PLAY_STATUS_PREPARE)) {\n            //alert(\"not allowed to deposite\");\n            return;\n        }\n        ddz.AudioHelper.playEffect(ddz.EffectPath_mp3.button_click_sound, false);\n        ddz.LOGD(this._TAG, '托管状态 startDeposite');\n        // this.setIsInTrust(true);\n\n    },\n\n    /**\n     * 取消托管\n     * @private\n     */\n    _cancelDeposite: function() {\n        this.setIsInTrust(false);\n        this._isTrustEnable = true;\n        var params = {\n\n        };\n        ddz.MsgFactory.getTableCall(\"robot\", params);\n    },\n\n    /************************************* table call 相关开始 ***************************************/\n\n    onActionWildCard: function(result) {\n        // var p = result[\"wildcard\"];\n        // this._tableState.setLaizi(p);\n\n        var self = this;\n        var delayTime = 1.8;\n\n        var p = result[\"wildcard\"];\n        self._tableState.setLaizi(p);\n\n        self._resetPlayerCardsWithLaizi();\n        self.playChooseLaiziAnimation();\n\n        this.scheduleOnce(function () {\n            self._changeLaiZi = true;\n        }, delayTime);\n    },\n\n    playChooseLaiziAnimation:function () {\n        this._cardAniPlayer.playLaiZi();\n    },\n\n    getEmoPos: function(index){\n        var pos;\n        // if (index == ddz.GlobalFuncs.GetNextIndex(this._mySeatIndex)) {\n        //     pos = this.chatNode.convertToNodeSpace(this.head_regiht.convertToWorldSpace(cc.p(0,0)));\n        //     // pos = this.chatNode.convertToNodeSpace(this.head_regiht.getPosition());\n        // } else if (index == ddz.GlobalFuncs.getPreIndex(this._mySeatIndex)) {\n        //     pos = this.chatNode.convertToNodeSpace(this.head_left.convertToWorldSpace(cc.p(0,0)));\n        //     // pos = this.chatNode.convertToNodeSpace(this.head_left.getPosition());\n        // }else {\n        //     // pos = this.chatNode.convertToNodeSpace(this.myAvatar.getPosition());\n        //     pos = this.chatNode.convertToNodeSpace(this.myAvatar.convertToWorldSpace(cc.p(0,0)));\n        // }\n\n        return pos;\n    },\n\n    //响应onTableCall中的各个action，这部分的函数需要提取到子类中\n    //当某玩家准备后，服务器广播该玩家的 准备 消息。所有玩家收到此消息后，在牌桌上更新准备玩家的状态\n    onActionReady: function(sid) {\n        if (sid == this._mySeatIndex) {\n            this._mySeatinfo.model.m_state = ddz.Enums.SeatState.SEATDZSTAT_READY;\n            if (this.tableInfo().getSceneType() == ddz.Enums.SceneType.FRIEND){\n                this._friendPanel.setBtnReadyState(false);\n                this._operateController.showPrepare(true);\n            }\n        } else if (sid == ddz.GlobalFuncs.GetNextIndex(this._mySeatIndex)) {\n            ddz.LOGD(this._TAG, \"action == right game_ready\");\n            this._rightPlayerController.setPrepareVisible(true);\n            this._rightSeatinfo.model.m_state = ddz.Enums.SeatState.SEATDZSTAT_READY;\n        } else {\n            ddz.LOGD(this._TAG, \"action == left game_ready\");\n            this._leftPlayerController.setPrepareVisible(true);\n            this._leftSeatinfo.model.m_state = ddz.Enums.SeatState.SEATDZSTAT_READY;\n        }\n    },\n\n    onActionGameReady: function(result) {\n        //ty.NotificationCenter.trigger(\"game_ready\");\n\n\n        var mycards = result[\"cards\" + (this._mySeatIndex - 1)];\n        var saveDic = {myCards:mycards,baseCard:result.basecard};\n        hall.GlobalFuncs.setInLocalStorage(ddz.gameModel.ORIGINCARDS, JSON.stringify(saveDic));\n        var rcards,lcards;\n        this._mySeatinfo.model.m_card = mycards;\n        rcards = result[\"cards\" + (ddz.GlobalFuncs.GetNextIndex(this._mySeatIndex) - 1)];\n        this._rightSeatinfo.model.m_card = rcards;\n\n        lcards = result[\"cards\" + (ddz.GlobalFuncs.getPreIndex(this._mySeatIndex) - 1)];\n        this._leftSeatinfo.model.m_card = lcards;\n\n        this._leftPlayerController.changeShowLeftNum(0);\n        this._rightPlayerController.changeShowLeftNum(0);\n\n        //初始化自己的牌，根据count值，对上图片等等\n        // this._initMyCards();\n\n        this.playCardAni();\n\n        this._returnAllCards();\n        this._showCardIndex = 0;\n\n        var card, cardCom;\n        for (var i = 0; i < mycards.length; i++) {\n            card = this.createNewCard(mycards[i]);\n            cardCom = card.getComponent('Card');\n            cardCom.showMask(false);\n            this._cards.push(cardCom);\n\n            card.active = false;\n            this.cardsContainer.addChild(card);\n        }\n        this._cards.sort(ddz.GlobalFuncs.SortCardFunc);\n        this._refreshLayoutData();\n\n        var rc = 17;\n        var allTime = 1;\n        ty.Timer.setTimer(this, this.addCardToPlayer, allTime/rc, rc, 17/30);\n\n        //refresh extra cards info\n        this._tableState.objectInfo.m_baseCard = result[\"basecard\"];\n        this._resetExtraCards();\n\n        //游戏设置为叫地主状态，等待服务器返回轮到谁叫地主\n        this._startJiaodz();\n\n        // this.upDateGoldInfo();\n        ty.NotificationCenter.trigger(ddz.EventType.GAME_READY);\n\n        if (result.myCardNote) {\n            this.myCardNote = result.myCardNote;\n            ty.NotificationCenter.trigger(ddz.EventType.UPDATE_CARD_NOTE, this.myCardNote);\n        }\n\n        // if (this.tableInfo().getSceneType() == ddz.Enums.SceneType.MATCH){\n        //     if (!this.jipaiqi.active) {\n        //         this.jipaiqi.active = true;\n        //     }\n        // }\n\n        // ddz.LOGD(this._TAG, \"当前时间:\" + new Date().getTime());\n    },\n\n    playCardAni:function () {\n        this.faPai.active = true;\n        // var fapai = this.faPai.getComponent(cc.Widget);\n        // fapai.top = 353;\n        var animationCom = this.faPai.getComponent(cc.Animation);\n        var ani = animationCom.getAnimationState('fapai_anim');\n        ani.play();\n    },\n\n    stopCardAni:function () {\n        var animationCom = this.faPai.getComponent(cc.Animation);\n        var ani = animationCom.getAnimationState('fapai_anim');\n        if (ani.isPlaying){\n            ani.stop();\n            this.faPai.active = false;\n        }\n    },\n\n    changeToShowFromHide : function (timeGap) {\n        // var isAddCard = ty.Timer.isScheduledTimer(this, this.addCardToPlayer);\n        // ddz.LOGD(this._TAG, \"======================ty.Timer.isScheduledTimer==============\"+isAddCard);\n        // if(isAddCard){\n        if (this.isStatus(ddz.Enums.PlayStatus.PLAY_STATUS_GAMEOVER)){\n            //已经结束的状态不用再刷新牌桌\n            return;\n        }\n\n        this.stopCardAni();\n        // ty.Timer.cancelTimer(this, this.addCardToPlayer);\n        if(this._cards){\n            for (var i = 0; i < this._cards.length; i ++){\n                var cardCom = this._cards[i];\n                cardCom.node.active = true;\n            }\n        }\n\n        this._refreshCardsLayer();\n        this.refreshOtherPlayerCardsNum();\n        //     ddz.LOGD(this._TAG, \"=======================changeToShowFromHide==============\");\n        // }\n    },\n    onGameHide : function () {\n\n    },\n\n    // 表情面板点击头像按钮\n    onClickHeadBtn : function (index) {\n\n    },\n\n    addCardToPlayer:function () {\n\n        var index = this._showCardIndex;\n\n        var cardCom = this._cards[index];\n        //有问题,容错\n        if(!cardCom){\n            return;\n        }\n        cardCom.node.active = true;\n        cardCom.showTag(true);\n        cardCom.setDiZhuTag(false);\n        cardCom.setPosition(this._getPosFromIndex(index));\n        cardCom.setZIndex(index);\n\n        if (index > 0 && index - 1 != 9){\n            this._cards[index - 1].showTag(false);\n        }\n\n        this._showCardIndex++;\n        if (this._showCardIndex == 17){\n            ty.Timer.cancelTimer(this, this.addCardToPlayer);\n            this.faPai.active = false;\n            if (this._waitShowJiaoDiZhu){\n                this.showCallPanel();\n            }\n        }\n\n        this._leftPlayerController.changeShowLeftNum(this._showCardIndex);\n        this._rightPlayerController.changeShowLeftNum(this._showCardIndex);\n\n        ddz.AudioHelper.playEffect(ddz.EffectPath_mp3.click_cards, false);\n    },\n\n    showCallPanel:function () {\n        this._operateController.showJiaodz(0);\n        this._operateController.showClock();\n        this._waitShowJiaoDiZhu = false;\n    },\n\n    getOpTime:function (result) {\n        var time = result[\"opTime\"];\n\n        return time;\n    },\n\n    onActionNext: function(result) {\n        //（3）轮到谁叫地主\n        //（6）轮到谁出牌\n        ddz.LOGD(this._TAG, \"onActionNext action == next\");\n        // ddz.LOGD(this._TAG, \"当前时间:\" + new Date().getTime());\n        //第一次收到出牌的next消息时候，切换状态\n        if (this._tableState.normalInfo.m_state == ddz.Enums.TableState.TABLEDSTAT_PLAYING && this._status == ddz.Enums.PlayStatus.PLAY_STATUS_JIAODZ) {\n            if (!this._isDizhu(this._mySeatIndex)) {\n                this._startPlay();\n            }\n        }\n\n        //轮到谁了\n        var index = result[\"next\"];\n\n        if (this._tableState.normalInfo.m_topseat == index) {\n            // 一轮打牌结束，清除游戏中的不出状态值\n            ty.Timer.setTimer(this, this._onOneGameCircle, 0.2, 1, 0);\n        }\n\n        //更新时间\n        var time = this.getOpTime(result);\n\n        //轮到我操作，根据状态，确定是选择叫地主还是选择出牌\n        if (index == this._mySeatIndex) {\n            //托管状态不做任何操作\n            ddz.LOGD(this._TAG, \"index == this._mySeatIndex\");\n            if (this._isInTrust) {\n                // this._unvisibleErdouRangPaiHint();\n                return;\n            }\n            this._clearPlayedCards();\n            this._operateController.hideAll();\n\n            //叫地主，显示叫地主操作面板（1分 2分，不叫等）\n            if (this._tableState.normalInfo.m_state == ddz.Enums.TableState.TABLEDSTAT_CALLING && !this.isReplay()) {\n                this._waitShowJiaoDiZhu = false;\n                if (!this.faPai.active){\n                    //如果已经发完牌了,直接显示叫地主\n                    this._operateController.showJiaodz(this._tableState.normalInfo.m_call);\n                }\n                else{\n                    this._waitShowJiaoDiZhu = true;\n                }\n            }\n            //被动出牌时候是不是管不上？\n            var bNoCard = false;\n\n            //出牌，显示出牌操作面板\n            if (this._tableState.normalInfo.m_state == ddz.Enums.TableState.TABLEDSTAT_PLAYING) {\n\n                if (this._resetTopCardType()) {\n                    bNoCard = true;\n                }\n\n                if (!this.isReplay()) {\n                    this._operateController.showPlay(bNoCard);\n                    this.findActivePlayCards();\n                }\n            }\n            // if (bNoCard) {\n            //     time = this._tableInfo.config.m_passtime + Math.floor(Math.random() * 3 + 1);\n            // }\n            ddz.LOGD(this._TAG, \"show my Time :\" + time);\n            //显示时间\n            this._operateController.setClockVisible(true, time);\n\n            if (this.faPai.active) {\n                this._operateController.hideClock();\n            }\n        }\n        //若轮到别人，则只显示别人操作的时钟计时\n        else {\n            //右边显示闹钟\n            if (index == ddz.GlobalFuncs.GetNextIndex(this._mySeatIndex)) {\n                this._rightPlayerController.setClockVisible(true, time);\n            }\n            else {//左边显示闹钟\n                this._leftPlayerController.setClockVisible(true, time);\n            }\n\n        }\n    },\n\n    _onOneGameCircle: function() {\n        ty.Timer.cancelTimer(this, this._onOneGameCircle);\n\n        if (this._tableState.normalInfo.m_state != ddz.Enums.TableState.TABLEDSTAT_PLAYING) {\n            return;\n        }\n\n        var leftindex = ddz.GlobalFuncs.getPreIndex(this._mySeatIndex);\n\n        var userIndex = this._tableState.normalInfo.m_topseat;\n\n        if (userIndex == this._mySeatIndex) {\n            //清除两家的不出\n            this._leftPlayerController.setLblMsg(\" \");\n            this._rightPlayerController.setLblMsg(\" \");\n            this._leftPlayerController.setTipsSpr();\n            this._rightPlayerController.setTipsSpr();\n            return;\n        }\n\n        if (userIndex == leftindex) {\n            //清除本家和右家\n            this._operateController.setLblMsg(\" \");\n            this._rightPlayerController.setLblMsg(\" \");\n            this._operateController.setTipsSpr();\n            this._rightPlayerController.setTipsSpr();\n            return;\n        }\n\n        //清除本家,和左家\n        this._operateController.setLblMsg(\" \");\n        this._leftPlayerController.setLblMsg(\" \");\n        this._operateController.setTipsSpr();\n        this._leftPlayerController.setTipsSpr();\n    },\n\n\n    onActionCall: function(result) {\n        var index = result[\"seatId\"];\n        var call = result[\"call\"];\n        var nextIndex = ddz.GlobalFuncs.GetNextIndex(this._mySeatIndex);\n        var preIndex = ddz.GlobalFuncs.getPreIndex(this._mySeatIndex);\n\n        //刚才是我的下家叫的地主\n        ddz.LOGD(this._TAG, \"onActionCall  index = \" + index + \"_mySeatIndex:\" + this._mySeatIndex + \";nextIndex:\" + nextIndex + \";preIndex:\" + preIndex);\n\n        if (index == this._mySeatIndex) {\n            this._operateController.showCallNode(false);\n            if (call > 0){\n                this._operateController.setClockVisible(false);\n            }\n        }else if (index == nextIndex) {\n            this._rightSeatinfo.model.m_call = call;\n            this._rightPlayerController.setClockVisible(false);\n            this._rightPlayerController.showJiaodz(call);\n        }\n        else if (index == preIndex) {\n            //刚才是我的上家叫的地主\n            this._leftSeatinfo.model.m_call = call;\n            this._leftPlayerController.setClockVisible(false);\n            this._leftPlayerController.showJiaodz(call);\n        }\n\n        if (this._tableInfo.config.m_grab == 1 && this._mDizhuCalled == false && call == 1) { //如果是抢地主模式，第一个叫1分，则地主被叫，接下来就是抢地主或者不抢\n            this._mDizhuCalled = true;\n        }\n\n        this._refreshMultipleLabel(false, true, true);\n    },\n\n    onActionGameStart: function(result) {\n        ddz.LOGD(this._TAG, \"action == game_start\");\n        if (result.hasOwnProperty('stat')){\n            this.updateTableState(result);\n            this._resetExtraCards();\n        }\n        \n        //看返回的nowop字段，如果是该我操作，那就是我为地主，否则不是\n        this._finishJiaodz();\n        this.changePlayerAvatar(true);\n        this._flipExtraCards(false, true);\n\n        ddz.gameModel.isAcceptGameWin = false;\n\n        // if (this._goldPanel){\n        //     var roomId = this._tableInfo.roomId();\n        //     this._goldPanel.showTboxGetReward(result,roomId);\n        // }\n\n        if (result.myCardNote) {\n            this.myCardNote = result.myCardNote;\n            ty.NotificationCenter.trigger(ddz.EventType.UPDATE_CARD_NOTE, this.myCardNote);\n        }\n\n        this.userJiPaiQi();\n    },\n\n    userJiPaiQi:function(){\n\n    },\n\n    /**\n     * 哪个座位打的什么牌\n     * @param result\n     */\n    onActionCard: function(result) {\n        //解析刚才是谁打了什么牌，以便在牌桌上显示\n        ddz.LOGD(this._TAG, \"action == card\");\n        //哪个座位打的什么牌\n        var index = result[\"seatId\"];\n        var cards = result[\"cards\"];\n\n        if (result.myCardNote) {\n            this.myCardNote = result.myCardNote;\n            ty.NotificationCenter.trigger(ddz.EventType.UPDATE_CARD_NOTE, this.myCardNote);\n        }\n\n        var cardTypd ,sortedCards;\n\n        if (cards.length > 3){\n            var card_types = ddz.RobotGlobal.judgeType(cards, true);\n\n            if (card_types.length > 0){\n                cardTypd = card_types[0];\n                sortedCards = cardTypd.getCards();\n            }\n            else{\n                // sortedCards = ddz.AI.sordPlayCards(cards);\n                sortedCards = ddz.AIRobots.sordPlayCards(cards);\n            }\n        }\n        else{\n            sortedCards = cards;\n        }\n        if (index == ddz.GlobalFuncs.GetNextIndex(this._mySeatIndex)) {\n            //是我的下家打得牌\n            this._rightPlayerController.setClockVisible(false);\n            // if (this._friendPanel){\n                this._rightSeatinfo.playCardsInFriend(cards);\n            // }\n            // else{\n            //     this._rightSeatinfo.playCards(cards);\n            // }\n            this._rightPlayerController.playCards(sortedCards, this._isDizhu(index));\n            return;\n        } else if (index == ddz.GlobalFuncs.getPreIndex(this._mySeatIndex)) {\n            //是我的上家打得牌\n            this._leftPlayerController.setClockVisible(false);\n            // if (this._friendPanel){\n                this._leftSeatinfo.playCardsInFriend(cards);\n            // }\n            // else {\n            //     this._leftSeatinfo.playCards(cards);\n            // }\n            this._leftPlayerController.playCards(sortedCards, this._isDizhu(index));\n            return;\n        }\n\n        //===================是我刚才打出去的牌=====================//\n        this._isUserInteractive = true;\n\n        this._setCardsTipVisible(false);\n        this._operateController.hideAll();\n        this._playCardsFromServer(sortedCards);\n    },\n\n    /**\n     * 托管\n     * @param result\n     */\n    onActionRb: function(result) {\n        var robots = result[\"robots\"]; //[1, 0, 0]\n        var tips = result[\"tips\"];\n        if (tips) {\n            hall.MsgBoxManager.showToast({title : tips});\n            return;\n        }\n        ddz.LOGD(this._TAG, \"托管状态 onActionRb this._mySeatIndex = \" + this._mySeatIndex);\n        //我被托管\n        if (robots[this._mySeatIndex - 1]) {\n            ddz.LOGD(this._TAG, \"托管状态 ： 我被托管了\");\n            this._clearSelectedCards(true);\n            this._clearTouchedCards();\n            this.setIsInTrust(true);\n        } else {\n            ddz.LOGD(this._TAG, '托管状态 ： 别人被托管了');\n        }\n    },\n\n    onActionGameWin: function(result) {\n        ddz.matchModel.new_gift_reward = null;\n        ddz.matchModel.canShowMatchRevivalPanel = true;\n        hall.adManager.canShowTableTopBanner = false;\n        hall.adManager.canShowTableBanner = false;\n\n        var isOncePlay = hall.GlobalFuncs.ReadStringFromLocalStorage(ddz.gameModel.ONCEPLAYGAME, false);\n        if (!isOncePlay) {\n            hall.GlobalFuncs.setInLocalStorage(ddz.gameModel.ONCEPLAYGAME, true);\n        }\n\n        ddz.gameModel.throughCount = this._mySeatinfo.model.m_playinfo.playcount;\n        ddz.gameModel.isAcceptGameWin = true;\n\n        // 首先判断是否是流局\n        var that = this;\n        var dzwin = result[\"dizhuwin\"];\n\n        this._leftPlayerController.setChatButtonActive(false);\n        this._rightPlayerController.setChatButtonActive(false);\n        this._operateController.setChatButtonActive(false);\n\n        ty.NotificationCenter.trigger(ddz.EventType.CLOSE_JIPAIJI);\n        \n        // if (ddz.bannerCloseBtn) {\n        //     ddz.bannerCloseBtn.onClose();\n        // }\n        var isFlow = result && result.hasOwnProperty('nowin') && result['nowin'] === 1;\n\n        if (isFlow) {\n\n            //显示流局图片,\n            this._cardAniPlayer.playGameFlow();\n\n        }\n        else{\n            ty.NotificationCenter.trigger(ddz.EventType.SHOW_GAME_WIN_ANI, dzwin);\n        }\n\n        // //播放春天动画\n        // this._cardAniPlayer.playChunTian();\n        // isChunTian = true;\n        this._operateController.hideAll();\n        // this.cardsTip.string = \"\";\n        //游戏结束\n        this.setStatus(ddz.Enums.PlayStatus.PLAY_STATUS_GAMEOVER);\n\n        // 好友桌对局流水\n\n        //修复春天后,不加倍的BUG.\n        this._refreshMultipleLabel(false, true);\n\n        //刷新金币\n        this._isTrustEnable = false;\n        this._isUserInteractive = false;\n        this._startGameOverAnimation(this,result);\n\n        if(result.new_gift_reward){\n            ddz.matchModel.new_gift_reward = result.new_gift_reward;\n        }\n        \n    },\n\n    _startGameOverAnimation: function(target,result) {\n        ddz.LOGD(this._TAG, \"_startGameOverAnimation 游戏结束\");\n\n        //判断游戏结果\n        this._leftPlayerController.setPrepareVisible(false);\n        this._rightPlayerController.setPrepareVisible(false);\n\n        this._leftPlayerController.setChatButtonActive(false);\n        this._rightPlayerController.setChatButtonActive(false);\n        this._operateController.setChatButtonActive(false);\n\n        var leftindex = ddz.GlobalFuncs.getPreIndex(this._mySeatIndex);\n        var rightindex = ddz.GlobalFuncs.GetNextIndex(this._mySeatIndex);\n\n        if (this._goldPanel){\n            result.mySeatIndex = this._mySeatIndex;\n            this._goldPanel.updateAllScore(result);\n        }\n\n        //游戏结束后的明牌相关\n        this._showCardsWhenGameOver(leftindex, rightindex);\n        // 取消托管状态\n        this.setIsInTrust(false);\n        \n        // 金币场显示结算\n        if (this._goldPanel) {\n            this.scheduleOnce(function () {\n                this._reset();\n                this._goldPanel.showResult(result);\n            }.bind(this),2);\n        }\n\n        ty.NotificationCenter.trigger(ddz.EventType.CLOSE_JIPAIJI);\n\n        if (hall.sxAdManager) {\n            hall.sxAdManager.hide();\n        }\n    },\n\n    /**\n     * 获取底分\n     * @returns {number}\n     */\n    getBaseScore:function () {\n\n        // var base = ddz.SINGLE_SCORE_BASE;\n        // var sceneType = this.tableInfo().getSceneType();\n        // var table_config = this._tableInfo.config;\n        //\n        // if (sceneType == ddz.Enums.SceneType.ARENA) {\n        //     base = table_config.m_base || 0;\n        // } else if (sceneType == ddz.Enums.SceneType.MATCH) { //联网根据table_info获取，match和闯关待定\n        //     base = table_config.m_base || 0;\n        // }else {\n        //     base = table_config.m_roommulti * table_config.m_basemulti * table_config.m_base;\n        // }\n\n        var base = ddz.scoreData.getBaseScore();\n        this._tableInfo.config.m_base = base || 0;\n        return base;\n    },\n\n    //游戏结束后显示剩下的牌\n    _showCardsWhenGameOver: function(leftindex, rightindex) {\n        //明牌标示图片\n        if (this._mySeatinfo) {\n            this._mySeatinfo.setNotShowCards();\n        }\n\n        // if (this._friendPanel){\n            //好友场,最后亮牌的时候,要从协议里取出真实的牌,因为之前的牌,都是-1\n            // this._leftSeatinfo.model.m_card = result['cards'][leftindex - 1];\n            // this._rightSeatinfo.model.m_card = result['cards'][rightindex - 1];\n        // }\n\n        //显示上家和下家的牌\n\n        var left_cards = this._leftSeatinfo.model.m_card;\n        var isDiZhu = this._isDizhu(leftindex);\n        this._leftPlayerController.showCards(left_cards, isDiZhu);\n\n\n        var right_cards = this._rightSeatinfo.model.m_card;\n        isDiZhu = this._isDizhu(rightindex);\n        this._rightPlayerController.showCards(right_cards, isDiZhu);\n\n        if (this._cards.length > 0) {\n            //展示自己手牌\n            this._clearPlayedCards();\n        }\n    },\n\n    /************************************** 自己相关操作开始 ******************************************/\n\n    _getIndexFromPos: function(pos) {\n        var firstLineIndex = -1;\n        var secondLineIndex = -1;\n\n        if (this._checkInFirstLineCards(pos)){\n            firstLineIndex = Math.floor((pos.x - this.firstLineOriginX) / this._cardsIntervalX);\n            if (firstLineIndex > this.firstLineCardCount - 1){\n                firstLineIndex = this.firstLineCardCount - 1\n            }\n        }\n\n        if (this._checkInSecondLineCards(pos)){\n            secondLineIndex = Math.floor((pos.x - this.secondLineOriginX) / this._cardsIntervalX);\n            if (secondLineIndex > this.secondLineCardCount - 1){\n                secondLineIndex = this.secondLineCardCount - 1\n            }\n        }\n\n        if (secondLineIndex != -1){\n            return this.firstLineCardCount + secondLineIndex;\n        }\n        else if (firstLineIndex != -1){\n            return firstLineIndex;\n        }\n\n        return -1;\n    },\n    _onTouchBegan: function(pos) {\n        var index = this._getIndexFromPos(pos);\n        this._touchCardIndexBegin = index;\n        this._touchCardIndexEnd = index;\n\n        var tc = this._cards[this._touchCardIndexBegin];\n        tc.showMask(true);\n        this._touchedCards.push(tc);\n        return true;\n    },\n\n    _clearTouchedCards: function() {\n        var cards = this._touchedCards;\n        var len = cards.length;\n        for (var tmpi = 0; tmpi < len; tmpi++) {\n            var tc = cards.pop();\n            tc.showMask(false);\n        }\n    },\n\n    touchCardsMoved: function(pos) {\n        var index = this._getIndexFromPos(pos);\n        var begin = this._touchCardIndexBegin;\n        var end = this._touchCardIndexEnd;\n\n        var startpos;\n        var endpos;\n        var i;\n        var tc;\n\n        if (index < end) {\n            if (index >= begin) {\n                for (i = end; i > index; i--) {\n                    tc = this._touchedCards.pop();\n                    if (tc){\n                        tc.showMask(false);\n                    }\n\n                }\n            } else {\n                if (end <= begin) {\n                    startpos = index;\n                    endpos = end - 1;\n                } else {\n                    this._clearTouchedCards();\n                    startpos = index;\n                    endpos = begin;\n                }\n                for (i = endpos; i >= startpos; i--) {\n                    tc = this._cards[i];\n                    tc.showMask(true);\n                    this._touchedCards.push(tc);\n                }\n            }\n        } else if (index > end) {\n            if (index <= begin) {\n                for (i = end; i < index; i++) {\n                    tc = this._touchedCards.pop();\n                    if (tc){\n                        tc.showMask(false);\n                    }\n                }\n            } else {\n                if (end >= begin) {\n                    startpos = end;\n                    endpos = index;\n                } else {\n                    this._clearTouchedCards();\n                    startpos = begin - 1;\n                    endpos = index;\n                }\n                for (i = startpos + 1; i <= index; i++) {\n                    tc = this._cards[i];\n                    tc.showMask(true);\n                    this._touchedCards.push(tc);\n                }\n            }\n        }\n        this._touchCardIndexEnd = index;\n    },\n\n    //触摸是否在手牌区域，如果在的话，一定会吞掉触摸事件，修复隔牌点击头像的bug(因为虽然点着牌，但是不处理，导致没吞掉)\n    isTouchOnCards: function(pos) {\n        var len = this._cards.length;\n        if (len <= 0) {\n            return false;\n        }\n\n        var hitArea = this._checkInFirstLineCards(pos);\n\n        if (this.secondLineCardCount != 0){\n            //有第二行\n            var hitSecond = this._checkInSecondLineCards(pos);\n            hitArea = hitArea || hitSecond;\n        }\n        return hitArea;\n    },\n\n    /* 初次选牌，挑最长的一组牌出牌，第一步只挑顺子和顺对\n     * 顺子和顺对，没有副牌，优化的效果最好\n     * 三顺有副牌，而副牌是不确定的，暂时先放放\n     */\n    _selectLegalTouchCards: function() {\n        var len = this._touchedCards.length;\n        if (len <= 0) {\n            return;\n        }\n        //得到count值数组\n        var touchCardsCount = [];\n        for (var nIndex = 0; nIndex < len; nIndex++) {\n            touchCardsCount[nIndex] = this._touchedCards[nIndex]._info._number;\n        }\n        ddz.LOGD(this._TAG, \"选中的牌的count值数组是：\");\n\n        // var oneLongest = ddz.AI._findLongestFromSelectedCards(touchCardsCount);\n        var oneLongest = ddz.AIRobots._findLongestFromSelectedCards(touchCardsCount);\n        if (oneLongest.length <= 0) {\n            ddz.LOGD(this._TAG, \"出错了，没有找出最长的牌\");\n            return;\n        }\n        //处理癞子\n        //\n        var searchOneLongest = oneLongest.slice(0);\n\n        for (var i = 0; i < len; i++) {\n            var card = this._touchedCards[i];\n            var index = hall.GlobalFuncs.FindInArray(searchOneLongest, card._info._number);\n            if (index >= 0) {\n                searchOneLongest[index] = -1;\n                ddz.LOGD(this._TAG, \"拖动选择出最长牌，弹起来\");\n                this._selectedCards.push(card);\n                card.up();\n            }\n        }\n    },\n\n    touchCardsEnd: function() {\n        // 处理拖动的牌\n\n        ddz.AudioHelper.playEffect(ddz.EffectPath_mp3.click_cards, false);\n        //是否已经选择了牌\n        var hasSelect = false;\n        if (this._selectedCards.length > 0) {\n            hasSelect = true;\n        }\n        //是否是主动出牌\n        var active = false;\n        if (this._topCardType == null) {\n            active = true;\n        } else {\n            ddz.LOGD(this._TAG, 'top Card Type is : ' + this._topCardType._type);\n        }\n        ddz.LOGD(this._TAG, \"touch cards num is : \" + this._touchedCards.length+\"===\"+this._selectedCards.length);\n\n        var cardOne, i, index, h;\n        /*\n         * 点选牌优化之双王致胜\n         * 点选了一张牌（大王或者小王），而且是双王致胜的情况下，自动选中双王\n         */\n        if (!hasSelect && 1 == this._touchedCards.length && ddz.RobotGlobal.rocketWin(this._mySeatinfo.model.m_card)) {\n            cardOne = this._touchedCards[0];\n            if (cardOne._info._number == 52 || cardOne._info._number == 53) {\n                // 选中了一张大王或者小王，将另外一张王也提起\n                for (i = this._cards.length - 1; i >= 0; i--) {\n                    if ((this._cards[i]._info._number == 52 || this._cards[i]._info._number == 53) && (this._cards[i]._info._number != cardOne._info._number)) {\n                        this._touchedCards.push(this._cards[i]);\n                        break; // 跳出循环\n                    }\n                }\n            }\n        }\n\n        /*\n         * 没有选中的牌，点起了一张牌，\n         * 如果topType是没有或者对子，\n         * 选中的牌刚好是一个对子尝试做选中的优化\n         */\n        if (!hasSelect && 1 == this._touchedCards.length && (active || this._topCardType._type == ddz.Enums.PaixingType.DOUBLE_CARD)) {\n            // 如果手牌中该牌是一个对子，则同时把另一张弹起\n            var pc = ddz.RobotGlobal.getPCArrayByPoint(this._mySeatinfo.model.m_card); // 计算PC\n            cardOne = this._touchedCards[0];\n            var nPoint = cardOne._info._point;\n            var nCount = cardOne._info._number;\n            var pos = ddz.GlobalFuncs.numberToValue(cardOne._info._number);\n            // 取选中的牌在PC中的POS\n            for (var m = pc.length - 1; m >= 0; m--) {\n                if (pc[m].point == pos) {\n                    // ddz.LOGD(this._TAG, 'Pos : ' + m);\n                    if (2 == pc[m].count) {\n                        // 是个对子，把另外一张牌也弹起\n                        for (i = this._cards.length - 1; i >= 0; i--) {\n                            if (this._cards[i]._info._point == nPoint && this._cards[i]._info._number != nCount) {\n                                if (active && this._isInShunzi(i)) {\n\n                                } else {\n                                    this._touchedCards.push(this._cards[i]);\n                                }\n                            }\n                        }\n                        break;\n                    }\n                }\n            }\n        }\n\n        //\n        //如果当前没有任何一张选中的牌，那么要在滑中的牌中弹出能出的最长牌\n        // if (hasSelect == false && active == true)\n        //按照策划需求在拖动选择牌时总时提起最长得牌\n        if (hasSelect == false) {\n            this._selectLegalTouchCards();\n            for (index = 0; index < this._touchedCards.length; index++) {\n                this._touchedCards[index].showMask(false);\n            }\n            this._touchedCards = [];\n        } else {\n            var card;\n            while (this._touchedCards.length){\n                card = this._touchedCards.pop();\n                if(!card){\n                    continue;\n                }\n                card.showMask(false);\n                index = hall.GlobalFuncs.FindInArray(this._selectedCards, card);\n                //放回去\n                if (index >= 0) {\n                    this._selectedCards.splice(index, 1);\n                    card.down();\n                }\n                //弹起来\n                else {\n                    this._selectedCards.push(card);\n                    card.up();\n                }\n            }\n            // var len = this._touchedCards.length;\n            // var card;\n            // for (i = 0; i < len; i++) {\n            //     card = this._touchedCards.pop();\n            //     card.showMask(false);\n            //     index = hall.GlobalFuncs.FindInArray(this._selectedCards, card);\n            //     //放回去\n            //     if (index >= 0) {\n            //         this._selectedCards.splice(index, 1);\n            //         card.down();\n            //     }\n            //     //弹起来\n            //     else {\n            //         this._selectedCards.push(card);\n            //         card.up();\n            //     }\n            // }\n        }\n\n        this._operateController.btnPlay.interactable = this._selectedCards.length > 0;\n        this._operateController.btnPlay.node.getChildByName(\"bright\").active = this._selectedCards.length > 0;\n        this._operateController.btnPlay.node.getChildByName(\"hui\").active = !(this._selectedCards.length > 0);\n        return true;\n    },\n\n    //判断一张牌是否在顺子里\n    _isInShunzi: function(mypos) {\n        var card = this._cards[mypos];\n        var myVal = card._info._value;\n        if (myVal > 11) {\n            //11的权重为A\n            return false;\n        }\n\n        //小于我的牌数的连续个数\n        var minCnt = 0;\n        var index;\n        var judgeCardVal;\n\n        for (index = mypos + 1; index < this._cards.length; ++index) {\n            judgeCardVal = this._cards[index]._info._value;\n            if (judgeCardVal == myVal || myVal - judgeCardVal == minCnt) {\n                continue;\n            }\n            if (myVal - judgeCardVal != minCnt + 1) {\n                break;\n            }\n            ++minCnt;\n        }\n\n        //大于我的牌数的连续个数\n        var largerCnt = 0;\n        for (index = mypos - 1; index >= 0; --index) {\n            judgeCardVal = this._cards[index]._info._value;\n            if (judgeCardVal > 11) {\n                break;\n            }\n            if (judgeCardVal == myVal || myVal - judgeCardVal == -largerCnt) {\n                continue;\n            }\n            if (myVal - judgeCardVal != -largerCnt - 1) {\n                break;\n            }\n            ++largerCnt;\n        }\n\n        ddz.LOGD(this._TAG, \"is in shunzi : = \" + (minCnt + largerCnt));\n        ddz.LOGD(this._TAG, \"is in shunzi minCnt = \" + minCnt);\n        ddz.LOGD(this._TAG, \"is in shunzi largerCnt = \" + largerCnt);\n        return (minCnt + largerCnt) >= 4;\n    },\n\n    _clearPlayedCards: function() {\n        this.playedCardArea.scale = this._cardBaseScale;\n        while (this._playedCards.length > 0){\n            var card = this._playedCards.pop();\n            this.returnCard(card.node);\n        }\n    },\n    toGold:function () {\n        if (!this._goldPanel){\n            // hall.ME.setChip(100);\n            this.shutMatchResult();\n            this._goldPanelNode = cc.instantiate(this.goldPrefab);\n            this._goldPanel = this._goldPanelNode.getComponent(\"GoldModule\");\n            this._goldPanel.setTableScene(this);\n            this._goldPanelNode.parent = this.playModeNode;\n           \n            // this.upDateGoldInfo();\n        }\n    },\n    //\n    upDateGoldInfo:function () {\n        // var tableinfo = this.tableInfo();\n        // // 金币场\n        // var _goldInfo = '';\n        // if (tableinfo.hasOwnProperty('roomName')){\n        //     _goldInfo = tableinfo.roomName;\n        // }\n        // if (tableinfo.config && tableinfo.config.m_couponrule) {\n        //     _goldInfo = _goldInfo + \"\\n\" + tableinfo.config.m_couponrule;\n        // }\n        //\n        // this.setGoldInfo(_goldInfo);\n        if (this._goldPanel){\n            this._leftSeatinfo.model.m_buyinChip = ddz.scoreData.getAIScore();\n            this._rightSeatinfo.model.m_buyinChip = ddz.scoreData.getAIScore();\n            this._mySeatinfo.model.m_buyinChip = hall.ME.getChip();\n            this._goldPanel.refresh();\n        }\n    },\n\n    shutMatchResult:function () {\n        if (ddz.matchResultPanel){\n            ddz.matchResultPanel.shut();\n        }\n\n        if (ddz.arenaResultPanel){\n            ddz.arenaResultPanel.shut()\n        }\n    },\n    update:function (dt) {\n        ddz.msgCache.triggerFristMsg();\n    }\n\n\n});"]}