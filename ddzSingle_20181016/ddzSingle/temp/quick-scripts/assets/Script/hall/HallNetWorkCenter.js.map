{"version":3,"sources":["HallNetWorkCenter.js"],"names":["hall","hallNetWorkCenter","_TAG","boot","LOGD","cmdMap","ddz","EventType","MSG_USER_INFO","onReceiveUserInfo","MSG_BAG_INFO","onReceiveBagInfo","MSG_GAME_DATA","onReceiveGameData","MSG_TODO_TASKS","onTodoTask","MSG_DATA_CHANGED","onUpdateChangedData","MSG_USER","onUserName","MSG_PROD_DELIVERY","onProdDelivery","MSG_LOGIN_REWARD","onLoginReward","MSG_LED","onLed","ty","UPDATE_UER_INFO","onUPDATE_UER_INFO","MSG_LOG_OUT","onLogout","MSG_ROOM","onRoomAction","MSG_MODULE_TIP","onModuleTip","MSG_MESSAGE","onMessage","MSG_CUSTOM_RANK","onRankList","MSG_COMPLAIN","onComplain","MSG_STORE_INFO","onStoreInfo","MSG_TABLE_POPWND","onClassicPopwnd","MSG_STORE","onStore","MSG_CUSTOMTABLE","onCustomTable","MSG_ROOM_ONLINE_INFO","onRoomOnlineInfo","MSG_CASH","onCash","MSG_CHARGE_NOTIFY","onChargeNotify","NotificationCenter","listen","TCP_OPENED","onTCP_Open","TCP_RECEIVE","onReceiveTCP_Msg","MSG_ON_LOC","_onLocInfo","GET_USER_FEATURE_SUCCESS","_userFeature","shut","ignoreScope","MsgFactory","bindUser","value","msgCmd","cmd","result","gameId","SystemInfo","hallId","func","call","CMD_STORE_INFO","errMsg","error","info","MsgBoxManager","showToast","title","larr","gameid","parseInt","roomid","tableid","seatId","sceneInfo","UserInfo","onShowParam","wx","getLaunchOptionsSync","LOGW","JSON","stringify","scene","scene_id","query","shareTicket","queryS","GlobalFuncs","replaceToStringWithDic","qrCodeOption","withQrCode","par","hasOwnProperty","path","runOption","sourceCode","BiLog","clickStat","clickStatEventType","clickStatEventTypeUserFrom","inviteCode","Share","clickStatShareType","imageType","from","appid","setInLocalStorage","LAST_LOGIN_TIME","GlobalTimer","getCurDay","treasureID","_boxUserId","getOpenGid","ftID","friendModel","enterFriendTable","waitGetRevial","type","needCount","matchType","curCount","clickStatEventTypeTCP_Success","onUserInfo","bindGame","funList","gameModel","getBringConfig","getShareVideoConfig","getTimeStamp","runOneFun","length","shift","requestAnimationFrame","trigger","BUY_CHIP_CHANEG","val","data","loc","featureInfo","isInBSGS","checkBSGS","ip","isBringVersion","ME","parseBagInfo","onGameData","getHallInfo","argument","i","curValue","getGameData","getBagInfo","getUserInfo","action","code","MSG_NAME_BACK","ACTION_SYNC_TIMESTAMP","GET_TIMESTAMP","params","UPDATE_PAY_SUCCESS","success","loginRewardinfo","parse","MSG_REWARD_SUCCESS","_bBindGame","userId","parseUserInfo","UPDATE_COIN_NUMBER","SET_LOSS_MONEY_NUMBER","curScene","cc","director","getScene","name","getStoreInfo","parseGameData","hallGData","m_winchipstats","MSG_GDATA_BACK","checkMsgWithGameId","GameId","gdataInfo","m_loginsum","getEveryTaskInfo","getPersonalMsg","getGlobalMsg","userInfo","interval","objectInfo","m_heart","heartbeat","isOtherLogin","err","UPDATE_CASH_RESULT","msgInfo","praseModultTip","list","parseSysInfo","MSG_SYS_MESSAGE_BACK","parseReceiveInfo","MSG_REC_MESSAGE_BACK","parseSendInfo","MSG_SEND_MESSAGE_BACK","msgTitle","unReadCount","sysUnread","HAS_MAIL_KEY","RECIVE_MESSAGE_LIST","notifyMailMessage","messageCount","msgs","text","indexOf","_info","index_2","versions","slice","timer","time","content","sign","msgid","id","get","attachment","UPDATE_COMMON_CONFIG","itemlist","countNum","coinNum","diamondNum","jipaiqinum","itemId","count","str","gameWorld","parseMatchStore","STORE_INFO_UPDATE","UPDATE_POP_WINDOW","MSG_CUSTOMTABLE_GAMEDATA","MSG_CUSTOMTABLE_FIGHTDATA"],"mappings":"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","file":"HallNetWorkCenter.js","sourceRoot":"../../../../../assets/Script/hall","sourcesContent":["/**\n * 大厅消息中心\n */\nhall.hallNetWorkCenter = {\n    _TAG : 'hall.hallNetWorkCenter',\n    boot : function (){\n        hall.LOGD(this._TAG, \"boot!\");\n\n        this.cmdMap = {};\n        //注册消息监听\n\n        this.cmdMap[ddz.EventType.MSG_USER_INFO] = this.onReceiveUserInfo;\n        this.cmdMap[ddz.EventType.MSG_BAG_INFO] = this.onReceiveBagInfo;\n        this.cmdMap[ddz.EventType.MSG_GAME_DATA] = this.onReceiveGameData;\n        this.cmdMap[ddz.EventType.MSG_TODO_TASKS] = this.onTodoTask;\n        this.cmdMap[ddz.EventType.MSG_DATA_CHANGED] = this.onUpdateChangedData;\n        this.cmdMap[ddz.EventType.MSG_USER] = this.onUserName;\n\n        this.cmdMap[ddz.EventType.MSG_PROD_DELIVERY] = this.onProdDelivery;\n\n        this.cmdMap[ddz.EventType.MSG_LOGIN_REWARD] = this.onLoginReward;\n\n        this.cmdMap[ddz.EventType.MSG_LED] = this.onLed;\n        this.cmdMap[ty.EventType.UPDATE_UER_INFO] = this.onUPDATE_UER_INFO;\n        this.cmdMap[ty.EventType.MSG_LOG_OUT] = this.onLogout;\n\n        this.cmdMap[ddz.EventType.MSG_ROOM] = this.onRoomAction;\n        this.cmdMap[ddz.EventType.MSG_MODULE_TIP] = this.onModuleTip;\n        this.cmdMap[ddz.EventType.MSG_MESSAGE] = this.onMessage;\n        this.cmdMap[ddz.EventType.MSG_CUSTOM_RANK] = this.onRankList;\n        this.cmdMap[ddz.EventType.MSG_COMPLAIN] = this.onComplain;\n        this.cmdMap[ddz.EventType.MSG_STORE_INFO] = this.onStoreInfo;\n\n        this.cmdMap[ddz.EventType.MSG_TABLE_POPWND] = this.onClassicPopwnd;\n        this.cmdMap[ddz.EventType.MSG_STORE] = this.onStore;\n        this.cmdMap[ddz.EventType.MSG_CUSTOMTABLE] = this.onCustomTable;\n\n        this.cmdMap[ddz.EventType.MSG_ROOM_ONLINE_INFO] = this.onRoomOnlineInfo;\n\n        this.cmdMap[ddz.EventType.MSG_CASH] = this.onCash;\n\n        // 商城购买;\n        this.cmdMap[ddz.EventType.MSG_CHARGE_NOTIFY] = this.onChargeNotify;\n        \n        //注册监听\n        ty.NotificationCenter.listen(ty.EventType.TCP_OPENED, this.onTCP_Open, this);\n        ty.NotificationCenter.listen(ty.EventType.TCP_RECEIVE, this.onReceiveTCP_Msg, this);\n        ty.NotificationCenter.listen(ddz.EventType.MSG_ON_LOC, this._onLocInfo, this);\n\n        ty.NotificationCenter.listen(ty.EventType.GET_USER_FEATURE_SUCCESS, this._userFeature, this);\n    },\n    \n    shut : function(){\n        this.cmdMap = {};\n        ty.NotificationCenter.ignoreScope(this);\n    },\n\n    //\n    onTCP_Open : function(){\n        //发送BindUser\n        hall.MsgFactory.bindUser();\n    },\n    /**\n     * 收到TCP消息\n     */\n    onReceiveTCP_Msg : function(value){\n        var msgCmd = value.cmd;\n        var result = value.result;\n        if (result){\n            var gameId = result.gameId;\n            if (gameId === ty.SystemInfo.hallId){\n                //大厅消息在这里处理，其它游戏，在自己的插件里监听消息，并用gameId进行过滤\n                var func = this.cmdMap[msgCmd];\n                if (func){\n                    // func(value);\n                    func.call(this, value);\n                }\n                else{\n                    // ty.NotificationCenter.trigger(msgCmd, value);\n                    hall.LOGD(this._TAG, \"未注册关于消息 ： \" + msgCmd + \" 的监听！\");\n                }\n            }else if (value.cmd == ddz.EventType.CMD_STORE_INFO) {  // store_config 特殊处理下,大厅共用,此消息没有传gameId\n                var func = this.cmdMap[msgCmd];\n                if (func){\n                    func.call(this, value);\n                }\n                else{\n                    hall.LOGD(this._TAG, \"未注册关于消息 ： \" + msgCmd + \" 的监听！\");\n                }\n            }else if (value.cmd == ddz.EventType.MSG_LED){      // 'led' 消息,\n                var func = this.cmdMap[msgCmd];\n                if (func){\n                    func.call(this, value);\n                }\n                else{\n                    hall.LOGD(this._TAG, \"未注册关于消息 ： \" + msgCmd + \" 的监听！\");\n                }\n            }\n        }\n\n        else{\n            if (msgCmd == ty.EventType.MSG_LOG_OUT){\n                var errMsg = value.error ? value.error.info : null;\n                if (errMsg){\n                    hall.MsgBoxManager.showToast({title : errMsg});\n                }\n            }\n        }\n    },\n\n    _onLocInfo: function (larr) {\n        // hall.MsgBoxManager.showToast({title:'' + larr.toString()});\n        ddz.LOGD(\"\",\"file = [HallNetWorkCenter] fun =[_onLocInfo] \");\n\n        var gameid = parseInt(larr[0]);\n        var roomid = parseInt(larr[1]);\n        var tableid = parseInt(larr[2]);\n        var seatId = parseInt(larr[3]);\n\n        // var sceneInfo = wx.getLaunchOptionsSync();\n        var sceneInfo = ty.UserInfo.onShowParam || wx.getLaunchOptionsSync();\n        // hall.LOGW(null, \"+++++++++sceneInfo++++++++\"+JSON.stringify(sceneInfo));\n        // var scene = sceneInfo.scene;\n        // var query = sceneInfo.query;\n        hall.LOGW(null, \"file = [HallNetWorkCenter] fun = [_onLocInfo] sceneInfo = \"+JSON.stringify(sceneInfo));\n        // var shareTicket;\n        var scene = ty.UserInfo.scene_id || sceneInfo.scene;\n        var query = sceneInfo.query;\n        var shareTicket = sceneInfo.shareTicket;\n        var queryS = hall.GlobalFuncs.replaceToStringWithDic(query);\n\n        if (ddz.qrCodeOption.withQrCode(scene)){\n            //是否为从小程序码进入\n            var par = \"\";\n            if (query.hasOwnProperty('scene')){\n                //个人小程序码\n                par = query.scene;\n            }\n            else if (sceneInfo.hasOwnProperty('path')){\n                par = sceneInfo.path;\n            }\n            ddz.qrCodeOption.runOption(par, scene);\n        }\n\n        // if (scene == 1074 && query && query.from == \"fuhao_guanfang\") { // 公众号会话下发的小程序消息卡片\n        //     if (query.topage&&query.topage == \"fuli\") {\n        //         // hall.GlobalFuncs.showDiamondWindowWithType('invite');\n        //         hall.LOGW(\"\",\"file = [HallNetWorkCenter] fun = [_onLocInfo] fuli\");\n        //         ddz.gameModel.getDayInviteReward();\n        //         ddz.isClickShareReward = true;\n        //     }else {\n        //         // ddz.gameModel.shareToGetreward(ddz.Share.SharePointType.gongZhongHaoCard);\n        //     }\n        //     // if (query.param1 && query.param2){\n        //     //     ddz.gameModel.getBoxReward(parseInt(query.param1), query.param2);\n        //     // }\n        // }else if(scene == 1035 && query && query.from == \"fuhao_guanfang\") { // 公众号自定义菜单\n        //     // ddz.gameModel.shareToGetreward(ddz.Share.SharePointType.gongZhongHaoMenu);\n        // }else if(scene == 1104) { // 小程序进入\n        //     // hall.LOGW(\"\",\"file = [HallNetWorkCenter] fun = [_onLocInfo] 小程序进入\");\n        //     // ddz.gameModel.shareToGetreward(ddz.Share.SharePointType.addApplet);\n        // }\n\n        if(query && query.sourceCode){\n            ty.BiLog.clickStat(ty.UserInfo.clickStatEventType.clickStatEventTypeUserFrom,[scene,query.inviteCode,ddz.Share.clickStatShareType[query.sourceCode],\n                query.imageType,\"GameStart\"]);\n         \n        }else {\n            ty.BiLog.clickStat(ty.UserInfo.clickStatEventType.clickStatEventTypeUserFrom,[scene,query.from,query.appid,\n                \"GameStart\"]);\n        }\n\n        hall.GlobalFuncs.setInLocalStorage(ddz.Share.LAST_LOGIN_TIME,hall.GlobalTimer.getCurDay());\n\n        //存储本次登录时间最为最后登录时间\n        // if(ddz.Share.isOnShare){\n        //     ddz.Share.playAnimationAfterShareWithType();\n        // }\n        // ddz.Share.isOnShare = false;\n\n        if (ty.SystemInfo.treasureID != \"\" && query.inviteCode) {\n            var _boxUserId = query.inviteCode;\n            ddz.Share.getOpenGid(shareTicket,_boxUserId);\n            // ddz.gameModel.getBoxReward(parseInt(_boxUserId),ty.SystemInfo.treasureID,_openGid);\n            ty.SystemInfo.shareTicket = \"\";\n        }\n        if (ty.SystemInfo.ftID != \"\") {\n            ddz.friendModel.enterFriendTable(ty.SystemInfo.ftID);\n            ty.SystemInfo.shareTicket = \"\";\n        }\n\n        // if (ddz.waitGetRevial && ddz.waitGetRevial.type == 'showWindow'){\n        //     //分享到了好友,再次拉起面板,让玩家分享到群\n        //     ddz.LOGD(\"ddz.waitGetRevial.type\", \"分享到了个人!\" + ddz.waitGetRevial.type);\n        //     ddz.GlobalFuncs.showRevialWindow(true,1);\n        //     ddz.waitGetRevial = null;\n        // }\n\n        if (ddz.waitGetRevial && ddz.waitGetRevial.type == 'send'){\n            var needCount = ddz.waitGetRevial.needCount;\n            if(ddz.waitGetRevial.matchType == 'arena') {\n                ddz.waitGetRevial.type = 'waitRecive';\n                ddz.waitGetRevial.curCount = 0;\n            } else {\n                ddz.waitGetRevial = {\n                    type : 'waitRecive',\n                    curCount : 0,\n                    needCount : needCount\n                };\n            }\n            // //发送得钻石的消息\n            // for (var i = 0; i < needCount; i++){\n            //     ddz.gameModel.shareToGetreward(ddz.waitGetRevial.sharePoint || ddz.Share.SharePointType.firstFail);\n            // }\n        }\n\n        // }\n        ty.SystemInfo.shareTicket = \"\";\n    },\n\n    //==================消息回调方法开始=========================\n\n    onReceiveUserInfo : function(value){\n        //发送bindGame信息\n        ty.BiLog.clickStat(ty.UserInfo.clickStatEventType.clickStatEventTypeTCP_Success, []);\n        this.onUserInfo(value);\n        hall.MsgFactory.bindGame(ty.SystemInfo.hallId);\n        var funList = [\n            ddz.gameModel.getBringConfig,\n            ddz.gameModel.getShareVideoConfig,\n        ];\n\n        hall.MsgFactory.getTimeStamp();\n        var runOneFun = function () {\n            if (funList.length > 0){\n                var func = funList.shift();\n                func();\n                requestAnimationFrame(runOneFun);\n            }\n        };\n\n        runOneFun();\n\n        ty.NotificationCenter.trigger(ddz.EventType.BUY_CHIP_CHANEG);\n    },\n\n    _userFeature:function (val) {\n        // if (!val.retmsg) {\n        //     return\n        // }\n        // hall.LOGW(\"\",\"file = [HallNetWorkCenter] fun = [_userFeature] val = \" + JSON.stringify(val));\n        // ty.UserInfo.featureInfo = val.retmsg;\n        // ty.UserInfo.isInBSGS = hall.GlobalFuncs.checkBSGS(ty.UserInfo.featureInfo.last_login_city); //是否在北上广深\n        // ty.UserInfo.ip = ty.UserInfo.featureInfo.last_login_ip; //上一次登录的IP\n        // if (ddz.gameModel.isBringVersion) {\n        //     ty.UserInfo.isInBSGS = true;\n        // }\n       \n        if (val.data && val.data.loc) {\n            hall.LOGW(\"\",\"file = [HallNetWorkCenter] fun = [_userFeature] val = \" + JSON.stringify(val));\n            ty.UserInfo.featureInfo = val.data;\n            ty.UserInfo.isInBSGS = hall.GlobalFuncs.checkBSGS(ty.UserInfo.featureInfo.loc[2]); //是否在北上广深\n            ty.UserInfo.ip = ty.UserInfo.featureInfo.ip; //\n            if (ddz.gameModel.isBringVersion) {\n                ty.UserInfo.isInBSGS = true;\n            }\n        }\n        hall.LOGW(\"\",\"file = [HallNetWorkCenter] fun = [_userFeature] ty.UserInfo.isInBSGS = \" + ty.UserInfo.isInBSGS);\n\n    },\n\n    onReceiveBagInfo : function (value) {\n        if (typeof(value) == 'undefined') {\n            return;\n        }\n        hall.ME.parseBagInfo(value);\n    },\n\n    onReceiveGameData : function(value){\n        hall.LOGW(null, \"file = [HallNetWorkCenter] fun = [onReceiveGameData] \");\n        this.onGameData(value);\n        hall.MsgFactory.getHallInfo(ty.SystemInfo.gameId);\n    },\n\n    onTodoTask: function(value) {\n        if (value && value[\"result\"]) {\n            \n        }\n    },\n\n    onUpdateChangedData: function(argument) {\n        hall.LOGD(this._TAG, \"onUpdateGold -------------------------\");\n        //解析数据\n        if (typeof(argument) != 'undefined') {\n            //hall.ME.parseUserInfo(argument[0]);\n            var result = argument[\"result\"];\n            if (typeof(result) != 'undefined' && typeof(result['changes']) != 'undefined') {\n                var gameId = result.gameId;\n                hall.LOGD(this._TAG, 'gameid = ' + gameId);\n                for (var i = 0; i < result['changes'].length; i++) {\n                    var curValue = result[\"changes\"][i];\n                    if (typeof(curValue) == 'undefined') {\n                        continue;\n                    }\n\n                    if (curValue == 'gdata') {\n                        hall.LOGD(this._TAG, \"update_notify,更新gdata\");\n                        hall.MsgFactory.getGameData(gameId);\n                    } else if (curValue == 'item') {\n                        hall.LOGD(this._TAG, \"update_notify,更新道具\");\n                        hall.MsgFactory.getBagInfo();\n                    }\n                    //金币，钻石\n                    else if (curValue == \"udata\") {\n                        hall.LOGD(this._TAG, \"update_notify,更新钻石金币\");\n                        hall.MsgFactory.getUserInfo(gameId);\n                    }\n                }\n            }\n        }\n    },\n    onUserName: function(argument) {\n        var data = argument[\"result\"];\n        if (typeof(data) != 'undefined') {\n            var action = data[\"action\"];\n            if (action == \"get_name\") {\n                var code = data[\"code\"];\n                if (code == 0 || !code) {\n                    ty.NotificationCenter.trigger(ddz.EventType.MSG_NAME_BACK, data);\n                } else {\n                    hall.MsgBoxManager.showToast({title : \"你输入的ID不正确，请输入有效ID.\"});\n                }\n            }else if (action == ddz.EventType.ACTION_SYNC_TIMESTAMP) {\n                //获取当前时间戳\n                ty.NotificationCenter.trigger(ddz.EventType.GET_TIMESTAMP, data);\n            }\n        }\n    },\n    onProdDelivery: function(params) {\n        hall.LOGW(\"\",\"file = [HallNetWorkCenter] fun = [onProdDelivery] params = \" + JSON.stringify(params));\n        ty.NotificationCenter.trigger(ddz.EventType.UPDATE_PAY_SUCCESS, params);\n    },\n\n\n    onLoginReward: function(argument) {\n        var result = argument[0][\"result\"];\n        if (typeof(result) != 'undefined') {\n            var success = result[\"success\"];\n            if (success) {\n                hall.ME.loginRewardinfo.parse(result);\n                ty.NotificationCenter.trigger(ddz.EventType.MSG_REWARD_SUCCESS);\n            }\n        }\n    },\n\n    // 获取登录信息,登录成功，会返回五个比赛场里面第一个界面的信息，比如进入经典场，的第一个界面\n    onUserInfo: function(argument) {\n        if (typeof(argument) == 'undefined') {\n            return;\n        }\n        if (this._bBindGame) {\n            // 获取大厅的game_data\n            // hall.MsgFactory.getGameData(ty.SystemInfo.hallId);\n            // hall.MsgFactory.bindGame(ddz.GameId);\n        }\n\n        ddz.LOGD(\"\",\"file = [HallNetWorkCenter] fun = [onUserInfo] \");\n\n        ty.UserInfo.userId = argument[\"result\"][\"userId\"];\n        ddz.LOGD(null, \"onUserInfo argument = \" + JSON.stringify(argument));\n        hall.ME.parseUserInfo(argument);\n\n        // 更新UserInfo\n        ty.NotificationCenter.trigger(ty.EventType.UPDATE_UER_INFO, hall.ME);\n\n        // 刷新金币\n        ty.NotificationCenter.trigger(ddz.EventType.UPDATE_COIN_NUMBER);\n\n        // 刷新剩余奖金\n        ty.NotificationCenter.trigger(ddz.EventType.SET_LOSS_MONEY_NUMBER);\n\n        // ddz.gameModel.checkShareReward(ddz.Share.SharePointType.gongZhongHaoCard);\n        // ddz.gameModel.checkShareReward(ddz.Share.SharePointType.gongZhongHaoMenu);\n        // ddz.gameModel.checkShareReward(ddz.Share.SharePointType.firstUseJiPaiQi);\n        // ddz.gameModel.checkShareReward(ddz.Share.SharePointType.addApplet);\n\n        var curScene = cc.director.getScene();\n        if (curScene.name == \"Ddz\") {\n            // ddz.gameModel.checkShareReward(ddz.Share.SharePointType.getDayFirstLogin);\n        }\n        hall.MsgFactory.getBagInfo();\n        hall.MsgFactory.getStoreInfo(\"update\");\n\n        // ddz.gameModel.queryWatchVideoReward();\n    },\n\n    // 返回gameData\n    onGameData: function(argument) {\n        hall.LOGD(this._TAG, 'onGameData');\n        if (typeof(argument) != \"undefined\") {\n            hall.ME.parseGameData(argument);\n\n            if (hall.ME.hallGData.m_winchipstats && hall.ME.hallGData.m_winchipstats.length > 0) {\n                ty.NotificationCenter.trigger(ddz.EventType.MSG_GDATA_BACK);\n            }\n\n            if (!hall.GlobalFuncs.checkMsgWithGameId(argument, ddz.GameId)) {\n                // 大厅的game_data，返回，暂时没内容\n                // return;\n            }\n\n            // 更新GameData，暂时跟更新UserInfo一起用\n            // ty.NotificationCenter.trigger(hall.EventType.UPDATE_UER_INFO, hall.ME);\n            // if (this._bBindGame) {\n            //     this._bBindGame = false;\n                if (hall.ME.gdataInfo.m_loginsum == 1) {\n                    // 新手获取新手奖励，新手奖励实在bind_game之后在地主的游戏服发放的\n                    hall.MsgFactory.getUserInfo(ddz.GameId);\n                }\n\n                // 获取任务\n                hall.MsgFactory.getEveryTaskInfo(ddz.GameId, 'update');\n                //获取个人消息和系统消息\n                hall.MsgFactory.getPersonalMsg();\n                hall.MsgFactory.getGlobalMsg();\n            // }\n        }\n    },\n\n    onLed: function(params) {\n    },\n\n    // 用户数据加载完之后，开始启动心跳\n    onUPDATE_UER_INFO: function(userInfo) {\n        var interval = userInfo.objectInfo.m_heart.heartbeat;\n        // 开始心跳逻辑\n        // ty.HeartBeat.startHeartBeat(interval, 10);\n    },\n\n    onLogout: function(argument) {\n        hall.ME.isOtherLogin = true;\n        var err = argument[\"error\"];\n        if (err) {\n            hall.MsgBoxManager.showToast({title : err[\"info\"]});\n\n            // h5.CommonWindow.createSimple(err[\"info\"], function() {\n            //     var scene = h5.EntranceLayer.createScene();\n            //     cc.director.runScene(scene);\n            // });\n        }\n    },\n    // 组局 /////////////\n    onRoomAction: function(params) {\n        hall.LOGD(null, this._TAG, \"onRoomAction -------------------- \");\n    },\n    onCash : function (argument) {\n        ty.NotificationCenter.trigger(ddz.EventType.UPDATE_CASH_RESULT,argument);\n    },\n\n    onChargeNotify:function(params) {\n\n    },\n\n    onModuleTip: function(argument) {\n        var data = argument[\"result\"];\n        if (typeof(data) != 'undefined') {\n            var action = data[\"action\"];\n            if (action == \"update\") {\n                hall.ME.msgInfo.praseModultTip(data[\"modules\"]);\n            }\n        }\n    },\n\n    onRankList : function (argument) {\n        ty.NotificationCenter.trigger(ddz.EventType.MSG_CUSTOM_RANK,argument);\n    },\n\n    onMessage: function(argument) {\n        var data = argument[\"result\"];\n        if (typeof(data) != 'undefined') {\n            var action = data[\"action\"];\n            var list = data[\"list\"];\n            if (action == \"sys_msg_list\") {\n                hall.ME.msgInfo.parseSysInfo(list);\n                ty.NotificationCenter.trigger(ddz.EventType.MSG_SYS_MESSAGE_BACK);\n            } else if (action == \"msg_receive_list\") {\n                hall.ME.msgInfo.parseReceiveInfo(list);\n                ty.NotificationCenter.trigger(ddz.EventType.MSG_REC_MESSAGE_BACK);\n            } else if (action == \"msg_send_list\") {\n                hall.ME.msgInfo.parseSendInfo(list);\n                ty.NotificationCenter.trigger(ddz.EventType.MSG_SEND_MESSAGE_BACK);\n            } else if (action == \"msg_send\") {\n\n                var code = data[\"code\"];\n                var msgTitle = code == 0 ? \"发送成功\" : \"发送失败\";\n                hall.MsgBoxManager.showToast({title : msgTitle});\n\n            } else if (action == \"unread_count\") {\n                var unReadCount = data[\"chat_unread\"];\n                var sysUnread = data[\"sys_unread\"];\n                if (unReadCount /*+ sysUnread*/) {\n                    hall.GlobalFuncs.setInLocalStorage(hall.HAS_MAIL_KEY, true);\n                } else {\n                    hall.GlobalFuncs.setInLocalStorage(hall.HAS_MAIL_KEY, false);\n                }\n            } else if (action == \"list\") {\n                ty.NotificationCenter.trigger(ddz.EventType.RECIVE_MESSAGE_LIST,data);\n\n            }else if (action == \"m_list\") {\n                ddz.gameModel.notifyMailMessage = [];\n                ddz.gameModel.messageCount = 0;\n                var list = data.msgs;\n                if (list.length > 0) {\n                    for (var i = 0; i < list.length; i++){\n                        //      \"index\": 13,\n                        //     \"versions\": \"新版本更新公告\",\n                        //     \"timer\": \"2018.6.6\",\n                        //     \"title\": \"新版本更新公告\",\n                        //     \"content\": \"亲爱的玩家：\\n\\n1、免费领奖励（观看视频）奖励限时翻倍，玩家可领取更多免费福利。\\n2、邀请好友上线钻石奖励3倍活动开启。\\n上述活动持续至6月8日23:59。\",\n                        //     \"sign\": \"富豪斗地主运营团队\",\n                        if (list[i].text.indexOf(\"fuhao\") >= 0) {\n                            var _info = {};\n                            var index_2 = list[i].text.indexOf(\"#\");\n                            if (index_2 > 0) {\n                                _info.versions = list[i].text.slice(list[i].text.indexOf(\"fuhao\") + 5,index_2);\n                                _info.title = list[i].text.slice(list[i].text.indexOf(\"fuhao\") + 5,index_2);\n                            }\n\n                            _info.timer = list[i].time;\n\n                            _info.content = list[i].text;\n                            _info.sign = \"富豪斗地主运营团队\";\n                            _info.msgid = list[i].id;\n                            _info.get = list[i].get;\n                            _info.attachment = list[i].attachment;\n                            if (list[i].get == 0) {\n                                ddz.gameModel.messageCount ++;\n                            }\n                            ddz.gameModel.notifyMailMessage[i] = _info;\n                        }\n                    }\n                    ty.NotificationCenter.trigger(ddz.EventType.UPDATE_COMMON_CONFIG);\n                }\n            }else if (action == \"m_receive\") {\n                // hall.MsgFactory.getSystemMessageInfo();\n                var itemlist = data[\"itemlist\"];\n                var countNum = itemlist.length;\n                var coinNum;\n                var diamondNum;\n                var jipaiqinum;\n                if (countNum > 0) {\n                    for (var i = 0; i < countNum; i++){\n                        if (itemlist[i].itemId == \"user:chip\") {\n                            coinNum = itemlist[i].count;\n                        }else if (itemlist[i].itemId == \"item:1311\") {\n                            diamondNum = itemlist[i].count;\n                        }else if (itemlist[i].itemId == \"item:1363\") {\n                            jipaiqinum = itemlist[i].count;\n                        }\n                    }\n                }\n            }\n        }\n    },\n\n    onComplain: function(argument) {\n        var result = argument;\n        var error = result[\"error\"];\n        var str;\n        if (error) {\n            str = error[\"info\"];\n        } else {\n            var data = result[\"result\"][\"success\"];\n            str = data[\"info\"];\n        }\n        hall.MsgBoxManager.showToast({title : str});\n    },\n\n\n    //返回商店信息\n    onStoreInfo: function(argument) {\n        if (typeof(argument) != 'undefined' && typeof(argument[\"result\"]) != 'undefined') {\n            hall.gameWorld.parseMatchStore(argument[\"result\"]);\n            ty.NotificationCenter.trigger(ddz.EventType.STORE_INFO_UPDATE);\n        }\n    },\n\n\n    //发送quickstart成功后，返回的信息\n    onClassicPopwnd: function(argument) {\n        hall.LOGD(this._TAG, \"onClassicPopwnd receivemsg-------------------------\");\n        ty.NotificationCenter.trigger(ddz.EventType.UPDATE_POP_WINDOW, argument);\n    },\n\n    onStore: function(argument) {\n        var data = argument[0][\"result\"];\n        if (typeof(data) != 'undefined') {\n            var action = data[\"action\"];\n            var code = data[\"code\"];\n            if (action == \"jewel_give\") {\n                if (code == 0) {\n                    // h5.ToastLayer.create(\"已发出赠送请求\");\n                } else {\n                    var info = data[\"info\"];\n                    // h5.CommonWindow.createSimple(info);\n                }\n            }\n        }\n    },\n\n    onCustomTable: function(params) {\n        var data = params['result'];\n        if (data) {\n            var action = data[\"action\"];\n            if (action == \"game_data\") {\n                // hall.CustomRoomManager.parsePersonalData(data);\n                ty.NotificationCenter.trigger(ddz.EventType.MSG_CUSTOMTABLE_GAMEDATA, data);\n            } else if (action == \"fight_data\") {\n                // hall.CustomRoomManager.parseFightData(data);\n                ty.NotificationCenter.trigger(ddz.EventType.MSG_CUSTOMTABLE_FIGHTDATA, data);\n            }\n        }\n    },\n\n    onRoomOnlineInfo : function (value) {\n        //这里没有应用\n    }\n\n};\n\n//模块启动\nhall.hallNetWorkCenter.boot();"]}