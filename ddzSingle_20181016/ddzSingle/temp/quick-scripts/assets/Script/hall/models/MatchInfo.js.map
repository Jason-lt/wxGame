{"version":3,"sources":["MatchInfo.js"],"names":["hall","MatchData","cc","Class","ctor","fees","playMode","matchId","roomId","matchName","taskDesc","onlineCount","matchType","record","desInfo","rewardRank","parseData","data","isRecordExist","ret","key","MatchInfo","_TAG","LOGD","matchArray","matchDesMap","curMatchAddition","setCurrentMatchId","curMatchId","getMatchStageDes","des","toString","stages","index","stageIndex","riseUserCount","setCurMatchAdditionInfo","additionInfo","getCurrentMatchData","addMatchDesInfo","getMatchDesByMatchId","matchDes","parseMatchListInfo","matchList","i","length","match"],"mappings":";;;;;;AAAA;;;;AAIAA,KAAKC,SAAL,GAAiBC,GAAGC,KAAH,CAAS;AACtBC,UAAM,gBAAW;AACb,aAAKC,IAAL,GAAY,IAAZ;AACA,aAAKC,QAAL,GAAgB,GAAhB;AACA,aAAKC,OAAL,GAAe,GAAf;AACA,aAAKC,MAAL,GAAc,GAAd;AACA,aAAKC,SAAL,GAAiB,GAAjB;AACA,aAAKC,QAAL,GAAgB,GAAhB;AACA,aAAKC,WAAL,GAAmB,CAAnB;AACA,aAAKC,SAAL,GAAiB,GAAjB;AACA,aAAKC,MAAL,GAAc,IAAd;AACA,aAAKC,OAAL,GAAe,IAAf;AACA,aAAKC,UAAL,GAAkB,IAAlB;AACH,KAbqB;;AAetBC,eAAW,mBAASC,IAAT,EAAe;AACtB,aAAKZ,IAAL,GAAYY,KAAK,MAAL,CAAZ;AACA,aAAKX,QAAL,GAAgBW,KAAK,WAAL,CAAhB;AACA,aAAKV,OAAL,GAAeU,KAAK,SAAL,CAAf;AACA,aAAKT,MAAL,GAAcS,KAAK,QAAL,CAAd;AACA,aAAKR,SAAL,GAAiBQ,KAAK,MAAL,CAAjB;AACA,aAAKP,QAAL,GAAgBO,KAAK,UAAL,CAAhB;AACA,aAAKN,WAAL,GAAmBM,KAAK,aAAL,CAAnB;AACA,aAAKL,SAAL,GAAiBK,KAAK,MAAL,CAAjB;AACA,aAAKJ,MAAL,GAAcI,KAAK,QAAL,CAAd;AACA,aAAKF,UAAL,GAAkBE,KAAK,YAAL,CAAlB;AACH,KA1BqB;;AA4BtB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwGA;AACA;AACA;;AAEAC,mBAAe,yBAAW;AACtB,YAAIC,MAAM,KAAV;AACA,aAAI,IAAIC,GAAR,IAAe,KAAKP,MAApB,EAA4B;AACxBM,kBAAM,IAAN;AACH;AACD,eAAO,KAAKN,MAAL,IAAeM,GAAtB;AACH;;AA9IqB,CAAT,CAAjB;;AAkJA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+EAnB,KAAKqB,SAAL,GAAiBnB,GAAGC,KAAH,CAAS;AACtBmB,UAAM,gBADgB;AAEtBlB,UAAM,gBAAW;AACbJ,aAAKuB,IAAL,CAAU,KAAKD,IAAf,EAAqB,SAArB;AACA,aAAKE,UAAL,GAAkB,EAAlB;AACA,aAAKC,WAAL,GAAmB,EAAnB;AACA,aAAKC,gBAAL,GAAwB,IAAxB,CAJa,CAImB;AACnC,KAPqB;AAQtBC,uBAAmB,2BAASpB,OAAT,EAAkB;AACjC,aAAKqB,UAAL,GAAkBrB,OAAlB;AACH,KAVqB;;AAYtBsB,sBAAkB,4BAAW;AACzB,YAAIC,MAAM,EAAV;AACA,YAAG,KAAKJ,gBAAL,IAAyB,KAAKA,gBAAL,CAAsBnB,OAAlD,EAA2D;AACvD,gBAAIO,UAAU,KAAKW,WAAL,CAAiB,KAAKC,gBAAL,CAAsBnB,OAAtB,CAA8BwB,QAA9B,EAAjB,CAAd;AACA,gBAAGjB,WAAWA,QAAQkB,MAAtB,EAA8B;AAC1B,qBAAI,IAAIZ,GAAR,IAAeN,QAAQkB,MAAvB,EAA+B;AAC3B,wBAAGlB,QAAQkB,MAAR,CAAeZ,GAAf,EAAoBa,KAApB,IAA6B,KAAKP,gBAAL,CAAsBQ,UAAtD,EAAkE;AAC9DJ,8BAAMhB,QAAQkB,MAAR,CAAeZ,GAAf,EAAoBe,aAApB,IAAqC,CAArC,GAAyC,IAAzC,GAAgD,MAAMrB,QAAQkB,MAAR,CAAeZ,GAAf,EAAoBe,aAA1B,GAA0C,IAAhG;AACA;AACH;AACJ;AACJ;AACJ;AACD,eAAOL,GAAP;AACH,KA1BqB;;AA4BtBM,6BAAyB,iCAASC,YAAT,EAAuB;AAC5C,YAAG,CAAC,KAAKX,gBAAT,EAA2B;AACvB,iBAAKA,gBAAL,GAAwB;AACpB,2BAAU,CADU;AAEpB,0BAAS,CAFW;AAGpB,8BAAa,CAHO;AAIpB,yBAAQ,CAJY;AAKpB,4BAAW;AALS,aAAxB;AAOH;AACD,aAAK,IAAIN,GAAT,IAAgB,KAAKM,gBAArB,EAAuC;AACnC,gBAAGW,aAAajB,GAAb,CAAH,EAAsB;AAClB,qBAAKM,gBAAL,CAAsBN,GAAtB,IAA6BiB,aAAajB,GAAb,CAA7B;AACH;AACJ;AACJ,KA3CqB;;AA6CtBkB,yBAAqB,+BAAW;AAC5B,YAAG,KAAKV,UAAR,EACI,OAAO,KAAKJ,UAAL,CAAgB,KAAKI,UAAL,CAAgBG,QAAhB,EAAhB,CAAP,CADJ,KAGI,OAAO,IAAP;AACP,KAlDqB;;AAoDtBQ,qBAAiB,yBAASzB,OAAT,EAAkB;AAC/B,aAAKW,WAAL,CAAiBX,QAAQP,OAAR,CAAgBwB,QAAhB,EAAjB,IAA+CjB,OAA/C;AACA;AACA;AACA;AACH,KAzDqB;;AA2DtB0B,0BAAsB,8BAASjC,OAAT,EAAkB;AACpC,YAAIkC,WAAW,IAAf;AACAA,mBAAW,KAAKhB,WAAL,CAAiBlB,QAAQwB,QAAR,EAAjB,CAAX;AACA,eAAOU,QAAP;AACH,KA/DqB;;AAiEtBC,wBAAoB,4BAASC,SAAT,EAAoB;AACpC,aAAKnB,UAAL,GAAkB,EAAlB;AACA,YAAImB,SAAJ,EAAe;AACX,iBAAI,IAAIC,IAAE,CAAV,EAAaA,IAAGD,UAAUE,MAA1B,EAAkCD,GAAlC,EAAuC;AACnC,oBAAIE,QAAQ,IAAI9C,KAAKC,SAAT,EAAZ;AACA6C,sBAAM9B,SAAN,CAAgB2B,UAAUC,CAAV,CAAhB;AACA,qBAAKpB,UAAL,CAAgBsB,MAAMvC,OAAN,CAAcwB,QAAd,EAAhB,IAA4Ce,KAA5C;AACH;AACJ;AACJ;;AA1EqB,CAAT,CAAjB","file":"MatchInfo.js","sourceRoot":"../../../../../../assets/Script/hall/models","sourcesContent":["/**\n * Created by wangjunpeng on 16/1/20.\n */\n\nhall.MatchData = cc.Class({\n    ctor: function() {\n        this.fees = null;\n        this.playMode = '0';\n        this.matchId = '0';\n        this.roomId = '0';\n        this.matchName = '0';\n        this.taskDesc = '0';\n        this.onlineCount = 0;\n        this.matchType = '0';\n        this.record = null;\n        this.desInfo = null;\n        this.rewardRank = null;\n    },\n\n    parseData: function(data) {\n        this.fees = data[\"fees\"];\n        this.playMode = data[\"play_mode\"];\n        this.matchId = data[\"matchId\"];\n        this.roomId = data[\"roomId\"];\n        this.matchName = data[\"name\"];\n        this.taskDesc = data[\"taskDesc\"];\n        this.onlineCount = data[\"onlineCount\"];\n        this.matchType = data[\"type\"];\n        this.record = data[\"record\"];\n        this.rewardRank = data[\"rewardRank\"];\n    },\n\n    /* demo\n     {\n     \"action\": \"match_des\",\n     \"gameId\": 6,\n     \"roomId\": 67901000,\n     \"matchId\": 6791,\n     \"userId\": 10069,\n     \"name\": \"1\\元\\红\\包\\赛\",\n     \"desc\": \"\\满90\\人\\开\\赛\\，\\等\\待\\时\\间\\短\\，\\轮\\转\\速\\度\\快\\。\\\\n9\\轮1\\局\\瑞\\士\\移\\位\\决\\出\\所\\有\\名\\次\\。\",\n     \"type\": \"common_arena_match\",\n     \"fees\": [\"1\\钻\\石\", \"1000\\金\\币\"],\n     \"ranks\": [{\n     \"start\": 1,\n     \"end\": 1,\n     \"desc\": \"1\\元\"\n     }, {\n     \"start\": 2,\n     \"end\": 2,\n     \"desc\": \"6000\\金\\币+0.02\\元\"\n     }, {\n     \"start\": 3,\n     \"end\": 3,\n     \"desc\": \"4000\\金\\币+0.02\\元\"\n     }, {\n     \"start\": 4,\n     \"end\": 6,\n     \"desc\": \"3000\\金\\币+0.01\\元\"\n     }, {\n     \"start\": 7,\n     \"end\": 12,\n     \"desc\": \"2000\\金\\币\"\n     }, {\n     \"start\": 13,\n     \"end\": 21,\n     \"desc\": \"1500\\金\\币\"\n     }, {\n     \"start\": 22,\n     \"end\": 33,\n     \"desc\": \"200\\金\\币\"\n     }, {\n     \"start\": 34,\n     \"end\": 45,\n     \"desc\": \"500\\金\\币\"\n     }],\n     \"stages\": [{\n     \"index\": 1,\n     \"name\": \"90\\进75\",\n     \"riseUserCount\": 75,\n     \"totalUserCount\": 90\n     }, {\n     \"index\": 2,\n     \"name\": \"75\\进60\",\n     \"riseUserCount\": 60,\n     \"totalUserCount\": 75\n     }, {\n     \"index\": 3,\n     \"name\": \"60\\进45\",\n     \"riseUserCount\": 45,\n     \"totalUserCount\": 60\n     }, {\n     \"index\": 4,\n     \"name\": \"45\\进33\",\n     \"riseUserCount\": 33,\n     \"totalUserCount\": 45\n     }, {\n     \"index\": 5,\n     \"name\": \"33\\进21\",\n     \"riseUserCount\": 21,\n     \"totalUserCount\": 33\n     }, {\n     \"index\": 6,\n     \"name\": \"21\\进12\",\n     \"riseUserCount\": 12,\n     \"totalUserCount\": 21\n     }, {\n     \"index\": 7,\n     \"name\": \"12\\进6\",\n     \"riseUserCount\": 6,\n     \"totalUserCount\": 12\n     }, {\n     \"index\": 8,\n     \"name\": \"6\\进3\",\n     \"riseUserCount\": 3,\n     \"totalUserCount\": 6\n     }, {\n     \"index\": 9,\n     \"name\": \"\\决\\赛\",\n     \"riseUserCount\": 1,\n     \"totalUserCount\": 3\n     }],\n     \"histories\": {\n     \"playCount\": 3,\n     \"crownCount\": 0,\n     \"bestRank\": 12,\n     \"records\": [{\n     \"time\": 1525402663,\n     \"desc\": \"\\第12\\名\\，\\奖\\励2000\\金\\币\"\n     }]\n     },\n     \"condition\": 90,\n     \"timeRange\": \"20\\分\\钟\",\n     \"matchIntroduce\": \"\\本\\比\\赛\\采\\用\\快\\速\\赛\\赛\\制\"\n     }\n     */\n    //setDesInfo: function(data) {\n    //    this.desInfo = data;\n    //},\n\n    isRecordExist: function() {\n        var ret = false;\n        for(var key in this.record) {\n            ret = true;\n        }\n        return this.record && ret;\n    }\n\n});\n\n/*\n {\n \"fees\": [{\n \"count\": 1,\n \"desc\": \"1\\钻\\石\",\n \"itemId\": \"item:1311\",\n \"params\": {\n \"failure\": \"\\您\\的\\费\\用\\不\\足\\，\\本\\比\\赛\\报\\名\\费\\需1\\钻\\石\"\n }\n }, {\n \"count\": 1000,\n \"desc\": \"1000\\金\\币\",\n \"itemId\": \"user:chip\",\n \"params\": {\n \"failure\": \"\\您\\的\\金\\币\\不\\足\\，\\选\\择\\其\\他\\报\\名\\条\\件\\或\\者\\买\\个\\金\\币\\礼\\包\\吧\",\n \"nextTip\": \"\\您\\的\\参\\赛\\券\\不\\足\\啦~\\使\\用100\\金\\币\\报\\名\\入\\场\\吧~\\\\n(\\提\\示\\：\\每\\日\\登\\陆\\赠\\送20\\张\\参\\赛\\券\\喔\\！)\",\n \"payOrder\": {\n \"contains\": {\n \"count\": 1000,\n \"itemId\": \"user:chip\"\n },\n \"shelves\": [\"lessbuychip\"]\n }\n }\n }],\n \"play_mode\": \"123\",\n \"min_coin\": -1,\n \"max_coin\": -1,\n \"max_table_coin\": -1,\n \"matchId\": 6791,\n \"name\": \"1\\元\\红\\包\\赛\",\n \"taskDesc\": \"90\\人9\\轮\\赛\",\n \"onlineCount\": 205,\n \"roomId\": 6790,\n \"type\": \"async_common_arena_match\",\n \"startTime\": 1525420800,\n \"stopTime\": 1525399200,\n \"record\": {}\n }, {\n \"fees\": [{\n \"count\": 5,\n \"desc\": \"5\\钻\\石\",\n \"itemId\": \"item:1311\",\n \"params\": {\n \"failure\": \"\\您\\的\\费\\用\\不\\足\\，\\本\\比\\赛\\报\\名\\费\\需5\\钻\\石\"\n }\n }, {\n \"count\": 5000,\n \"desc\": \"5000\\金\\币\",\n \"itemId\": \"user:chip\",\n \"params\": {\n \"failure\": \"\\您\\的\\金\\币\\不\\足\\，\\选\\择\\其\\他\\报\\名\\条\\件\\或\\者\\买\\个\\金\\币\\礼\\包\\吧\",\n \"nextTip\": \"\\您\\的\\参\\赛\\券\\不\\足\\啦~\\使\\用5000\\金\\币\\报\\名\\入\\场\\吧~\\\\n(\\提\\示\\：\\每\\日\\登\\陆\\赠\\送20\\张\\参\\赛\\券\\喔\\！)\",\n \"payOrder\": {\n \"contains\": {\n \"count\": 5000,\n \"itemId\": \"user:chip\"\n },\n \"shelves\": [\"lessbuychip\"]\n }\n }\n }],\n \"play_mode\": \"123\",\n \"min_coin\": -1,\n \"max_coin\": -1,\n \"max_table_coin\": -1,\n \"matchId\": 6792,\n \"name\": \"5\\元\\红\\包\\赛\",\n \"taskDesc\": \"90\\人9\\轮\\赛\",\n \"onlineCount\": 205,\n \"roomId\": 6790,\n \"type\": \"async_common_arena_match\",\n \"startTime\": 1525420800,\n \"stopTime\": 1525399200,\n \"record\": {}\n },\n\n */\n\nhall.MatchInfo = cc.Class({\n    _TAG: \"hall.MatchInfo\",\n    ctor: function() {\n        hall.LOGD(this._TAG, \"in ctor\");\n        this.matchArray = {};\n        this.matchDesMap = {};\n        this.curMatchAddition = null;   //其实是wait信息\n    },\n    setCurrentMatchId: function(matchId) {\n        this.curMatchId = matchId;\n    },\n\n    getMatchStageDes: function() {\n        var des = \"\";\n        if(this.curMatchAddition && this.curMatchAddition.matchId) {\n            var desInfo = this.matchDesMap[this.curMatchAddition.matchId.toString()];\n            if(desInfo && desInfo.stages) {\n                for(var key in desInfo.stages) {\n                    if(desInfo.stages[key].index == this.curMatchAddition.stageIndex) {\n                        des = desInfo.stages[key].riseUserCount == 1 ? \"决赛\" : \"前\" + desInfo.stages[key].riseUserCount + \"晋级\";\n                        break;\n                    }\n                }\n            }\n        }\n        return des;\n    },\n\n    setCurMatchAdditionInfo: function(additionInfo) {\n        if(!this.curMatchAddition) {\n            this.curMatchAddition = {\n                \"matchId\":0,\n                \"roomId\":0,\n                \"stageIndex\":0,\n                \"score\":0,\n                \"rankName\":\"90/90\"\n            };\n        }\n        for (var key in this.curMatchAddition) {\n            if(additionInfo[key]) {\n                this.curMatchAddition[key] = additionInfo[key];\n            }\n        }\n    },\n\n    getCurrentMatchData: function() {\n        if(this.curMatchId)\n            return this.matchArray[this.curMatchId.toString()];\n        else\n            return null;\n    },\n\n    addMatchDesInfo: function(desInfo) {\n        this.matchDesMap[desInfo.matchId.toString()] = desInfo;\n        //if(desInfo && desInfo.matchId && this.matchArray[desInfo.matchId.toString()]) {\n        //    this.matchArray[desInfo.matchId.toString()].setDesInfo(desInfo);\n        //}\n    },\n\n    getMatchDesByMatchId: function(matchId) {\n        var matchDes = null;\n        matchDes = this.matchDesMap[matchId.toString()];\n        return matchDes;\n    },\n\n    parseMatchListInfo: function(matchList) {\n        this.matchArray = {};\n        if (matchList) {\n            for(var i=0; i< matchList.length; i++) {\n                var match = new hall.MatchData();\n                match.parseData(matchList[i]);\n                this.matchArray[match.matchId.toString()] = match;\n            }\n        }\n    }\n\n});"]}