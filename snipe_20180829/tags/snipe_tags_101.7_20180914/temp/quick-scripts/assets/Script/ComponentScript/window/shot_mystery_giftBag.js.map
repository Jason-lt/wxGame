{"version":3,"sources":["shot_mystery_giftBag.js"],"names":["cc","Class","extends","Component","properties","centerBtn","Button","aniSpriteNode","Node","tips","Label","tipsRich","RichText","btnText","onLoad","hall","GlobalFuncs","btnScaleEffect","node","ty","NotificationCenter","listen","shot","EventType","UPDATE_SHARE_STATE","playAnimationAfterShareWithType","updateTips","shareType","Share","onShareType","clickStatShareTypeMysteryGiftBag","clickStatShareTypeMysteryGiftBagGetReward","_config","GameWorld","gunnerShareSchemeConfig","giftBagShareGetDiamond","UserInfo","isInBSGS","reultType","resultType","MsgBoxManager","showToast","title","string","updateInfo","result","onClickCenterButton","BiLog","clickStat","clickStatEventType","clickStatEventTypeButtonClick","shareWithType","onClose","stopAllActions","destroy","onBlack","update","dt","onDestroy","ignoreScope","unscheduleAllCallbacks"],"mappings":"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","file":"shot_mystery_giftBag.js","sourceRoot":"../../../../../../assets/Script/ComponentScript/window","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        centerBtn:cc.Button,\n        aniSpriteNode:cc.Node,\n        tips:cc.Label,\n        tipsRich : cc.RichText,\n        btnText:cc.RichText\n    },\n\n    onLoad:function(){\n        hall.GlobalFuncs.btnScaleEffect(this.centerBtn.node,1.13);\n        ty.NotificationCenter.listen(shot.EventType.UPDATE_SHARE_STATE, this.playAnimationAfterShareWithType, this);\n        this.updateTips();\n    },\n\n    playAnimationAfterShareWithType : function (shareType) {\n        if (shareType && shareType == shot.Share.onShareType.clickStatShareTypeMysteryGiftBag ||\n            shareType == shot.Share.onShareType.clickStatShareTypeMysteryGiftBagGetReward) {\n            var _config = shot.GameWorld.gunnerShareSchemeConfig;\n            if (_config && _config.giftBagShareGetDiamond && !ty.UserInfo.isInBSGS){\n                var reultType = shot.Share.resultType;\n                switch (reultType) {\n                    case 1:\n                        hall.MsgBoxManager.showToast({title : '分享到群才有效哦~'});\n                        break;\n                    case 2:\n                        hall.MsgBoxManager.showToast({title : '这个群今天已经打扰过了哦~'});\n                        break;\n                    case 3:\n\n                        break;\n                    default:\n                        break;\n                }\n            }else {\n                hall.MsgBoxManager.showToast({title : \"快进群抢礼包吧~\"});\n            }\n            shot.Share.resultType = 0;\n        }\n    },\n\n    updateTips:function(){\n        // var _config = shot.GameWorld.gunnerShareSchemeConfig;\n        // if (_config && _config.giftBagShareGetDiamond && !ty.UserInfo.isInBSGS){\n        //     this.btnText.string = \"<color=#ffffff><b><size=44>分享/b></color>\";\n        //     this.tips.string = \"分享到群领钻石\";\n        // }else {\n        //     this.btnText.string = \"<color=#ffffff><b>进群抢钻石</b></color>\";\n        //     this.tips.string = \"先到先得，抢完为止\\n自己也能抢哦~\";\n        // }\n\n        this.btnText.string = \"<color=#ffffff><b><size=44>分享礼包</b></color>\";\n        this.tipsRich.string = \"<color=#622508>分享到群里可以和朋友一起抢</c><img src='shot_gift_diamond'/><color=#622508>哦</c>\";\n    },\n\n    updateInfo:function(result){\n        // if (result.boxId && result.boxId != \"\") {\n        //     shot.Share.shareKeywordReplace.mysteryGiftBagBoxId = result.boxId;\n        // }\n    },\n\n    onClickCenterButton:function(){\n        ty.BiLog.clickStat(ty.UserInfo.clickStatEventType.clickStatEventTypeButtonClick,[\"mysteryGifgBag\"]);\n        var _config = shot.GameWorld.gunnerShareSchemeConfig;\n        if (_config && _config.giftBagShareGetDiamond && !ty.UserInfo.isInBSGS){\n            shot.Share.shareWithType(shot.Share.onShareType.clickStatShareTypeMysteryGiftBagGetReward);\n        }else {\n            shot.Share.shareWithType(shot.Share.onShareType.clickStatShareTypeMysteryGiftBag);\n        }\n    },\n\n    onClose:function(){\n        this.centerBtn.node.stopAllActions();\n        this.node.destroy();\n    },\n\n    onBlack : function () {\n\n    },\n\n    update:function(dt){\n        // this.aniSpriteNode.rotation += 1;\n    },\n\n    onDestroy:function(){\n        ty.NotificationCenter.ignoreScope(this);\n        this.unscheduleAllCallbacks();\n    }\n});\n"]}