{"version":3,"sources":["../../../../../../assets/Script/ComponentScript/component/assets/Script/ComponentScript/component/shot_gun.js"],"names":["cc","Class","extends","Component","ctor","bulletAniNodePool","properties","gunSprite","default","type","Sprite","gunSpriteList","SpriteFrame","gunAniNode","Node","gatlingAniNode","gatlingQiangkouNode","bulletAniNode","bulletAniPrefab","Prefab","grenadeFromNode","grenadeAniNode","grenadeAnimationNode","grenadeNode","grenadePrefab","isAction","animation","AnimationState","gatlingAnimation","parentScene","serializable","onLoad","NodePool","i","put","instantiate","getComponent","Animation","getAnimationState","that","once","active","y","director","getWinSize","height","shot","GameWorld","gunnerShareSchemeConfig","showBanner","ty","NotificationCenter","listen","EventType","REPLACE_GUN","replaceGunAction","index","spriteFrame","openFire","nowBulletPenetrate","bulletPenetrate","grenadeRunning","AudioHelper","playEffect","EffectPath_mp3","gunHits","playGunAni","stopGunAni","stop","play","bulletAni","size","get","bulletAnima","addChild","target","removeFromParent","onActionGrenade","callFunc","to_pos","node","convertToNodeSpace","convertToWorldSpace","p","from_pos","startFunc","_preFabNode","x","gStartFunc","_callFunc","midy","midx","Math","abs","hall","LOGD","midPoint","controlPoints1","bezierToDst1","bezierTo","rotationAct","rotateBy","rotationR","getBucketRoundSpeedIn","rotationAct2","strikeSound","grenadeStrike","rotation","GlobalFuncs","getRandomNumberBefore","runAction","sequence","spawn","grenadeBoom","ani2","anim2","onDestroy","clear","ignoreScope","unscheduleAllCallbacks"],"mappings":"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","file":"shot_gun.js","sourceRoot":"../../../../../../assets/Script/ComponentScript/component","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n    ctor : function () {\n        this.bulletAniNodePool = null;\n    },\n\n    properties: {\n        gunSprite : {\n            default : null,\n            type : cc.Sprite\n        },\n        gunSpriteList : [cc.SpriteFrame],\n        gunAniNode : {\n            default : null,\n            type : cc.Node\n        },\n        gatlingAniNode : {\n            default : null,\n            type : cc.Node\n        },\n        gatlingQiangkouNode : {\n            default : null,\n            type : cc.Node\n        },\n\n        bulletAniNode : {\n            default : null,\n            type : cc.Node\n        },\n        bulletAniPrefab : {\n            default : null,\n            type : cc.Prefab\n        },\n\n        grenadeFromNode : {\n            default : null,\n            type : cc.Node\n        },\n        grenadeAniNode : {\n            default : null,\n            type : cc.Node\n        },\n        grenadeAnimationNode : {\n            default : null,\n            type : cc.Node\n        },\n        grenadeNode : {\n            default : null,\n            type : cc.Node\n        },\n        grenadePrefab : {\n            default : null,\n            type : cc.Prefab\n        },\n\n        isAction : false,\n        animation : {\n            default : null,\n            type : cc.AnimationState\n        },\n        gatlingAnimation : {\n            default : null,\n            type : cc.AnimationState\n        },\n        parentScene: {\n            default: null,\n            serializable: false\n        }\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad : function() {\n        this.bulletAniNodePool = new cc.NodePool();\n        for (var i = 0; i <  15; i++) {\n            this.bulletAniNodePool.put(cc.instantiate(this.bulletAniPrefab)); // 通过 putInPool 接口放入对象池\n        }\n        this.animation = this.gunAniNode.getComponent(cc.Animation).getAnimationState(\"qiang\");\n        var that = this;\n        this.animation.once(\"finished\", function () {\n            that.isAction = false;\n        });\n        this.gatlingAnimation = this.gatlingAniNode.getComponent(cc.Animation).getAnimationState(\"jiatelin\");\n        this.gatlingAnimation.once(\"finished\", function () {\n            that.isAction = false;\n            that.gatlingQiangkouNode.active = false;\n        });\n\n        this.grenadeFromNode.y = - cc.director.getWinSize().height/2;\n\n        if(!shot.GameWorld.gunnerShareSchemeConfig || shot.GameWorld.gunnerShareSchemeConfig.showBanner){\n            this.grenadeAniNode.y = 188;\n        }else {\n            this.grenadeAniNode.y = 228;\n        }\n\n        ty.NotificationCenter.listen(shot.EventType.REPLACE_GUN,this.replaceGunAction, this);\n    },\n\n    //换枪\n    replaceGunAction : function (index) {\n        if(index == 7){\n            this.gatlingAniNode.active = true;\n            this.gunAniNode.active = false;\n        }else {\n            this.gatlingAniNode.active = false;\n            this.gunAniNode.active = true;\n            this.gunSprite.spriteFrame = this.gunSpriteList[index];\n        }\n    },\n\n    openFire : function () {\n        shot.GameWorld.nowBulletPenetrate = shot.GameWorld.bulletPenetrate;//穿透属性\n        shot.GameWorld.grenadeRunning = false;\n        // hall.LOGW(\"===\",\"========openFire=====\");\n        shot.AudioHelper.playEffect(shot.EffectPath_mp3.gunHits,false);\n        this.playGunAni();\n    },\n\n    stopGunAni : function () {\n        // this.gatlingAnimation.stop();\n        // this.animation.stop();\n        if(this.isAction){\n            if(this.gatlingAniNode.active){\n                this.gatlingAnimation.stop();\n                this.gatlingQiangkouNode.active = false;\n            }else {\n                this.animation.stop();\n            }\n        }\n    },\n    playGunAni:function () {\n        this.stopGunAni();\n        this.isAction = true;\n        if(this.gatlingAniNode.active){\n            this.gatlingAnimation.play();\n            this.gatlingQiangkouNode.active = true;\n        }else {\n            this.animation.play();\n            this.gatlingQiangkouNode.active = false;\n        }\n\n\n        var that = this;\n        var bulletAni;\n        if (this.bulletAniNodePool.size() > 0) {\n            bulletAni = this.bulletAniNodePool.get();\n        } else {\n            bulletAni = cc.instantiate(this.bulletAniPrefab);\n        }\n        var bulletAnima = bulletAni.getComponent(cc.Animation);\n        var animation = bulletAnima.getAnimationState(\"zidan\");\n        this.bulletAniNode.addChild(bulletAni);\n        animation.once(\"finished\", function (target) {\n            that.bulletAniNodePool.put(bulletAni);\n            bulletAni.removeFromParent();\n        });\n        animation.play();\n    },\n\n    onActionGrenade: function(callFunc) {\n        var to_pos = this.node.convertToNodeSpace(this.grenadeAniNode.convertToWorldSpace(cc.p(0,0)));\n        var from_pos = this.node.convertToNodeSpace(this.grenadeFromNode.convertToWorldSpace(cc.p(0,0)));\n\n        var that = this;\n\n        var startFunc = function(_preFabNode){\n            _preFabNode.x = to_pos.x;\n            _preFabNode.y = to_pos.y;\n\n        };\n        var gStartFunc = function (_preFabNode,_callFunc){\n            _preFabNode.x = from_pos.x;\n            _preFabNode.y = from_pos.y;\n            _preFabNode.active = true;\n            var midy;\n            var midx;\n\n            if (Math.abs(to_pos.x - from_pos.x) < 100){\n                midx = to_pos.x + 200;\n                midy = from_pos.y + (to_pos.y - from_pos.y)/2;\n            }else if (Math.abs(to_pos.y - from_pos.y) < 100){\n                midx = (to_pos.x - from_pos.x) / 2;\n                midy = from_pos.y;\n            }else {\n                midx = -200;\n                midy = from_pos.y + (to_pos.y - from_pos.y)/2 + 100;\n            }\n            hall.LOGD(\"\", \"曲线运动中间点 midx = \" + midx + \"  midy = \" + midy );\n            var midPoint = cc.p(midx, midy);\n            var controlPoints1 = [     from_pos,     midPoint,     to_pos   ];\n            var bezierToDst1 = cc.bezierTo(0.7, controlPoints1);\n\n            var rotationAct = cc.rotateBy(0.7,180);\n            var rotationR = that.parentScene.getBucketRoundSpeedIn() * 0.18;\n            var rotationAct2 = cc.rotateBy(0.18,rotationR);\n\n            var strikeSound = cc.callFunc(function () {\n                shot.AudioHelper.playEffect(shot.EffectPath_mp3.grenadeStrike);\n            });\n\n            _preFabNode.rotation = hall.GlobalFuncs.getRandomNumberBefore(360);\n            _preFabNode.runAction(cc.sequence(cc.spawn(rotationAct,bezierToDst1),cc.spawn(rotationAct2,strikeSound), cc.callFunc(function () {\n                startFunc(_preFabNode);\n                _preFabNode.active = false;\n\n                // var aniNode = cc.instantiate(that.grenadePrefab);\n                // that.grenadeAniNode.addChild(aniNode);\n                shot.AudioHelper.playEffect(shot.EffectPath_mp3.grenadeBoom);\n                that.grenadeAniNode.active = true;\n                that.grenadeAniNode.rotation = _preFabNode.rotation;\n                var ani2 = that.grenadeAnimationNode.getComponent(cc.Animation);\n                var anim2 = ani2.getAnimationState(\"shouleibaozha_01\");\n                anim2.once(\"finished\", function () {\n                    // aniNode.removeFromParent();\n                    that.grenadeAniNode.active = false;\n                    shot.GameWorld.grenadeRunning = false;\n                });\n                anim2.play();\n\n                if(_callFunc){\n                    _callFunc();\n                }\n\n            }, that)));\n        };\n\n        gStartFunc(this.grenadeNode,callFunc);\n    },\n\n    onDestroy : function () {\n        this.bulletAniNodePool.clear();\n        // this.aniNode.removeAllChildren();\n        ty.NotificationCenter.ignoreScope(this);\n        this.unscheduleAllCallbacks();\n    }\n    // start () {\n    //\n    // },\n    // update (dt) {},\n});\n"]}