{"version":3,"sources":["../../../../../../assets/Script/ComponentScript/window/assets/Script/ComponentScript/window/zidandaoju.js"],"names":["cc","Class","extends","Component","properties","propNode","Node","propSprite","Sprite","propSpriteList","SpriteFrame","propTips","Label","lightNode","gunNode","gunSprite","gunNameLabel","gunDescLabel","state","onLoad","onBlack","updateProp","count","active","spriteFrame","string","type","shot","GameWorld","treasureBoxTypeList","propertyConfig","name","desc","playLoopAni","stopLoopAni","ani","anim2","getComponent","Animation","getAnimationState","anim3","stop","once","nextAni","play","onGetReward","gameGetBox","gamePause","bottleCount","ty","NotificationCenter","trigger","EventType","GAME_LEVEL_UP","node","destroy","onDestroy","ignoreScope","unscheduleAllCallbacks","update","dt","rotation"],"mappings":"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","file":"zidandaoju.js","sourceRoot":"../../../../../../assets/Script/ComponentScript/window","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        propNode : cc.Node,\n        propSprite:cc.Sprite,\n        propSpriteList : [cc.SpriteFrame],\n        propTips:cc.Label,\n        lightNode:cc.Node,\n\n        gunNode : cc.Node,\n        gunSprite : cc.Sprite,\n        gunNameLabel : cc.Label,\n        gunDescLabel : cc.Label,\n\n        state : -1\n    },\n\n    onLoad:function(){\n\n    },\n\n    onBlack : function () {\n\n    },\n\n    updateProp:function(state,count){\n        if(!count){\n            count = 1;\n        }\n        this.state = state;\n        if (state == 1){\n            this.propNode.active = true;\n            this.gunNode.active = false;\n            this.propSprite.spriteFrame = this.propSpriteList[state];\n            this.propTips.string = \"瞄准器x\"+count;\n            // this.propTips.string = \"手榴弹x1\";\n        }else if (state == 0){\n            this.propNode.active = true;\n            this.gunNode.active = false;\n            this.propSprite.spriteFrame = this.propSpriteList[state];\n            this.propTips.string = \"无限子弹x\"+count;\n        }else if (state == 2){\n            this.propNode.active = true;\n            this.gunNode.active = false;\n            this.propSprite.spriteFrame = this.propSpriteList[state];\n            this.propTips.string = \"手榴弹x\"+count;\n        }else {\n            var type = shot.GameWorld.treasureBoxTypeList[state];\n            this.propNode.active = false;\n            this.gunNode.active = true;\n            this.gunSprite.spriteFrame = this.propSpriteList[state];\n            this.gunNameLabel.string = shot.GameWorld.propertyConfig[type].name;\n            this.gunDescLabel.string = shot.GameWorld.propertyConfig[type].desc;\n        }\n        this.playLoopAni(state);\n    },\n\n    stopLoopAni:function (state) {\n        var ani;\n        var anim2;\n        if(this.state <= 1){\n            ani = this.propNode.getComponent(cc.Animation);\n            anim2 = ani.getAnimationState(\"ndwa_0\");\n        }else {\n            ani = this.gunNode.getComponent(cc.Animation);\n            anim2 = ani.getAnimationState(\"daoju_qiang1\");\n            var anim3 = ani.getAnimationState(\"daoju_qiang2\");\n            anim3.stop();\n        }\n        anim2.stop();\n    },\n\n    playLoopAni:function (state) {\n        var ani;\n        var anim2;\n        if(state <= 1){\n            ani = this.propNode.getComponent(cc.Animation);\n            anim2 = ani.getAnimationState(\"ndwa_0\");\n        }else {\n            ani = this.gunNode.getComponent(cc.Animation);\n            anim2 = ani.getAnimationState(\"daoju_qiang1\");\n            anim2.once(\"finished\", function () {\n                var nextAni = ani.getAnimationState(\"daoju_qiang2\");\n                nextAni.play();\n            });\n        }\n        anim2.play();\n        // var ani = this.node.getComponent(cc.Animation);\n        // var anim2 = ani.getAnimationState(\"ndwa_0\");\n        // var that = this;\n        // anim2.once(\"finished\", function () {\n        //     that.autoRound = true;\n        // });\n\n    },\n\n    onGetReward:function(){\n        if(shot.GameWorld.gameGetBox){\n            shot.GameWorld.gamePause = false;\n            shot.GameWorld.gameGetBox = false;\n            if(shot.GameWorld.bottleCount <= 0) { //一局的瓶子打完了\n                ty.NotificationCenter.trigger(shot.EventType.GAME_LEVEL_UP);\n            }\n        }\n        this.stopLoopAni();\n        this.node.destroy();\n    },\n\n    onDestroy : function () {\n        ty.NotificationCenter.ignoreScope(this);\n        this.unscheduleAllCallbacks();\n    },\n\n    update:function(dt){\n        this.lightNode.rotation += 0.5;\n    }\n});\n"]}