{"version":3,"sources":["shot_result.js"],"names":["cc","Class","extends","Component","properties","nowScoreLabel","default","type","Label","bestScoreLabel","rankTexture","Texture2D","rankSpriteFrame","SpriteFrame","rankSprite","Sprite","shotButton","Button","onBlack","onBackButton","node","stopAllActions","sceneName","onLaunched","director","loadScene","destroy","showAllRank","ty","BiLog","clickStat","UserInfo","clickStatEventType","clickStatEventTypeButtonClick","shot","GlobalFuncs","showRankList","showBestToOthers","showShareResult","playAgain","NotificationCenter","trigger","EventType","GAME_START","onLoad","listen","UPDATE_RESULT_RANK","setRankInfo","Share","shareKeywordReplace","theScoreForNow","GameWorld","totalScore","bestScoreForSelf","upDateRankData","gameModel","saveScore","hall","btnScaleEffect","string","openDataContext","getOpenData","sharedCanvas","canvas","width","height","texture","spriteFrame","sprite","main","initWithElement","handleLoadedTexture","_refreshTexture","Timer","setTimer","getThirdRankInfo","onDestroy","ignoreScope","unscheduleAllCallbacks"],"mappings":"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,CAAwBR,YAAxB;AACAI,oBAAQK,mBAAR;AACAH,mBAAOD,WAAP,GAAqBA,WAArB;AACAC,mBAAOD,WAAP,CAAmBK,eAAnB,CAAmCN,OAAnC;AACH,SALD;AAMAG;AACAzC,WAAG6C,KAAH,CAASC,QAAT,CAAkB,IAAlB,EAAwBL,IAAxB,EAA8B,IAAE,EAAhC,EAAmC,IAAnC;;AAEAnC,aAAKC,WAAL,CAAiBwC,gBAAjB;AACH,KA9FI;;AAgGLC,eAAU,qBAAU;AAChBhD,WAAGY,kBAAH,CAAsBqC,WAAtB,CAAkC,IAAlC;AACA,aAAKC,sBAAL;AACH;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAjXK,CAAT","file":"shot_result.js","sourceRoot":"../../../../../../assets/Script/ComponentScript/window","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        nowScoreLabel : {\n            default : null,\n            type : cc.Label\n        },\n        bestScoreLabel : {\n            default : null,\n            type : cc.Label\n        },\n        rankTexture : cc.Texture2D,\n        rankSpriteFrame : cc.SpriteFrame,\n        rankSprite : cc.Sprite,\n\n        shotButton :{\n            default : null,\n            type : cc.Button\n        }\n    },\n\n    onBlack : function () {\n\n    },\n    onBackButton : function () {\n        this.shotButton.node.stopAllActions();\n        var sceneName = 'shot_begin';\n        var onLaunched = function () {\n        };\n        cc.director.loadScene(sceneName,onLaunched);\n        this.node.destroy();\n    },\n    showAllRank : function () {\n        ty.BiLog.clickStat(ty.UserInfo.clickStatEventType.clickStatEventTypeButtonClick,[\"showAllRank\"]);\n        shot.GlobalFuncs.showRankList(\"\");\n        // this.node.destroy();\n    },\n\n    showBestToOthers : function () {\n        ty.BiLog.clickStat(ty.UserInfo.clickStatEventType.clickStatEventTypeButtonClick,[\"showBest\"]);\n        shot.GlobalFuncs.showShareResult();\n        // shot.Share.shareWithType(shot.Share.onShareType.clickStatShareTypeScore);\n    },\n    playAgain : function () {\n        ty.BiLog.clickStat(ty.UserInfo.clickStatEventType.clickStatEventTypeButtonClick,[\"playAgain\"]);\n        ty.NotificationCenter.trigger(shot.EventType.GAME_START,\"start\");\n        this.shotButton.node.stopAllActions();\n        this.node.destroy();\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad :function() {\n\n        ty.NotificationCenter.listen(shot.EventType.UPDATE_RESULT_RANK,this.setRankInfo,this);\n\n        shot.Share.shareKeywordReplace.theScoreForNow = shot.GameWorld.totalScore;\n        if(shot.GameWorld.totalScore >= shot.Share.shareKeywordReplace.bestScoreForSelf){\n            shot.GlobalFuncs.upDateRankData(shot.GameWorld.totalScore);\n            shot.Share.shareKeywordReplace.bestScoreForSelf = shot.GameWorld.totalScore;\n        }\n        shot.gameModel.saveScore();\n        hall.GlobalFuncs.btnScaleEffect(this.shotButton.node,1.13);\n\n        this.nowScoreLabel.string = shot.Share.shareKeywordReplace.theScoreForNow+\"\";\n        this.bestScoreLabel.string = \"本周最佳:\"+shot.Share.shareKeywordReplace.bestScoreForSelf ;\n\n        this.setRankInfo();\n    },\n\n    setRankInfo : function () {\n        var openDataContext = shot.GlobalFuncs.getOpenData();\n        if(!openDataContext){\n            return;\n        }\n        var sharedCanvas = openDataContext.canvas;\n        sharedCanvas.width  = 550;\n        sharedCanvas.height = 280;\n        this.rankTexture = new cc.Texture2D();\n        this.rankSpriteFrame = new cc.SpriteFrame(this.rankTexture);\n        var texture = this.rankTexture;\n        var spriteFrame = this.rankSpriteFrame;\n        var sprite = this.rankSprite;\n        var main = function () {\n            texture.initWithElement(sharedCanvas);\n            texture.handleLoadedTexture();\n            sprite.spriteFrame = spriteFrame;\n            sprite.spriteFrame._refreshTexture(texture);\n        };\n        main();\n        ty.Timer.setTimer(this, main, 1/10,5000);\n\n        shot.GlobalFuncs.getThirdRankInfo();\n    },\n\n    onDestroy:function(){\n        ty.NotificationCenter.ignoreScope(this);\n        this.unscheduleAllCallbacks();\n    }\n\n    // //添加微信二维码和个人头像\n    // saveToPhoneAddQRAndAvatar : function (shareBackImageUrl) {\n    //     var qrX = 454 ;\n    //     var qrY =  542;\n    //     var qrR =  68;\n    //     var r = 30;\n    //     var textPositionX = 135;\n    //     var textPositionY = 588;\n    //     var tempCanvas = wx.createCanvas();\n    //     tempCanvas.width = 584;\n    //     tempCanvas.height = 651;\n    //     var context = tempCanvas.getContext(\"2d\");\n    //     var image = wx.createImage();\n    //     image.src = shareBackImageUrl;\n    //     var that = this;\n    //     image.onload = function (event) {\n    //         var img = event.target;\n    //         context.drawImage(img,0,0,584,651);\n    //\n    //         context.font = \"45px arial\";\n    //         context.fillStyle=\"#FFFFFF\";\n    //         context.textAlign = \"left\";\n    //         // var stokeWord = hall.GlobalFuncs.formatGold(shot.gameModel.totalScore) + \"米\";\n    //         var stokeWord = shot.gameModel.totalScore + \"米\";\n    //         context.fillText(stokeWord,textPositionX,textPositionY);\n    //\n    //         var qrImage = wx.createImage();\n    //         qrImage.onload = function (event) {\n    //             var img = event.target;\n    //             context.drawImage(img,qrX-qrR,qrY-qrR,qrR*2,qrR*2);\n    //             context.beginPath();\n    //             context.arc(qrX,qrY,r,0,2*Math.PI);\n    //             context.arc(86,570,r,0,2*Math.PI);\n    //             // context.stroke();\n    //             context.clip();\n    //             // var avatarPic = wx.createImage();\n    //             // avatarPic.onload = function (event) {\n    //             //     var img = event.target;\n    //             // context.drawImage(img,qrX-r,qrY-r,r*2,r*2);\n    //             // context.drawImage(img,56,540,60,60);\n    //             context.drawImage(ty.UserInfo.avatarImg,qrX-r,qrY-r,r*2,r*2);\n    //             context.drawImage(ty.UserInfo.avatarImg,56,540,60,60);\n    //             var tempFilePath = tempCanvas.toTempFilePathSync({\n    //                 x: 0,\n    //                 y: 0,\n    //                 width: 584,\n    //                 height:651,\n    //                 destWidth: 584,\n    //                 destHeight: 651\n    //             });\n    //             hall.LOGW(\"========\",\"===============\"+tempFilePath);\n    //             that.shareBackImageUrl = tempFilePath;\n    //             ty.SystemInfo.getImageWithURL(tempFilePath,that.shareSprite);\n    //             // };\n    //             // avatarPic.src = ty.UserInfo.userPic;\n    //         };\n    //         qrImage.onerror = function (event) {\n    //             hall.LOGW(\"========\",\"========qrImage.onerror=======\"+JSON.stringify(arguments));\n    //             context.beginPath();\n    //             // context.arc(qrX,qrY,r,0,2*Math.PI);\n    //             context.arc(86,570,r,0,2*Math.PI);\n    //             // context.stroke();\n    //             context.clip();\n    //             // context.drawImage(ty.UserInfo.avatarImg,qrX-r,qrY-r,r*2,r*2);\n    //             context.drawImage(ty.UserInfo.avatarImg,56,540,60,60);\n    //             var tempFilePath = tempCanvas.toTempFilePathSync({\n    //                 x: 0,\n    //                 y: 0,\n    //                 width: 584,\n    //                 height:651,\n    //                 destWidth: 584,\n    //                 destHeight: 651\n    //             });\n    //             hall.LOGW(\"========\",\"===============\"+tempFilePath);\n    //             that.shareBackImageUrl = tempFilePath;\n    //             ty.SystemInfo.getImageWithURL(tempFilePath,that.shareSprite);\n    //         };\n    //         qrImage.src = ty.UserInfo.myQrCodeFilePath;\n    //     };\n    // },\n    //\n    // //添加微信二维码和个人头像\n    // saveToPhoneAddQRAndAvatarOrigin : function (shareBackImageUrl) {\n    //     var qrX = 454 ;\n    //     var qrY =  542;\n    //     var qrR =  68;\n    //     var r = 30;\n    //     var textPositionX = 150;\n    //     var textPositionY = 588;\n    //     // if(this.bottomType){\n    //     //     qrX = this.bottomType.qrCenterX ;\n    //     //     qrY = this.bottomType.qrCenterY ;\n    //     //     qrR =  this.bottomType.qrRadius ;\n    //     //     r = this.bottomType.avatarRadius ;\n    //     //     textPositionX = this.bottomType.textPositionX ;\n    //     //     textPositionY = this.bottomType.textPositionY ;\n    //     // }\n    //     var tempCanvas = wx.createCanvas();\n    //     tempCanvas.width = 584;\n    //     tempCanvas.height = 651;\n    //     var context = tempCanvas.getContext(\"2d\");\n    //     var image = wx.createImage();\n    //     image.src = shareBackImageUrl;\n    //     var that = this;\n    //     image.onload = function (event) {\n    //         var img = event.target;\n    //         context.drawImage(img,0,0,584,651);\n    //\n    //         context.font = \"45px arial\";\n    //         context.fillStyle=\"#FFFFFF\";\n    //         context.textAlign = \"left\";\n    //         // var stokeWord = hall.GlobalFuncs.formatGold(shot.gameModel.totalScore) + \"米\";\n    //         var stokeWord = shot.gameModel.totalScore + \"米\";\n    //         context.fillText(stokeWord,textPositionX,textPositionY);\n    //\n    //         // context.beginPath();\n    //         // context.arc(qrX,qrY+that.exHeight*2,qrR+5,0,2*Math.PI);\n    //         // context.clip();\n    //         var local_uuid = hall.GlobalFuncs.getLocalUuid();\n    //         var sdkPath = ty.SystemInfo.loginUrl;\n    //         var pars = {\n    //             appId: ty.SystemInfo.appId,\n    //             wxAppId: ty.SystemInfo.wxAppId,\n    //             clientId: ty.SystemInfo.clientId,\n    //             imei: 'null',\n    //             uuid : local_uuid,\n    //             width : 280,\n    //             b64 : true,\n    //             scene : '1,' + ty.UserInfo.userId\n    //         };\n    //         hall.LOGD(null, 'qrcode,params:' + JSON.stringify(pars));\n    //         wx.request({\n    //             url: sdkPath + 'open/v6/user/Getwxacodeunlimit',\n    //             header: {\n    //                 'content-type': 'application/x-www-form-urlencoded'\n    //             },\n    //             data: pars,\n    //             method:'POST',\n    //             success: function(params) {\n    //                 // hall.LOGW(\"===\",\"=========\"+JSON.stringify(params));\n    //                 var b64Str =  params.data.result.img;\n    //                 var fs = wx.getFileSystemManager();\n    //                 var filePath = wx.env.USER_DATA_PATH + '/qr.png';\n    //                 // fs.writeFileSync(filePath ,b64Str , 'base64');\n    //                 fs.writeFile({\n    //                     filePath : filePath,\n    //                     data : b64Str,\n    //                     encoding : 'base64',\n    //                     success : function () {\n    //                         var qrImage = wx.createImage();\n    //                         qrImage.onload = function (event) {\n    //                             var img = event.target;\n    //                             context.drawImage(img,qrX-qrR,qrY-qrR,qrR*2,qrR*2);\n    //                             context.beginPath();\n    //                             context.arc(qrX,qrY,r,0,2*Math.PI);\n    //                             context.arc(86,570,r,0,2*Math.PI);\n    //                             // context.stroke();\n    //                             context.clip();\n    //                             var avatarPic = wx.createImage();\n    //                             avatarPic.onload = function (event) {\n    //                                 var img = event.target;\n    //                                 context.drawImage(img,qrX-r,qrY-r,r*2,r*2);\n    //                                 context.drawImage(img,56,540,60,60);\n    //                                 var tempFilePath = tempCanvas.toTempFilePathSync({\n    //                                     x: 0,\n    //                                     y: 0,\n    //                                     width: 584,\n    //                                     height:651,\n    //                                     destWidth: 584,\n    //                                     destHeight: 651\n    //                                 });\n    //                                 hall.LOGW(\"========\",\"===============\"+tempFilePath);\n    //                                 that.shareBackImageUrl = tempFilePath;\n    //                                 ty.SystemInfo.getImageWithURL(tempFilePath,that.shareSprite);\n    //                             };\n    //                             avatarPic.src = ty.UserInfo.userPic;\n    //                         };\n    //                         qrImage.onerror = function (event) {\n    //                             hall.LOGW(\"========\",\"========qrImage.onerror=======\"+JSON.stringify(arguments));\n    //                         };\n    //                         qrImage.src = filePath;\n    //                     },\n    //                     fail: function(params) {\n    //                     },\n    //                     complete: function(params) {\n    //                     }\n    //                 });},\n    //             fail: function(params) {\n    //             },\n    //             complete: function(params) {\n    //             }\n    //         });\n    //     };\n    // },\n    //保存到相册\n    // saveImageToPhoneWithUrl : function (tempFilePath) {\n    //     var saveImageToPhone = function () {\n    //         wx.saveImageToPhotosAlbum({\n    //             filePath : tempFilePath,\n    //             success:function(res) {\n    //                 shot.GlobalFuncs.showNoDiamondToastTip(\"保存成功\");\n    //                 hall.LOGW(\"========\",\"=======success========\"+JSON.stringify(res));\n    //             },\n    //             fail: function(params) {\n    //                 hall.LOGW(\"========\",\"=======fail========\"+JSON.stringify(params));\n    //             },\n    //             complete: function(params) {\n    //             }\n    //         });\n    //     };\n    //     wx.getSetting({\n    //         success:function(res) {\n    //             if (!res.authSetting['scope.writePhotosAlbum']) {\n    //                 wx.authorize({\n    //                     scope : \"scope.writePhotosAlbum\",\n    //                     success : function () {\n    //                         saveImageToPhone();\n    //                     },\n    //                     fail:function () {\n    //                         hall.LOGW(null, \"授权使用相册失败!\");\n    //                         wx.showModal({\n    //                             title:'提示',\n    //                             content:'保存图片,需要您授权使用相册,点击确定手动进行授权!',\n    //                             showCancel:true,\n    //                             cancelText:'取消',\n    //                             confirmText:'确定',\n    //                             success:function (res) {\n    //                                 if (res.confirm) {\n    //                                     wx.openSetting();\n    //                                 }\n    //                             }\n    //                         });\n    //\n    //                     },\n    //                     complete:function () {\n    //                     }\n    //                 });\n    //             }\n    //             else{\n    //                 saveImageToPhone();\n    //             }\n    //         }\n    //     });\n    // },\n    //\n    // onDebugButton : function () {\n    //     this.debugCount ++ ;\n    //     if(this.debugCount == 10){\n    //         shot.GlobalFuncs.showDebugPanel();\n    //     }\n    // },\n    // saveWechatMoments : function () {\n    //     ty.BiLog.clickStat(ty.UserInfo.clickStatEventType.clickStatEventTypeButtonClick,[\"saveWechatMoments\"]);\n    //     this.saveImageToPhoneWithUrl(this.shareBackImageUrl);\n    // },\n    // updateShareResult : function (shareType) {\n    //     hall.LOGE(\"=====\",\"====shot.Share.resultType===\"+shot.Share.resultType);\n    //     if(shareType == shot.Share.onShareType.clickStatShareTypeShowHighTotalFirst ||\n    //         shareType == shot.Share.onShareType.clickStatShareTypeShowHighTotalSecond ||\n    //         shareType == shot.Share.onShareType.clickStatShareTypeShowHighTotalThird){\n    //         if(shot.Share.resultType == shot.Share.ShareState.isNotAGroupChat){\n    //             shot.GlobalFuncs.showNoDiamondToastTip(\"需要分享到群\");\n    //         }else if(shot.Share.resultType == shot.Share.ShareState.suscessShare){\n    //             shot.GlobalFuncs.showNoDiamondToastTip(\"分享成功\");\n    //         }\n    //     }else if(shareType == shot.Share.onShareType.clickStatShareTypeInviteFriendTOBattle){\n    //         shot.GlobalFuncs.showNoDiamondToastTip(\"分享成功\");\n    //     }\n    // },\n});\n"]}