{"version":3,"sources":["shot_bucket.js"],"names":["cc","Class","extends","Component","ctor","bottlePool0","bottlePool1","bottlePool2","bottlePool3","bottlePool4","bottlePool5","bottlePool6","bottlePool7","bottlePool8","bottlePool9","deadPool","rotationForBattleArray","properties","rotationNode","default","type","Node","bottleNode","aniNodeForSection","deadPrefab","Prefab","bottleAniNode","bottleAniNodeLeft","bottleAniNodeRight","prefabList","bottlePrefab","bgType","radius","roundSpeed","roundRotation","roundRotationKey","aniScale","isOnShotAction","haveHitBottle","receiveBulletIntervalCount","bottleList","bottlePrefabList","parentScene","serializable","onLoad","i","NodePool","j","put","instantiate","winSize","director","getWinSize","width","y","k","deadNode","deadW","getComponent","setPositionYForDead","setRotateTimeWithType","level","shot","GameWorld","gameLevel","timeConfig","timeLong","rotationTimeConfig","bottomBucket","topBucket","initialTime","subTimeList","decreaseTimeList","length","subTimeConfig","minLevel","maxLevel","decreaseTime","onlyBucket","levelL","parseInt","oneToFour","fiveToNine","ten","removeAllBottles","bottle","active","cleanRotationToBattleArray","setBottlesWithListNew","sectionR","bottleWindow","setBottleType","rotation","bottleConfig","setIndex","push","receiveBulletNew","runningFire","playShotBucketAnimation","bottleW","openFireGunAction","gunFireInterval","openFireBulletAction","nowRotationBottleList","bottleCanHit","bottleHit","bulletRange","tempBottles","indexOf","endReceiveBulletPlayDeadAnimation","bulletRunningTimeBottom","bulletRunningInterval","bulletRunningTimeTop","stopRunningCount","receiveGrenade","emptyGunAction","playDeadAnimation","playBottomDeadAnimation","stopShotAni","ani","node","Animation","anim","getAnimationState","stop","that","once","play","range","nowRotation","aniNode","size","get","scaleX","addChild","ani2","anim2","removeFromParent","receiveBottleLifeCount","bottleInfo","lifeCount","gamePause","gameGetBox","gunFireIntervalNow","GlobalFuncs","showSecretBox","crazyMoment","sitNumber","crazyBottleCount","bottleCount","levelUp","grenadeRunning","aniIndex","bottleNameList","bottleAniPool","bottleAniNodeAdd","clipName","getClips","name","animation","direction","setCrazyRotateTimeWithType","bucketConfig","crazyRotationTime","key","count","percenR","removeAllCrazyBottles","destroy","getRoundSpeed","update","dt","gameOver","onDestroy","clear","ty","NotificationCenter","ignoreScope","unscheduleAllCallbacks"],"mappings":"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","file":"shot_bucket.js","sourceRoot":"../../../../../../assets/Script/ComponentScript/component","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n\n    extends: cc.Component,\n    ctor : function () {\n        this.bottlePool0 = null;\n        this.bottlePool1 = null;\n        this.bottlePool2 = null;\n        this.bottlePool3 = null;\n        this.bottlePool4 = null;\n        this.bottlePool5 = null;\n        this.bottlePool6 = null;\n        this.bottlePool7 = null;\n        this.bottlePool8 = null;\n        this.bottlePool9 = null;\n        this.deadPool = null;\n        this.rotationForBattleArray = [];\n    },\n\n    properties: {\n        rotationNode : {\n            default : null,\n            type : cc.Node\n        },\n        bottleNode : {\n            default : null,\n            type : cc.Node\n        },\n        aniNodeForSection : {\n            default : null,\n            type : cc.Node\n        },\n        deadPrefab : {\n            default : null,\n            type : cc.Prefab\n        },\n        //瓶子碎裂动画\n        bottleAniNode : {\n            default : null,\n            type : cc.Node\n        },\n        bottleAniNodeLeft : {\n            default : null,\n            type : cc.Node\n        },\n        bottleAniNodeRight : {\n            default : null,\n            type : cc.Node\n        },\n        prefabList : [cc.Prefab],\n        bottlePrefab : {\n            default : null,\n            type : cc.Prefab\n        },\n\n        bgType : \"none\",\n        radius : 139,\n        roundSpeed : 0,\n        roundRotation : 180,\n        roundRotationKey : 0,\n\n        aniScale : false,\n        isOnShotAction : false,\n\n        haveHitBottle : false,\n        receiveBulletIntervalCount : 0,\n\n        // gunFireIntervalCount : 0,\n\n        bottleList : [\"none\",\"none\",\"none\",\"none\",\"none\",\"none\",\"none\",\"none\",\"none\",\"none\",\"none\",\"none\"],\n        // crazyBottleList : [cc.String],\n        bottlePrefabList : [cc.Node],\n\n        parentScene: {\n            default: null,\n            serializable: false\n        }\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad : function() {\n        for (var i = 0; i <  10; i++) {\n            this[\"bottlePool\"+i] = new cc.NodePool();\n            for (var j = 0 ; j < 5 ; j ++){\n                this[\"bottlePool\"+i].put(cc.instantiate(this.prefabList[i])); // 通过 putInPool 接口放入对象池\n            }\n        }\n\n        var winSize = cc.director.getWinSize();\n        this.radius = this.radius*winSize.width/640;\n        this.bottleAniNode.y = -this.radius;\n        this.deadPool = new cc.NodePool();\n        for (var k = 0 ; k < 8 ; k ++){\n            var deadNode = cc.instantiate(this.deadPrefab);\n            var deadW = deadNode.getComponent(\"dead\");\n            deadW.setPositionYForDead(this.radius);\n            this.deadPool.put(deadNode);\n        }\n    },\n    setRotateTimeWithType : function (type) {\n        this.bgType = type;\n        if(type == \"none\"){\n            return;\n        }\n        var level = shot.GameWorld.gameLevel;\n        var timeConfig;\n        var timeLong;\n        if(type == \"bottom\" || type == \"top\"){\n            if(type == \"bottom\"){\n                timeConfig = shot.GameWorld.rotationTimeConfig.bottomBucket;\n            }else if(type == \"top\"){\n                timeConfig = shot.GameWorld.rotationTimeConfig.topBucket;\n            }\n            timeLong = timeConfig.initialTime;\n            var subTimeList = timeConfig.decreaseTimeList;\n            for (var k = 11 ; k < level ; k ++){\n                if(k %5 == 0){\n                    for (var i = 0 ; i < subTimeList.length ; i ++){\n                        var subTimeConfig = subTimeList[i];\n                        if(subTimeConfig.minLevel <= k && subTimeConfig.maxLevel >= k){\n                            timeLong -= subTimeConfig.decreaseTime;\n                            break;\n                        }\n                    }\n                }\n            }\n        }else {\n            timeConfig = shot.GameWorld.rotationTimeConfig.onlyBucket;\n            var levelL = parseInt(level/5);\n            if(levelL == 0){\n                timeLong = timeConfig.oneToFour;\n            }else if(levelL == 1){\n                timeLong = timeConfig.fiveToNine;\n            }else {\n                timeLong = timeConfig.ten;\n            }\n        }\n        // hall.LOGW(\"======\",\"===level===\"+level+\"===time===\"+timeLong);\n        this.roundSpeed = 360/timeLong;\n    },\n    removeAllBottles : function () {\n        for (var i = 0 ; i < this.bottlePrefabList.length ; i ++ ){\n            var bottle = this.bottlePrefabList[i];\n            bottle.active = false;\n        }\n    },\n    cleanRotationToBattleArray : function () {\n        for (var i = 0 ; i < 360 ; i ++){\n            this.rotationForBattleArray[i] = [];\n        }\n    },\n    setBottlesWithListNew : function (bottleList) {\n        this.cleanRotationToBattleArray();\n        // hall.LOGW(\"=====\",\"===setBottlesWithList===\"+JSON.stringify(bottleList));\n        this.bottleList = bottleList;\n        var sectionR;\n        var j;\n        for(var i = 0 ; i < this.bottleList.length ; i ++){\n            var bottle = this.bottlePrefabList[i];\n            if(this.bottleList[i] != \"none\"){\n                bottle.active = true;\n                var bottleWindow = bottle.getComponent('shot_bottle');\n                bottleWindow.setBottleType(this.bottleList[i],this,this.radius,i);\n                bottle.rotation = 30*i;\n\n                var rotation = i * 30;\n                sectionR = shot.GameWorld.bottleConfig[this.bottleList[i]].sectionR;\n                for (j = rotation-sectionR ; j < rotation + sectionR ; j ++){\n                    var setIndex = j >=0 ? j : j+360;\n                    if(setIndex >= 360){\n                        setIndex -= 360;\n                    }\n                    this.rotationForBattleArray[setIndex].push(bottle);\n                }\n            }else {\n                bottle.active = false;\n            }\n        }\n    },\n    receiveBulletNew : function (runningFire) {\n        // hall.LOGW(\"=====\",\"======receiveBulletNew======\");\n        if(this.bgType == \"none\"){\n            return;\n        }\n        this.roundRotationKey = (540-this.roundRotation) >> 0;\n        // hall.LOGW(\"=====\",\"======receiveBullet======\"+this.bgType);\n        this.playShotBucketAnimation();\n        var bottle;\n        var bottleW;\n        if(!runningFire){\n            this.haveHitBottle = false;\n        }else {\n            this.parentScene.openFireGunAction();\n            if(shot.GameWorld.gunFireInterval){\n                this.parentScene.openFireBulletAction();\n            }\n        }\n        var nowRotationBottleList = this.rotationForBattleArray[this.roundRotationKey];\n        if(nowRotationBottleList.length != 0){\n            for (var i = 0 ; i < nowRotationBottleList.length ; i ++){\n                bottle = nowRotationBottleList[i];\n                if(bottle.active){\n                    bottleW = bottle.getComponent(\"shot_bottle\");\n                    var bottleCanHit = bottleW.bottleHit();\n                    this.haveHitBottle = bottleCanHit ? bottleCanHit : this.haveHitBottle;\n                }\n            }\n        }\n\n        if(shot.GameWorld.bulletRange){\n            this.bottleAniNodeLeft.rotation = 180-shot.GameWorld.bulletRange;\n            this.bottleAniNodeRight.rotation = 180+shot.GameWorld.bulletRange;\n            var tempBottles = [];\n            if(bottle){\n                tempBottles.push(this.bottlePrefabList.indexOf(bottle));\n            }\n            var rotation;\n            for (var j = 0 ; j < 2 ; j ++) {\n                if (j == 0) {\n                    rotation = 540 - this.roundRotation - shot.GameWorld.bulletRange;\n                } else {\n                    rotation = 540 - this.roundRotation + shot.GameWorld.bulletRange;\n                }\n                if (rotation < 0) {\n                    rotation += 360;\n                } else if (rotation > 360) {\n                    rotation -= 360;\n                }\n                this.roundRotationKey = rotation >> 0;\n                nowRotationBottleList = this.rotationForBattleArray[this.roundRotationKey];\n                if (nowRotationBottleList.length != 0) {\n                    for (i = 0; i < nowRotationBottleList.length; i++) {\n                        bottle = nowRotationBottleList[i];\n                        if (bottle.active) {\n                            if (tempBottles.indexOf(this.bottlePrefabList.indexOf(bottle)) == -1) {\n                                // haveHit = true;\n                                bottleW = bottle.getComponent(\"shot_bottle\");\n                                if(j == 0){\n                                    bottleCanHit = bottleW.bottleHit(\"left\");\n                                }else {\n                                    bottleCanHit = bottleW.bottleHit(\"right\");\n                                }\n\n                                tempBottles.push(this.bottlePrefabList.indexOf(bottle));\n                                this.haveHitBottle = bottleCanHit ? bottleCanHit : this.haveHitBottle;\n                            }\n                        }\n                    }\n                }\n            }\n        }\n\n        this.endReceiveBulletPlayDeadAnimation();\n\n        //M16(三连发)\n        if(this.bgType == \"only\" || this.bgType == \"bottom\"){\n            if(shot.GameWorld.bulletRunningTimeBottom) {\n                shot.GameWorld.bulletRunningTimeBottom--;\n                if (shot.GameWorld.bulletRunningTimeBottom) {\n                    this.receiveBulletIntervalCount = shot.GameWorld.bulletRunningInterval;\n                    return;\n                }\n            }\n        }else if(this.bgType == \"top\"){\n            if(shot.GameWorld.bulletRunningTimeTop) {\n                shot.GameWorld.bulletRunningTimeTop--;\n                if (shot.GameWorld.bulletRunningTimeTop) {\n                    this.receiveBulletIntervalCount = shot.GameWorld.bulletRunningInterval;\n                    return;\n                }\n            }\n        }\n\n        if(shot.GameWorld.gunFireInterval){\n            return;\n        }\n\n        this.stopRunningCount();\n    },\n    receiveGrenade : function () {\n        for (var i = 0 ; i < this.bottlePrefabList.length ; i ++ ){\n            var bottle = this.bottlePrefabList[i];\n            if(bottle.active){\n                var bottleW = bottle.getComponent(\"shot_bottle\");\n                bottleW.bottleHit();\n            }\n        }\n    },\n\n    stopRunningCount : function () {\n        if(!this.haveHitBottle){\n            this.parentScene.emptyGunAction();\n        }\n    },\n    // resetRunningCount : function () {\n    //     // shot.GameWorld.bulletRunningTime = 0;\n    //     // this.receiveBulletIntervalCount = 0;\n    // },\n    //播放火花动画\n    endReceiveBulletPlayDeadAnimation : function () {\n        if(this.bgType == \"only\"){\n            this.playDeadAnimation();\n        }\n        if(this.bgType == \"top\"){\n            if(!this.haveHitBottle){\n                this.parentScene.playBottomDeadAnimation();\n            }else {\n                this.playDeadAnimation();\n            }\n        }\n    },\n\n    stopShotAni : function () {\n        if(this.isOnShotAction){\n            var ani = this.node.getComponent(cc.Animation);\n            var anim = ani.getAnimationState(\"shot_bucket_new\");\n            anim.stop();\n        }\n    },\n    playShotBucketAnimation : function () {\n        var that = this;\n        this.stopShotAni();\n        this.isOnShotAction = true;\n        var ani = this.node.getComponent(cc.Animation);\n        var anim = ani.getAnimationState(\"shot_bucket_new\");\n        anim.once(\"finished\", function () {\n            that.isOnShotAction = false;\n        });\n        anim.play();\n    },\n    playDeadAnimation : function (range) {\n        if(this.bgType == \"none\"){\n            return;\n        }\n        var that = this;\n        var nowRotation;\n        if(!range){\n            nowRotation = 540-this.roundRotation;\n            if(shot.GameWorld.bulletRange){\n                this.playDeadAnimation(nowRotation-shot.GameWorld.bulletRange);\n                this.playDeadAnimation(nowRotation+shot.GameWorld.bulletRange);\n            }\n        }else {\n            nowRotation = range;\n        }\n\n        var aniNode ;\n        if(this.deadPool.size() > 0){\n            aniNode = this.deadPool.get();\n        }else {\n            aniNode = cc.instantiate(this.deadPrefab);\n            var deadW = aniNode.getComponent(\"dead\");\n            deadW.setPositionYForDead(this.radius);\n        }\n        aniNode.rotation = nowRotation;\n        if(this.aniScale){\n            aniNode.scaleX = -1;\n        }else {\n            aniNode.scaleX = 1;\n        }\n        this.aniScale = !this.aniScale;\n        this.aniNodeForSection.addChild(aniNode);\n        var ani2 = aniNode.getComponent(cc.Animation);\n        var anim2 = ani2.getAnimationState(\"dead\");\n        anim2.once(\"finished\", function () {\n            that.deadPool.put(aniNode);\n            aniNode.removeFromParent();\n        });\n        anim2.play();\n    },\n\n    receiveBottleLifeCount : function (bottleInfo) {\n        this.parentScene.bottleHit(bottleInfo);\n        // var bottle;\n        if(bottleInfo.lifeCount == 0){\n            if(bottleInfo.type.indexOf(\"treasureBox\") > -1){\n                shot.GameWorld.gamePause = true;\n                shot.GameWorld.gameGetBox = true;\n                shot.GameWorld.gunFireIntervalNow = 0;\n                shot.GlobalFuncs.showSecretBox(bottleInfo.type,this.parentScene);\n            }\n            if(!shot.GameWorld.crazyMoment){\n                this.bottleList[bottleInfo.sitNumber] = \"none\";\n            }else {\n                shot.GameWorld.crazyBottleCount[bottleInfo.type] ++;\n                // shot.GameWorld.crazyBottleCount ++;\n            }\n            shot.GameWorld.bottleCount --;\n            if(shot.GameWorld.bottleCount <= 0) { //一局的瓶子打完了\n                this.parentScene.levelUp();\n            }\n        }\n        if(shot.GameWorld.grenadeRunning){\n            return;\n        }\n\n        var aniIndex = shot.GameWorld.bottleNameList.indexOf(bottleInfo.type);\n        var bottleAniPool = this[\"bottlePool\"+aniIndex];\n        var bottleAniNodeAdd ;\n        if(bottleAniPool.size() > 0){\n            bottleAniNodeAdd = bottleAniPool.get();\n        }else {\n            bottleAniNodeAdd = cc.instantiate(this.prefabList[aniIndex])\n        }\n        var ani = bottleAniNodeAdd.getComponent(cc.Animation);\n        var clipName = ani.getClips()[bottleInfo.lifeCount].name;\n        var animation = ani.getAnimationState(clipName);\n        if(bottleInfo.direction){\n            if(bottleInfo.direction == \"left\"){\n                this.bottleAniNodeLeft.addChild(bottleAniNodeAdd);\n            }else {\n                this.bottleAniNodeRight.addChild(bottleAniNodeAdd);\n            }\n        }else {\n            this.bottleAniNode.addChild(bottleAniNodeAdd);\n        }\n        animation.once(\"finished\", function () {\n            bottleAniPool.put(bottleAniNodeAdd);\n            bottleAniNodeAdd.removeFromParent();\n            // var bottleW = bottle.getComponent(\"shot_bottle\");\n            // bottleW.afterAnimation();\n        });\n        animation.play();\n    },\n\n    //疯狂时刻\n    setCrazyRotateTimeWithType : function (type,bucketConfig) {\n        this.bgType = type;\n        if(type == \"none\"){\n            return;\n        }\n        this.roundSpeed = 360/bucketConfig.crazyRotationTime;\n        var bottleConfig = bucketConfig.bottleConfig;\n        this.cleanRotationToBattleArray();\n        var sectionR,j;\n        for (var key in bottleConfig){\n            var count = bottleConfig[key];\n            var percenR = 360/count;\n            for (var i = 0; i < count ; i ++){\n                var bottle = cc.instantiate(this.bottlePrefab);\n                bottle.rotation = percenR*i;\n                var bottleWindow = bottle.getComponent('shot_bottle');\n                bottleWindow.setBottleType(key,this,this.radius,i);\n                var rotation = percenR*i;\n                sectionR = shot.GameWorld.bottleConfig[key].sectionR;\n                for (j = rotation-sectionR ; j < rotation + sectionR ; j ++){\n                    var setIndex = j >=0 ? j : j+360;\n                    if(setIndex >= 360){\n                        setIndex -= 360;\n                    }\n                    this.rotationForBattleArray[setIndex].push(bottle);\n                }\n                this.bottleNode.addChild(bottle);\n            }\n            shot.GameWorld.bottleCount += count;\n        }\n    },\n    removeAllCrazyBottles : function () {\n        if(this.bgType == \"none\"){\n            return;\n        }\n        var bottle;\n        var j ;\n        for (var i = 0 ; i < 360 ; i ++){\n            var nowRotationBottleList = this.rotationForBattleArray[i];\n            if(nowRotationBottleList.length != 0){\n                for (j = 0 ; j < nowRotationBottleList.length ; j ++){\n                    bottle = nowRotationBottleList[j];\n                    if(bottle){\n                        bottle.removeFromParent(true);\n                        bottle.destroy();\n                    }\n                }\n            }\n            this.rotationForBattleArray[i] = [];\n        }\n    },\n\n    getRoundSpeed : function () {\n        return this.roundSpeed;\n    },\n\n    update : function(dt) {\n        if(this.receiveBulletIntervalCount){\n            this.receiveBulletIntervalCount -- ;\n            if(this.receiveBulletIntervalCount == 0){\n                this.receiveBulletNew(true);\n            }\n        }\n\n        // if(shot.GameWorld.gunFireIntervalNow && !shot.GameWorld.gamePause && !shot.GameWorld.gameOver && !shot.GameWorld.jugglingSchema){\n        //     // this.gunFireIntervalCount ++;\n        //     // if(this.gunFireIntervalCount >= shot.GameWorld.gunFireInterval){\n        //     //     this.gunFireIntervalCount = 0;\n        //     //     this.receiveBulletNew(true);\n        //     // }\n        //\n        //     shot.GameWorld.gunFireIntervalNow --;\n        //     if(shot.GameWorld.gunFireIntervalNow == 1){\n        //         shot.GameWorld.gunFireIntervalNow = shot.GameWorld.gunFireInterval;\n        //         this.receiveBulletNew(true);\n        //     }\n        // }\n\n        if(shot.GameWorld.gameOver || shot.GameWorld.gamePause || this.bgType == \"none\"){\n            return;\n        }\n        this.roundRotation += dt*this.roundSpeed;\n        if(this.roundRotation > 540){\n            this.roundRotation -= 360;\n        }\n        this.rotationNode.rotation = this.roundRotation;\n\n    },\n    onDestroy : function () {\n        this.bottlePool0.clear();\n        this.bottlePool1.clear();\n        this.bottlePool2.clear();\n        this.bottlePool3.clear();\n        this.bottlePool4.clear();\n        this.bottlePool5.clear();\n        this.bottlePool6.clear();\n        this.bottlePool7.clear();\n        this.bottlePool8.clear();\n        this.bottlePool9.clear();\n        this.deadPool.clear();\n        this.rotationForBattleArray = [];\n        // this.aniNode.removeAllChildren();\n        ty.NotificationCenter.ignoreScope(this);\n        this.unscheduleAllCallbacks();\n    }\n\n});\n"]}