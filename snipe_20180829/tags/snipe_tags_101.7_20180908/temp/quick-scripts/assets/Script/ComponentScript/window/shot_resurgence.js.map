{"version":3,"sources":["shot_resurgence.js"],"names":["cc","Class","extends","Component","properties","scoreLabel","Label","diamondLabel","RichText","centerBtn","Button","centerBtnText","nextNode","Node","nextAvatar","Sprite","nextScoreLabel","useDiamondTips","aniSpriteNode","default","type","diamondNode","onLoad","hall","GlobalFuncs","btnScaleEffect","node","string","shot","GameWorld","totalScore","Share","shareKeywordReplace","theScoreForNow","active","ty","UserInfo","wxgame_session_key","LoginToyoo","count","ME","udataInfo","diamondCount","state","NotificationCenter","listen","EventType","RESURGENCE_RESULT","getResurgenceResult","UPDATE_SHARE_STATE","playAnimationAfterShareWithType","UPDATE_DIAMOND_NUMBER","updateDiamond","REWARD_VIDEO_COMPLETE","rewardVideoComplete","REWARD_VIDEO_COMPLETE_ERROR","rewardVideoCompleteError","updateTips","changeDiamondNodeActive","adManager","showBannerAd","gameModel","getAllCheckConfig","isInBSGS","toolUserTimeConfig","mysteryShow","bsgs","nBsgs","reTypeList","resurgenceType","canPlay","y","length","number","getRandomNumberBefore","tempNumber","shareProbabilityB","shareProbabilityN","shareType","onShareType","clickStatShareTypeRevial","_config","gunnerShareSchemeConfig","resurgenceShare","reultType","resultType","MsgBoxManager","showToast","title","waitGetRevial","shareToGetreward","sharePoint","SharePointType","shareResurgence","onBlack","resurt","success","itemId","hideBannerAd","onClose","trigger","GAME_START","isEnd","rewardedVideoType","errorMsg","onClickCenterButton","BiLog","clickStat","clickStatEventType","clickStatEventTypeButtonClick","shareWithType","showRewardedVideo","consumeAssets","stopAllActions","destroy","onClickSkip","showGameOverWithMyScore","secretGift","showMysteryGifgBag","update","dt","rotation","onDestroy","ignoreScope","unscheduleAllCallbacks"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,oBAAWL,GAAGM,KADN;AAERC,sBAAaP,GAAGQ,QAFR;AAGRC,mBAAUT,GAAGU,MAHL;AAIRC,uBAAcX,GAAGQ,QAJT;;AAMRI,kBAASZ,GAAGa,IANJ;AAORC,oBAAWd,GAAGe,MAPN;AAQRC,wBAAehB,GAAGM,KARV;AASRW,wBAAejB,GAAGa,IATV;AAUR;AACAK,uBAAe;AACXC,qBAAU,IADC;AAEXC,kBAAOpB,GAAGa;AAFC,SAXP;AAeRQ,qBAAc;AACVF,qBAAU,IADA;AAEVC,kBAAOpB,GAAGU;AAFA;AAfN,KAHP;;AAwBLY,YAAO,kBAAU;AACbC,aAAKC,WAAL,CAAiBC,cAAjB,CAAgC,KAAKhB,SAAL,CAAeiB,IAA/C,EAAoD,IAApD;AACA,aAAKrB,UAAL,CAAgBsB,MAAhB,GAAyBC,KAAKC,SAAL,CAAeC,UAAxC;AACAF,aAAKG,KAAL,CAAWC,mBAAX,CAA+BC,cAA/B,GAAgDL,KAAKC,SAAL,CAAeC,UAA/D;;AAEA,aAAKlB,QAAL,CAAcsB,MAAd,GAAuB,KAAvB;;AAEA,YAAG,CAACC,GAAGC,QAAH,CAAYC,kBAAhB,EAAmC;AAC/Bd,iBAAKe,UAAL;AACH;;AAED,YAAIC,QAAQhB,KAAKiB,EAAL,CAAQC,SAAR,CAAkBC,YAAlB,IAAkC,CAA9C;AACA,aAAKnC,YAAL,CAAkBoB,MAAlB,GAA2B,8EAA6EY,KAA7E,GAAoF,UAA/G;AACA,YAAIA,SAAS,CAAb,EAAe;AACX,iBAAK5B,aAAL,CAAmBgB,MAAnB,GAA4B,MAA5B;AACA,iBAAKgB,KAAL,GAAa,CAAb;AACH,SAHD,MAGM;AACF,iBAAKhC,aAAL,CAAmBgB,MAAnB,GAA4B,IAA5B;AACA,iBAAKgB,KAAL,GAAa,CAAb;AACH;AACDR,WAAGS,kBAAH,CAAsBC,MAAtB,CAA6BjB,KAAKkB,SAAL,CAAeC,iBAA5C,EAA8D,KAAKC,mBAAnE,EAAwF,IAAxF;AACAb,WAAGS,kBAAH,CAAsBC,MAAtB,CAA6BjB,KAAKkB,SAAL,CAAeG,kBAA5C,EAAgE,KAAKC,+BAArE,EAAsG,IAAtG;AACAf,WAAGS,kBAAH,CAAsBC,MAAtB,CAA6BjB,KAAKkB,SAAL,CAAeK,qBAA5C,EAAkE,KAAKC,aAAvE,EAAsF,IAAtF;AACAjB,WAAGS,kBAAH,CAAsBC,MAAtB,CAA6BjB,KAAKkB,SAAL,CAAeO,qBAA5C,EAAkE,KAAKC,mBAAvE,EAA4F,IAA5F;AACAnB,WAAGS,kBAAH,CAAsBC,MAAtB,CAA6BjB,KAAKkB,SAAL,CAAeS,2BAA5C,EAAwE,KAAKC,wBAA7E,EAAuG,IAAvG;AACA,aAAKC,UAAL;AACA,aAAKC,uBAAL;AACAnC,aAAKoC,SAAL,CAAeC,YAAf,CAA4B,yBAA5B;AACH,KApDI;;AAsDLF,6BAA0B,mCAAY;AAClC,YAAG9B,KAAKiC,SAAL,CAAeC,iBAAf,EAAH,EAAsC;AAClC,iBAAKzC,WAAL,CAAiBK,IAAjB,CAAsBQ,MAAtB,GAA+B,KAA/B;AACH,SAFD,MAEM;AACF,gBAAGC,GAAGC,QAAH,CAAY2B,QAAf,EAAwB;AACpB,qBAAK1C,WAAL,CAAiBK,IAAjB,CAAsBQ,MAAtB,GAA+BN,KAAKC,SAAL,CAAemC,kBAAf,CAAkCC,WAAlC,CAA8CC,IAA7E;AACH,aAFD,MAEM;AACF,qBAAK7C,WAAL,CAAiBK,IAAjB,CAAsBQ,MAAtB,GAA+BN,KAAKC,SAAL,CAAemC,kBAAf,CAAkCC,WAAlC,CAA8CE,KAA7E;AACH;AACJ;AACJ,KAhEI;;AAkEL;AACAV,gBAAW,sBAAU;AACjB,YAAIW,UAAJ;AACA,YAAGjC,GAAGC,QAAH,CAAY2B,QAAf,EAAwB;AACpBK,yBAAaxC,KAAKC,SAAL,CAAemC,kBAAf,CAAkCK,cAAlC,CAAiDH,IAA9D;AACH,SAFD,MAEM;AACFE,yBAAaxC,KAAKC,SAAL,CAAemC,kBAAf,CAAkCK,cAAlC,CAAiDF,KAA9D;AACH;AACD,YAAGC,WAAW,CAAX,KAAiB,IAApB,EAAyB;AACrB,gBAAG7C,KAAKoC,SAAL,CAAeW,OAAlB,EAA0B;AACtB,qBAAKrD,cAAL,CAAoBiB,MAApB,GAA6B,KAA7B;AACA,qBAAKvB,aAAL,CAAmBgB,MAAnB,GAA4B,sCAA5B;AACA,qBAAKtB,UAAL,CAAgBqB,IAAhB,CAAqB6C,CAArB,GAAyB,EAAzB;AACA,qBAAK5B,KAAL,GAAa,CAAb;AACH,aALD,MAKM,IAAGyB,WAAWI,MAAX,GAAoB,CAApB,IAA0BJ,WAAW,CAAX,KAAiB,OAA9C,EAAsD;AACxD,qBAAKnD,cAAL,CAAoBiB,MAApB,GAA6B,KAA7B;AACA,qBAAKvB,aAAL,CAAmBgB,MAAnB,GAA4B,oCAA5B;AACA,qBAAKtB,UAAL,CAAgBqB,IAAhB,CAAqB6C,CAArB,GAAyB,EAAzB;AACA,qBAAK5B,KAAL,GAAa,CAAb;AACH,aALK,MAKA;AACF,qBAAK1B,cAAL,CAAoBiB,MAApB,GAA6B,IAA7B;AACA,qBAAK7B,UAAL,CAAgBqB,IAAhB,CAAqB6C,CAArB,GAAyB,GAAzB;AACH;AACJ,SAfD,MAeM,IAAGH,WAAW,CAAX,KAAiB,OAApB,EAA4B;AAC9B,gBAAIK,SAASlD,KAAKC,WAAL,CAAiBkD,qBAAjB,CAAuC,GAAvC,CAAb;AACA,gBAAIC,UAAJ;AACA,gBAAGxC,GAAGC,QAAH,CAAY2B,QAAf,EAAwB;AACpBY,6BAAa/C,KAAKC,SAAL,CAAemC,kBAAf,CAAkCK,cAAlC,CAAiDO,iBAA9D;AACH,aAFD,MAEM;AACFD,6BAAa/C,KAAKC,SAAL,CAAemC,kBAAf,CAAkCK,cAAlC,CAAiDQ,iBAA9D;AACH;AACD,gBAAGJ,SAASE,UAAZ,EAAuB;AACnB,qBAAK1D,cAAL,CAAoBiB,MAApB,GAA6B,KAA7B;AACA,qBAAKvB,aAAL,CAAmBgB,MAAnB,GAA4B,oCAA5B;AACA,qBAAKtB,UAAL,CAAgBqB,IAAhB,CAAqB6C,CAArB,GAAyB,EAAzB;AACA,qBAAK5B,KAAL,GAAa,CAAb;AACH,aALD,MAKM;AACF,oBAAGpB,KAAKoC,SAAL,CAAeW,OAAlB,EAA0B;AACtB,yBAAKrD,cAAL,CAAoBiB,MAApB,GAA6B,KAA7B;AACA,yBAAKvB,aAAL,CAAmBgB,MAAnB,GAA4B,sCAA5B;AACA,yBAAKtB,UAAL,CAAgBqB,IAAhB,CAAqB6C,CAArB,GAAyB,EAAzB;AACA,yBAAK5B,KAAL,GAAa,CAAb;AACH,iBALD,MAKM;AACF,yBAAK1B,cAAL,CAAoBiB,MAApB,GAA6B,IAA7B;AACA,yBAAK7B,UAAL,CAAgBqB,IAAhB,CAAqB6C,CAArB,GAAyB,GAAzB;AACH;AACJ;AACJ,SAxBK,MAwBA;AACF,iBAAKtD,cAAL,CAAoBiB,MAApB,GAA6B,IAA7B;AACA,iBAAK7B,UAAL,CAAgBqB,IAAhB,CAAqB6C,CAArB,GAAyB,GAAzB;AACH;AACJ,KArHI;;AAuHLrB,qCAAkC,yCAAU4B,SAAV,EAAqB;AACnD,YAAIA,aAAaA,aAAalD,KAAKG,KAAL,CAAWgD,WAAX,CAAuBC,wBAArD,EAA+E;AAC3E,gBAAIC,UAAUrD,KAAKC,SAAL,CAAeqD,uBAA7B;AACA,gBAAID,WAAWA,QAAQE,eAAnB,IAAsC,CAAChD,GAAGC,QAAH,CAAY2B,QAAvD,EAAgE;AAC5D,oBAAIqB,YAAYxD,KAAKG,KAAL,CAAWsD,UAA3B;AACA,wBAAQD,SAAR;AACI,yBAAK,CAAL;AACI7D,6BAAK+D,aAAL,CAAmBC,SAAnB,CAA6B,EAACC,OAAQ,WAAT,EAA7B;AACA;AACJ,yBAAK,CAAL;AACIjE,6BAAK+D,aAAL,CAAmBC,SAAnB,CAA6B,EAACC,OAAQ,eAAT,EAA7B;AACA;AACJ,yBAAK,CAAL;AACI5D,6BAAK6D,aAAL,GAAqB;AACjBrE,kCAAO;AADU,yBAArB;AAGA;AACAQ,6BAAKiC,SAAL,CAAe6B,gBAAf,CAAgC9D,KAAK6D,aAAL,CAAmBE,UAAnB,IAAiC/D,KAAKG,KAAL,CAAW6D,cAAX,CAA0BC,eAA3F;AACA;AACJ;AACI;AAfR;AAiBH,aAnBD,MAmBM;AACFtE,qBAAK+D,aAAL,CAAmBC,SAAnB,CAA6B,EAACC,OAAQ,UAAT,EAA7B;AACH;AACD5D,iBAAKG,KAAL,CAAWsD,UAAX,GAAwB,CAAxB;AACH;AACJ,KAlJI;;AAoJLjC,mBAAgB,yBAAY;AACxB,YAAI,KAAKT,KAAL,IAAc,CAAd,IAAmB,KAAKA,KAAL,IAAc,CAArC,EAAuC;AACnC;AACH;;AAED,YAAIJ,QAAQhB,KAAKiB,EAAL,CAAQC,SAAR,CAAkBC,YAAlB,IAAkC,CAA9C;AACA,aAAKnC,YAAL,CAAkBoB,MAAlB,GAA2B,8EAA6EY,KAA7E,GAAoF,UAA/G;AACA,YAAIA,SAAS,CAAb,EAAe;AACX,iBAAK5B,aAAL,CAAmBgB,MAAnB,GAA4B,MAA5B;AACA,iBAAKgB,KAAL,GAAa,CAAb;AACH,SAHD,MAGM;AACF,iBAAKhC,aAAL,CAAmBgB,MAAnB,GAA4B,IAA5B;AACA,iBAAKgB,KAAL,GAAa,CAAb;AACH;AACJ,KAlKI;;AAoKLmD,aAAU,mBAAY,CAErB,CAtKI;AAuKL9C,yBAAoB,6BAAS+C,MAAT,EAAgB;;AAEhC,YAAIA,OAAOC,OAAP,IAAkB,CAAlB,IAAuBD,OAAOE,MAAP,IAAiB,WAA5C,EAAwD;AAAI;AACxD1E,iBAAKoC,SAAL,CAAeuC,YAAf;AACA,iBAAKC,OAAL;AACA;AACAhE,eAAGS,kBAAH,CAAsBwD,OAAtB,CAA8BxE,KAAKkB,SAAL,CAAeuD,UAA7C;AACA9E,iBAAK+D,aAAL,CAAmBC,SAAnB,CAA6B,EAACC,OAAM,OAAP,EAA7B;AACH,SAND,MAMK,CAAG;AACP;AACJ,KAjLI;AAkLLlC,yBAAsB,6BAASgD,KAAT,EAAe;AACjC,YAAG/E,KAAKoC,SAAL,CAAe4C,iBAAf,IAAoC,YAAvC,EAAoD;AAChD;AACH;AACD,YAAGD,KAAH,EAAS;AACL/E,iBAAKoC,SAAL,CAAeuC,YAAf;AACA,iBAAKC,OAAL;AACA;AACAhE,eAAGS,kBAAH,CAAsBwD,OAAtB,CAA8BxE,KAAKkB,SAAL,CAAeuD,UAA7C;AACA9E,iBAAK+D,aAAL,CAAmBC,SAAnB,CAA6B,EAACC,OAAM,OAAP,EAA7B;AACH,SAND,MAMM;AACFjE,iBAAK+D,aAAL,CAAmBC,SAAnB,CAA6B,EAAC,SAAQ,SAAT,EAA7B;AACH;AACJ,KA/LI;AAgML/B,8BAA2B,kCAAUgD,QAAV,EAAoB;AAC3C,YAAGjF,KAAKoC,SAAL,CAAe4C,iBAAf,IAAoC,YAAvC,EAAoD;AAChD;AACH;AACDhF,aAAK+D,aAAL,CAAmBC,SAAnB,CAA6B,EAAC,SAAQiB,QAAT,EAA7B;AACH,KArMI;AAsMLC,yBAAoB,+BAAU;AAC1B,YAAI,KAAK9D,KAAL,IAAc,CAAlB,EAAoB;AAChBR,eAAGuE,KAAH,CAASC,SAAT,CAAmBxE,GAAGC,QAAH,CAAYwE,kBAAZ,CAA+BC,6BAAlD,EAAgF,CAAC,iBAAD,CAAhF;AACAjF,iBAAKG,KAAL,CAAW+E,aAAX,CAAyBlF,KAAKG,KAAL,CAAWgD,WAAX,CAAuBC,wBAAhD;AACA;AACH;;AAED,YAAI,KAAKrC,KAAL,IAAc,CAAlB,EAAoB;AAChBR,eAAGuE,KAAH,CAASC,SAAT,CAAmBxE,GAAGC,QAAH,CAAYwE,kBAAZ,CAA+BC,6BAAlD,EAAgF,CAAC,WAAD,CAAhF;AACAtF,iBAAK+D,aAAL,CAAmBC,SAAnB,CAA6B,EAACC,OAAM,eAAP,EAA7B;AACA;AACH;AACD,YAAI,KAAK7C,KAAL,IAAc,CAAlB,EAAoB;AAChBR,eAAGuE,KAAH,CAASC,SAAT,CAAmBxE,GAAGC,QAAH,CAAYwE,kBAAZ,CAA+BC,6BAAlD,EAAgF,CAAC,cAAD,CAAhF;AACAtF,iBAAKoC,SAAL,CAAeoD,iBAAf,CAAiC,YAAjC;AACA;AACH;AACD;AACA5E,WAAGuE,KAAH,CAASC,SAAT,CAAmBxE,GAAGC,QAAH,CAAYwE,kBAAZ,CAA+BC,6BAAlD,EAAgF,CAAC,YAAD,CAAhF;AACAjF,aAAKiC,SAAL,CAAemD,aAAf,CAA6B,CAA7B,EAA+B,WAA/B;AACH,KA1NI;;AA4NLb,aAAQ,mBAAU;AACdhE,WAAGuE,KAAH,CAASC,SAAT,CAAmBxE,GAAGC,QAAH,CAAYwE,kBAAZ,CAA+BC,6BAAlD,EAAgF,CAAC,mBAAD,CAAhF;AACA,aAAKpG,SAAL,CAAeiB,IAAf,CAAoBuF,cAApB;AACA,aAAKvF,IAAL,CAAUwF,OAAV;AACH,KAhOI;;AAkOLC,iBAAY,uBAAU;AAClB5F,aAAKoC,SAAL,CAAeuC,YAAf;AACA/D,WAAGuE,KAAH,CAASC,SAAT,CAAmBxE,GAAGC,QAAH,CAAYwE,kBAAZ,CAA+BC,6BAAlD,EAAgF,CAAC,aAAD,CAAhF;AACA,aAAKV,OAAL;AACA;AACAvE,aAAKJ,WAAL,CAAiB4F,uBAAjB;AACH,KAxOI;AAyOLC,gBAAa,sBAAY;AACrB9F,aAAKoC,SAAL,CAAeuC,YAAf;AACA/D,WAAGuE,KAAH,CAASC,SAAT,CAAmBxE,GAAGC,QAAH,CAAYwE,kBAAZ,CAA+BC,6BAAlD,EAAgF,CAAC,YAAD,CAAhF;AACAjF,aAAKJ,WAAL,CAAiB8F,kBAAjB;AACH,KA7OI;AA8OLC,YAAQ,gBAASC,EAAT,EAAa;AACjB,aAAKtG,aAAL,CAAmBuG,QAAnB,IAA+B,CAA/B;AACH,KAhPI;;AAkPLC,eAAU,qBAAU;AAChBnG,aAAKoC,SAAL,CAAeuC,YAAf;AACA/D,WAAGS,kBAAH,CAAsB+E,WAAtB,CAAkC,IAAlC;AACA,aAAKC,sBAAL;AACH;;AAtPI,CAAT","file":"shot_resurgence.js","sourceRoot":"../../../../../../assets/Script/ComponentScript/window","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        scoreLabel:cc.Label,\n        diamondLabel:cc.RichText,\n        centerBtn:cc.Button,\n        centerBtnText:cc.RichText,\n\n        nextNode:cc.Node,\n        nextAvatar:cc.Sprite,\n        nextScoreLabel:cc.Label,\n        useDiamondTips:cc.Node,\n        // shareTips:cc.Node,\n        aniSpriteNode :{\n            default : null,\n            type : cc.Node\n        },\n        diamondNode : {\n            default : null,\n            type : cc.Button\n        }\n    },\n\n    onLoad:function(){\n        hall.GlobalFuncs.btnScaleEffect(this.centerBtn.node,1.13);\n        this.scoreLabel.string = shot.GameWorld.totalScore;\n        shot.Share.shareKeywordReplace.theScoreForNow = shot.GameWorld.totalScore;\n\n        this.nextNode.active = false;\n\n        if(!ty.UserInfo.wxgame_session_key){\n            hall.LoginToyoo();\n        }\n\n        var count = hall.ME.udataInfo.diamondCount || 0;\n        this.diamondLabel.string = \"<color=#622508>已有 </color><img src='shot_gift_diamond'/><color=#FF3333> x\"+ count +\"</color>\";\n        if (count == 0){\n            this.centerBtnText.string = \"没有钻石\";\n            this.state = 1;\n        }else {\n            this.centerBtnText.string = \"复活\";\n            this.state = 0;\n        }\n        ty.NotificationCenter.listen(shot.EventType.RESURGENCE_RESULT,this.getResurgenceResult ,this);\n        ty.NotificationCenter.listen(shot.EventType.UPDATE_SHARE_STATE, this.playAnimationAfterShareWithType, this);\n        ty.NotificationCenter.listen(shot.EventType.UPDATE_DIAMOND_NUMBER,this.updateDiamond, this);\n        ty.NotificationCenter.listen(shot.EventType.REWARD_VIDEO_COMPLETE,this.rewardVideoComplete, this);\n        ty.NotificationCenter.listen(shot.EventType.REWARD_VIDEO_COMPLETE_ERROR,this.rewardVideoCompleteError, this);\n        this.updateTips();\n        this.changeDiamondNodeActive();\n        hall.adManager.showBannerAd(\"adunit-53ba999759aa14de\");\n    },\n\n    changeDiamondNodeActive : function () {\n        if(shot.gameModel.getAllCheckConfig()){\n            this.diamondNode.node.active = false;\n        }else {\n            if(ty.UserInfo.isInBSGS){\n                this.diamondNode.node.active = shot.GameWorld.toolUserTimeConfig.mysteryShow.bsgs;\n            }else {\n                this.diamondNode.node.active = shot.GameWorld.toolUserTimeConfig.mysteryShow.nBsgs;\n            }\n        }\n    },\n\n    //\n    updateTips:function(){\n        var reTypeList ;\n        if(ty.UserInfo.isInBSGS){\n            reTypeList = shot.GameWorld.toolUserTimeConfig.resurgenceType.bsgs;\n        }else {\n            reTypeList = shot.GameWorld.toolUserTimeConfig.resurgenceType.nBsgs;\n        }\n        if(reTypeList[0] == \"ad\"){\n            if(hall.adManager.canPlay){\n                this.useDiamondTips.active = false;\n                this.centerBtnText.string = \"<color=#ffffff><b>观看视频复活</b></color>\";\n                this.scoreLabel.node.y = 57;\n                this.state = 3;\n            }else if(reTypeList.length > 1 &&  reTypeList[1] == \"share\"){\n                this.useDiamondTips.active = false;\n                this.centerBtnText.string = \"<color=#ffffff><b>免费复活</b></color>\";\n                this.scoreLabel.node.y = 57;\n                this.state = 2;\n            }else {\n                this.useDiamondTips.active = true;\n                this.scoreLabel.node.y = 130;\n            }\n        }else if(reTypeList[0] == \"share\"){\n            var number = hall.GlobalFuncs.getRandomNumberBefore(100);\n            var tempNumber;\n            if(ty.UserInfo.isInBSGS){\n                tempNumber = shot.GameWorld.toolUserTimeConfig.resurgenceType.shareProbabilityB;\n            }else {\n                tempNumber = shot.GameWorld.toolUserTimeConfig.resurgenceType.shareProbabilityN;\n            }\n            if(number < tempNumber){\n                this.useDiamondTips.active = false;\n                this.centerBtnText.string = \"<color=#ffffff><b>免费复活</b></color>\";\n                this.scoreLabel.node.y = 57;\n                this.state = 2;\n            }else {\n                if(hall.adManager.canPlay){\n                    this.useDiamondTips.active = false;\n                    this.centerBtnText.string = \"<color=#ffffff><b>观看视频复活</b></color>\";\n                    this.scoreLabel.node.y = 57;\n                    this.state = 3;\n                }else {\n                    this.useDiamondTips.active = true;\n                    this.scoreLabel.node.y = 130;\n                }\n            }\n        }else {\n            this.useDiamondTips.active = true;\n            this.scoreLabel.node.y = 130;\n        }\n    },\n\n    playAnimationAfterShareWithType : function (shareType) {\n        if (shareType && shareType == shot.Share.onShareType.clickStatShareTypeRevial) {\n            var _config = shot.GameWorld.gunnerShareSchemeConfig;\n            if (_config && _config.resurgenceShare && !ty.UserInfo.isInBSGS){\n                var reultType = shot.Share.resultType;\n                switch (reultType) {\n                    case 1:\n                        hall.MsgBoxManager.showToast({title : '分享到群才有效哦~'});\n                        break;\n                    case 2:\n                        hall.MsgBoxManager.showToast({title : '这个群今天已经打扰过了哦~'});\n                        break;\n                    case 3:\n                        shot.waitGetRevial = {\n                            type : 'waitRecive'\n                        };\n                        //发送得钻石的消息\n                        shot.gameModel.shareToGetreward(shot.waitGetRevial.sharePoint || shot.Share.SharePointType.shareResurgence);\n                        break;\n                    default:\n                        break;\n                }\n            }else {\n                hall.MsgBoxManager.showToast({title : \"快进群抢礼包吧~\"});\n            }\n            shot.Share.resultType = 0;\n        }\n    },\n\n    updateDiamond : function () {\n        if( this.state == 3 || this.state == 2){\n            return;\n        }\n\n        var count = hall.ME.udataInfo.diamondCount || 0;\n        this.diamondLabel.string = \"<color=#622508>已有 </color><img src='shot_gift_diamond'/><color=#FF3333> x\"+ count +\"</color>\";\n        if (count == 0){\n            this.centerBtnText.string = \"没有钻石\";\n            this.state = 1;\n        }else {\n            this.centerBtnText.string = \"复活\";\n            this.state = 0;\n        }\n    },\n\n    onBlack : function () {\n\n    },\n    getResurgenceResult:function(resurt){\n\n        if (resurt.success == 1 && resurt.itemId == \"item:1373\"){   //复活成功\n            hall.adManager.hideBannerAd();\n            this.onClose();\n            //复活\n            ty.NotificationCenter.trigger(shot.EventType.GAME_START);\n            hall.MsgBoxManager.showToast({title:'复活成功!'});\n        }else{  //复活失败\n        }\n    },\n    rewardVideoComplete : function(isEnd){\n        if(hall.adManager.rewardedVideoType != \"resurgence\"){\n            return;\n        }\n        if(isEnd){\n            hall.adManager.hideBannerAd();\n            this.onClose();\n            //复活\n            ty.NotificationCenter.trigger(shot.EventType.GAME_START);\n            hall.MsgBoxManager.showToast({title:'复活成功!'});\n        }else {\n            hall.MsgBoxManager.showToast({\"title\":\"视频播放未完成\"});\n        }\n    },\n    rewardVideoCompleteError : function (errorMsg) {\n        if(hall.adManager.rewardedVideoType != \"resurgence\"){\n            return;\n        }\n        hall.MsgBoxManager.showToast({\"title\":errorMsg});\n    },\n    onClickCenterButton:function(){\n        if (this.state == 2){\n            ty.BiLog.clickStat(ty.UserInfo.clickStatEventType.clickStatEventTypeButtonClick,[\"resurgenceShare\"]);\n            shot.Share.shareWithType(shot.Share.onShareType.clickStatShareTypeRevial);\n            return;\n        }\n\n        if (this.state == 1){\n            ty.BiLog.clickStat(ty.UserInfo.clickStatEventType.clickStatEventTypeButtonClick,[\"noDiamond\"]);\n            hall.MsgBoxManager.showToast({title:'邀请好友进入游戏可得钻石!'});\n            return;\n        }\n        if (this.state == 3){\n            ty.BiLog.clickStat(ty.UserInfo.clickStatEventType.clickStatEventTypeButtonClick,[\"resurgenceAd\"]);\n            hall.adManager.showRewardedVideo(\"resurgence\");\n            return;\n        }\n        //使用复活卡\n        ty.BiLog.clickStat(ty.UserInfo.clickStatEventType.clickStatEventTypeButtonClick,[\"useDiamond\"]);\n        shot.gameModel.consumeAssets(1,\"item:1373\");\n    },\n\n    onClose:function(){\n        ty.BiLog.clickStat(ty.UserInfo.clickStatEventType.clickStatEventTypeButtonClick,[\"onCloseResurgence\"]);\n        this.centerBtn.node.stopAllActions();\n        this.node.destroy();\n    },\n\n    onClickSkip:function(){\n        hall.adManager.hideBannerAd();\n        ty.BiLog.clickStat(ty.UserInfo.clickStatEventType.clickStatEventTypeButtonClick,[\"onClickSkip\"]);\n        this.onClose();\n        //跳转结算页面\n        shot.GlobalFuncs.showGameOverWithMyScore();\n    },\n    secretGift : function () {\n        hall.adManager.hideBannerAd();\n        ty.BiLog.clickStat(ty.UserInfo.clickStatEventType.clickStatEventTypeButtonClick,[\"secretGift\"]);\n        shot.GlobalFuncs.showMysteryGifgBag();\n    },\n    update :function(dt) {\n        this.aniSpriteNode.rotation += 1;\n    },\n\n    onDestroy:function(){\n        hall.adManager.hideBannerAd();\n        ty.NotificationCenter.ignoreScope(this);\n        this.unscheduleAllCallbacks();\n    }\n\n\n});\n"]}