{"version":3,"sources":["shot_throw.js"],"names":["cc","Class","extends","Component","ctor","bottlePool","bottlePool0","bottlePool1","bottlePool2","bottlePool3","deadPool","bottleWinList","jugglingList","jugglingListDetail","bottleConfig","properties","widthScale","heightScale","titleNode","default","type","Node","missNode","missNodeList","Sprite","missSpriteFrameList","SpriteFrame","countDownSprite","countDownSpriteFrameList","bulletNode","bulletCountLabel","Label","infiniteSprite","countDownLabel","infiniteBulletTimeSprite","infiniteBulletTimeNode","infiniteTime","infiniteFullTime","bottleNode","bottleAniNode","bottlePrefab","Prefab","prefabList","bucketNode","mutongNode","mutongAnimation","AnimationState","mutongRaiceCount","mutongDesSpeed","mutongPosuiNode","deadPrefab","deadAniNode","bonusLabel","bonusSprite","resultNode","hitLabel","lastLabel","scoreLabel","addScoreLabel","countDown","bucketRaiseCount","bucketHitTime","throwBottleCountDown","startBucketInfoCount","crazyCheerCount","afterResultCount","addScoreCountDown","overCountDown","missShowCount","nowBottleIndex","nowBottleType","bottleTypeList","String","haveHitBottle","receiveBulletIntervalCount","gunFireIntervalCount","onLoad","winSize","director","getWinSize","width","height","active","j","i","NodePool","put","instantiate","bottleWin","getComponent","setBottleOriginInformationForJuggling","push","deadNode","deadW","setPositionYForDead","shot","GameWorld","jugglingBottleCount","green","purple","orange","red","jugglingBottleHitCount","jugglingBottleScore","jugglingMissBottleCount","jugglingBonus","gamePause","ani","Animation","clipName","getClips","name","animation","getAnimationState","that","once","AudioHelper","playMusic","EffectPath_mp3","jugglingMusic","hall","GlobalFuncs","btnScaleEffectOnce","play","changeOriginData","countDownOut","node","throwNextBottle","jugglingConfig","jugglingSchemaConfig","jugglingLevelConfig","length","jugglingLevel","gameLevel","verticalAccelerate","jugglingAccelerated","jugglingOriginBottleCount","bottleCount","jugglingBulletCount","bulletCount","jugglingBonusPer","bonus","changeBottleConfig","changeBulletCountLabel","jugglingTemp","randomNumber","lastIndex","minBottleCount","maxBottleCount","notFirstKey","key","getRandomNumberBefore","string","size","get","addChild","fromRight","originX","originRotation","byRotation","maxRotation","minRotation","originY","setBottleTypeForJuggling","shift","maxSecondGap","minSecondGap","receiveBullet","runningFire","playDeadAnimation","bulletRunningTimeBottom","bulletRunningTimeTop","bottleWindow","bottleNodeX","parentScene","openFireGunAction","gunFireInterval","openFireBulletAction","bulletRange","getJugglingNodeX","canHit","bottleHit","bulletRunningInterval","stopRunningCount","emptyGunActionForJuggling","jugglingSchemaTimeOut","startBucketInfo","speed","startBucketAnimation","playEffect","jugglingTrack","bulletBlood","aniNode","ani2","anim2","removeFromParent","missBottle","bottle","missBottleOne","spriteFrame","receiveBottleLifeCount","bottleInfo","lifeCount","aniIndex","bottleNameList","indexOf","bottleAniPool","bottleAniNodeAdd","x","y","getJugglingNodeY","direction","bottleAniNodeLeft","bottleAniNodeRight","jugglingSchemaTimeEnd","jugglingSchemaTimeGood","havePosui","stop","stopAllActions","clipName2","animation2","jugglingFragmentation","crazyBottleScore","setResult","jugglingOver","musicGame","endJugglingSchema","destroy","update","dt","gunFireIntervalNow","gameOver","fillRange","crazyCheer","onDestroy","clear","ty","NotificationCenter","ignoreScope","unscheduleAllCallbacks"],"mappings":"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","file":"shot_throw.js","sourceRoot":"../../../../../../assets/Script/ComponentScript/window","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n    ctor : function () {\n        this.bottlePool = null;\n        this.bottlePool0 = null;\n        this.bottlePool1 = null;\n        this.bottlePool2 = null;\n        this.bottlePool3 = null;\n        this.deadPool = null;\n        this.bottleWinList = [];\n\n        this.jugglingList = [];\n        this.jugglingListDetail = {};\n        this.bottleConfig = {};\n    },\n\n    properties: {\n\n        widthScale : 0,\n        heightScale : 0,\n\n        titleNode : {\n            default : null,\n            type : cc.Node\n        },\n\n        missNode : {\n            default : null,\n            type : cc.Node\n        },\n        missNodeList : [cc.Sprite],\n        missSpriteFrameList : [cc.SpriteFrame],\n        countDownSprite : {\n            default : null,\n            type : cc.Sprite\n        },\n        countDownSpriteFrameList : [cc.SpriteFrame],\n\n        bulletNode : {\n            default : null,\n            type : cc.Node\n        },\n        bulletCountLabel : {\n            default : null,\n            type : cc.Label\n        },\n        infiniteSprite : {\n            default : null,\n            type : cc.Sprite\n        },\n        countDownLabel : {\n            default : null,\n            type : cc.Label\n        },\n        infiniteBulletTimeSprite : {\n            default : null,\n            type : cc.Sprite\n        },\n        infiniteBulletTimeNode : {\n            default : null,\n            type : cc.Node\n        },\n        infiniteTime : 0,\n        infiniteFullTime : 0,\n\n        bottleNode : {\n            default : null,\n            type : cc.Node\n        },\n        bottleAniNode : {\n            default : null,\n            type : cc.Node\n        },\n        bottlePrefab : {\n            default : null,\n            type : cc.Prefab\n        },\n        prefabList : [cc.Prefab],\n\n\n        bucketNode : {\n            default : null,\n            type : cc.Node\n        },\n        mutongNode : {\n            default : null,\n            type : cc.Node\n        },\n        mutongAnimation : {\n            default : null,\n            type : cc.AnimationState\n        },\n        mutongRaiceCount : 0,\n        mutongDesSpeed : 0,\n        mutongPosuiNode : {\n            default : null,\n            type : cc.Node\n        },\n        deadPrefab : {\n            default : null,\n            type : cc.Prefab\n        },\n        deadAniNode : {\n            default : null,\n            type : cc.Node\n        },\n        bonusLabel : {\n            default : null,\n            type : cc.Label\n        },\n        bonusSprite : {\n            default : null,\n            type : cc.Sprite\n        },\n\n\n        resultNode : {\n            default : null,\n            type : cc.Node\n        },\n        hitLabel : {\n            default : null,\n            type : cc.Label\n        },\n        lastLabel : {\n            default : null,\n            type : cc.Label\n        },\n        scoreLabel : {\n            default : null,\n            type : cc.Label\n        },\n        addScoreLabel : {\n            default : null,\n            type : cc.Label\n        },\n\n        countDown : 0,\n        bucketRaiseCount : 0,\n        bucketHitTime : false,\n        throwBottleCountDown : 0,\n        startBucketInfoCount : 0,\n        crazyCheerCount : 0,\n        afterResultCount : 0,\n        addScoreCountDown : 0,\n        overCountDown : 0,\n\n        missShowCount : 0,\n\n        nowBottleIndex : 0,\n        nowBottleType : \"\",\n        bottleTypeList : [cc.String],\n\n        haveHitBottle : false,\n        receiveBulletIntervalCount : 0,\n        gunFireIntervalCount : 0\n    },\n\n    onLoad : function() {\n        var winSize = cc.director.getWinSize();\n        this.widthScale = winSize.width/640;\n        this.heightScale = winSize.height/1136;\n\n        this.bucketNode.active = false;\n        this.infiniteBulletTimeNode.active = false;\n\n        var j;\n        for (var i = 0; i <  4; i++) {\n            this[\"bottlePool\"+i] = new cc.NodePool();\n            for (j = 0 ; j < 5 ; j ++){\n                this[\"bottlePool\"+i].put(cc.instantiate(this.prefabList[i])); // 通过 putInPool 接口放入对象池\n            }\n        }\n        this.bottlePool = new cc.NodePool();\n        for (j = 0 ; j < 20 ; j ++){\n            var bottleNode = cc.instantiate(this.bottlePrefab);\n            var bottleWin = bottleNode.getComponent(\"shot_bottle\");\n            bottleWin.setBottleOriginInformationForJuggling(this,this.widthScale*320+50);\n            this.bottlePool.put(bottleNode); // 通过 putInPool 接口放入对象池\n            this.bottleWinList.push(bottleWin);\n        }\n\n        this.deadPool = new cc.NodePool();\n        for (j = 0 ; j < 8 ; j ++){\n            var deadNode = cc.instantiate(this.deadPrefab);\n            var deadW = deadNode.getComponent(\"dead\");\n            deadW.setPositionYForDead(0);\n            this.deadPool.put(deadNode);\n        }\n        shot.GameWorld.jugglingBottleCount.green = 0;\n        shot.GameWorld.jugglingBottleCount.purple = 0;\n        shot.GameWorld.jugglingBottleCount.orange = 0;\n        shot.GameWorld.jugglingBottleCount.red = 0;\n        shot.GameWorld.jugglingBottleHitCount = 0;\n        shot.GameWorld.jugglingBottleScore = 0;\n        shot.GameWorld.jugglingMissBottleCount = 0;\n        shot.GameWorld.jugglingBonus = 0;\n\n        // this.startGameCount = 120;\n        shot.GameWorld.gamePause = false;\n        var ani = this.titleNode.getComponent(cc.Animation);\n        var clipName = ani.getClips()[0].name;\n        var animation = ani.getAnimationState(clipName);\n        var that = this;\n        animation.once(\"finished\", function () {\n            that.titleNode.active = false;\n            that.missNode.active = true;\n            that.bulletNode.active = true;\n            that.countDown = 180;\n            shot.AudioHelper.playMusic(shot.EffectPath_mp3.jugglingMusic,true);\n            hall.GlobalFuncs.btnScaleEffectOnce(that.countDownSprite,1.5);\n        });\n        animation.play();\n        this.changeOriginData();\n    },\n    countDownOut : function () {\n        this.countDownSprite.node.active = false;\n        this.throwNextBottle();\n    },\n\n    changeOriginData : function () {\n        var jugglingConfig = shot.GameWorld.jugglingSchemaConfig.jugglingLevelConfig;\n        var jugglingLevelConfig;\n        for (var i = 0 ; i < jugglingConfig.length ; i ++){\n            if(jugglingConfig[i].jugglingLevel == shot.GameWorld.gameLevel){\n                jugglingLevelConfig = jugglingConfig[i];\n            }\n        }\n\n        shot.GameWorld.verticalAccelerate = jugglingLevelConfig.jugglingAccelerated;\n        shot.GameWorld.jugglingOriginBottleCount = jugglingLevelConfig.bottleCount;\n        shot.GameWorld.jugglingBulletCount = jugglingLevelConfig.bulletCount;\n        shot.GameWorld.jugglingBonusPer = jugglingLevelConfig.bonus;\n        this.jugglingList = jugglingLevelConfig.jugglingList;\n        this.nowBottleIndex = 1;\n        this.changeBottleConfig();\n        this.changeBulletCountLabel();\n    },\n\n    changeBottleConfig : function () {\n        var jugglingTemp ;\n        var randomNumber;\n        var lastIndex = 0;\n        for (var i = 0 ; i < this.jugglingList.length ; i ++ ){\n            jugglingTemp = this.jugglingList[i];\n            if(this.nowBottleIndex >= jugglingTemp.minBottleCount && this.nowBottleIndex <= jugglingTemp.maxBottleCount){\n                this.jugglingListDetail = jugglingTemp;\n                this.bottleConfig = this.jugglingListDetail.bottleConfig;\n                var notFirstKey = false;\n                for(var key in this.jugglingListDetail.bottleConfig){\n                    for (var j = 0 ; j < this.jugglingListDetail.bottleConfig[key].bottleCount ; j ++){\n                        if(notFirstKey){\n                            lastIndex = this.bottleTypeList.length;\n                            randomNumber = hall.GlobalFuncs.getRandomNumberBefore(this.bottleTypeList.length);\n                            this.bottleTypeList[lastIndex] = this.bottleTypeList[randomNumber];\n                            this.bottleTypeList[randomNumber] = key;\n                        }else {\n                            this.bottleTypeList.push(key);\n                        }\n                    }\n                    notFirstKey = true;\n                }\n                if(this.nowBottleIndex > 1){\n                    this.throwNextBottle();\n                }\n                break;\n            }\n        }\n    },\n\n    changeBulletCountLabel : function () {\n        if(shot.GameWorld.jugglingBulletCount <= 0){\n            return;\n        }\n        if(this.bucketHitTime){\n            return;\n        }\n        if(this.bucketNode.active){\n            return;\n        }\n        if(this.nowBottleIndex != 1){\n            shot.GameWorld.jugglingBulletCount --;\n        }\n        this.bulletCountLabel.string = shot.GameWorld.jugglingBulletCount;\n    },\n\n    throwNextBottle : function () {\n        if(shot.GameWorld.gamePause){\n            return;\n        }\n        if(this.bottleTypeList.length == 0){\n            if(shot.GameWorld.jugglingOriginBottleCount <= this.nowBottleIndex){\n                //没有瓶子了\n                return;\n            }\n            this.changeBottleConfig();\n            return;\n        }\n        var bottleNode ;\n        var bottleWin;\n        if(this.bottlePool.size() > 0){\n            bottleNode = this.bottlePool.get();\n            bottleWin = bottleNode.getComponent(\"shot_bottle\");\n        }else {\n            bottleNode = cc.instantiate(this.bottlePrefab);\n            bottleWin = bottleNode.getComponent(\"shot_bottle\");\n            bottleWin.setBottleOriginInformationForJuggling(this,this.widthScale*320+50);\n        }\n\n        this.bottleNode.addChild(bottleNode);\n        this.nowBottleType = this.bottleTypeList[0];\n        var fromRight = this.nowBottleIndex%2 == 0;\n        var originX = fromRight ? this.widthScale*320 : -this.widthScale*320;\n        var originRotation = hall.GlobalFuncs.getRandomNumberBefore(360);\n        var byRotation = hall.GlobalFuncs.getRandomNumberBefore(this.jugglingListDetail.maxRotation-this.jugglingListDetail.minRotation+1)+this.jugglingListDetail.minRotation;\n        var originY = hall.GlobalFuncs.getRandomNumberBefore((90-byRotation)*5)- 200;\n        bottleWin.setBottleTypeForJuggling(this.nowBottleType, this.bottleConfig[this.nowBottleType],originX,originY,originRotation,byRotation,fromRight);\n        this.bottleTypeList.shift();\n        this.nowBottleIndex ++;\n\n        this.throwBottleCountDown = hall.GlobalFuncs.getRandomNumberBefore(this.jugglingListDetail.maxSecondGap*60-\n            this.jugglingListDetail.minSecondGap*60 + 1) + this.jugglingListDetail.minSecondGap*60;\n    },\n\n    receiveBullet : function (runningFire) {\n        if(this.bucketNode.active){\n            if(this.bucketHitTime){\n                this.playDeadAnimation(runningFire);\n            }else {\n                shot.GameWorld.bulletRunningTimeBottom = 0;//子弹连发属性\n                shot.GameWorld.bulletRunningTimeTop = 0;//子弹连发属性\n            }\n            return;\n        }\n        var bottleWindow ;\n        var bottleNodeX;\n        if(!runningFire){\n            this.haveHitBottle = false;\n        }else {\n            this.parentScene.openFireGunAction();\n            if(shot.GameWorld.gunFireInterval){\n                this.parentScene.openFireBulletAction();\n            }\n        }\n\n        var bulletRange = 75;\n        if(shot.GameWorld.bulletRange) {\n            bulletRange += shot.GameWorld.bulletRange;\n        }\n        for (var i = 0 ; i < this.bottleWinList.length ; i ++){\n            bottleWindow = this.bottleWinList[i];\n            bottleNodeX = bottleWindow.getJugglingNodeX();\n            if(bottleNodeX >= -bulletRange && bottleNodeX <= bulletRange){\n                var canHit = bottleWindow.bottleHit();\n                this.haveHitBottle = canHit ? canHit : this.haveHitBottle;\n            }\n        }\n\n        //M16(三连发)\n        if(shot.GameWorld.bulletRunningTimeBottom) {\n            shot.GameWorld.bulletRunningTimeBottom--;\n            if (shot.GameWorld.bulletRunningTimeBottom) {\n                this.receiveBulletIntervalCount = shot.GameWorld.bulletRunningInterval;\n                return;\n            }\n        }\n\n        if(shot.GameWorld.gunFireInterval){\n            return;\n        }\n\n        this.stopRunningCount();\n    },\n    stopRunningCount : function () {\n        if(!this.haveHitBottle){\n            this.emptyGunActionForJuggling();\n        }\n    },\n\n    emptyGunActionForJuggling : function () {\n        if(shot.GameWorld.jugglingBulletCount == 0 && !shot.GameWorld.gamePause){\n            this.jugglingSchemaTimeOut();\n        }\n    },\n\n    startBucketInfo : function () {\n        this.bucketNode.active = true;\n        this.infiniteBulletTimeNode.active = true;\n        this.bucketRaiseCount = 55;\n        // this.bonusLabel.string = \"+\"+shot.GameWorld.jugglingBonus;\n        this.bonusLabel.string = \"+0\";\n\n        var ani = this.mutongNode.getComponent(cc.Animation);\n        var clipName = ani.getClips()[0].name;\n        // ani.setCurrentTime(5,clipName);\n        this.mutongAnimation = ani.getAnimationState(clipName);\n        this.mutongAnimation.play();\n        this.mutongAnimation.speed = 0.5;\n    },\n    startBucketAnimation : function () {\n        this.infiniteTime = 180;\n        this.infiniteFullTime = 180;\n        this.bucketHitTime = true;\n        this.infiniteSprite.node.active = true;\n        this.bulletCountLabel.node.active = false;\n    },\n    playDeadAnimation : function (runningFire) {\n        this.bonusSprite.node.active = true;\n\n        shot.AudioHelper.playEffect(shot.EffectPath_mp3.jugglingTrack);\n        shot.GameWorld.jugglingBonus += shot.GameWorld.jugglingBonusPer*shot.GameWorld.bulletBlood;\n        if(shot.GameWorld.bulletRange){\n            shot.GameWorld.jugglingBonus += shot.GameWorld.jugglingBonusPer*2;\n        }\n        this.bonusLabel.string = \"+\"+shot.GameWorld.jugglingBonus;\n\n        this.mutongAnimation.speed = 1;\n        this.mutongRaiceCount = 5;\n\n        if(runningFire){\n            this.parentScene.openFireGunAction();\n            if(shot.GameWorld.gunFireInterval){\n                this.parentScene.openFireBulletAction();\n            }\n        }\n\n        //M16(三连发)\n        if(shot.GameWorld.bulletRunningTimeBottom) {\n            shot.GameWorld.bulletRunningTimeBottom--;\n            if (shot.GameWorld.bulletRunningTimeBottom) {\n                this.receiveBulletIntervalCount = shot.GameWorld.bulletRunningInterval;\n                return;\n            }\n        }\n\n        var aniNode ;\n        if(this.deadPool.size() > 0){\n            aniNode = this.deadPool.get();\n        }else {\n            aniNode = cc.instantiate(this.deadPrefab);\n            var deadW = aniNode.getComponent(\"dead\");\n            deadW.setPositionYForDead(0);\n        }\n        this.deadAniNode.addChild(aniNode);\n        var ani2 = aniNode.getComponent(cc.Animation);\n        var anim2 = ani2.getAnimationState(\"dead\");\n        var that = this;\n        anim2.once(\"finished\", function () {\n            that.deadPool.put(aniNode);\n            aniNode.removeFromParent();\n        });\n        anim2.play();\n    },\n\n    missBottle : function (bottle) {\n        bottle.node.removeFromParent();\n        this.bottlePool.put(bottle.node);\n    },\n    missBottleOne : function (bottle,fromRight) {\n        if(shot.GameWorld.jugglingMissBottleCount >= 3){\n            return;\n        }\n        if(shot.GameWorld.gamePause){\n            return;\n        }\n        this.missNodeList[shot.GameWorld.jugglingMissBottleCount].spriteFrame = this.missSpriteFrameList[1];\n        shot.GameWorld.jugglingMissBottleCount ++;\n        if(fromRight){\n            this.missNodeList[3].node.active = true;\n        }else {\n            this.missNodeList[4].node.active = true;\n        }\n\n        this.missShowCount = 60;\n        this.missBottle(bottle);\n        if(shot.GameWorld.jugglingMissBottleCount >= 3){\n            this.jugglingSchemaTimeOut();\n            return;\n        }\n        if(shot.GameWorld.jugglingMissBottleCount+shot.GameWorld.jugglingBottleHitCount == shot.GameWorld.jugglingOriginBottleCount){\n            // this.jugglingSchemaTimeOut();\n            this.startBucketInfo();\n            return;\n        }\n        if(shot.GameWorld.jugglingBulletCount == 0){\n            this.startBucketInfo();\n        }\n\n    },\n    receiveBottleLifeCount : function (bottleInfo,bottle) {\n        if(bottleInfo.lifeCount == 0){\n            shot.GameWorld.jugglingBottleCount[bottleInfo.type] ++;\n            shot.GameWorld.jugglingBottleHitCount ++;\n            if(shot.GameWorld.jugglingBottleHitCount+shot.GameWorld.jugglingMissBottleCount == shot.GameWorld.jugglingOriginBottleCount){\n                this.startBucketInfoCount = 60;\n            }else if(shot.GameWorld.jugglingBulletCount == 0){\n                this.jugglingSchemaTimeOut();\n            }\n            this.missBottle(bottle);\n        }else {\n            if(shot.GameWorld.jugglingBulletCount == 0){\n                this.jugglingSchemaTimeOut();\n            }\n        }\n\n        var aniIndex = shot.GameWorld.bottleNameList.indexOf(bottleInfo.type);\n        var bottleAniPool = this[\"bottlePool\"+aniIndex];\n        var bottleAniNodeAdd ;\n        if(bottleAniPool.size() > 0){\n            bottleAniNodeAdd = bottleAniPool.get();\n        }else {\n            bottleAniNodeAdd = cc.instantiate(this.prefabList[aniIndex])\n        }\n        bottleAniNodeAdd.x = 0;\n        bottleAniNodeAdd.y = bottle.getComponent(\"shot_bottle\").getJugglingNodeY();\n        var ani = bottleAniNodeAdd.getComponent(cc.Animation);\n        var clipName = ani.getClips()[bottleInfo.lifeCount].name;\n        var animation = ani.getAnimationState(clipName);\n        if(bottleInfo.direction){\n            if(bottleInfo.direction == \"left\"){\n                this.bottleAniNodeLeft.addChild(bottleAniNodeAdd);\n            }else {\n                this.bottleAniNodeRight.addChild(bottleAniNodeAdd);\n            }\n        }else {\n            this.bottleAniNode.addChild(bottleAniNodeAdd);\n        }\n        animation.once(\"finished\", function () {\n            bottleAniPool.put(bottleAniNodeAdd);\n            bottleAniNodeAdd.removeFromParent();\n        });\n        animation.play();\n    },\n    //结束\n    jugglingSchemaTimeOut : function () {\n        shot.GameWorld.gamePause = true;\n        this.jugglingSchemaTimeEnd();\n    },\n    jugglingSchemaTimeGood : function (havePosui) {\n        this.bucketHitTime = false;\n        shot.GameWorld.gamePause = true;\n        // var ani = this.mutongNode.getComponent(cc.Animation);\n        // var clipName = ani.getClips()[0].name;\n        // var animation = ani.getAnimationState(clipName);\n        this.mutongAnimation.stop();\n        this.mutongNode.stopAllActions();\n        this.mutongNode.active = false;\n\n        this.infiniteSprite.node.active = false;\n        this.bulletCountLabel.node.active = true;\n\n        if(havePosui){\n            this.mutongPosuiNode.active = true;\n            this.mutongPosuiNode.y = this.mutongNode.y;\n            var ani2 = this.mutongPosuiNode.getComponent(cc.Animation);\n            var clipName2 = ani2.getClips()[0].name;\n            var animation2 = ani2.getAnimationState(clipName2);\n            var that = this;\n            animation2.once(\"finished\", function () {\n                that.jugglingSchemaTimeEnd();\n            });\n            animation2.play();\n            this.crazyCheerCount = 18;\n            shot.AudioHelper.playEffect(shot.EffectPath_mp3.jugglingFragmentation);\n        }else {\n            this.jugglingSchemaTimeEnd();\n        }\n    },\n    jugglingSchemaTimeEnd : function () {\n        this.addScoreCountDown = 60;\n        for (var key in shot.GameWorld.jugglingBottleCount){\n            // shot.GameWorld.jugglingBottleHitCount += shot.GameWorld.jugglingBottleCount[key];\n            shot.GameWorld.jugglingBottleScore += shot.GameWorld.jugglingBottleCount[key]*shot.GameWorld.bottleConfig[key].crazyBottleScore;\n        }\n    },\n\n    setResult : function () {\n        this.missNode.active = false;\n        shot.GameWorld.gamePause = true;\n        this.bucketNode.active = false;\n        this.resultNode.active = true;\n        // this.hitLabel.string = shot.GameWorld.crazyBottleHitCount+\"\";\n        this.hitLabel.string = shot.GameWorld.jugglingBottleScore +\"\";\n        // this.lastLabel.string = shot.GameWorld.jugglingMissBottleCount;\n        this.scoreLabel.string = shot.GameWorld.jugglingBonus;\n        this.addScoreLabel.string = shot.GameWorld.jugglingBottleScore;\n\n        if(shot.GameWorld.jugglingMissBottleCount >= 3){\n            this.lastLabel.string = 0;\n        }else {\n            this.lastLabel.string = shot.GameWorld.jugglingBulletCount*10;\n            shot.GameWorld.jugglingBonus += shot.GameWorld.jugglingBulletCount*10;\n        }\n\n        var ani = this.resultNode.getComponent(cc.Animation);\n        var clipName = ani.getClips()[0].name;\n        var animation = ani.getAnimationState(clipName);\n        var that = this;\n        animation.once(\"finished\", function () {\n            if(shot.GameWorld.jugglingBonus){\n                that.overCountDown = 90;\n                return;\n                // that.scoreLabel.string = shot.GameWorld.crazyBonus+\"\";\n            }\n            that.afterResultCount = 90;\n        });\n        animation.play();\n    },\n    jugglingOver : function () {\n        shot.AudioHelper.playMusic(shot.EffectPath_mp3.musicGame,true);\n        this.parentScene.endJugglingSchema();\n        this.node.destroy();\n    },\n    update :function (dt) {\n        //特殊枪\n        if(this.receiveBulletIntervalCount){\n            this.receiveBulletIntervalCount -- ;\n            if(this.receiveBulletIntervalCount == 0){\n                this.receiveBullet(true);\n            }\n        }\n        // if(shot.GameWorld.isOnThompsonRunning && !shot.GameWorld.gamePause && !shot.GameWorld.gameOver){\n        //     this.gunFireIntervalCount ++;\n        //     if(this.gunFireIntervalCount >= shot.GameWorld.gunFireInterval){\n        //         this.gunFireIntervalCount = 0;\n        //         this.receiveBullet(true);\n        //     }\n        // }\n\n        if(shot.GameWorld.gunFireIntervalNow && !shot.GameWorld.gamePause && !shot.GameWorld.gameOver){\n            shot.GameWorld.gunFireIntervalNow --;\n            if(shot.GameWorld.gunFireIntervalNow == 1){\n                shot.GameWorld.gunFireIntervalNow = shot.GameWorld.gunFireInterval;\n                this.receiveBullet(true);\n            }\n        }\n\n        //开始倒计时\n        if(this.countDown){\n            this.countDown --;\n            if(this.countDown == 120){\n                this.countDownSprite.spriteFrame = this.countDownSpriteFrameList[1];\n                hall.GlobalFuncs.btnScaleEffectOnce(this.countDownSprite,1.5);\n            }else if(this.countDown == 60){\n                this.countDownSprite.spriteFrame = this.countDownSpriteFrameList[0];\n                hall.GlobalFuncs.btnScaleEffectOnce(this.countDownSprite,1.5);\n            }else if(this.countDown == 0){\n                this.countDownOut();\n            }\n            return;\n        }\n        //飞出瓶子\n        if(this.throwBottleCountDown){\n            this.throwBottleCountDown -- ;\n            if(this.throwBottleCountDown == 0){\n                this.throwNextBottle();\n            }\n        }\n        //显示MISS标志\n        if(this.missShowCount){\n            this.missShowCount --;\n            if(this.missShowCount == 0){\n                this.missNodeList[4].node.active = false;\n                this.missNodeList[3].node.active = false;\n            }\n        }\n        if(this.startBucketInfoCount){\n            this.startBucketInfoCount -- ;\n            if(this.startBucketInfoCount == 0){\n                this.startBucketInfo();\n            }\n        }\n        //木桶出现\n        if(this.bucketRaiseCount){\n            this.bucketRaiseCount --;\n            this.mutongNode.y += this.heightScale*this.bucketRaiseCount/2;\n            if(this.bucketRaiseCount == 0){\n                this.startBucketAnimation();\n            }\n        }\n        //击打木桶进度条\n        if(this.infiniteTime && this.bucketHitTime){\n            this.infiniteTime --;\n            if(this.infiniteTime == 0){\n                this.jugglingSchemaTimeGood(true);\n                this.countDownLabel.string = \"0\";\n            }else {\n                if(this.infiniteTime % 60 == 0){\n                    this.countDownLabel.string = \"\"+ (this.infiniteTime/60 >> 0);\n                }\n                this.infiniteBulletTimeSprite.fillRange = (this.infiniteTime/this.infiniteFullTime);\n            }\n        }\n        //木桶在经受打击过程中移动\n        if(this.bucketHitTime){\n            if(this.mutongRaiceCount){\n                this.mutongDesSpeed = 0;\n                if(this.mutongNode.y < 230*this.heightScale){\n                    this.mutongNode.y += this.mutongRaiceCount*5*this.heightScale;\n                }\n                this.mutongAnimation.speed = this.mutongRaiceCount/5;\n                this.mutongRaiceCount --;\n            }else {\n                this.mutongDesSpeed += 0.5;\n                this.mutongNode.y -= this.mutongDesSpeed*this.heightScale;\n            }\n            if(this.mutongNode.y < -200*this.heightScale){\n                this.jugglingSchemaTimeGood(false);\n            }\n        }\n        if(this.crazyCheerCount){\n            this.crazyCheerCount --;\n            if(this.crazyCheerCount == 0){\n                shot.AudioHelper.playEffect(shot.EffectPath_mp3.crazyCheer,false);\n            }\n        }\n\n        //游戏结束后准备出结算动画\n        if(this.addScoreCountDown){\n            this.addScoreCountDown -- ;\n            if(this.addScoreCountDown == 0){\n                this.setResult();\n            }\n        }\n        //分数添加滚动\n        if(this.overCountDown){\n            this.overCountDown --;\n            if(this.overCountDown == 0){\n                shot.GameWorld.jugglingBottleScore += shot.GameWorld.jugglingBonus;\n                this.addScoreLabel.string = shot.GameWorld.jugglingBottleScore;\n                this.afterResultCount = 60;\n            }else {\n                this.addScoreLabel.string = (((90-this.overCountDown)*shot.GameWorld.jugglingBonus/90)+shot.GameWorld.jugglingBottleScore) >> 0;\n            }\n        }\n        //移除\n        if(this.afterResultCount){\n            this.afterResultCount --;\n            if(this.afterResultCount == 0){\n                this.jugglingOver();\n            }\n        }\n    },\n\n    onDestroy : function () {\n        this.bottlePool0.clear();\n        this.bottlePool1.clear();\n        this.bottlePool2.clear();\n        this.bottlePool3.clear();\n        this.bottlePool.clear();\n        this.deadPool.clear();\n\n        // this.mutongNode.stopAllActions();\n        // this.mutongNode.removeAllChildren();\n        ty.NotificationCenter.ignoreScope(this);\n        this.unscheduleAllCallbacks();\n    }\n    // LIFE-CYCLE CALLBACKS:\n\n\n\n    // start () {\n    //\n    // },\n\n\n});\n"]}