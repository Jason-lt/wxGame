{"version":3,"sources":["QrOption.js"],"names":["shot","QrOption","cc","Class","ctor","OP_TYPE","BIND_INVITE","BIND_QUDAO","quDaoMap","withQrCode","scene","sa","indexOf","runOption","parStr","val","replace","decodeURIComponent","pars","split","op","parseInt","shift","bindInvite","bindQuDao","setQuDao","arr","from","ty","BiLog","clickStat","UserInfo","clickStatEventType","clickStatEventTypeUserFrom"],"mappings":";;;;;;AAAA;;;;AAIAA,KAAKC,QAAL,GAAgBC,GAAGC,KAAH,CAAS;AACrBC,UAAK,gBAAY;AACb,aAAKC,OAAL,GAAe;AACXC,yBAAc,CADH;AAEXC,wBAAa;AAFF,SAAf;;AAKA,aAAKC,QAAL,GAAgB,EAAhB;AAEH,KAToB;;AAWrBC,gBAAW,oBAAUC,KAAV,EAAiB;AACxB,YAAIC,KAAK,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,CAAT;AACA,eAAOA,GAAGC,OAAH,CAAWF,KAAX,IAAoB,CAAC,CAA5B;AACH,KAdoB;;AAgBrBG,eAAU,mBAAUC,MAAV,EAAmBJ,KAAnB,EAA0B;AAChC,YAAI,CAACI,MAAL,EAAa;AACb,YAAIC,MAAMD,OAAOE,OAAP,CAAe,OAAf,EAAuB,EAAvB,CAAV;AACAD,cAAME,mBAAmBF,GAAnB,CAAN;;AAEA,YAAIG,OAAOH,IAAII,KAAJ,CAAU,GAAV,CAAX;;AAEA,YAAIC,KAAKC,SAASH,KAAKI,KAAL,EAAT,CAAT;AACA,gBAAQF,EAAR;AACI,iBAAK,KAAKf,OAAL,CAAaC,WAAlB;AAA8B;AAC1B,yBAAKiB,UAAL,CAAgBL,IAAhB,EAAsBR,KAAtB;AACA;AACH;AACD,iBAAK,KAAKL,OAAL,CAAaE,UAAlB;AAA6B;AACzB,yBAAKiB,SAAL,CAAeN,IAAf,EAAqBR,KAArB;AACA;AACH;AARL;AAUH,KAlCoB;;AAoCrBe,cAAS,kBAAUC,GAAV,EAAe;AACpB,aAAKlB,QAAL,GAAgBkB,GAAhB;AACH,KAtCoB;;AAwCrBH,gBAAW,oBAAUL,IAAV,EAAgBR,KAAhB,EAAuB;AAC9B,YAAIiB,OAAON,SAASH,KAAK,CAAL,CAAT,CAAX;AACA,YAAIS,IAAJ,EAAS;AACL;AACA;AACAC,eAAGC,KAAH,CAASC,SAAT,CAAmBF,GAAGG,QAAH,CAAYC,kBAAZ,CAA+BC,0BAAlD,EAA6E,CAACvB,KAAD,EAAQiB,IAAR,CAA7E;AACH;AACJ,KA/CoB;;AAiDrBH,eAAU,mBAAUN,IAAV,EAAgBR,KAAhB,EAAuB;AAC7B,YAAIiB,OAAON,SAASH,KAAK,CAAL,CAAT,CAAX;AACA;AACA;AACA;AACA;AACA,YAAIS,IAAJ,EAAS;AACLC,eAAGC,KAAH,CAASC,SAAT,CAAmBF,GAAGG,QAAH,CAAYC,kBAAZ,CAA+BC,0BAAlD,EAA6E,CAACvB,KAAD,EAAQiB,IAAR,CAA7E;AACH;AACJ;AA1DoB,CAAT,CAAhB","file":"QrOption.js","sourceRoot":"../../../../../assets/Script/shot","sourcesContent":["/**\n * 从小程序码启动之后的操作\n * Created by xujing on 2018/4/26.\n */\nshot.QrOption = cc.Class({\n    ctor:function () {\n        this.OP_TYPE = {\n            BIND_INVITE : 1,\n            BIND_QUDAO : 2\n        };\n\n        this.quDaoMap = [\n        ];\n    },\n\n    withQrCode:function (scene) {\n        var sa = [1047, 1048, 1049];\n        return sa.indexOf(scene) > -1;\n    },\n\n    runOption:function (parStr , scene) {\n        if (!parStr) return;\n        var val = parStr.replace('.html','');\n        val = decodeURIComponent(val);\n\n        var pars = val.split(',');\n\n        var op = parseInt(pars.shift());\n        switch (op){\n            case this.OP_TYPE.BIND_INVITE:{\n                this.bindInvite(pars, scene);\n                break;\n            }\n            case this.OP_TYPE.BIND_QUDAO:{\n                this.bindQuDao(pars, scene);\n                break;\n            }\n        }\n    },\n\n    setQuDao:function (arr) {\n        this.quDaoMap = arr;\n    },\n\n    bindInvite:function (pars, scene) {\n        var from = parseInt(pars[0]);\n        if (from){\n            // shot.gameModel.bindInviteCode(from);\n            // shot.gameModel.bindNewInviteCode(from);\n            ty.BiLog.clickStat(ty.UserInfo.clickStatEventType.clickStatEventTypeUserFrom,[scene, from]);\n        }\n    },\n\n    bindQuDao:function (pars, scene) {\n        var from = parseInt(pars[0]);\n        // if (this.quDaoMap.length > 0){\n        //     // from = this.quDaoMap[parseInt(pars[0])];\n        //\n        // }\n        if (from){\n            ty.BiLog.clickStat(ty.UserInfo.clickStatEventType.clickStatEventTypeUserFrom,[scene, from]);\n        }\n    }\n});"]}