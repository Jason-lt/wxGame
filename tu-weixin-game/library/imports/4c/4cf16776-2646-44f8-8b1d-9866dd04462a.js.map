{"version":3,"sources":["../../../../../../assets/Script/ComponentScript/component/assets/Script/ComponentScript/component/ddz_progress.js"],"names":["cc","Class","extends","Component","properties","completeArray","Node","setProgress","progress","isSucces","node","animationCom","anim","i","length","getComponent","Animation","getAnimationState","play","getChildByName","active"],"mappings":";;;;;;AAAA;;;AAGAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,uBAAgB,CAACL,GAAGM,IAAJ;AADR,KAHP;;AAOL;;;;;AAKAC,iBAAc,qBAAUC,QAAV,EAAoBC,QAApB,EAA8B;;AAExC;AACA;AACA,YAAIC,IAAJ,EAAUC,YAAV,EAAwBC,IAAxB;AACA,aAAK,IAAIC,IAAI,CAAb,EAAeA,IAAI,KAAKR,aAAL,CAAmBS,MAAtC,EAA+CD,GAA/C,EAAoD;AAChDH,mBAAO,KAAKL,aAAL,CAAmBQ,CAAnB,CAAP;AACAF,2BAAeD,KAAKK,YAAL,CAAkBf,GAAGgB,SAArB,CAAf;;AAEA,gBAAIH,IAAIL,QAAR,EAAiB;AACb;AACA;AACA;AACH,aAJD,MAKK,IAAIK,KAAKL,QAAT,EAAkB;AACnB;AACA,oBAAIC,QAAJ,EAAa;AACTG,2BAAOD,aAAaM,iBAAb,CAA+B,oBAA/B,CAAP;AACAL,yBAAKM,IAAL;AACH,iBAHD,MAII;AACAN,2BAAOD,aAAaM,iBAAb,CAA+B,oBAA/B,CAAP;AACAL,yBAAKM,IAAL;AACH;AACJ,aAVI,MAUA;;AAED;AACAR,qBAAKS,cAAL,CAAoB,cAApB,EAAoCC,MAApC,GAA6C,KAA7C;AACAV,qBAAKS,cAAL,CAAoB,iBAApB,EAAuCC,MAAvC,GAAgD,KAAhD;AACAV,qBAAKS,cAAL,CAAoB,iBAApB,EAAuCC,MAAvC,GAAgD,KAAhD;;AAEA,oBAAIZ,WAAW,KAAKH,aAAL,CAAmBS,MAAnB,GAA4B,CAAvC,IAA4CL,QAA5C,IAAwDI,KAAKL,WAAW,CAA5E,EAA8E;AAC1E;AACAI,2BAAOD,aAAaM,iBAAb,CAA+B,oBAA/B,CAAP;AACAL,yBAAKM,IAAL;AACH;AACJ;AAEJ;AAEJ;;AAED;;AAEA;;AAEA;AA1DK,CAAT","file":"ddz_progress.js","sourceRoot":"../../../../../../assets/Script/ComponentScript/component","sourcesContent":["/**\n * 闯关进度\n */\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        completeArray : [cc.Node],\n    },\n\n    /**\n     * 设置当前进度\n     * @param progress 当前进度\n     * @param isSucces 当前关卡,是否成功\n     */\n    setProgress : function (progress, isSucces) {\n\n        //ddz_anim_guanqia01 过关\n        //ddz_anim_guanqia02 失败\n        var node, animationCom, anim;\n        for (var i = 0;i < this.completeArray.length ; i ++){\n            node = this.completeArray[i];\n            animationCom = node.getComponent(cc.Animation);\n\n            if (i < progress){\n                //已经通过\n                // anim = animationCom.getAnimationState('ddz_anim_guanqia01');\n                // anim.play();\n            }\n            else if (i == progress){\n                //当前\n                if (isSucces){\n                    anim = animationCom.getAnimationState('ddz_anim_guanqia01');\n                    anim.play();\n                }\n                else{\n                    anim = animationCom.getAnimationState('ddz_anim_guanqia02');\n                    anim.play();\n                }\n            }else{\n\n                //还未闯的\n                node.getChildByName('ddz_complete').active = false;\n                node.getChildByName('ddz_complete_02').active = false;\n                node.getChildByName('ddz_complete_01').active = false;\n\n                if (progress < this.completeArray.length - 1 && isSucces && i == progress + 1){\n                    //如果没有通关,显示下一关的关卡动态\n                    anim = animationCom.getAnimationState('ddz_anim_guanqia02');\n                    anim.play();\n                }\n            }\n\n        }\n\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    // onLoad () {},\n\n    // update (dt) {},\n});\n"]}