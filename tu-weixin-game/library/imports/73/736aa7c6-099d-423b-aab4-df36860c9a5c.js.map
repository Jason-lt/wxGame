{"version":3,"sources":["../../../../../../assets/Script/ComponentScript/component/assets/Script/ComponentScript/component/ColorBg.js"],"names":["cc","Class","extends","Component","ctor","colorsCfgs","duration","red","green","blue","bgIndex","_curBg","properties","bgNode","Node","bgs","Sprite","onLoad","winSize","director","getWinSize","width","height","ddz","LOGD","_TAG","i","length","fitBg","node","setContentSize","changeBgColor","index","showCurBg","runAction","fadeOut","opacity","fadeIn","isCur","setBgColor","setVisible","start"],"mappings":"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","file":"ColorBg.js","sourceRoot":"../../../../../../assets/Script/ComponentScript/component","sourcesContent":["/**\n * 动画颜色背影\n */\ncc.Class({\n    extends: cc.Component,\n\n    ctor:function () {\n        this.colorsCfgs = [\n            [\n                {duration:2, red:21, green:173, blue:163},  //春\n                {duration:2, red:183, green:220, blue:181},\n            ],\n            [\n                {duration:2, red:61, green:130, blue:199},  //夏\n                {duration:2, red:100, green:216, blue:224},\n            ],\n            // [\n            //     {duration:2, red:233, green:148, blue:58},  //秋\n            //     {duration:2, red:249, green:211, blue:161},\n            // ],\n            [\n                {duration:2, red:134, green:150, blue:166},  //冬\n                {duration:2, red:193, green:203, blue:215},\n            ]\n        ];\n\n        this.bgIndex = -1;\n        this._curBg = null;\n    },\n\n    properties: {\n        bgNode : cc.Node,\n        bgs : [cc.Sprite]\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad :function() {\n\n        var winSize = cc.director.getWinSize();\n\n        //全屏适配\n        this.bgNode.width = winSize.width;\n        this.bgNode.height = winSize.height;\n\n        ddz.LOGD(this._TAG, \"窗口大小: width:\" + winSize.width + \"; height: \" + winSize.height);\n        for (var i = 0; i < this.bgs.length; i++){\n            this.fitBg(i);\n        }\n\n        // this.bgGround.node.width = winSize.width;\n        // this.bgGround.node.height = winSize.height;\n        //\n        // this.bgTop.node.width = winSize.width;\n        // this.bgTop.node.height = winSize.height;\n\n        // this.stopParticles();\n\n        //以下是测试代码\n        // var toChun = cc.tintTo(2,21,173,163); //春\n        // var toChun2 = cc.tintTo(2,183,220,181);\n        //\n        // var toXia = cc.tintTo(2,61,130,199); //夏\n        // var toXia2 = cc.tintTo(2,100,216,224);\n        //\n        // var toQiu = cc.tintTo(2,233,148,58); //秋\n        // var toQiu2 = cc.tintTo(2,249,211,161);\n        //\n        // var toDong = cc.tintTo(2,134,150,166); //冬\n        // var toDong2 = cc.tintTo(2,193,203,215);\n        //\n        // var seq = cc.sequence( cc.delayTime(10),toXia, cc.delayTime(10),toQiu, cc.delayTime(10),toDong, cc.delayTime(10),toChun).repeatForever();\n        // var seq2 = cc.sequence( cc.delayTime(10), toXia2, cc.delayTime(10),toQiu2, cc.delayTime(10),toDong2, cc.delayTime(10),toChun2).repeatForever();\n        //\n        // this.bgGround.node.runAction(seq);\n        // this.bgTop.node.runAction(seq2);\n        // this.changeParticle(0);\n    },\n\n    fitBg:function (bgIndex) {\n        this.bgs[bgIndex].node.setContentSize(this.bgNode.width, this.bgNode.height);\n    },\n\n    /**\n     * 更改背影颜色(有缓动过度效果)\n     * @param index 0:春;1:夏;2:冬\n     */\n    changeBgColor:function (index) {\n        if (index == this.bgIndex) return;\n\n        // var cfg = this.colorsCfgs[index];\n        // var colorBg = cfg[0];\n        // var colorTop = cfg[1];\n\n        // this.bgGround.node.runAction(cc.tintTo(colorBg.duration ,colorBg.red ,colorBg.green ,colorBg.blue));\n        // this.bgTop.node.runAction(cc.tintTo(colorTop.duration ,colorTop.red ,colorTop.green ,colorTop.blue));\n\n        if (this.bgIndex == -1){\n            //初始化\n            this.showCurBg(index);\n            this.bgIndex = index;\n        }\n        else{\n            this._curBg.runAction(cc.fadeOut(2));\n\n            this.bgIndex = index;\n\n            this._curBg = this.bgs[this.bgIndex].node;\n            this._curBg.opacity = 0;\n            this._curBg.runAction(cc.fadeIn(2));\n        }\n    },\n\n    showCurBg:function (index) {\n        var isCur = false;\n        for (var i = 0; i < this.bgs.length; i++){\n            isCur = i == index;\n            if (isCur){\n                this._curBg = this.bgs[i].node;\n                this.bgs[i].node.opacity = 255;\n            }\n            else{\n                this.bgs[i].node.opacity = 0;\n            }\n        }\n    },\n\n    /**\n     * 更改背影颜色(立即生效,没有缓动过度效果)\n     * @param index 0:春;1:夏;2:秋;3:冬\n     */\n    setBgColor:function (index) {\n        if (index == this.bgIndex) return;\n\n        // var cfg = this.colorsCfgs[index];\n        // var colorBg = cfg[0];\n        // var colorTop = cfg[1];\n\n        // this.bgGround.node.setColor(cc.color(colorBg.red ,colorBg.green ,colorBg.blue));\n        // this.bgTop.node.setColor(cc.color(colorTop.red ,colorTop.green ,colorTop.blue));\n\n        // if (this.bgIndex > -1){\n            this.bgs[this.bgIndex == -1 ? 0 : this.bgIndex].setVisible(false);\n        // }\n\n        // this.changeParticle(index);\n        this.bgIndex = index;\n        this.bgs[this.bgIndex].setVisible(true);\n    },\n\n    // stopParticles:function () {\n    //     var part;\n    //     for (var i = 0; i < this.particles.length; i++){\n    //         part = this.particles[i];\n    //         part.stopSystem();\n    //     }\n    // },\n\n    // changeParticle:function (index) {\n    //     this.stopParticles();\n    //     var partSys = this.particles[index];\n    //     partSys.resetSystem();\n    //     if (index > 2){\n    //         partSys = this.particles[index + 1];\n    //     }\n    //     partSys.resetSystem();\n    //\n    //     this.bgIndex = index;\n    // },\n\n    start:function () {\n\n    },\n\n    // update (dt) {},\n});\n"]}