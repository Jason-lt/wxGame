{"version":3,"sources":["../../../../../../assets/Script/ComponentScript/window/assets/Script/ComponentScript/window/ddz_hongbao.js"],"names":["cc","Class","extends","Component","properties","btnRichText","RichText","numberLabel","Label","numLabel","backButton","Button","button","ddz_hb_coos","Node","ddz_redPacket","ddz_getRedPacket","titleLabel","contentLabel","tipsLabel","getRedPacketText","adId","onLoad","backButtonH","ddz","GlobalFuncs","getBackButtonPositionY","node","y","_config","gameModel","congratulationGetRedPacketConfig","chooseType","isType","adConfig","buttonTitle","_string","hall","replaceKeyWordInString","string","adIds","_shareType","Share","onShareType","clickStatShareTypeGetRedPacket","getButtonTitle","shareConfig","number","ty","NotificationCenter","listen","EventType","UPDATE_BUTTON_TEXT","updateButtonText","UPDATE_SHARE_STATE","playAnimationAfterShareWithType","REWARD_VIDEO_COMPLETE","finishShowRewardVideo","REWARD_VIDEO_COMPLETE_ERROR","errorShowRewardVideo","setNumberLabel","that","ani","getComponent","Animation","play","trigger","CREATE_TABLE_AD","_curOverInfo","matchModel","getCurOverInfo","m_count","mcount","length","i","icon","count","shareKeywordReplace","curBonusOnly","curBonusOnlyChip","parseInt","playAni","isChip","active","shareIndex","clickStatShareTypeWithChip","checkShareReward","SharePointType","withChip","clickStatShareTypeMainTips","lottery","once","noteToFriend","addTipsWindow","tips","preFabPath","comName","showPopWinByPreFab","preFabNode","window","parentScene","testArray","title","bottomType","setTitleContentAndButtons","onClickCenterButton","shareType","shareWithType","reultType","resultType","isBringVersion","MsgBoxManager","showToast","isEnded","parArr","onShareDrawBtn","adManager","showRewardedVideo","onAbandonBtn","Number","getCashCoin","data","pointId","LOGW","leftCount","onClickShareBtn","stopAni","stop","onBackButton","shut","removeAni","REMOVE_TABLE_ANI","RESET_TABLE","HIDE_TOP_BUTTON","removeFromParent","hongBaoPanel","destroy","onDestroy","ignoreScope","AdManagerTYWX","getAdNodeByTag","hideAdNode"],"mappings":"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","file":"ddz_hongbao.js","sourceRoot":"../../../../../../assets/Script/ComponentScript/window","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/class/index.html\n// Learn Attribute:\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/reference/attributes/index.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/life-cycle-callbacks/index.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        btnRichText:cc.RichText,\n        numberLabel:cc.Label,\n        numLabel:cc.Label,\n        backButton : cc.Button,\n        button : cc.Button,\n        ddz_hb_coos : cc.Node,\n        ddz_redPacket : cc.Node,\n        ddz_getRedPacket : cc.Node,\n\n        titleLabel : cc.Label,\n        contentLabel : cc.Label,\n        tipsLabel : cc.Label,\n        getRedPacketText:cc.RichText,\n        adId:\"adunit-18726a0b6953b0d2\",\n    },\n\n    onLoad:function () {\n        var backButtonH = ddz.GlobalFuncs.getBackButtonPositionY();\n        if (backButtonH){\n            this.backButton.node.y = backButtonH;\n        }\n\n        var _config = ddz.gameModel.congratulationGetRedPacketConfig;\n        this.chooseType = 2; // 1 分享  2 看广告\n        if (_config) {\n            if (_config.isType && _config.isType == \"ads\"){\n                if (_config.adConfig && _config.adConfig.buttonTitle){\n                    var _string = hall.GlobalFuncs.replaceKeyWordInString(_config.adConfig.buttonTitle);\n                    this.getRedPacketText.string = \"<color=#FFFFFF>\"+ _string +\"</c>\";\n                }\n                if (_config.adConfig && _config.adConfig.adIds) {\n                    this.adId = _config.adConfig.adIds;\n                }\n                this.chooseType = 2;\n            }else if (_config.isType && _config.isType == \"share\") {\n                var _shareType = ddz.Share.onShareType.clickStatShareTypeGetRedPacket;\n                this.getRedPacketText.string = \"<color=#FFFFFF>\"+ hall.GlobalFuncs.getButtonTitle(_shareType) +\"</c>\";\n                if (ddz.gameModel.shareConfig[_shareType].adId){\n                    this.adId = ddz.gameModel.shareConfig[_shareType].adId;\n                }\n                this.chooseType = 1;\n            }\n        }\n\n        // if (ddz.matchResultPanel){\n        //     ddz.matchResultPanel.shut();\n        // }\n\n        this.number = 0;\n\n        ty.NotificationCenter.listen(ty.EventType.UPDATE_BUTTON_TEXT, this.updateButtonText, this);\n        ty.NotificationCenter.listen(ddz.EventType.UPDATE_SHARE_STATE, this.playAnimationAfterShareWithType, this);\n\n        ty.NotificationCenter.listen(ddz.EventType.REWARD_VIDEO_COMPLETE,this.finishShowRewardVideo,this);\n        ty.NotificationCenter.listen(ddz.EventType.REWARD_VIDEO_COMPLETE_ERROR,this.errorShowRewardVideo,this);\n\n        this.setNumberLabel();\n\n        var that = this;\n        var ani = that.node.getComponent(cc.Animation);\n        ani.play('btnTick');\n\n        ty.NotificationCenter.trigger(ty.EventType.CREATE_TABLE_AD);\n    },\n\n    setNumberLabel:function(){\n        var _curOverInfo = ddz.matchModel.getCurOverInfo();\n        var m_count = _curOverInfo.mcount;\n        if (m_count && m_count.length > 0) {\n            for (var i = 0; i < m_count.length; i++) {\n                if (m_count[i].icon == \"user:coupon\") {\n                    this.number = m_count[i].count/100;\n                    this.numberLabel.string = this.number;\n                    this.numLabel.string = this.number;\n                    ddz.Share.shareKeywordReplace.curBonusOnly = this.number;\n                    ddz.Share.shareKeywordReplace.curBonusOnlyChip = parseInt(this.number * 10000);\n                    return\n                }\n            }\n        }\n    },\n\n    playAni : function (isChip) {\n        this.button.node.active = true;\n        this.ddz_hb_coos.active = true;\n        this.ddz_redPacket.active = true;\n        this.ddz_getRedPacket.active = false;\n        var _shareType;\n        if (isChip) {\n            this.numberLabel.string = parseInt(this.number * 10000) + \"\";\n            this.shareIndex = 1;\n            this.titleLabel.string = \"奖励金币\";\n            this.contentLabel.string = \"金币领取成功!\";\n            this.tipsLabel.node.active = false;\n            _shareType = ddz.Share.onShareType.clickStatShareTypeWithChip;\n            this.btnRichText.string = \"<color=#FFFFFF>\"+ hall.GlobalFuncs.getButtonTitle(_shareType) +\"</c>\";\n            ddz.gameModel.checkShareReward(ddz.Share.SharePointType.withChip);\n        }else {\n            this.titleLabel.string = \"领奖金额\";\n            this.contentLabel.string = \"红包领取成功!\";\n            this.tipsLabel.node.active = false;\n            this.shareIndex = 2;\n            _shareType = ddz.Share.onShareType.clickStatShareTypeMainTips;\n            this.btnRichText.string = \"<color=#FFFFFF>\"+ hall.GlobalFuncs.getButtonTitle(_shareType) +\"</c>\";\n            ddz.gameModel.checkShareReward(ddz.Share.SharePointType.lottery);\n        }\n        var that = this;\n        var ani = that.node.getComponent(cc.Animation);\n        ani.once('finished',function(){\n            ddz.GlobalFuncs.noteToFriend('hero');\n        },that);\n        ani.play('hongbao');\n    },\n\n    addTipsWindow : function (tips) {\n        var _shareType = ddz.Share.onShareType.clickStatShareTypeMainTips;\n        var _string = hall.GlobalFuncs.getButtonTitle(_shareType);\n        var preFabPath = \"prefabs/ddz_window_tips\";\n        var  comName = \"ddz_tipsWindow\";\n        var that = this;\n        hall.GlobalFuncs.showPopWinByPreFab(preFabPath, function (preFabNode) {\n            var window = preFabNode.getComponent(comName);\n            window.parentScene = that;\n            var testArray = [\n                {\n                    title :_string,\n                    bottomType : 0\n                }\n            ];\n            window.setTitleContentAndButtons(\"提示\",tips, testArray);\n        });\n    },\n\n    onClickCenterButton:function(){\n        var shareType = ddz.Share.onShareType.clickStatShareTypeMainTips;\n        ddz.Share.shareWithType(shareType);\n    },\n\n    playAnimationAfterShareWithType : function (shareType) {\n        // 分享领取通关红包\n        if (shareType && shareType == ddz.Share.onShareType.clickStatShareTypeGetRedPacket) {\n            this.playAni();\n        }else if (shareType && shareType == ddz.Share.onShareType.clickStatShareTypeMainTips) {\n            ddz.gameModel.checkShareReward(ddz.Share.SharePointType.lottery);\n        }else if (shareType && shareType == ddz.Share.onShareType.clickStatShareTypeWithChip) {\n            ddz.gameModel.checkShareReward(ddz.Share.SharePointType.withChip);\n        }\n\n        if (shareType != ddz.Share.onShareType.clickStatShareTypeMainTips \n            && shareType != ddz.Share.onShareType.clickStatShareTypeWithChip) {\n            return;\n        }\n        var reultType = ddz.Share.resultType;\n        switch (reultType) {\n            case 1:\n                if (!ddz.gameModel.isBringVersion) {\n                    hall.MsgBoxManager.showToast({title : '请分享到微信群哦~'});\n                }\n                break;\n            case 2:\n                if (!ddz.gameModel.isBringVersion) {\n                    hall.MsgBoxManager.showToast({title : '请不要频繁分享到一个群~'});\n                }\n                \n                break;\n            case 3:\n\n                break;\n            default:\n                break;\n        }\n\n        ddz.Share.resultType = 0;\n    },\n\n    finishShowRewardVideo : function (isEnded) {\n        if(isEnded){\n            this.playAni();\n        }\n    },\n    errorShowRewardVideo : function (parArr) {\n        var adId = parArr[1];\n        if(adId == this.adId){\n            this.playAni();\n        }\n    },\n\n    onShareDrawBtn:function(){\n        var shareType = ddz.Share.onShareType.clickStatShareTypeGetRedPacket;\n        if (this.chooseType && this.chooseType == 2) {\n            hall.adManager.showRewardedVideo(this.adId,\"hongbao\");\n        }else {\n            ddz.Share.shareWithType(shareType);\n        }\n    },\n\n    onAbandonBtn:function(){\n        if (Number(this.number) > 0) {\n            ddz.gameModel.getCashCoin(parseInt(this.number*100));\n        }\n        this.playAni(true);\n    },\n\n    updateButtonText:function(data){\n        if (data.pointId != ddz.Share.SharePointType.lottery ||\n            data.pointId != ddz.Share.SharePointType.withChip ){\n            return;\n        }\n        hall.LOGW(\"==\",\" file = [ddz_hongbao] fun = [updateButtonText] diamond = \" + data.leftCount);\n        var _shareType = ddz.Share.onShareType.clickStatShareTypeMainTips;\n        if (this.shareIndex == 1) {\n            _shareType = ddz.Share.onShareType.clickStatShareTypeWithChip;\n        }else if(this.shareIndex == 2) {\n            _shareType = ddz.Share.onShareType.clickStatShareTypeMainTips;\n        }\n        this.btnRichText.string = \"<color=#FFFFFF>\"+ hall.GlobalFuncs.getButtonTitle(_shareType) +\"</c>\";\n        if (!data.leftCount || data.leftCount <= 0) {\n            this.btnRichText.string = \"<color=#FFFFFF>\"+ hall.GlobalFuncs.getButtonTitle() +\"</c>\";\n        }else {\n            this.btnRichText.string = \"<color=#FFFFFF>\"+ hall.GlobalFuncs.getButtonTitle(_shareType) +\"</c>\";\n        }\n    },\n\n    onClickShareBtn:function(){\n        var shareType = ddz.Share.onShareType.clickStatShareTypeMainTips;\n        if (this.shareIndex == 1) {\n            shareType = ddz.Share.onShareType.clickStatShareTypeWithChip;\n        }else if(this.shareIndex == 2) {\n            shareType = ddz.Share.onShareType.clickStatShareTypeMainTips;\n        }\n        ddz.Share.shareWithType(shareType);\n    },\n\n    stopAni:function(){\n        var ani = this.node.getComponent(cc.Animation);\n        ani.stop();\n    },\n\n    onBackButton: function(){\n        this.shut();\n        this.removeAni();\n        // hall.GlobalFuncs.gotoDdz();\n    },\n\n    removeAni : function () {\n        ty.NotificationCenter.trigger(ddz.EventType.REMOVE_TABLE_ANI);\n        ty.NotificationCenter.trigger(ddz.EventType.RESET_TABLE);\n        ty.NotificationCenter.trigger(ddz.EventType.HIDE_TOP_BUTTON, true);\n        this.node.removeFromParent();\n    },\n\n    shut:function () {\n\n        this.stopAni();\n        ddz.hongBaoPanel = null;\n        this.node.destroy();\n    },\n\n    onDestroy : function () {\n        ty.NotificationCenter.ignoreScope(this);\n        if (hall.AdManagerTYWX && hall.AdManagerTYWX.getAdNodeByTag(\"tableAdNode\")) {\n            hall.AdManagerTYWX.getAdNodeByTag(\"tableAdNode\").hideAdNode();\n        }\n    },\n});\n"]}