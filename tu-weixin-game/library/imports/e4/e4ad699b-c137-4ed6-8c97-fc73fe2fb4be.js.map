{"version":3,"sources":["../../../../../../assets/Script/ComponentScript/window/assets/Script/ComponentScript/window/ddz_fail.js"],"names":["cc","Class","extends","Component","ctor","_curGuangQia","properties","resultTitle","default","type","Node","buttons","numberlabel","RichText","noticelabel","backButton","Button","restartButton","adResurgenceTitle","diamondResurgenceTitle","windowBtnText","titleS","count","conditionType","failCondition","toNext","requestCount","nowCount","adCount","adIds","nowAdId","videoIcon","topButton","getDiamondIcon","backAction","ddz","LOGD","AudioHelper","playEffect","EffectPath_mp3","back_button_click_sound","ty","NotificationCenter","trigger","EventType","REMOVE_TABLE_ANI","removeAni","hall","GlobalFuncs","popScene","onClickGetDiamondBtn","onOfficialAccountGuide","setDiamondCount","guangQiaNum","countNunber","ME","udataInfo","diamondCount","matchModel","getDiamondCountNeeded","node","active","string","window","getComponent","setTitle","isHaveDiamond","_config","gameModel","getCongratulationGetRewardJson","shareConfig","UserInfo","isInBSGS","bsgsCity","otherCity","shareNumber","ReadStringFromLocalStorage","Share","YESTERDAY_SHARE_NUMBER","fail","sharePredict","adManager","checkVideoAd","canPlay","checkShareReward","SharePointType","failWindw","failSix","comBtnList","isBringVersion","setButtonListWithButtons2","title","bottomType","callFunc","resurgenceWithAd","bind","resurgenceWithDiamond","left","restartQuizAction","over","overed","gameFlowOver","tipsString","gameFlowAction","gameFlow","LOGW","TCP","connectStatus","CONNECT_STATUS_OK","MsgBoxManager","showToast","button_click_sound","shareWithType","onShareType","clickStatShareTypeRevial","BiLog","clickStat","clickStatEventType","clickStatEventTypeButtonClick","adId","getRandomNumberBefore","length","showRewardedVideo","seeAdGetJiPaiQi","jipaiqiAdId","isGetJiPaiQi","getDiamondToRevival","shareKeywordReplace","hadNumber","centerString","buttonText1","replaceKeyWordInString","setBottomTextWithButton","setTopTextWithButton","matchBackNextLevel","needCount","waitGetRevial","curCount","needCountR","i","shareToGetreward","sharePoint","firstFail","matchBack","removeMatchResultPanel","getReward","isWindow","seeVideoGetReward","clickStatShareTypeGetDiamondFailWindow","clickStatShareTypeGetDiamondFailSix","isGetReward","addTipsWindow","checkOldVersion","matchSignin","waitSignin","matchGiveUp","matchChallenge","onLoad","backButtonH","getBackButtonPositionY","y","playMusic","matchCondition","getFailCondition","checkFailCount","JSON","stringify","resurgenceCondition","repeatNumber","indexOf","btnScaleEffect","bc","getBannerResurgenceConfigJson","_toNext","listen","REMOVE_ALL_MATCH_RESULT_PANEL","shut","UPDATE_SHARE_STATE","playAnimationAfterShareWithType","UPDATE_BUTTON_TEXT","updateButtonText","REWARD_VIDEO_COMPLETE","finishShowRewardVideo","REWARD_VIDEO_COMPLETE_ERROR","errorShowRewardVideo","UPDATE_DIAMOND_NUMBER","updateDiamond","winSize","director","getWinSize","addApplet","gindex","getStageIndex","showResults","isShow","showAllWidthBannerAd","CREATE_TABLE_AD","throughCount","getSkipCustomsConfigJson","newCustoms","onSkipCustom","isEnded","getSharePoint","hideBottomBtn","firstUseJiPaiQiPoint","firstUseJiPaiQi","adGetJiPaiQi","parArr","parseInt","shareType","reultType","resultType","clickStatShareTypeGetDiamondFail","data","pointId","_shareType","titileS","getButtonTitle","leftCount","judgeweChatVersion","ani","Animation","play","preFabPath","comName","that","showPopWinByPreFab","preFabNode","parentScene","testArray","right","tips","setTitleContentAndButtons","setRightBtnText","onClickLeftButton","onClickRightButton","matchResultPanel","stopAllActions","destroy","_onPreDestroy","_super","removeFromParent","ani_2","stop","onDestroy","ignoreScope","destroyWidthBannerAd","AdManagerTYWX","getAdNodeByTag","hideAdNode"],"mappings":"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","file":"ddz_fail.js","sourceRoot":"../../../../../../assets/Script/ComponentScript/window","sourcesContent":["\n// var ddz_main = cc.instantiate(this.tipsWindow);\n// this.node.addChild(ddz_main);\n// var window = ddz_main.getComponent('ddz_fail');\n// window.setDiamondCount(\"五\",\"56\");\ncc.Class({\n    extends: cc.Component,\n    ctor:function () {\n        this._curGuangQia = 0;\n    },\n\n    properties: {\n        resultTitle : {\n            default : null,\n            type : cc.Node\n        },\n        buttons : {\n            default : null,\n            type : cc.Node\n        },\n        numberlabel :{\n            default : null,\n            type : cc.RichText\n        },\n        noticelabel :{\n            default : null,\n            type : cc.RichText\n        },\n        backButton : {\n            default : null,\n            type : cc.Button\n        },\n        restartButton : {\n            default : null,\n            type : cc.Button\n        },\n        adResurgenceTitle : \"\",\n        diamondResurgenceTitle : \"\",\n        windowBtnText : \"\",\n\n        titleS : \"使用\",\n        count : \"1\",\n\n        conditionType : \"\",\n        failCondition : null,\n        toNext : false,\n        requestCount : 1,\n        nowCount : 0,\n        adCount : 1,\n\n        adIds : [],\n        nowAdId : '',\n        videoIcon:cc.Node,\n        topButton:cc.Button,\n\n        getDiamondIcon:cc.Node,\n\n    },\n    backAction : function () {\n        ddz.LOGD(null, \"backAction\");\n        ddz.AudioHelper.playEffect(ddz.EffectPath_mp3.back_button_click_sound, false);\n        ty.NotificationCenter.trigger(ddz.EventType.REMOVE_TABLE_ANI);\n        // var sceneName = 'Ddz';\n        // cc.director.loadScene(sceneName);\n\n        this.removeAni();\n\n        hall.GlobalFuncs.popScene();\n    },\n\n    onClickGetDiamondBtn:function(){\n        hall.GlobalFuncs.onOfficialAccountGuide(true);\n    },\n\n    setDiamondCount:function (guangQiaNum) {\n        ddz.LOGD(\"\",\"file = [ddz_fail] fun = [setDiamondCount] guangQiaNum = \" + guangQiaNum);\n        var countNunber = hall.ME.udataInfo.diamondCount;\n        var count = ddz.matchModel.getDiamondCountNeeded();\n\n        if (count > 0) {\n            this.noticelabel.node.active = true;\n            this.noticelabel.string = \"<color=#ffffff>使用 </c><img src='dda_button_diamond' height=34 width=42/>\" +\n                \"<color=#ffffff> \"+ count +\" 可继续挑战本关\\n已有</color><img src='dda_button_diamond' height=34 width=42/>\" +\n                \"<color=#ffffff> \"+ countNunber +\"</color>\";\n        }\n\n        this._curGuangQia = guangQiaNum;\n\n        var window = this.resultTitle.getComponent('ddz_resultTitle');\n        window.setTitle(this._curGuangQia, false);\n\n        // this.numberlabel.string =\"<color=#ffffff>已有 </c><img src='dda_button_diamond' height=17 width=21 /><size='36' color='#ffffff'> \"+countNunber+\" </color>\";\n        this.diamondResurgenceTitle = \"分享\";\n        this.windowBtnText = \"分享\";\n        var isHaveDiamond = false;\n        if (countNunber >= count){\n            this.diamondResurgenceTitle = \"<color=#ffffff>使用 </c><img src='dda_button_diamond' height=34 width=42/>\";\n            this.windowBtnText = \"<color=#ffffff>使用 </c><img src='dda_button_diamond' height=34 width=42/>\";\n            isHaveDiamond = true;\n        }else {\n\n            var _config = ddz.gameModel.getCongratulationGetRewardJson();\n            if (_config){\n                var shareConfig;\n                if (ty.UserInfo.isInBSGS) {\n                    shareConfig = _config.bsgsCity;\n                }else {\n                    shareConfig = _config.otherCity;\n                }\n            }\n\n            //分享次数达到配置,没有分享价值\n            var shareNumber = hall.GlobalFuncs.ReadStringFromLocalStorage(ddz.Share.YESTERDAY_SHARE_NUMBER, 0);\n            if ((shareConfig && shareConfig.fail != null && shareNumber >= shareConfig.fail) || !ty.UserInfo.sharePredict){\n                this.titleS = \"获取\";\n\n                hall.adManager.checkVideoAd();\n                if (hall.adManager.canPlay) {\n                    this.diamondResurgenceTitle = \"看广告得钻石\";\n                    this.windowBtnText = \"看广告得钻石\";\n                }else {\n                    //判断是否有分享价值\n                    this.diamondResurgenceTitle = \"分享\";\n                    this.windowBtnText = \"分享\";\n                    ddz.gameModel.checkShareReward(ddz.Share.SharePointType.failWindw);\n                }\n            }else{\n                this.titleS = \"获取\";\n                this.diamondResurgenceTitle = \"分享\";\n                this.windowBtnText = \"分享\";\n                ddz.gameModel.checkShareReward(ddz.Share.SharePointType.failSix);\n                ddz.gameModel.checkShareReward(ddz.Share.SharePointType.failWindw);\n            }\n        }\n\n        this.restartButton.node.active = true;\n        this.numberlabel.node.active = false;\n\n        var comBtnList = this.buttons.getComponent('ddz_buttonList_2');\n        if(this.adResurgenceTitle && this.adResurgenceTitle != \"\"){\n            if (ddz.gameModel.isBringVersion) {\n                // comBtnList.hideBottomBtn(false);\n                comBtnList.setButtonListWithButtons2([{title :this.adResurgenceTitle,bottomType :0,callFunc : this.resurgenceWithAd.bind(this)}]);\n            }else {\n                hall.adManager.checkVideoAd();\n                if (this.conditionType == \"share\") {\n                    comBtnList.setButtonListWithButtons2([{title :this.adResurgenceTitle,bottomType :0,callFunc : this.resurgenceWithAd.bind(this)},\n                        {title :this.diamondResurgenceTitle,bottomType :1,callFunc : this.resurgenceWithDiamond.bind(this)}]);\n                }else {\n                    if (hall.adManager.canPlay) {\n                        comBtnList.setButtonListWithButtons2([{title :this.adResurgenceTitle,bottomType :0,callFunc : this.resurgenceWithAd.bind(this)},\n                            {title :this.diamondResurgenceTitle,bottomType :1,callFunc : this.resurgenceWithDiamond.bind(this)}]);\n                    }else {\n                        if (isHaveDiamond) {\n                            comBtnList.setButtonListWithButtons2([{title :this.diamondResurgenceTitle,bottomType :1,callFunc : this.resurgenceWithDiamond.bind(this)}]);\n                        }else {\n                            comBtnList.setButtonListWithButtons2([{title :'重新闯关',left:'ddz_table_again', bottomType :0,callFunc : this.restartQuizAction.bind(this)}]);\n                            this.restartButton.node.active = false;\n                        }\n                    }\n                }\n            }\n        }else {\n\n            hall.adManager.checkVideoAd();\n            if (hall.adManager.canPlay || isHaveDiamond) {\n                comBtnList.setButtonListWithButtons2([{title :this.diamondResurgenceTitle,bottomType :0,callFunc : this.resurgenceWithDiamond.bind(this)}]);\n            }else {\n                comBtnList.setButtonListWithButtons2([{title :'重新闯关',left:'ddz_table_again', bottomType :0,callFunc : this.restartQuizAction.bind(this)}]);\n                this.restartButton.node.active = false;\n            }\n        }\n    },\n    over:function (guangQiaNum) {\n        ddz.LOGD(\"\",\"file = [ddz_fail] fun = [over] guangQiaNum = \" + guangQiaNum);\n        this._curGuangQia = guangQiaNum;\n        var window = this.resultTitle.getComponent('ddz_resultTitle');\n        window.setTitle(this._curGuangQia, false);\n        var comBtnList = this.buttons.getComponent('ddz_buttonList_2');\n        if(this.adResurgenceTitle && this.adResurgenceTitle != \"\"){\n            comBtnList.setButtonListWithButtons2([{title :this.adResurgenceTitle,bottomType :0,callFunc : this.resurgenceWithAd.bind(this)}]);\n            this.restartButton.node.active = true;\n        }else {\n            comBtnList.setButtonListWithButtons2([{title :'重新闯关',left:'ddz_table_again', bottomType :0,callFunc : this.restartQuizAction.bind(this)}]);\n            this.restartButton.node.active = false;\n        }\n\n        this.overed = true;\n    },\n    gameFlowOver:function (guangQiaNum,tipsString) {\n        ddz.LOGD(\"\",\"file = [ddz_fail] fun = [gameFlowOver] guangQiaNum = \" + guangQiaNum);\n        this.noticelabel.node.active = true;\n        this.noticelabel.string = tipsString;\n        this._curGuangQia = guangQiaNum;\n        var window = this.resultTitle.getComponent('ddz_resultTitle');\n        window.setTitle(this._curGuangQia, false);\n        var comBtnList = this.buttons.getComponent('ddz_buttonList_2');\n        comBtnList.setButtonListWithButtons2([{title :'重闯本关',left:'ddz_table_again', bottomType :1,callFunc :this.gameFlowAction.bind(this)}]);\n        this.gameFlow = true;\n    },\n\n    // onTopButtonAction : function () {\n    //     ddz.LOGD(null, \"onTopButtonAction\");\n    //     if(this.gameFlow){\n    //         //TODO:流局的局数判断\n    //         ddz.matchModel.matchChallenge();\n    //         ddz.GlobalFuncs.removeMatchResultPanel(this);\n    //     } else{\n    //         if(this.adResurgenceTitle && this.adResurgenceTitle != \"\"){\n    //             this.resurgenceWithAd();\n    //         }else {\n    //             this.restartQuizAction();\n    //         }\n    //     }\n    // },\n    // onTempButtonAction : function () {\n    //     ddz.LOGD(null, \"onTempButtonAction\");\n    //     this.resurgenceWithDiamond();\n    // },\n    //看广告复活\n    resurgenceWithAd:function () {\n        hall.LOGW(\"====\",\"====resurgenceWithAd===\");\n        if (ty.TCP.connectStatus != ty.TCP.CONNECT_STATUS_OK){\n            hall.MsgBoxManager.showToast({title : \"正在登录，请稍候\"});\n            ddz.LOGD(null, \"TCP is not ok! Please wait!\");\n            return;\n        }\n        ddz.AudioHelper.playEffect(ddz.EffectPath_mp3.button_click_sound, false);\n        if(this.conditionType == \"share\"){\n            ddz.Share.shareWithType(ddz.Share.onShareType.clickStatShareTypeRevial);\n        }else{\n            ty.BiLog.clickStat(ty.UserInfo.clickStatEventType.clickStatEventTypeButtonClick,\n                [\"watchVideo\",\"failResurgence\"]);\n            var adId = this.adIds[hall.GlobalFuncs.getRandomNumberBefore(this.adIds.length)];\n            // this.nowAdId = adId;\n\n            // if (!hall.adManager.canPlay) {\n            //     // banner广告复活\n            //     var bc = ddz.gameModel.getBannerResurgenceConfigJson();\n            //     if (bc) {\n            //         ddz.GlobalFuncs.showBannerResurgenceWindow();\n            //     }else {\n            //         hall.adManager.showRewardedVideo(adId,\"failResurgence\");\n            //     }\n            // }else {\n            //     hall.adManager.showRewardedVideo(adId,\"failResurgence\");\n            // }\n            hall.adManager.showRewardedVideo(adId,\"failResurgence\");\n        }\n    },\n\n    seeAdGetJiPaiQi:function(){\n        hall.LOGD(\"=====\",\"file = [ddz_fail] fun = [seeAdGetJiPaiQi] this.jipaiqiAdId = \" + this.jipaiqiAdId);\n        this.isGetJiPaiQi = true;\n        hall.adManager.showRewardedVideo(this.jipaiqiAdId,\"getJiPaiQi\");\n        ty.BiLog.clickStat(ty.UserInfo.clickStatEventType.clickStatEventTypeButtonClick,\n            [\"watchVideo\",\"ddzFailGetJiPaiQi\"]);\n    },\n\n    getDiamondToRevival : function () {\n        ddz.Share.shareKeywordReplace.hadNumber = this.nowCount;\n        //TODO: 替换文案\n        var centerString = \"\";\n        if (this.failCondition && this.failCondition.buttonText1) {\n            centerString = hall.GlobalFuncs.replaceKeyWordInString(this.failCondition.buttonText1);\n        }\n\n        this.adResurgenceTitle = centerString;\n        var comBtnList = this.buttons.getComponent('ddz_buttonList_2');\n        if(this.overed){\n            comBtnList.setBottomTextWithButton(this.adResurgenceTitle);\n        }else {\n            comBtnList.setTopTextWithButton(this.adResurgenceTitle);\n        }\n        hall.LOGW(\"=====\",\"===================\"+this.nowCount);\n        if(this.nowCount >= this.requestCount){\n            if (this.toNext){\n                ddz.matchModel.matchBackNextLevel();\n                // this.node.destroy();\n                return;\n            }\n            else{\n                var needCount = ddz.matchModel.getDiamondCountNeeded();\n                ddz.waitGetRevial = {\n                    type : 'waitRecive',\n                    curCount : 0,\n                    needCount : needCount\n                };\n            }\n            var needCountR = ddz.waitGetRevial.needCount;\n            //发送得钻石的消息\n            for (var i = 0; i < needCountR; i++){\n                ddz.gameModel.shareToGetreward(ddz.waitGetRevial.sharePoint || ddz.Share.SharePointType.firstFail);\n            }\n            // this.node.destroy();\n        }\n        // ddz.matchModel.matchBack(this.matchDes.roomId, this.matchDes.matchId);\n    },\n    //使用钻石复活or邀请得钻石\n    resurgenceWithDiamond : function () {\n        ddz.LOGD(null, \"resurgenceWithDiamond\");\n        ddz.AudioHelper.playEffect(ddz.EffectPath_mp3.button_click_sound, false);\n        var countNunber = hall.ME.udataInfo.diamondCount;\n        var count = ddz.matchModel.getDiamondCountNeeded();\n        if (countNunber >= count){\n            ddz.matchModel.matchBack();\n            ddz.GlobalFuncs.removeMatchResultPanel(this);\n        }\n        else{\n            this.getReward();\n            // if (this._curGuangQia && this._curGuangQia == 5){\n            //     ddz.Share.shareWithType(ddz.Share.onShareType.clickStatShareTypeGetDiamondFailSix);\n            // }else {\n            //     ddz.Share.shareWithType(ddz.Share.onShareType.clickStatShareTypeGetDiamondFail);\n            // }\n        }\n    },\n\n    //看广告的奖励还是分享\n    getReward:function(isWindow){\n        var _config = ddz.gameModel.getCongratulationGetRewardJson();\n        if (_config){\n            var shareConfig;\n            if (ty.UserInfo.isInBSGS) {\n                shareConfig = _config.bsgsCity;\n            }else {\n                shareConfig = _config.otherCity;\n            }\n        }\n\n        var shareNumber = hall.GlobalFuncs.ReadStringFromLocalStorage(ddz.Share.YESTERDAY_SHARE_NUMBER, 0);\n        if ((shareConfig && shareConfig.fail != null && shareNumber >= shareConfig.fail) || !ty.UserInfo.sharePredict){\n            hall.adManager.checkVideoAd();\n            if (hall.adManager.canPlay) {\n                this.seeVideoGetReward();\n            }else {\n                if (isWindow) {\n                    ddz.Share.shareWithType(ddz.Share.onShareType.clickStatShareTypeGetDiamondFailWindow);\n                }else {\n                    ddz.Share.shareWithType(ddz.Share.onShareType.clickStatShareTypeGetDiamondFailSix);\n                }\n\n            }\n        }else{\n            if (isWindow) {\n                ddz.Share.shareWithType(ddz.Share.onShareType.clickStatShareTypeGetDiamondFailWindow);\n            }else {\n                ddz.Share.shareWithType(ddz.Share.onShareType.clickStatShareTypeGetDiamondFailSix);\n            }\n        }\n    },\n\n    seeVideoGetReward:function(){\n        hall.LOGW(\"====\",\"====seeVideoGetReward===\");\n        this.isGetReward = true;\n\n        if (ty.TCP.connectStatus != ty.TCP.CONNECT_STATUS_OK){\n            hall.MsgBoxManager.showToast({title : \"正在登录，请稍候\"});\n            ddz.LOGD(null, \"TCP is not ok! Please wait!\");\n            return;\n        }\n        ty.BiLog.clickStat(ty.UserInfo.clickStatEventType.clickStatEventTypeButtonClick,\n            [\"seeVideoGetReward\",\"fail\"]);\n        // var adId = this.adIds[hall.GlobalFuncs.getRandomNumberBefore(this.adIds.length)];\n\n        hall.adManager.showRewardedVideo(\"\",\"getReward\");\n    },\n\n\n    //重新闯关\n    restartQuizAction : function () {\n        ddz.LOGD(null, \"restartQuizAction\");\n        ddz.AudioHelper.playEffect(ddz.EffectPath_mp3.button_click_sound, false);\n        // var maxIndex = ddz.matchModel.getCurDes().stages.length - 1;\n        if (this._curGuangQia > 0){\n            this.addTipsWindow();\n        }\n        else{\n            if (ddz.matchModel.checkOldVersion() && this._curGuangQia == 0){\n                //第一关就死掉,发送重新闯关\n                ddz.matchModel.matchSignin();\n            }\n            else{\n                //第一关不再特殊处理\n                // 重新闯关弹出二级菜单\n                ddz.matchModel.waitSignin = true;\n                ddz.matchModel.matchGiveUp();\n            }\n            ddz.GlobalFuncs.removeMatchResultPanel(this);\n        }\n    },\n    //流局重闯此关\n    gameFlowAction : function () {\n        ddz.matchModel.matchChallenge();\n        ddz.GlobalFuncs.removeMatchResultPanel(this);\n    },\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad:function () {\n        var backButtonH = ddz.GlobalFuncs.getBackButtonPositionY();\n        if (backButtonH){\n            this.backButton.node.y = backButtonH;\n        }\n\n        this.restartButton.node.active = false;\n        this.numberlabel.node.active = false;\n        this.noticelabel.node.active = false;\n\n        ddz.AudioHelper.playMusic('/resources/sound/Failure.mp3', false);\n\n        var matchCondition = ddz.GlobalFuncs.getFailCondition(\"match\",ddz.GlobalFuncs.checkFailCount(\"match\"));\n        ddz.LOGD(\"file = [ddz_fail] fun = [onLoad] matchCondition = \" + JSON.stringify(matchCondition));\n        if(matchCondition){\n            // ddz.GlobalFuncs.showRevivalWindow(matchCondition,\"match\");\n            this.failCondition = matchCondition;\n            this.toNext = matchCondition.resurgenceCondition.toNext;\n            this.requestCount = matchCondition.resurgenceCondition.requestCount;\n            ddz.Share.shareKeywordReplace.repeatNumber = this.requestCount;\n            this.nowCount = 0;\n            ddz.Share.shareKeywordReplace.hadNumber = this.nowCount;\n            this.adIds = matchCondition.resurgenceCondition.adIds;\n            if (matchCondition.resurgenceCondition.requestCount > 1 &&  matchCondition.buttonText1.indexOf(\"hadNumber/repeatNumber\") ==-1){\n                matchCondition.buttonText1 += \"(hadNumber/repeatNumber)\";\n            }\n            var centerString = hall.GlobalFuncs.replaceKeyWordInString(matchCondition.buttonText1);\n            \n            this.adResurgenceTitle = centerString;\n            this.conditionType = matchCondition.resurgenceCondition.conditionType;\n            hall.adManager.checkVideoAd();\n            if(this.conditionType == \"share\" && !ty.UserInfo.sharePredict && hall.adManager.canPlay) {\n                this.conditionType = \"video\";\n                this.adResurgenceTitle = \"观看广告复活\";\n                this.adIds = [\"adunit-8bde7ac62d379503\"];\n            }\n\n            hall.GlobalFuncs.btnScaleEffect(this.topButton.node,1.13);\n            //TODO:观看不了广告\n            var bc = ddz.gameModel.getBannerResurgenceConfigJson();\n            if (bc){\n                if (!hall.adManager.canPlay) {\n                    if (centerString.indexOf(\"观看广告\") >=0) {\n                        var _toNext = matchCondition.resurgenceCondition.toNext;\n                        this.adResurgenceTitle = \"观看广告复活\";\n                        if (_toNext) {\n                            this.adResurgenceTitle = \"观看广告晋级\";\n                        }\n                    }\n                }\n            }\n        }\n        \n        ty.NotificationCenter.listen(ddz.EventType.REMOVE_ALL_MATCH_RESULT_PANEL, this.shut, this);\n        ty.NotificationCenter.listen(ddz.EventType.UPDATE_SHARE_STATE, this.playAnimationAfterShareWithType, this);\n        ty.NotificationCenter.listen(ty.EventType.UPDATE_BUTTON_TEXT, this.updateButtonText, this);\n        ty.NotificationCenter.listen(ddz.EventType.REWARD_VIDEO_COMPLETE,this.finishShowRewardVideo,this);\n        ty.NotificationCenter.listen(ddz.EventType.REWARD_VIDEO_COMPLETE_ERROR,this.errorShowRewardVideo,this);\n\n        ty.NotificationCenter.listen(ddz.EventType.UPDATE_DIAMOND_NUMBER,this.updateDiamond,this);\n        // ty.NotificationCenter.listen(ddz.EventType.UPDATE_JIPAIQI,this.updateGetReward,this);\n\n        var winSize = cc.director.getWinSize();\n\n        // if(ddz.matchModel.new_gift_reward){\n        //     var newGiftNode = cc.instantiate(this.newGiftPrefab);\n        //     newGiftNode.x = -winSize.width/2+80;\n        //     newGiftNode.y = 50;\n        //     this.node.addChild(newGiftNode);\n        // }\n\n        this.jipaiqiAdId = \"adunit-8bde7ac62d379503\";\n        this.isGetJiPaiQi = false;\n        // var ani = this.videoIcon.getComponent(cc.Animation);\n        // ani.play('jieidan');\n        //\n        // if (hall.ME.udataInfo.jiPaiQiCount >= 6) {\n        //     this.videoIcon.active = false;\n        // }\n\n        ddz.gameModel.checkShareReward(ddz.Share.SharePointType.addApplet);\n    },\n\n    updateDiamond:function(){\n        var gindex = ddz.matchModel.getStageIndex()-1;\n        this.setDiamondCount(gindex);\n    },\n\n\n    showResults:function(isShow){\n        this.node.active = isShow;\n\n        if (isShow){\n            hall.adManager.showAllWidthBannerAd('adunit-811cc4e234425489');\n            ty.NotificationCenter.trigger(ty.EventType.CREATE_TABLE_AD);\n        }\n\n        if (isShow && !ty.UserInfo.isInBSGS){\n            if (ddz.gameModel.throughCount == 0) {\n                var bc = ddz.gameModel.getSkipCustomsConfigJson();\n                if (bc && bc.newCustoms > 0) {\n                    hall.GlobalFuncs.onSkipCustom(1);\n                }\n            }\n        }\n    },\n\n    finishShowRewardVideo : function (isEnded) {\n        hall.LOGW(\"=====\",\"file = [ddz_fail] fun = [finishShowRewardVideo]\"+isEnded);\n\n        if (this.isGetReward) {\n            var sharePoint = hall.GlobalFuncs.getSharePoint(ddz.Share.onShareType.clickStatShareTypeGetDiamondFailSix);\n            ddz.gameModel.shareToGetreward(sharePoint);\n            // ddz.gameModel.saveRewardToBox(sharePoint);\n            var comBtnList = this.buttons.getComponent('ddz_buttonList_2');\n\n            hall.adManager.checkVideoAd();\n            if (!hall.adManager.canPlay) {\n                comBtnList.hideBottomBtn(false);\n            }\n            // comBtnList.hideBottomBtn(false);\n            this.isGetReward = false;\n        }else {\n            if (this.isGetJiPaiQi) {\n                if(isEnded){\n                    if (ddz.gameModel.firstUseJiPaiQiPoint > 0) {\n                        ddz.gameModel.shareToGetreward(ddz.Share.SharePointType.firstUseJiPaiQi);\n                    }else {\n                        ddz.gameModel.shareToGetreward(ddz.Share.SharePointType.adGetJiPaiQi);\n                    }\n                }\n                this.isGetJiPaiQi = false;\n            }else {\n                if(isEnded){\n                    this.nowCount ++;\n                    this.getDiamondToRevival();\n                }\n            }\n        }\n    },\n\n    errorShowRewardVideo : function (parArr) {\n        hall.LOGW(\"=====\",\"file = [ddz_fail] fun = [errorShowRewardVideo]\");\n        this.finishShowRewardVideo(parseInt(parArr[1]));\n    },\n    \n    // updateGetReward:function(){\n    //     if (hall.ME.udataInfo.jiPaiQiCount >= 6) {\n    //         this.videoIcon.active = false;\n    //     }\n    // },\n\n    playAnimationAfterShareWithType : function (shareType) {\n        var reultType = ddz.Share.resultType;\n        if (shareType == ddz.Share.onShareType.clickStatShareTypeGetDiamondFailSix) {\n            ddz.gameModel.checkShareReward(ddz.Share.SharePointType.failSix);\n            switch (reultType) {\n                case 1:\n                    if (!ddz.gameModel.isBringVersion) {\n                        hall.MsgBoxManager.showToast({title : '请分享到微信群哦~'});\n                    }\n                    break;\n                case 2:\n                    if (!ddz.gameModel.isBringVersion) {\n                        hall.MsgBoxManager.showToast({title : '请不要频繁分享到一个群~'});\n                    }\n                    \n                    break;\n                case 3:\n                    break;\n                default:\n                    break;\n            }\n            ddz.Share.resultType = 0;\n        }else if(shareType == ddz.Share.onShareType.clickStatShareTypeRevial){\n            switch (reultType) {\n                case 1:\n                    // if(!this.failCondition.resurgenceCondition.holk ||  this.failCondition.resurgenceCondition.holk == 0){\n                    //     this.nowCount ++;\n                    //     this.getDiamondToRevival();\n                    //     return;\n                    // }else {\n                    // }\n                    if (!ddz.gameModel.isBringVersion) {\n                        hall.MsgBoxManager.showToast({title : '请分享到微信群哦~'});\n                    }\n                    break;\n                case 2:\n                    // if(!this.failCondition.resurgenceCondition.holk ||  this.failCondition.resurgenceCondition.holk == 0){\n                    //     this.nowCount ++;\n                    //     this.getDiamondToRevival();\n                    //     return;\n                    // }else {\n                    // }\n                    if (!ddz.gameModel.isBringVersion) {\n                        hall.MsgBoxManager.showToast({title : '请不要频繁分享到一个群~'});\n                    }\n                    \n                    break;\n                case 3:\n                    this.nowCount ++;\n                    break;\n                default:\n                    break;\n            }\n\n            ddz.Share.resultType = 0;\n            this.getDiamondToRevival();\n        }else if(shareType == ddz.Share.onShareType.clickStatShareTypeGetDiamondFail){\n            if (reultType > 0) {\n                hall.MsgBoxManager.showToast({title : '群友点入获得钻石，使用钻石可复活!'});\n            }\n            ddz.Share.resultType = 0;\n        }else if(shareType == ddz.Share.onShareType.clickStatShareTypeGetDiamondFailWindow){\n            ddz.gameModel.checkShareReward(ddz.Share.SharePointType.failWindw);\n            switch (reultType) {\n                case 1:\n                    if (!ddz.gameModel.isBringVersion) {\n                        hall.MsgBoxManager.showToast({title : '请分享到微信群哦~'});\n                    }\n                    break;\n                case 2:\n                    if (!ddz.gameModel.isBringVersion) {\n                        hall.MsgBoxManager.showToast({title : '请不要频繁分享到一个群~'});\n                    }\n\n                    break;\n                case 3:\n                    break;\n                default:\n                    break;\n            }\n            ddz.Share.resultType = 0;\n        }\n    },\n\n    updateButtonText:function(data){\n        if (data.pointId == ddz.Share.SharePointType.failSix){\n            var _config = ddz.gameModel.getCongratulationGetRewardJson();\n            if (_config){\n                var shareConfig;\n                if (ty.UserInfo.isInBSGS) {\n                    shareConfig = _config.bsgsCity;\n                }else {\n                    shareConfig = _config.otherCity;\n                }\n            }\n\n            var shareNumber = hall.GlobalFuncs.ReadStringFromLocalStorage(ddz.Share.YESTERDAY_SHARE_NUMBER, 0);\n            if ((shareConfig && shareConfig.fail != null && shareNumber >= shareConfig.fail) || !ty.UserInfo.sharePredict){\n                return\n            }\n            var _shareType = ddz.Share.onShareType.clickStatShareTypeGetDiamondFailSix;\n            var titileS = \"<color=#ffffff>\"+ hall.GlobalFuncs.getButtonTitle(_shareType) +\"</color>\";\n            if (!data.leftCount || data.leftCount <= 0) {\n                titileS = \"<color=#ffffff>\"+ hall.GlobalFuncs.getButtonTitle() +\"</color>\";\n            }else {\n                titileS = \"<color=#ffffff>\"+ hall.GlobalFuncs.getButtonTitle(_shareType) +\"</color>\";\n            }\n            this.diamondResurgenceTitle = titileS;\n            var comBtnList = this.buttons.getComponent('ddz_buttonList_2');\n            // if(this.adResurgenceTitle && this.adResurgenceTitle != \"\"){\n            //     comBtnList.setBottomTextWithButton(this.diamondResurgenceTitle);\n            // }else {\n            //     comBtnList.setBottomTextWithButton(this.diamondResurgenceTitle);\n            // }\n            comBtnList.setBottomTextWithButton(this.diamondResurgenceTitle);\n\n            if(!this.adResurgenceTitle || this.adResurgenceTitle == \"\"){\n                if (ddz.gameModel.isBringVersion) {\n                    comBtnList.hideBottomBtn(false);\n                }\n            }\n        }else if (data.pointId == ddz.Share.SharePointType.addApplet){\n            if (data.leftCount && data.leftCount > 0 && ddz.GlobalFuncs.judgeweChatVersion()){\n                this.getDiamondIcon.active = true;\n                var ani = this.getDiamondIcon.getComponent(cc.Animation);\n                ani.play('getdiamond_ani');\n            }else {\n                this.getDiamondIcon.active = false;\n            }\n        }else if (data.pointId == ddz.Share.SharePointType.failWindw){\n            var _config = ddz.gameModel.getCongratulationGetRewardJson();\n            if (_config){\n                var shareConfig;\n                if (ty.UserInfo.isInBSGS) {\n                    shareConfig = _config.bsgsCity;\n                }else {\n                    shareConfig = _config.otherCity;\n                }\n            }\n\n            var shareNumber = hall.GlobalFuncs.ReadStringFromLocalStorage(ddz.Share.YESTERDAY_SHARE_NUMBER, 0);\n            if ((shareConfig && shareConfig.fail != null && shareNumber >= shareConfig.fail) || !ty.UserInfo.sharePredict){\n                return\n            }\n            var _shareType = ddz.Share.onShareType.clickStatShareTypeGetDiamondFailWindow;\n            var titileS = \"<color=#ffffff>\"+ hall.GlobalFuncs.getButtonTitle(_shareType) +\"</color>\";\n            if (!data.leftCount || data.leftCount <= 0) {\n                titileS = \"<color=#ffffff>\"+ hall.GlobalFuncs.getButtonTitle() +\"</color>\";\n            }else {\n                titileS = \"<color=#ffffff>\"+ hall.GlobalFuncs.getButtonTitle(_shareType) +\"</color>\";\n            }\n            this.windowBtnText = titileS;\n        }\n    },\n\n    addTipsWindow : function () {\n        var preFabPath = \"prefabs/ddz_window_tips\";\n        var  comName = \"ddz_tipsWindow\";\n        var that = this;\n\n        var countNunber = hall.ME.udataInfo.diamondCount;\n        var count = ddz.matchModel.getDiamondCountNeeded();\n\n        hall.GlobalFuncs.showPopWinByPreFab(preFabPath, function (preFabNode) {\n            var window = preFabNode.getComponent(comName);\n            window.parentScene = that;\n            var testArray = [\n                {\n                    title :\"重闯第一关\",\n                    bottomType : 0\n                },\n                {\n                    title :that.titleS,\n                    right :\"dda_button_diamond\",\n                    bottomType :1\n                }\n            ];\n\n            var tips = \"<color=#1A6951>使用 </c><img src='dda_button_diamond_black' height=34 width=42/>\" +\n                \"<color=#1A6951> \"+ count +\" 可继续挑战本关\\n已有</color><img src='dda_button_diamond_black' height=34 width=42/>\" +\n                \"<color=#1A6951> \"+ countNunber +\"</color>\";\n\n            // window.setTitleContentAndButtons(\"提示\",\"距离领奖就差\"+loss+\"关了,确定重新闯关?\", testArray);\n            window.setTitleContentAndButtons(\"提示\",tips, testArray);\n            \n            window.setRightBtnText(that.windowBtnText);\n\n        });\n\n    },\n\n    onClickLeftButton:function () {\n        //重新闯关\n        ddz.matchModel.waitSignin = true;\n        ddz.matchModel.matchGiveUp();\n        ddz.GlobalFuncs.removeMatchResultPanel(this);\n    },\n\n    onClickRightButton:function () {\n        var countNunber = hall.ME.udataInfo.diamondCount;\n        var count = ddz.matchModel.getDiamondCountNeeded();\n        if (countNunber >= count){\n            //使用钻石\n            ddz.matchModel.matchBack();\n            ddz.GlobalFuncs.removeMatchResultPanel(this);\n        }else {\n            //邀请得钻石\n            // ddz.Share.shareWithType(ddz.Share.onShareType.clickStatShareTypeGetDiamondFailSix);\n            this.getReward(true);\n        }\n    },\n\n    shut:function () {\n        ddz.matchResultPanel = null;\n        this.topButton.node.stopAllActions();\n        this.removeAni();\n        this.node.destroy();\n    },\n    _onPreDestroy:function () {\n        this._super();\n        //删除动画\n        this.removeAni();\n    },\n    removeAni:function () {\n        if (this.resultTitle){\n            this.resultTitle.removeFromParent();\n        }\n        // var ani = this.videoIcon.getComponent(cc.Animation);\n        // ani.stop();\n        // this.videoIcon.removeFromParent();\n\n        var ani_2 = this.getDiamondIcon.getComponent(cc.Animation);\n        ani_2.stop();\n        this.getDiamondIcon.removeFromParent();\n    } ,\n    onDestroy:function () {\n        ty.NotificationCenter.ignoreScope(this);\n        hall.adManager.destroyWidthBannerAd();\n        if (hall.AdManagerTYWX && hall.AdManagerTYWX.getAdNodeByTag(\"tableAdNode\")) {\n            hall.AdManagerTYWX.getAdNodeByTag(\"tableAdNode\").hideAdNode();\n        }\n    }\n\n    // update (dt) {},\n});\n"]}