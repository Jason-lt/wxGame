{"version":3,"sources":["../../../../../../assets/Script/ComponentScript/window/assets/Script/ComponentScript/window/ddz_main.js"],"names":["cc","Class","extends","Component","ctor","_counter","_TAG","properties","leftSeconds","winnerCount","rewardDes","titleLabel","default","type","Label","detailLabel","RichText","timeLabel","detailButton","Button","countLabel","startButtonList","Node","mainLeftBtnList","mainRightBtnList","topButton","buttom","giftBagBtnNode","noticeNode","inviteeList","topButtonNode","messageNode","giftBagNode","notifyList","parentScene","serializable","notifyNode","startRichText","ledNode","ledBg","Sprite","ledRichText","haveReward","menuColumn","startBtnAni","redDotSpr","openMenuBtn","count","money","onLoad","couponCount","hall","ME","udataInfo","m_couponCount","GlobalFuncs","ReadStringFromLocalStorage","ddz","matchModel","MATCH_REWARD_DES","setTitleString","ty","NotificationCenter","listen","EventType","UPDATE_MATCH_INFO","onUpDateMatchInfo","getMatchDes","UPDATE_MATCH_DES","updateMatchInfo","updateNotifyInfo","UPDATE_COMMON_CONFIG","CHANE_COUNT_LABEL","changeCountLabel","REMOVE_DDZ_MAIN_ANI","onRemoveAni","CMD_LED_RECEIVE","playLed","MATCH_GIVE_UP","onMatchGiveUp","UPDATE_BUTTON_TEXT","updateButtonText","IS_HAVE_REWARD","isHaveReward","node","x","width","active","backButtonH","getBackButtonPositionY","y","updateGiftBagCount","updateBtnState","UPDATE_REWARD_COUNT","updateMessageCount","bind","UPDATE_GIFTBAG_COUNT","UPDATE_BTN_STATE","gameModel","getOpenBox","checkShareReward","Share","SharePointType","getDayFirstLogin","getDayInviteReward","isOpenRedBag","isClickShareReward","changeEnterBtnState","result","model","gameWorld","m_ledBeWork","_ledList","m_ledList","index","_moveTime","that","_playLed","data","length","string","color","text","size","getContentSize","height","showMove","moveTo","p","hideMove","delay","delayTime","stopAllActions","runAction","sequence","callFunc","m_ledCapacity","m_ledLast","loadingAction","unLoadingAction","info","getCurUpdateInfo","lotteryInfo","num","desc","shareKeywordReplace","bonusTotal","timeStr","formatTime","setDetailInformation","setInLocalStorage","val","isOncePlay","ONCEPLAYGAME","isNewUser","AdManagerTYWX","getAdNodeByTag","hideAdNode","matchDes","getCurDes","histories","todayM","curLottery","curWinnerCount","lotteryTime","tips","savaInfo","saveInfo","matchId","record","stageIndex","_stageIndex","titleString","LOGD","fontSize","peopel","timeS","updataTime","onClickCenterButton","event","shareType","onShareType","clickStatShareTypeMainTips","shareWithType","update","dt","matchUpdate","onDestroy","ignoreScope","updateRewardMassage","resultMap","showList","i","rewardState","bindRewardCount","push","ReadValueFromLocalStorage","SHOW_LOGIN_REWARD","tipsList","split","reward","openMenuColumn","TCP","connectStatus","CONNECT_STATUS_OK","MsgBoxManager","showToast","title","com","getComponent","updateCeLaMunuInfo","notifyInfo","unReadCount","messageCount","autoShowCount","indexStr","UPDATE_NOTIFY_INFO","JSON","stringify","indexList","parse","notify","indexOf","autoShow","showPopWinByPreFab","preFabNode","window","setDetailTypeWithInfoMap","onNoticeButton","_count","getInfo","gongZhonghaoCardPoint","onBubbleTips","gongZhonghaoMenuPoint","pointId","leftCount","shareToGetreward","rewards","_rewards","removeAllChildren","ani","Animation","stop"],"mappings":"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","file":"ddz_main.js","sourceRoot":"../../../../../../assets/Script/ComponentScript/window","sourcesContent":["\n\n\n// var ddz_main = cc.instantiate(this.tipsWindow);\n// this.node.addChild(ddz_main);\n// var window = ddz_main.getComponent('ddz_main');\n// window.setTitleString(\"闯八关平分100万奖金\");\n// window.setDetailInformation(\"12345678\",\"12:54:51\");\n\ncc.Class({\n    extends: cc.Component,\n    ctor:function () {\n        this._counter = 0;\n        this._TAG = \"ddz_main.js\";\n    },\n\n    properties: {\n\n        leftSeconds:0,\n        winnerCount : 0,\n        rewardDes : \"\",\n        titleLabel: {\n            default : null,\n            type : cc.Label\n        },\n        detailLabel : {\n            default : null,\n            type : cc.RichText\n        },\n        timeLabel: {\n            default : null,\n            type : cc.Label\n        },\n        detailButton : {\n            default : null,\n            type : cc.Button\n        },\n        countLabel: {\n            default : null,\n            type : cc.RichText\n        },\n        startButtonList : {\n            default : null,\n            type : cc.Node\n        },\n\n        mainLeftBtnList:cc.Node,\n        mainRightBtnList:cc.Node,\n\n        topButton : {\n            default : null,\n            type : cc.Button\n        },\n        \n        buttom : {\n            default : null,\n            type : cc.Node\n        },\n\n        giftBagBtnNode:cc.Node,\n\n        noticeNode: {\n            default : null,\n            type : cc.Node\n        },\n\n        // noticeLabel: {\n        //     default : null,\n        //     type : cc.Label\n        // },\n\n        inviteeList :[],\n\n        topButtonNode : {\n            default : null,\n            type : cc.Node\n        },\n        messageNode : {\n            default : null,\n            type : cc.Node\n        },\n\n        giftBagNode : {\n            default : null,\n            type : cc.Node\n        },\n\n        notifyList :[],\n\n        parentScene: {\n            default: null,\n            serializable: false\n        },\n\n        notifyNode : {\n            default : null,\n            type : cc.Node\n        },\n\n        startRichText : {\n            default : null,\n            type : cc.RichText\n        },\n\n        ledNode : {\n            default : null,\n            type : cc.Node\n        },\n\n        ledBg : {\n            default : null,\n            type : cc.Sprite\n        },\n\n        ledRichText : {\n            default : null,\n            type : cc.RichText\n        },\n\n        haveReward:cc.Node,\n\n        menuColumn:cc.Node,\n\n        startBtnAni:cc.Node,\n\n        redDotSpr:cc.Node,\n\n        openMenuBtn:cc.Button,\n\n        count : \"\",\n        money : \"\"\n    },\n    onLoad :function () {\n        var couponCount = hall.ME.udataInfo.m_couponCount;\n        // hall.MsgFactory.getBagInfo();\n        // this.addTipsWindowWith(\"4\",\"10\",\"5\");\n        this.rewardDes = hall.GlobalFuncs.ReadStringFromLocalStorage(ddz.matchModel.MATCH_REWARD_DES, \"闯七关瓜分100万红包\");\n        this.setTitleString(\"\" + this.rewardDes);\n        \n        ty.NotificationCenter.listen(ddz.EventType.UPDATE_MATCH_INFO, this.onUpDateMatchInfo, this);\n\n        ddz.matchModel.getMatchDes();\n        ty.NotificationCenter.listen(ddz.EventType.UPDATE_MATCH_DES, this.updateMatchInfo, this);\n\n        this.updateNotifyInfo();\n        ty.NotificationCenter.listen(ddz.EventType.UPDATE_COMMON_CONFIG, this.updateNotifyInfo, this);\n\n        ty.NotificationCenter.listen(ddz.EventType.CHANE_COUNT_LABEL, this.changeCountLabel, this);\n        ty.NotificationCenter.listen(ddz.EventType.REMOVE_DDZ_MAIN_ANI, this.onRemoveAni, this);\n\n        ty.NotificationCenter.listen(ddz.EventType.CMD_LED_RECEIVE, this.playLed,this);\n        ty.NotificationCenter.listen(ddz.EventType.MATCH_GIVE_UP, this.onMatchGiveUp, this);\n        ty.NotificationCenter.listen(ty.EventType.UPDATE_BUTTON_TEXT, this.updateButtonText, this);\n\n        ty.NotificationCenter.listen(ddz.EventType.IS_HAVE_REWARD, this.isHaveReward,this);\n\n        this.detailButton.node.x = -this.detailLabel.node.width/2 + 20;\n        this.detailLabel.node.active = false;\n\n        this.ledNode.active = false;\n\n        var backButtonH = ddz.GlobalFuncs.getBackButtonPositionY();\n        if (backButtonH && backButtonH != 0){\n            this.topButtonNode.y = backButtonH;\n            this.ledNode.y = backButtonH;\n        }\n        this.updateGiftBagCount();\n        this.updateBtnState();\n        ty.NotificationCenter.listen(ddz.EventType.UPDATE_REWARD_COUNT, this.updateMessageCount.bind(this), this);\n        ty.NotificationCenter.listen(ddz.EventType.UPDATE_GIFTBAG_COUNT, this.updateGiftBagCount.bind(this), this);\n        ty.NotificationCenter.listen(ddz.EventType.UPDATE_BTN_STATE, this.updateBtnState.bind(this), this);\n\n        ddz.gameModel.getOpenBox();\n        ddz.gameModel.checkShareReward(ddz.Share.SharePointType.getDayFirstLogin);\n        ddz.gameModel.getDayInviteReward();\n        // hall.GlobalFuncs.btnScaleEffect(this.topButton.node,1.13,0.9);\n\n        if (ddz.gameModel.isOpenRedBag) {\n            ddz.gameModel.isOpenRedBag = false;\n            ddz.isClickShareReward = true;\n            ddz.gameModel.getDayInviteReward();\n        }\n    },\n\n    onMatchGiveUp:function () {\n        this.changeEnterBtnState(1);\n    },\n\n    playLed : function (result) {\n        var model = hall.gameWorld.model;\n        model.m_ledBeWork = true;\n        var _ledList = model.m_ledList; // {\"text\": result[i].text, \"color\": cc.color(result[i].color), \"size\": 22}\n        this.ledNode.active = true;\n        var index = 0;\n        var _moveTime = 0.6;\n        var that = this;\n        var _playLed = function(){\n            var data = _ledList[index];\n            if (data && data.length > 0) {\n                that.ledRichText.string = \"<color=#\" + data[0].color+ \">\"+ data[0].text + \"</color>\";\n                var size = that.ledBg.node.getContentSize();\n                that.ledRichText.node.y = -size.height;\n                var showMove = cc.moveTo(_moveTime, cc.p(that.ledRichText.node.x, -1));\n                var hideMove = cc.moveTo(_moveTime, cc.p(that.ledRichText.node.x, size.height));\n                var delay = cc.delayTime(3);\n                that.ledRichText.node.stopAllActions();\n                that.ledRichText.node.runAction(cc.sequence(showMove,delay,hideMove,cc.callFunc(function(){\n                    _playLed();\n                    if (index == model.m_ledCapacity) {\n                        model.m_ledBeWork = false;\n                        // this.ledNode.active = false;\n                        model.m_ledLast = 0;\n                        model.m_ledList = [];\n                    }\n                }, that)));\n                index += 1;\n            }else {\n                that.ledNode.active = false;\n                model.m_ledBeWork = false;\n                model.m_ledLast = 0;\n                model.m_ledList = [];\n            }\n        };\n        _playLed();\n    },\n\n    loadingAction : function () {\n        this.buttom.active = false;\n        // this.startButtonList.active = false;\n        // this.timeLabel.node.active = false;\n        // this.detailLabel.node.active = false;\n        // this.timeLabel.node.active = false;\n        this.topButtonNode.active = false;\n    },\n    unLoadingAction : function () {\n        this.buttom.active = true;\n        // this.startButtonList.active = true;\n        // this.timeLabel.node.active = true;\n        // this.detailLabel.node.active = true;\n        // this.timeLabel.node.active = true;\n        this.topButtonNode.active = true;\n        var backButtonH = ddz.GlobalFuncs.getBackButtonPositionY();\n        if (backButtonH){\n            this.topButtonNode.y = backButtonH;\n        }\n    },\n    onUpDateMatchInfo:function () {\n        var info = ddz.matchModel.getCurUpdateInfo();\n        if(!info || !info.lotteryInfo){\n            return;\n        }\n        var num ;\n        if(info.lotteryInfo.winnerCount){\n            num = info.lotteryInfo.winnerCount;\n        }else {\n            num = \"1\";\n        }\n        var rewardDes = info.lotteryInfo.desc;\n        ddz.Share.shareKeywordReplace.bonusTotal = rewardDes;\n\n        this.leftSeconds = info.lotteryInfo.leftSeconds;\n        var timeStr = ddz.GlobalFuncs.formatTime(this.leftSeconds);\n\n        if (this.winnerCount == num){\n            // this.timeLabel.string = timeStr;\n        }else {\n            this.winnerCount = num;\n            this.setDetailInformation(num, timeStr);\n        }\n        if (this.rewardDes != rewardDes){\n            this.rewardDes = rewardDes;\n            hall.GlobalFuncs.setInLocalStorage(ddz.matchModel.MATCH_REWARD_DES, rewardDes);\n            this.setTitleString(\"\" + rewardDes);\n        }\n    },\n\n    changeCountLabel:function (val) {\n        // this.countLabel.node.active = val;\n    },\n\n    updateBtnState:function(){\n        var isOncePlay = hall.GlobalFuncs.ReadStringFromLocalStorage(ddz.gameModel.ONCEPLAYGAME, false);\n        if (ddz.gameModel.isNewUser && !isOncePlay) {\n            this.startButtonList.active = false;\n            this.mainLeftBtnList.active = false;\n            this.mainRightBtnList.active = false;\n            this.openMenuBtn.node.active = false;\n            // hall.adManager.hideAd();\n            if (hall.AdManagerTYWX && hall.AdManagerTYWX.getAdNodeByTag(\"myFirstAdNode\")) {\n                hall.AdManagerTYWX.getAdNodeByTag(\"myFirstAdNode\").hideAdNode();\n            }\n        }else {\n            this.startButtonList.active = true;\n            this.mainLeftBtnList.active = true;\n            this.mainRightBtnList.active = true;\n            this.openMenuBtn.node.active = true;\n        }\n    },\n\n    updateMatchInfo: function () {\n        /*\n         　\"histories\":{\n         　　　　　　\"winnerCount\":2,\n         　　　　　　\"matchCount\":2,\n         　　　　　　\"curLottery\":{\n         　　　　　　　　\"winnerCount\":2,\n         　　　　　　　　\"lotteryTime\":\"2018-04-08 19:15\",\n         　　　　　　　　\"rewards\":[\n         　　　　　　　　　　{\n         　　　　　　　　　　　　\"count\":2,\n         　　　　　　　　　　　　\"itemId\":\"item:1311\"\n         　　　　　　　　　　},\n         　　　　　　　　　　{\n         　　　　　　　　　　　　\"count\":1200000,\n         　　　　　　　　　　　　\"itemId\":\"user:chip\"\n         　　　　　　　　　　},\n         　　　　　　　　　　{\n         　　　　　　　　　　　　\"count\":10000,\n         　　　　　　　　　　　　\"itemId\":\"user:coupon\"\n         　　　　　　　　　　}\n         　　　　　　　　]\n         　　　　　　},\n         　　　　　　\"records\":Array[2]\n         　　　　},\n\n         \"saveInfo\":{\n         \"record\":{\n         \"stageIndex\":2,\n         \"state\":2,\n         \"gameFlow\":false,\n         \"enterTime\":1526141228\n         },\n         \"needResume\":0\n         }\n         */\n        var matchDes = ddz.matchModel.getCurDes();\n        this.changeCountLabel(false);\n        var histories = matchDes.histories;\n        if (histories){\n            var todayM = histories.curLottery;\n            if(todayM && todayM.winnerCount && todayM.winnerCount > 0){\n                ddz.Share.shareKeywordReplace.curWinnerCount = todayM.winnerCount;\n                var winnerCount = todayM.winnerCount + \"\";\n                var info = ddz.matchModel.getCurUpdateInfo();\n                var lotteryTime;\n                if(info && info.lotteryInfo && info.lotteryInfo.lotteryTime){\n                    lotteryTime = info.lotteryInfo.lotteryTime;\n                }else {\n                    lotteryTime = \"21:00\"\n                }\n                var tips = \"<color=#FFFFFF>本期已通关\"+winnerCount+\"</color><color=#FFFFFF>次，奖励将于\" + lotteryTime + \"发放</c>\";\n                this.countLabel.string = tips;\n                this.changeCountLabel(true);\n            }\n        }\n\n        var savaInfo = matchDes.saveInfo;\n        if(matchDes.matchId == 6789 && savaInfo && savaInfo.record &&  savaInfo.record.stageIndex){\n            this.changeEnterBtnState(savaInfo.record.stageIndex);\n        }\n    },\n    changeEnterBtnState:function (_stageIndex) {\n        if (_stageIndex && _stageIndex > 1) {\n            this.startRichText.string = \"<color=#ffffff>继续第\"+_stageIndex+ \"关\" + \" </color>\";\n        }else {\n            this.startRichText.string = \"<color=#ffffff>开始闯关</color>\";\n        }\n    },\n    setTitleString : function (titleString) {\n        hall.LOGD(this._TAG, \"setTitleString -------------------------\"+titleString.length);\n        var fontSize = 48;\n        if(titleString.length > 11){\n            fontSize = 45;\n        }\n        this.titleLabel.fontSize = fontSize;\n        this.titleLabel.string = titleString;\n    },\n\n    setDetailInformation:function (peopel,timeS) {\n        // <img src='ddz_main_acticityDetail' height=40 width=40 />\n        this.detailLabel.node.active = true;\n        this.detailLabel.string =\n            \"<img src = 'ddz_main_acticityDetail'/><color=#ffffff> 今天已有\"+peopel+\"人次领取红包 </c>\";\n        this.detailButton.node.x = -this.detailLabel.node.width/2 + 20;\n        // this.timeLabel.string = timeS;\n        // // 个人财产信息\n        // var wimdow = this.personalAssets.getComponent(\"personalAssets\");\n        // wimdow.updateInfo();\n    },\n    updataTime :function () {\n        this.leftSeconds--;\n        var timeStr = ddz.GlobalFuncs.formatTime(this.leftSeconds);\n        // this.timeLabel.string = timeStr;\n    },\n\n    onClickCenterButton:function (event) {\n        var shareType = ddz.Share.onShareType.clickStatShareTypeMainTips;\n        ddz.Share.shareWithType(shareType);\n    },\n    update:function (dt) {\n        this._counter++;\n        if (this._counter >= 360){\n            //6秒刷新一次奖池信息\n            ddz.matchModel.matchUpdate();\n            this._counter = 0;\n            ddz.LOGD(this._TAG, \"刷新一次奖池信息\");\n        }else if(this._counter%60 == 0){\n            if (this.leftSeconds > 0){\n                this.updataTime();\n            }\n        }\n    },\n    onDestroy:function () {\n        var model = hall.gameWorld.model;\n        model.m_ledBeWork = false;\n        ty.NotificationCenter.ignoreScope(this);\n    },\n\n    updateRewardMassage : function (result) {\n        var resultMap;\n        if(result){\n            resultMap = result.result;\n        }\n        var showList = [];\n        if(resultMap && resultMap.inviteeList && resultMap.inviteeList.length > 0){\n            var inviteeList = resultMap.inviteeList;\n            for (var i = 0; i < inviteeList.length; i ++){\n                if(inviteeList[i].rewardState == 1){\n                    inviteeList[i].bindRewardCount = resultMap.bindRewardCount;\n                    inviteeList[i].type = 1;\n                    showList.push(inviteeList[i]);\n                }\n            }\n        }\n\n        //查询未展示的登录奖励\n        var tips =   hall.GlobalFuncs.ReadValueFromLocalStorage(ddz.matchModel.SHOW_LOGIN_REWARD, []);\n        if(tips[0]){\n            var tipsList = tips[0].split(',');\n            if(tipsList && tipsList.length > 0){\n                for (var i = 0 ; i < tipsList.length ; i ++ ){\n                    var reward = {};\n                    reward.type = 2;\n                    reward.bindRewardCount = tipsList[i];\n                    showList.push(reward);\n                }\n            }\n        }\n\n        if(showList.length > 0){\n            this.inviteeList = showList;\n        }\n    },\n\n    // 打开菜单栏\n    openMenuColumn:function(){\n        //判断网络状态是否可以响应按钮事件\n        // if(!debugMode){\n            if (ty.TCP.connectStatus != ty.TCP.CONNECT_STATUS_OK){\n                hall.MsgBoxManager.showToast({title : \"正在登录，请稍候\"});\n                ddz.LOGD(null, \"TCP is not ok! Please wait!\");\n                return;\n            }\n        // }\n        this.menuColumn.active = true;\n        var com = this.menuColumn.getComponent(\"ddz_ceLaMenu\");\n        com.updateCeLaMunuInfo();\n        // hall.adManager.hideAd();\n        if (hall.AdManagerTYWX && hall.AdManagerTYWX.getAdNodeByTag(\"myFirstAdNode\")) {\n            hall.AdManagerTYWX.getAdNodeByTag(\"myFirstAdNode\").hideAdNode();\n        }\n    },\n\n    updateNotifyInfo:function() {\n        this.redDotSpr.active = (ddz.gameModel.notifyInfo.unReadCount + ddz.gameModel.messageCount) > 0;\n\n        var isOncePlay = hall.GlobalFuncs.ReadStringFromLocalStorage(ddz.gameModel.ONCEPLAYGAME, false);\n        if (!ddz.gameModel.isNewUser || isOncePlay) {\n            if(ddz.gameModel.notifyInfo.autoShowCount){\n                var indexStr = hall.GlobalFuncs.ReadStringFromLocalStorage(ddz.matchModel.UPDATE_NOTIFY_INFO, JSON.stringify([]));\n                var indexList = JSON.parse(indexStr);\n                var notifyList = ddz.gameModel.notifyInfo.info;\n                for (var i = 0; i < notifyList.length; i++){\n                    var notify = notifyList[i];\n                    if (indexList.indexOf(notify.index) == -1 && notify.autoShow){\n                        hall.GlobalFuncs.showPopWinByPreFab('prefabs/notifyWindow', function (preFabNode) {\n                            var window = preFabNode.getComponent('ddz_notifyWindow');\n                            window.setDetailTypeWithInfoMap(notify,\"auto\");\n                        });\n                    }\n                }\n            }\n        }\n    },\n\n    onNoticeButton : function() {\n        // ty.BiLog.clickStat(ty.UserInfo.clickStatEventType.clickStatEventTypeButtonClick, [\"notice\"]);\n        // ddz.AudioHelper.playEffect(ddz.EffectPath_mp3.button_click_sound, false);\n        // hall.GlobalFuncs.showPopWinByPreFab('prefabs/notifyWindow', function (preFabNode) {\n        //     var window = preFabNode.getComponent('ddz_notifyWindow');\n        //     window.setListType();\n        // });\n    },\n    updateMessageCount : function (data) {\n        var _count = 0;\n        if (data.inviteeList && data.inviteeList.length > 0) {\n            for (var i = 0; i < data.inviteeList.length; i++) {\n                if (data.inviteeList[i].rewardState == 0) {\n                    _count ++;\n                }\n            }\n        }\n\n        hall.LOGD(\"==\",\" file = [ddz_main] fun = [updateMessageCount] _count = \" + _count);\n\n        this.messageNode.active = _count && _count > 0;\n    },\n\n    updateGiftBagCount : function () {\n        if(ddz.gameModel.notifyInfo.getInfo) {\n            if (ddz.gameModel.notifyInfo.autoShowCount) {\n                this.giftBagNode.active = false;\n            } else {\n                if (ddz.gameModel.gongZhonghaoCardPoint > 0) {\n                    this.giftBagNode.active = true;\n                    var tips = \"关注公众号,领豪华礼包\";\n                    hall.GlobalFuncs.onBubbleTips(this.giftBagBtnNode, tips);\n                } else {\n                    this.giftBagNode.active = ddz.gameModel.gongZhonghaoMenuPoint > 0;\n                }\n            }\n        }\n    },\n\n    updateButtonText:function(data){\n        if (data.pointId && data.pointId == ddz.Share.SharePointType.getDayFirstLogin){\n            if (data.leftCount > 0) {\n                if (ddz.gameModel.gongZhonghaoMenuPoint > 0 && ddz.gameModel.gongZhonghaoCardPoint <= 0){\n                    var tips = \"从公众号登录,领天天礼包\";\n                    hall.GlobalFuncs.onBubbleTips(this.giftBagBtnNode,tips);\n                }\n                ddz.gameModel.shareToGetreward(ddz.Share.SharePointType.getDayFirstLogin);\n            }\n        }\n    },\n\n    isHaveReward:function(data){\n        var _count = 0;\n        if (data.rewards){  // 未领取\n            var _rewards = data.rewards;\n            if (_rewards['item:1311'] > 0) {\n                _count = _count + _rewards['item:1311'];\n            }\n            if (_rewards['user:chip'] > 0){\n                _count = _count + _rewards['user:chip'];\n            }\n        }\n        this.haveReward.active = _count > 0;\n    },\n\n    onRemoveAni:function () {\n        hall.LOGD(\"==\",\" file = [ddz_main] fun = [onRemoveAni] \");\n        this.notifyNode.removeAllChildren();\n        // this.topButton.node.stopAllActions();\n        var ani = this.startBtnAni.getComponent(cc.Animation);\n        ani.stop();\n    }\n\n});\n"]}