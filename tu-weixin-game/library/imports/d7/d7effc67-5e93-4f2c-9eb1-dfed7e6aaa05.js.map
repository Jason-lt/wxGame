{"version":3,"sources":["../../../../../../assets/Script/ComponentScript/component/assets/Script/ComponentScript/component/shareRedPacket.js"],"names":["cc","Class","extends","Component","properties","redPacket","Node","yellowPacket","packet","nameLabel","Label","avatar","diamond_bg","diamond_rich","RichText","get_rich","btn_1","Button","btn_2","btn_lingqu_state","jiqiText","inviteedCode","moneyIcon","onLoad","node","on","getReward","askForReward","ddz","gameModel","getInviteRewardDay","ty","BiLog","clickStat","UserInfo","clickStatEventType","clickStatEventTypeButtonClick","Share","shareWithType","onShareType","clickStatShareTypeGetDiamondHall","setBtnState","index","active","setSharePeopleInfo","data","userId","rewardState","itemId","count","string","com","getComponent","setAvatarUrl","bindPic","hideNameDisplay","bindName","setBigReward"],"mappings":"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","file":"shareRedPacket.js","sourceRoot":"../../../../../../assets/Script/ComponentScript/component","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/class/index.html\n// Learn Attribute:\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/reference/attributes/index.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/life-cycle-callbacks/index.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        redPacket:cc.Node,\n        yellowPacket:cc.Node,\n        packet:cc.Node,\n        nameLabel:cc.Label,\n        avatar:cc.Node,\n        diamond_bg:cc.Node,\n        diamond_rich:cc.RichText,\n        get_rich:cc.RichText,\n        btn_1:cc.Button,\n        btn_2:cc.Button,\n        btn_lingqu_state:cc.Node,\n        jiqiText:cc.Label,\n        inviteedCode:-1,\n\n        moneyIcon:cc.Node,\n    },\n\n    onLoad:function(){\n        this.btn_1.node.on(\"click\" , this.getReward, this);\n        this.btn_2.node.on(\"click\" , this.askForReward, this);\n    },\n\n    getReward:function(){\n        ddz.gameModel.getInviteRewardDay(this.inviteedCode);\n    },\n\n    askForReward:function(){\n        ty.BiLog.clickStat(ty.UserInfo.clickStatEventType.clickStatEventTypeButtonClick,\n            [\"diamondShare\"]);\n        ddz.Share.shareWithType(ddz.Share.onShareType.clickStatShareTypeGetDiamondHall);\n    },\n\n    setBtnState:function(index){\n        if (index == 1) {   // 未领取状态\n            this.redPacket.active = true;\n            this.yellowPacket.active = false;\n            this.btn_1.node.active = true;\n            this.btn_2.node.active = false;\n            this.btn_lingqu_state.active = false;\n            this.jiqiText.node.active = false;\n\n            this.diamond_bg.active = true;\n            this.avatar.active = false;\n        }else if (index == 2) {     //已领取状态\n            this.redPacket.active = true;\n            this.yellowPacket.active = false;\n            this.btn_1.node.active = false;\n            this.btn_2.node.active = false;\n            this.btn_lingqu_state.active = true;\n            this.jiqiText.node.active = false;\n\n            this.diamond_bg.active = false;\n            this.avatar.active = true;\n        }else if (index == 3) {     //要红包状态\n            this.redPacket.active = false;\n            this.yellowPacket.active = true;\n            this.btn_1.node.active = false;\n            this.btn_2.node.active = true;\n            this.btn_lingqu_state.active = false;\n            this.jiqiText.node.active = false;\n\n        }else if (index == 4) {     //任务集满\n            this.redPacket.active = false;\n            this.yellowPacket.active = false;\n            this.packet.active = true;\n            this.btn_1.node.active = true;\n            this.btn_2.node.active = false;\n            this.btn_lingqu_state.active = false;\n            this.jiqiText.node.active = false;\n\n        }\n    },\n\n    setSharePeopleInfo:function(data){\n        if (data.userId){\n            if (data.rewardState == 0) {\n                this.setBtnState(1);\n                if (data.itemId && data.itemId == \"item:1311\"){\n                    if (data.count) {\n                        this.diamond_rich.string = \"<img src='dda_button_diamond' height=23 width=29/><color=#ffffff> x\"+ data.count +\"</color>\";\n                    }\n                }else if (data.itemId && data.itemId == \"user:chip\"){\n                    if (data.count) {\n                        this.diamond_rich.string = \"<img src='ddz_main_chip' height=23 width=29/><color=#ffffff> x\"+ data.count +\"</color>\";\n                    }\n                }else if (data.itemId && data.itemId == \"user:coupon\"){\n                    if (data.count) {\n                        // var num = data.count/100;\n                        this.diamond_rich.string = \"<color=#ffffff>?</color>\";\n                    }\n                }\n            }else {\n                this.setBtnState(2);\n                var com = this.avatar.getComponent('Avatar');\n                com.setAvatarUrl(data.bindPic);\n                com.hideNameDisplay();\n            }\n            this.inviteedCode = data.userId;\n            this.nameLabel.node.active = true;\n            this.nameLabel.string = data.bindName;\n        }else {\n            this.setBtnState(3);\n            if (data.count) {\n                if (data.itemId && data.itemId == \"user:coupon\"){\n                    // var num = data.count/100;\n                    this.get_rich.string = \"<color=#C17C25>最高7元</color>\";\n                    this.moneyIcon.active = true;\n                }else {\n                    this.get_rich.string = \"<color=#C17C25> x\"+ data.count +\"</color>\";\n                    this.moneyIcon.active = false;\n                }\n\n            }\n            this.nameLabel.node.active = false;\n        }\n    },\n\n    setBigReward:function(data){\n        this.setBtnState(4);\n        this.nameLabel.node.active = false;\n        if (data.rewardState == 1) {\n            this.btn_lingqu_state.active = true;\n            this.jiqiText.node.active = false;\n            this.btn_1.node.active = false;\n        }else if (data.rewardState == 0) {\n\n        }else {\n            this.jiqiText.node.active = true;\n            this.btn_1.node.active = false;\n            this.btn_lingqu_state.active = false;\n        }\n    },\n});\n"]}