{"version":3,"sources":["../../../../../../assets/Script/ComponentScript/window/assets/Script/ComponentScript/window/officialAccountGuide.js"],"names":["cc","Class","extends","Component","properties","guideNode_1","Node","guideNode_2","guideNode_3","guideNode_4","hand","yindao","Prefab","iosText","RichText","androidText","onLoad","ddz","gameModel","checkShareReward","Share","SharePointType","gongZhongHaoCard","gongZhongHaoMenu","isAction","animation","getComponent","Animation","anim1","getAnimationState","play","backButtonH","GlobalFuncs","getBackButtonPositionY","y","that","on","playHandAni","openWindow","active","gongZhonghaoCardPoint","playAttentionAni","gongZhonghaoMenuPoint","playGetDayRewardAni","showNormalTipsWindow","title","callFunc","hall","AdManagerTYWX","getAdNodeByTag","hideAdNode","onClickIssueBtn","playEnterAni","setScale","actionTime","scaleAction","scaleTo","scaleAction_2","runAction","sequence","setTipsRich","addAppletGetDiamond","adManager","destroyWidthBannerAd","sys","os","OS_ANDROID","node","OS_IOS","yindaoAni","instantiate","addChild","ani","clipName","getClips","name","anim","once","playEndAnimation","stop","removeFromParent","destroy","onClose","LOGD","onCloseGetRewardWindow","stopAllActions","onDestroy","showAdNode"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,qBAAYL,GAAGM,IADP;;AAGRC,qBAAYP,GAAGM,IAHP;;AAKRE,qBAAYR,GAAGM,IALP;;AAORG,qBAAYT,GAAGM,IAPP;;AASRI,cAAKV,GAAGM,IATA;AAURK,gBAAOX,GAAGY,MAVF;;AAYRC,iBAAQb,GAAGc,QAZH;AAaRC,qBAAYf,GAAGc;AAbP,KAHP;;AAmBLE,YAAO,kBAAW;;AAEdC,YAAIC,SAAJ,CAAcC,gBAAd,CAA+BF,IAAIG,KAAJ,CAAUC,cAAV,CAAyBC,gBAAxD;AACAL,YAAIC,SAAJ,CAAcC,gBAAd,CAA+BF,IAAIG,KAAJ,CAAUC,cAAV,CAAyBE,gBAAxD;;AAEA,aAAKC,QAAL,GAAgB,IAAhB;AACA,YAAIC,YAAY,KAAKC,YAAL,CAAkB1B,GAAG2B,SAArB,CAAhB;AACA,YAAIC,QAAQH,UAAUI,iBAAV,CAA4B,gBAA5B,CAAZ;AACAD,cAAME,IAAN;AACA,YAAIC,cAAcd,IAAIe,WAAJ,CAAgBC,sBAAhB,EAAlB;AACA,YAAIF,WAAJ,EAAgB;AACZ,iBAAKrB,IAAL,CAAUwB,CAAV,GAAcH,cAAc,EAA5B;AACH;AACD,YAAII,OAAO,IAAX;AACAP,cAAMQ,EAAN,CAAS,UAAT,EAAqB,YAAU;AAC3BD,iBAAKX,QAAL,GAAgB,KAAhB;AACH,SAFD,EAEE,IAFF;;AAIA,aAAKa,WAAL;AAEH,KAvCI;;AAyCLC,gBAAW,sBAAU;AACjB,aAAK7B,WAAL,CAAiB8B,MAAjB,GAA0B,KAA1B;;AAEA,YAAItB,IAAIC,SAAJ,CAAcsB,qBAAd,GAAsC,CAA1C,EAA4C;AACxC,iBAAKC,gBAAL;AACH,SAFD,MAEM,IAAIxB,IAAIC,SAAJ,CAAcwB,qBAAd,GAAsC,CAA1C,EAA6C;AAC/C,iBAAKC,mBAAL;AACH,SAFK,MAEA;AACF1B,gBAAIe,WAAJ,CAAgBY,oBAAhB,CAAqC,uBAArC,EAA6D,CAAC,EAACC,OAAM,IAAP,EAAYC,UAAS,oBAAY,CAC9F,CAD6D,EAAD,CAA7D,EACI,MADJ;AAEH;;AAED,YAAIC,KAAKC,aAAL,IAAsBD,KAAKC,aAAL,CAAmBC,cAAnB,CAAkC,eAAlC,CAA1B,EAA8E;AAC1EF,iBAAKC,aAAL,CAAmBC,cAAnB,CAAkC,eAAlC,EAAmDC,UAAnD;AACH;AACJ,KAxDI;;AA0DLC,qBAAgB,2BAAU;AACtB,aAAKC,YAAL;AACH,KA5DI;;AA8DL;AACAX,sBAAiB,4BAAU;AACvB,aAAKlC,WAAL,CAAiBgC,MAAjB,GAA0B,KAA1B;AACA,aAAK/B,WAAL,CAAiB+B,MAAjB,GAA0B,KAA1B;AACA,aAAKlC,WAAL,CAAiBkC,MAAjB,GAA0B,IAA1B;AACA,aAAKlC,WAAL,CAAiBgD,QAAjB,CAA0B,CAA1B;AACA,YAAIC,aAAa,IAAjB;AACA,YAAIC,cAAcvD,GAAGwD,OAAH,CAAWF,UAAX,EAAsB,IAAtB,CAAlB;AACA,YAAIG,gBAAgBzD,GAAGwD,OAAH,CAAWF,aAAW,CAAtB,EAAwB,CAAxB,CAApB;AACA,aAAKjD,WAAL,CAAiBqD,SAAjB,CAA2B1D,GAAG2D,QAAH,CAAYJ,WAAZ,EAAwBE,aAAxB,CAA3B;AACH,KAxEI;;AA0EL;AACAL,kBAAa,wBAAU;AACnB,aAAK7C,WAAL,CAAiBgC,MAAjB,GAA0B,KAA1B;AACA,aAAKlC,WAAL,CAAiBkC,MAAjB,GAA0B,KAA1B;AACA,aAAK/B,WAAL,CAAiB+B,MAAjB,GAA0B,IAA1B;AACA,aAAK/B,WAAL,CAAiB6C,QAAjB,CAA0B,CAA1B;AACA,YAAIC,aAAa,IAAjB;AACA,YAAIC,cAAcvD,GAAGwD,OAAH,CAAWF,UAAX,EAAsB,IAAtB,CAAlB;AACA,YAAIG,gBAAgBzD,GAAGwD,OAAH,CAAWF,aAAW,CAAtB,EAAwB,CAAxB,CAApB;AACA,aAAK9C,WAAL,CAAiBkD,SAAjB,CAA2B1D,GAAG2D,QAAH,CAAYJ,WAAZ,EAAwBE,aAAxB,CAA3B;AACA,aAAKG,WAAL;AACH,KArFI;;AAuFL;AACAC,yBAAoB,+BAAU;AAC1B,aAAKtD,WAAL,CAAiBgC,MAAjB,GAA0B,KAA1B;AACA,aAAKlC,WAAL,CAAiBkC,MAAjB,GAA0B,KAA1B;AACA,aAAK/B,WAAL,CAAiB+B,MAAjB,GAA0B,KAA1B;AACA,aAAK9B,WAAL,CAAiB8B,MAAjB,GAA0B,IAA1B;AACAQ,aAAKe,SAAL,CAAeC,oBAAf;AACH,KA9FI;;AAgGL;AACAH,iBAAY,uBAAU;AAClB,YAAI5D,GAAGgE,GAAH,CAAOC,EAAP,IAAajE,GAAGgE,GAAH,CAAOE,UAAxB,EAAoC;AAChC,iBAAKnD,WAAL,CAAiBoD,IAAjB,CAAsB5B,MAAtB,GAA+B,IAA/B;AACA,iBAAK1B,OAAL,CAAasD,IAAb,CAAkB5B,MAAlB,GAA2B,KAA3B;AACH,SAHD,MAGO,IAAIvC,GAAGgE,GAAH,CAAOC,EAAP,IAAajE,GAAGgE,GAAH,CAAOI,MAAxB,EAAgC;AACnC,iBAAKrD,WAAL,CAAiBoD,IAAjB,CAAsB5B,MAAtB,GAA+B,KAA/B;AACA,iBAAK1B,OAAL,CAAasD,IAAb,CAAkB5B,MAAlB,GAA2B,IAA3B;AACH,SAHM,MAGD;AACF,iBAAKxB,WAAL,CAAiBoD,IAAjB,CAAsB5B,MAAtB,GAA+B,IAA/B;AACA,iBAAK1B,OAAL,CAAasD,IAAb,CAAkB5B,MAAlB,GAA2B,KAA3B;AACH;AAEJ,KA7GI;;AA+GL;AACAI,yBAAoB,+BAAU;AAC1B,aAAKpC,WAAL,CAAiBgC,MAAjB,GAA0B,IAA1B;AACA,aAAKlC,WAAL,CAAiBkC,MAAjB,GAA0B,KAA1B;AACA,aAAK/B,WAAL,CAAiB+B,MAAjB,GAA0B,KAA1B;AACA,aAAKhC,WAAL,CAAiB8C,QAAjB,CAA0B,CAA1B;AACA,YAAIC,aAAa,IAAjB;AACA,YAAIC,cAAcvD,GAAGwD,OAAH,CAAWF,UAAX,EAAsB,IAAtB,CAAlB;AACA,YAAIG,gBAAgBzD,GAAGwD,OAAH,CAAWF,aAAW,CAAtB,EAAwB,CAAxB,CAApB;AACA,aAAK/C,WAAL,CAAiBmD,SAAjB,CAA2B1D,GAAG2D,QAAH,CAAYJ,WAAZ,EAAwBE,aAAxB,CAA3B;AACH,KAzHI;;AA2HL;AACApB,iBAAY,uBAAU;AAClB,YAAI,KAAKgC,SAAT,EAAmB;AACf;AACH;AACD,aAAKA,SAAL,GAAiBrE,GAAGsE,WAAH,CAAe,KAAK3D,MAApB,CAAjB;AACA,aAAKD,IAAL,CAAU6D,QAAV,CAAmB,KAAKF,SAAxB;AACA,YAAIG,MAAM,KAAKH,SAAL,CAAe3C,YAAf,CAA4B1B,GAAG2B,SAA/B,CAAV;AACA,YAAI8C,WAAWD,IAAIE,QAAJ,GAAe,CAAf,EAAkBC,IAAjC;AACA,YAAIC,OAAOJ,IAAI3C,iBAAJ,CAAsB4C,QAAtB,CAAX;AACAG,aAAKC,IAAL,CAAU,UAAV,EAAsB,YAAY,CACjC,CADD;AAEA,aAAKnE,IAAL,CAAU2C,QAAV,CAAmB,GAAnB;AACAuB,aAAK9C,IAAL;AACH,KAzII;;AA2ILgD,sBAAmB,4BAAY;AAC3B,aAAKtD,QAAL,GAAgB,KAAhB;AACA,YAAI,KAAK6C,SAAT,EAAoB;AAChB,gBAAIG,MAAM,KAAKH,SAAL,CAAe3C,YAAf,CAA4B1B,GAAG2B,SAA/B,CAAV;AACA6C,gBAAIO,IAAJ;AACA,iBAAKV,SAAL,CAAeW,gBAAf;AACA,iBAAKX,SAAL,GAAiB,IAAjB;AACH;AACD,YAAI,KAAKF,IAAT,EAAe;AACX,iBAAKA,IAAL,CAAUc,OAAV;AACH;AACJ,KAtJI;;AAwJLC,aAAQ,mBAAU;AACdjE,YAAIkE,IAAJ,CAAS,IAAT,EAAc,+CAAd;AACA,YAAI,KAAK3D,QAAT,EAAmB;AACf;AACH;AACD,aAAKsD,gBAAL;AACH,KA9JI;;AAgKLM,4BAAuB,kCAAU;AAC7B;AACA,aAAK7E,WAAL,CAAiB8E,cAAjB;AACA,aAAKhF,WAAL,CAAiBgF,cAAjB;AACA,aAAK9E,WAAL,CAAiBgC,MAAjB,GAA0B,IAA1B;AACA,aAAK/B,WAAL,CAAiB+B,MAAjB,GAA0B,KAA1B;AACA,aAAKlC,WAAL,CAAiBkC,MAAjB,GAA0B,KAA1B;AACH,KAvKI;;AAyKL+C,eAAY,qBAAY;AACpB,YAAIvC,KAAKC,aAAL,CAAmBC,cAAnB,CAAkC,eAAlC,CAAJ,EAAwD;AACpDF,iBAAKC,aAAL,CAAmBC,cAAnB,CAAkC,eAAlC,EAAmDsC,UAAnD;AACH;AACJ;;AA7KI,CAAT","file":"officialAccountGuide.js","sourceRoot":"../../../../../../assets/Script/ComponentScript/window","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/class/index.html\n// Learn Attribute:\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/reference/attributes/index.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/life-cycle-callbacks/index.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        guideNode_1:cc.Node,\n\n        guideNode_2:cc.Node,\n\n        guideNode_3:cc.Node,\n\n        guideNode_4:cc.Node,\n\n        hand:cc.Node,\n        yindao:cc.Prefab,\n\n        iosText:cc.RichText,\n        androidText:cc.RichText,\n    },\n\n    onLoad:function() {\n\n        ddz.gameModel.checkShareReward(ddz.Share.SharePointType.gongZhongHaoCard);\n        ddz.gameModel.checkShareReward(ddz.Share.SharePointType.gongZhongHaoMenu);\n        \n        this.isAction = true;\n        var animation = this.getComponent(cc.Animation);\n        var anim1 = animation.getAnimationState('tipsWindowNode');\n        anim1.play();\n        var backButtonH = ddz.GlobalFuncs.getBackButtonPositionY();\n        if (backButtonH){\n            this.hand.y = backButtonH - 30;\n        }\n        var that = this;\n        anim1.on('finished', function(){\n            that.isAction = false;\n        },this);\n\n        this.playHandAni();\n        \n    },\n\n    openWindow:function(){\n        this.guideNode_4.active = false;\n\n        if (ddz.gameModel.gongZhonghaoCardPoint > 0){\n            this.playAttentionAni();\n        }else if (ddz.gameModel.gongZhonghaoMenuPoint > 0) {\n            this.playGetDayRewardAni();\n        }else {\n            ddz.GlobalFuncs.showNormalTipsWindow(\"今天的免费礼包已领取\\n明天奖励更给力哦~\",[{title:\"确定\",callFunc:function () {\n            }}],\"天天礼包\");\n        }\n\n        if (hall.AdManagerTYWX && hall.AdManagerTYWX.getAdNodeByTag(\"myFirstAdNode\")) {\n            hall.AdManagerTYWX.getAdNodeByTag(\"myFirstAdNode\").hideAdNode();\n        }\n    },\n\n    onClickIssueBtn:function(){\n        this.playEnterAni();\n    },\n\n    // 关注公众号步骤\n    playAttentionAni:function(){\n        this.guideNode_2.active = false;\n        this.guideNode_3.active = false;\n        this.guideNode_1.active = true;\n        this.guideNode_1.setScale(0);\n        var actionTime = 0.15;\n        var scaleAction = cc.scaleTo(actionTime,1.05);\n        var scaleAction_2 = cc.scaleTo(actionTime/3,1);\n        this.guideNode_1.runAction(cc.sequence(scaleAction,scaleAction_2));\n    },\n\n    // 进入公众号步骤\n    playEnterAni:function(){\n        this.guideNode_2.active = false;\n        this.guideNode_1.active = false;\n        this.guideNode_3.active = true;\n        this.guideNode_3.setScale(0);\n        var actionTime = 0.15;\n        var scaleAction = cc.scaleTo(actionTime,1.05);\n        var scaleAction_2 = cc.scaleTo(actionTime/3,1);\n        this.guideNode_3.runAction(cc.sequence(scaleAction,scaleAction_2));\n        this.setTipsRich();\n    },\n\n    //加入小程序领钻石\n    addAppletGetDiamond:function(){\n        this.guideNode_2.active = false;\n        this.guideNode_1.active = false;\n        this.guideNode_3.active = false;\n        this.guideNode_4.active = true;\n        hall.adManager.destroyWidthBannerAd();\n    },\n\n    //\n    setTipsRich:function(){\n        if (cc.sys.os == cc.sys.OS_ANDROID) {\n            this.androidText.node.active = true;\n            this.iosText.node.active = false;\n        } else if (cc.sys.os == cc.sys.OS_IOS) {\n            this.androidText.node.active = false;\n            this.iosText.node.active = true;\n        }else {\n            this.androidText.node.active = true;\n            this.iosText.node.active = false;\n        }\n\n    },\n\n    // 领取天天礼包\n    playGetDayRewardAni:function(){\n        this.guideNode_2.active = true;\n        this.guideNode_1.active = false;\n        this.guideNode_3.active = false;\n        this.guideNode_2.setScale(0);\n        var actionTime = 0.15;\n        var scaleAction = cc.scaleTo(actionTime,1.05);\n        var scaleAction_2 = cc.scaleTo(actionTime/3,1);\n        this.guideNode_2.runAction(cc.sequence(scaleAction,scaleAction_2));\n    },\n\n    // 播放小手动画\n    playHandAni:function(){\n        if (this.yindaoAni){\n            return;\n        }\n        this.yindaoAni = cc.instantiate(this.yindao);\n        this.hand.addChild(this.yindaoAni);\n        var ani = this.yindaoAni.getComponent(cc.Animation);\n        var clipName = ani.getClips()[0].name;\n        var anim = ani.getAnimationState(clipName);\n        anim.once(\"finished\", function () {\n        });\n        this.hand.setScale(0.5);\n        anim.play();\n    },\n\n    playEndAnimation : function () {\n        this.isAction = false;\n        if (this.yindaoAni) {\n            var ani = this.yindaoAni.getComponent(cc.Animation);\n            ani.stop();\n            this.yindaoAni.removeFromParent();\n            this.yindaoAni = null;\n        }\n        if (this.node) {\n            this.node.destroy();\n        }\n    },\n\n    onClose:function(){\n        ddz.LOGD(null,\"file = [officialAccountGuide] fun = [onClose]\");\n        if (this.isAction) {\n            return;\n        }\n        this.playEndAnimation();\n    },\n\n    onCloseGetRewardWindow:function(){\n        // ddz.LOGD(null,\"file = [officialAccountGuide] fun = [onCloseGetRewardWindow]\");\n        this.guideNode_2.stopAllActions();\n        this.guideNode_1.stopAllActions();\n        this.guideNode_2.active = true;\n        this.guideNode_3.active = false;\n        this.guideNode_1.active = false\n    },\n\n    onDestroy : function () {\n        if (hall.AdManagerTYWX.getAdNodeByTag(\"myFirstAdNode\")) {\n            hall.AdManagerTYWX.getAdNodeByTag(\"myFirstAdNode\").showAdNode();\n        }\n    },\n\n});\n"]}