{"version":3,"sources":["../../../../../../assets/Script/ComponentScript/window/assets/Script/ComponentScript/window/ddz_ceLaMenu.js"],"names":["cc","Class","extends","Component","properties","avatar","Node","uid","Label","location","signature","goldNum","diamondNum","infoBg","guideIconNode","notifyRedDot","onLoad","ty","NotificationCenter","listen","ddz","EventType","UPDATE_DIAMOND_NUMBER","updateDiamond","UPDATE_COIN_NUMBER","updateCoin","UPDATE_CELA_MENU_INFO","updateCeLaMunuInfo","UPDATE_GUIDE_ICON_STATE","updateGuideNodeState","UPDATE_COMMON_CONFIG","updateNotifyInfo","num","hall","ME","udataInfo","diamondCount","string","GlobalFuncs","formatGold","number","getChip","active","gameModel","notifyInfo","unReadCount","messageCount","wimdow","getComponent","UserInfo","userPic","isLimit","setAvatarUrl","hideNameDisplay","userId","personInfo","gameWorld","model","getProvince","_signature","getSignature","size","getContentSize","_sizeY","getCeLabgSizeY","height","setContentSize","getOldUserChipReward","isShow","sys","os","OS_ANDROID","onClickEdit","onEditPersonInfo","onClickNotifyBtn","BiLog","clickStat","clickStatEventType","clickStatEventTypeButtonClick","AudioHelper","playEffect","EffectPath_mp3","button_click_sound","showPopWinByPreFab","preFabNode","window","setListType","onClickRankBtn","sceneName","onLaunched","logicScene","director","getScene","no","children","showRankListForShare","pushScene","onClickShareCircleBtn","showShareMomentsItem","onClickAddDesktopBtn","getShoreCut","onCollectDeskTop","onCloseMenuColumu","node","trigger","GET_AD_MSG_SUCCESS","onDestroy","ignoreScope"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,gBAAOL,GAAGM,IADF;AAERC,aAAIP,GAAGQ,KAFC;AAGRC,kBAAST,GAAGQ,KAHJ;AAIRE,mBAAUV,GAAGQ,KAJL;AAKRG,iBAAQX,GAAGQ,KALH;AAMRI,oBAAWZ,GAAGQ,KANN;;AAQRK,gBAAOb,GAAGM,IARF;;AAURQ,uBAAcd,GAAGM,IAVT;;AAYRS,sBAAaf,GAAGM;AAZR,KAHP;;AAkBLU,YAAO,kBAAU;AACbC,WAAGC,kBAAH,CAAsBC,MAAtB,CAA6BC,IAAIC,SAAJ,CAAcC,qBAA3C,EAAiE,KAAKC,aAAtE,EAAoF,IAApF;AACAN,WAAGC,kBAAH,CAAsBC,MAAtB,CAA6BC,IAAIC,SAAJ,CAAcG,kBAA3C,EAA8D,KAAKC,UAAnE,EAA8E,IAA9E;AACAR,WAAGC,kBAAH,CAAsBC,MAAtB,CAA6BC,IAAIC,SAAJ,CAAcK,qBAA3C,EAAiE,KAAKC,kBAAtE,EAAyF,IAAzF;AACAV,WAAGC,kBAAH,CAAsBC,MAAtB,CAA6BC,IAAIC,SAAJ,CAAcO,uBAA3C,EAAoE,KAAKC,oBAAzE,EAA+F,IAA/F;AACAZ,WAAGC,kBAAH,CAAsBC,MAAtB,CAA6BC,IAAIC,SAAJ,CAAcS,oBAA3C,EAAiE,KAAKC,gBAAtE,EAAwF,IAAxF;AACH,KAxBI;;AA0BLR,mBAAc,yBAAU;AACpB,YAAIS,MAAMC,KAAKC,EAAL,CAAQC,SAAR,CAAkBC,YAA5B;AACA,YAAIJ,GAAJ,EAAS;AACL,iBAAKpB,UAAL,CAAgByB,MAAhB,GAAyBJ,KAAKK,WAAL,CAAiBC,UAAjB,CAA4BP,GAA5B,CAAzB;AACH,SAFD,MAEM;AACF,iBAAKpB,UAAL,CAAgByB,MAAhB,GAAyB,CAAzB;AACH;AACJ,KAjCI;;AAmCLZ,gBAAW,sBAAU;AACjB,YAAIe,SAASP,KAAKC,EAAL,CAAQO,OAAR,EAAb;AACA,YAAID,MAAJ,EAAY;AACR,iBAAK7B,OAAL,CAAa0B,MAAb,GAAuBJ,KAAKK,WAAL,CAAiBC,UAAjB,CAA4BC,MAA5B,CAAvB;AACH,SAFD,MAEM;AACF,iBAAK7B,OAAL,CAAa0B,MAAb,GAAsB,CAAtB;AACH;AACJ,KA1CI;;AA4CLN,sBAAiB,4BAAU;AACvB,aAAKhB,YAAL,CAAkB2B,MAAlB,GAA4BtB,IAAIuB,SAAJ,CAAcC,UAAd,CAAyBC,WAAzB,GAAuCzB,IAAIuB,SAAJ,CAAcG,YAAtD,GAAsE,CAAjG;AACH,KA9CI;;AAgDLnB,wBAAmB,8BAAU;AACzB,YAAIoB,SAAS,KAAK1C,MAAL,CAAY2C,YAAZ,CAAyB,QAAzB,CAAb;AACA,YAAG/B,GAAGgC,QAAH,CAAYC,OAAZ,IAAuB9B,IAAIuB,SAAJ,CAAcQ,OAAxC,EAAgD;AAC5CJ,mBAAOK,YAAP,CAAoBnC,GAAGgC,QAAH,CAAYC,OAAhC;AACAH,mBAAOM,eAAP;AACH;;AAED,aAAK9C,GAAL,CAAS8B,MAAT,GAAkB,QAAQpB,GAAGgC,QAAH,CAAYK,MAAtC;;AAEA,YAAIC,aAAatB,KAAKuB,SAAL,CAAeC,KAAf,CAAqBF,UAAtC;AACA,YAAIA,UAAJ,EAAgB;AACZ,iBAAK9C,QAAL,CAAc4B,MAAd,GAAuBkB,WAAWG,WAAX,EAAvB;AACA,gBAAIC,aAAaJ,WAAWK,YAAX,EAAjB;AACA,gBAAI,CAACD,UAAD,IAAeA,cAAc,EAAjC,EAAqC;AACjC,qBAAKjD,SAAL,CAAe2B,MAAf,GAAwB,eAAxB;AACH,aAFD,MAEM;AACF,qBAAK3B,SAAL,CAAe2B,MAAf,GAAwBkB,WAAWK,YAAX,EAAxB;AACH;AACJ;AACD,aAAKnC,UAAL;AACA,aAAKF,aAAL;AACA,YAAIsC,OAAO,KAAKhD,MAAL,CAAYiD,cAAZ,EAAX;AACA,YAAIC,SAAS3C,IAAIkB,WAAJ,CAAgB0B,cAAhB,EAAb;AACAH,aAAKI,MAAL,GAAc,MAAMF,MAApB;AACA,aAAKlD,MAAL,CAAYqD,cAAZ,CAA2BL,IAA3B;;AAEAzC,YAAIuB,SAAJ,CAAcwB,oBAAd;;AAEA,aAAKpC,gBAAL;AACH,KA7EI;;AA+ELF,0BAAqB,8BAASuC,MAAT,EAAgB;AACjC,YAAIpE,GAAGqE,GAAH,CAAOC,EAAP,IAAatE,GAAGqE,GAAH,CAAOE,UAAxB,EAAoC;AAChC,gBAAI,KAAKzD,aAAT,EAAwB;AACpB,qBAAKA,aAAL,CAAmB4B,MAAnB,GAA4B0B,MAA5B;AACH;AAEJ,SALD,MAKM;AACF,gBAAI,KAAKtD,aAAT,EAAwB;AACpB,qBAAKA,aAAL,CAAmB4B,MAAnB,GAA4B,KAA5B;AACH;AACJ;AACJ,KA1FI;;AA4FL8B,iBAAY,uBAAU;AAClBvC,aAAKK,WAAL,CAAiBmC,gBAAjB;AACH,KA9FI;;AAgGLC,sBAAiB,4BAAU;AACvBzD,WAAG0D,KAAH,CAASC,SAAT,CAAmB3D,GAAGgC,QAAH,CAAY4B,kBAAZ,CAA+BC,6BAAlD,EAAiF,CAAC,QAAD,CAAjF;AACA1D,YAAI2D,WAAJ,CAAgBC,UAAhB,CAA2B5D,IAAI6D,cAAJ,CAAmBC,kBAA9C,EAAkE,KAAlE;AACAjD,aAAKK,WAAL,CAAiB6C,kBAAjB,CAAoC,sBAApC,EAA4D,UAAUC,UAAV,EAAsB;AAC9E,gBAAIC,SAASD,WAAWpC,YAAX,CAAwB,kBAAxB,CAAb;AACAqC,mBAAOC,WAAP;AACH,SAHD;AAIH,KAvGI;;AAyGLC,oBAAe,0BAAU;AACrB,YAAIC,YAAY,UAAhB;AACA,YAAIC,aAAa,SAAbA,UAAa,GAAY;AACzB,gBAAIC,aAAa1F,GAAG2F,QAAH,CAAYC,QAAZ,EAAjB;AACA,gBAAIC,KAAKH,WAAWI,QAAX,CAAoB,CAApB,CAAT;AACA,gBAAIT,SAASQ,GAAG7C,YAAH,CAAgB,UAAhB,CAAb;AACAqC,mBAAOU,oBAAP;AACH,SALD;AAMA;AACA9D,aAAKK,WAAL,CAAiB0D,SAAjB,CAA2BR,SAA3B,EAAqCC,UAArC;AACH,KAnHI;;AAqHLQ,2BAAsB,iCAAU;AAC5B7E,YAAIkB,WAAJ,CAAgB4D,oBAAhB,CAAqC,QAArC;AACH,KAvHI;;AAyHLC,0BAAqB,gCAAU;AAC3B/E,YAAIuB,SAAJ,CAAcyD,WAAd;AACAnE,aAAKK,WAAL,CAAiB+D,gBAAjB;AACH,KA5HI;;AA8HLC,uBAAkB,6BAAU;AACxB,aAAKC,IAAL,CAAU7D,MAAV,GAAmB,KAAnB;AACAzB,WAAGC,kBAAH,CAAsBsF,OAAtB,CAA8BvF,GAAGI,SAAH,CAAaoF,kBAA3C;AACH,KAjII;;AAmILC,eAAU,qBAAY;AAClBzF,WAAGC,kBAAH,CAAsByF,WAAtB,CAAkC,IAAlC;AACH;;AArII,CAAT","file":"ddz_ceLaMenu.js","sourceRoot":"../../../../../../assets/Script/ComponentScript/window","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        avatar:cc.Node,\n        uid:cc.Label,\n        location:cc.Label,\n        signature:cc.Label,\n        goldNum:cc.Label,\n        diamondNum:cc.Label,\n\n        infoBg:cc.Node,\n\n        guideIconNode:cc.Node,\n\n        notifyRedDot:cc.Node,\n    },\n\n    onLoad:function(){\n        ty.NotificationCenter.listen(ddz.EventType.UPDATE_DIAMOND_NUMBER,this.updateDiamond,this);\n        ty.NotificationCenter.listen(ddz.EventType.UPDATE_COIN_NUMBER,this.updateCoin,this);\n        ty.NotificationCenter.listen(ddz.EventType.UPDATE_CELA_MENU_INFO,this.updateCeLaMunuInfo,this);\n        ty.NotificationCenter.listen(ddz.EventType.UPDATE_GUIDE_ICON_STATE, this.updateGuideNodeState, this);\n        ty.NotificationCenter.listen(ddz.EventType.UPDATE_COMMON_CONFIG, this.updateNotifyInfo, this);\n    },\n\n    updateDiamond:function(){\n        var num = hall.ME.udataInfo.diamondCount;\n        if (num) {\n            this.diamondNum.string = hall.GlobalFuncs.formatGold(num);\n        }else {\n            this.diamondNum.string = 0;\n        }\n    },\n\n    updateCoin:function(){\n        var number = hall.ME.getChip();\n        if (number) {\n            this.goldNum.string =  hall.GlobalFuncs.formatGold(number);\n        }else {\n            this.goldNum.string = 0;\n        }\n    },\n\n    updateNotifyInfo:function(){\n        this.notifyRedDot.active = (ddz.gameModel.notifyInfo.unReadCount + ddz.gameModel.messageCount) > 0;\n    },\n\n    updateCeLaMunuInfo:function(){\n        var wimdow = this.avatar.getComponent(\"Avatar\");\n        if(ty.UserInfo.userPic && ddz.gameModel.isLimit){\n            wimdow.setAvatarUrl(ty.UserInfo.userPic);\n            wimdow.hideNameDisplay();\n        }\n\n        this.uid.string = \"ID \" + ty.UserInfo.userId;\n\n        var personInfo = hall.gameWorld.model.personInfo;\n        if (personInfo) {\n            this.location.string = personInfo.getProvince();\n            var _signature = personInfo.getSignature();\n            if (!_signature || _signature == \"\") {\n                this.signature.string = \"该玩家很懒,什么也没有留下\";\n            }else {\n                this.signature.string = personInfo.getSignature();\n            }\n        }\n        this.updateCoin();\n        this.updateDiamond();\n        var size = this.infoBg.getContentSize();\n        var _sizeY = ddz.GlobalFuncs.getCeLabgSizeY();\n        size.height = 252 + _sizeY;\n        this.infoBg.setContentSize(size)\n\n        ddz.gameModel.getOldUserChipReward();\n\n        this.updateNotifyInfo();\n    },\n\n    updateGuideNodeState:function(isShow){\n        if (cc.sys.os == cc.sys.OS_ANDROID) {\n            if (this.guideIconNode) {\n                this.guideIconNode.active = isShow;\n            }\n\n        }else {\n            if (this.guideIconNode) {\n                this.guideIconNode.active = false;\n            }\n        }\n    },\n\n    onClickEdit:function(){\n        hall.GlobalFuncs.onEditPersonInfo();\n    },\n\n    onClickNotifyBtn:function(){\n        ty.BiLog.clickStat(ty.UserInfo.clickStatEventType.clickStatEventTypeButtonClick, [\"notice\"]);\n        ddz.AudioHelper.playEffect(ddz.EffectPath_mp3.button_click_sound, false);\n        hall.GlobalFuncs.showPopWinByPreFab('prefabs/notifyWindow', function (preFabNode) {\n            var window = preFabNode.getComponent('ddz_notifyWindow');\n            window.setListType();\n        });\n    },\n\n    onClickRankBtn:function(){\n        var sceneName = 'ddz_rank';\n        var onLaunched = function () {\n            var logicScene = cc.director.getScene();\n            var no = logicScene.children[0];\n            var window = no.getComponent(\"ddz_rank\");\n            window.showRankListForShare();\n        };\n        // cc.director.loadScene(sceneName,onLaunched);\n        hall.GlobalFuncs.pushScene(sceneName,onLaunched);\n    },\n\n    onClickShareCircleBtn:function(){\n        ddz.GlobalFuncs.showShareMomentsItem(\"invite\");\n    },\n\n    onClickAddDesktopBtn:function(){\n        ddz.gameModel.getShoreCut();\n        hall.GlobalFuncs.onCollectDeskTop();\n    },\n\n    onCloseMenuColumu:function(){\n        this.node.active = false;\n        ty.NotificationCenter.trigger(ty.EventType.GET_AD_MSG_SUCCESS);\n    },\n\n    onDestroy:function () {\n        ty.NotificationCenter.ignoreScope(this);\n    },\n\n});\n"]}