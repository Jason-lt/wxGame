{"version":3,"sources":["ddz_congratulation.js"],"names":["cc","Class","extends","Component","properties","progress","default","type","Node","buttons","rewardRichText","RichText","backButton","Button","topButton","bottomButton","bottomBtnText","aniNode","lizi01","lizi02","lizi03","lizi04","lotteryTimeS","richString","winnerCountNumber","onLoad","ddz","matchModel","matchUpdate","getMatchDes","ty","NotificationCenter","listen","EventType","UPDATE_MATCH_INFO","onUpDateMatchInfo","REMOVE_ALL_MATCH_RESULT_PANEL","shut","window","getComponent","setProgress","hall","adManager","canShowTableBanner","hideBannerAd","setOriginalData","AudioHelper","playMusic","winSize","director","getWinSize","bg","node","getChildByName","width","height","backButtonH","GlobalFuncs","getBackButtonPositionY","y","UPDATE_SHARE_STATE","playAnimationAfterShareWithType","GET_DIAMOND","getDiamond","UPDATE_BUTTON_TEXT","updateButtonText","HIDE_TOP_BUTTON","hideTopButton","gameModel","checkShareReward","Share","SharePointType","tongGuan","setRewardRichText","showResults","isShow","active","ani","Animation","once","startAniFinish","play","resetSystem","topBtnCallBack","preFabPath","comName","showPopWinByPreFab","preFabNode","hongBaoPanel","bottomBtnCallBack","playEffect","EffectPath_mp3","button_click_sound","shareKeywordReplace","allWinnerCount","shareType","onShareType","clickStatShareTypeCongratulation","shareWithType","isHide","aniState","info","getCurUpdateInfo","num","lotteryInfo","winnerCount","lotteryTime","string","setMcountDetail","mcountList","waitInfo","getCurWaitInfo","removeAni","trigger","REMOVE_TABLE_ANI","RESET_TABLE","removeFromParent","onBackButton","removeMatchResultPanel","gotoDdz","onRankButton","sceneName","onLaunched","logicScene","getScene","no","children","showRankListForShare","pushScene","onGetRewardButton","onDiamondButton","addTipsWindow","tips","_shareType","_string","getButtonTitle","that","parentScene","testArray","title","bottomType","setTitleContentAndButtons","LOGW","playZuanShi","data","pointId","leftCount","titileS","reultType","resultType","isBringVersion","MsgBoxManager","showToast","onClickCenterButton","removeSelfAni","matchResultPanel","destroy","ignoreScope","update","dt","onDestroy","_onPreDestroy","_super","resultTitle"],"mappings":"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","file":"ddz_congratulation.js","sourceRoot":"../../../../../../assets/Script/ComponentScript/window","sourcesContent":["\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        progress : {\n            default : null,\n            type : cc.Node\n        },\n        buttons:{\n            default : null,\n            type : cc.Node\n        },\n        rewardRichText : {\n            default : null,\n            type : cc.RichText\n        },\n\n        backButton : {\n            default : null,\n            type : cc.Button\n        },\n\n        topButton:cc.Button,\n\n        bottomButton:cc.Node,\n\n        bottomBtnText:cc.RichText,\n\n        aniNode: cc.Node,\n\n        lizi01: cc.Node,\n        lizi02: cc.Node,\n        lizi03: cc.Node,\n        lizi04: cc.Node,\n        // diamondCount : \"\",//用户钻石数量\n        // fightState : 1,//闯关状态(1、开始,2、某关中断,3、某关失败)\n        // nowFight :3,//当前闯关局数\n        lotteryTimeS:\"\",//平分奖金开奖描述\n        richString : \"\",\n        winnerCountNumber :\"1\"\n    },\n    onLoad : function() {\n        ddz.matchModel.matchUpdate();\n        ddz.matchModel.getMatchDes();\n        ty.NotificationCenter.listen(ddz.EventType.UPDATE_MATCH_INFO, this.onUpDateMatchInfo, this);\n        ty.NotificationCenter.listen(ddz.EventType.REMOVE_ALL_MATCH_RESULT_PANEL, this.shut, this);\n\n        var window = this.progress.getComponent('ddz_progress');\n        window.setProgress(6, true);\n\n        hall.adManager.canShowTableBanner = false;\n        hall.adManager.hideBannerAd();\n\n        this.setOriginalData();\n\n        ddz.AudioHelper.playMusic('/resources/sound/Victory.mp3', false);\n\n        var winSize = cc.director.getWinSize();\n\n        var bg = this.node.getChildByName('ddz_scene_bg_0');\n\n        // var window2 = this.buttons.getComponent('ddz_buttonList_2');\n        // var that = this;\n        // var topCallBck = function () {\n        //     var preFabPath = \"ani/hongbao/ddz_hongbao\";\n        //     var comName = \"ddz_hongbao\";\n        //     hall.GlobalFuncs.showPopWinByPreFab(preFabPath, function (preFabNode) {\n        //         ddz.hongBaoPanel = preFabNode.getComponent(comName);\n        //     });\n        // };\n        // var bottomCallBack = function () {\n        //     ddz.AudioHelper.playEffect(ddz.EffectPath_mp3.button_click_sound, false);\n        //     ddz.Share.shareKeywordReplace.allWinnerCount = this.winnerCountNumber;\n        //     var shareType = ddz.Share.onShareType.clickStatShareTypeCongratulation;\n        //     ddz.Share.shareWithType(shareType);\n        // };\n        // window2.setBtnCallBack(topCallBck,bottomCallBack);\n\n\n        //全屏适配\n        this.node.width = winSize.width;\n        this.node.height = winSize.height;\n\n        bg.width = winSize.width;\n        bg.height = winSize.height;\n\n        var backButtonH = ddz.GlobalFuncs.getBackButtonPositionY();\n        if (backButtonH){\n            this.backButton.node.y = backButtonH;\n        }\n        ty.NotificationCenter.listen(ddz.EventType.UPDATE_SHARE_STATE, this.playAnimationAfterShareWithType, this);\n        ty.NotificationCenter.listen(ty.EventType.GET_DIAMOND, this.getDiamond, this);\n        ty.NotificationCenter.listen(ty.EventType.UPDATE_BUTTON_TEXT, this.updateButtonText, this);\n        \n        ty.NotificationCenter.listen(ddz.EventType.HIDE_TOP_BUTTON, this.hideTopButton, this);\n\n        ddz.gameModel.checkShareReward(ddz.Share.SharePointType.tongGuan);\n\n        this.setRewardRichText();\n\n    },\n\n    showResults:function(isShow){\n        this.node.active = isShow;\n        if (isShow){\n            //先播放开始的,再播放循环的\n            var ani = this.aniNode.getComponent(cc.Animation);\n            ani.once('finished',  this.startAniFinish,    this);\n            ani.play('ddz_congratulation');\n\n            this.lizi01.getComponent('cc.ParticleSystem').resetSystem();\n            this.lizi02.getComponent('cc.ParticleSystem').resetSystem();\n            this.lizi03.getComponent('cc.ParticleSystem').resetSystem();\n            this.lizi04.getComponent('cc.ParticleSystem').resetSystem();\n        }\n    },\n\n    topBtnCallBack:function(){\n        var preFabPath = \"ani/hongbao/ddz_hongbao\";\n        var comName = \"ddz_hongbao\";\n        hall.GlobalFuncs.showPopWinByPreFab(preFabPath, function (preFabNode) {\n            ddz.hongBaoPanel = preFabNode.getComponent(comName);\n        });\n    },\n\n    bottomBtnCallBack:function(){\n        ddz.AudioHelper.playEffect(ddz.EffectPath_mp3.button_click_sound, false);\n        ddz.Share.shareKeywordReplace.allWinnerCount = this.winnerCountNumber;\n        var shareType = ddz.Share.onShareType.clickStatShareTypeCongratulation;\n        ddz.Share.shareWithType(shareType);\n    },\n    \n    hideTopButton:function(isHide){\n        if (isHide) {\n            this.topButton.node.active = false;\n            this.bottomButton.y = 0;\n        }else {\n            this.topButton.node.active = true;\n            this.bottomButton.y = -53;\n        }\n\n    },\n    \n    startAniFinish:function (aniState) {\n        var ani = this.aniNode.getComponent(cc.Animation);\n        ani.play('ddz_congratulation_xunhuan');\n    },\n\n    onUpDateMatchInfo:function () {\n        var info = ddz.matchModel.getCurUpdateInfo();\n        var num ;\n        if(info && info.lotteryInfo && info.lotteryInfo.winnerCount){\n            num = info.lotteryInfo.winnerCount;\n            this.winnerCountNumber = num;\n        }else {\n            this.winnerCountNumber = \"1\";\n        }\n        this.setRewardRichText();\n    },\n\n    setRewardRichText:function(){\n        var info = ddz.matchModel.getCurUpdateInfo();\n        var lotteryTime;\n        if(info && info.lotteryInfo && info.lotteryInfo.lotteryTime){\n            lotteryTime = info.lotteryInfo.lotteryTime;\n        }else {\n            lotteryTime = \"21:00\"\n        }\n        this.lotteryTimeS = \"<color=#ffffff>奖励将于 \"+lotteryTime+\" 发放</color>\";\n        this.rewardRichText.string  = this.lotteryTimeS;\n    },\n    \n    setMcountDetail:function (mcountList) {\n        this.setRewardRichText();\n        // \"mcount\":[\n        //     {\n        //         \"count\":1,\n        //         \"name\":\"钻石\",\n        //         \"iconPath\":\"http://ddz.dl.tuyoo.com/cdn37/hall/item/imgs/item_1311.png\",\n        //         \"icon\":\"item:1311\"\n        //     },\n        //     {\n        //         \"count\":600000,\n        //         \"name\":\"金币\",\n        //         \"iconPath\":\"http://ddz.dl.tuyoo.com/cdn37/hall/pdt/imgs/goods_t300k_2.png\",\n        //         \"icon\":\"user:chip\"\n        //     },\n        //     {\n        //         \"count\":5000,\n        //         \"name\":\"红包券\",\n        //         \"iconPath\":\"http://ddz.dl.tuyoo.com/cdn37/hall/item/imgs/coupon_1.png\",\n        //         \"icon\":\"user:coupon\"\n        //     }\n        // ],\n    },\n\n    setOriginalData : function () {\n        var waitInfo = ddz.matchModel.getCurWaitInfo();\n    },\n    removeAni : function () {\n        ty.NotificationCenter.trigger(ddz.EventType.REMOVE_TABLE_ANI);\n        ty.NotificationCenter.trigger(ddz.EventType.RESET_TABLE);\n        this.node.removeFromParent();\n    },\n\n    onBackButton: function(){\n        ddz.GlobalFuncs.removeMatchResultPanel(this);\n        this.removeAni();\n        hall.GlobalFuncs.gotoDdz();\n    },\n    onRankButton: function () {\n        this.removeAni();\n        var sceneName = 'ddz_rank';\n        var onLaunched = function () {\n            var logicScene = cc.director.getScene();\n            var no = logicScene.children[0];\n            var window = no.getComponent(\"ddz_rank\");\n            window.showRankListForShare();\n        };\n        // cc.director.loadScene(sceneName,onLaunched);\n        hall.GlobalFuncs.pushScene(sceneName,onLaunched);\n        \n    },\n    onGetRewardButton: function () {\n        this.removeAni();\n        var sceneName = 'ddz_reward';\n        // cc.director.loadScene(sceneName);\n        hall.GlobalFuncs.pushScene(sceneName);\n    },\n    onDiamondButton: function () {\n        this.removeAni();\n    },\n\n\n    addTipsWindow : function (tips) {\n        var _shareType = ddz.Share.onShareType.clickStatShareTypeCongratulation;\n        var _string = hall.GlobalFuncs.getButtonTitle(_shareType);\n        var preFabPath = \"prefabs/ddz_window_tips\";\n        var  comName = \"ddz_tipsWindow\";\n        var that = this;\n        hall.GlobalFuncs.showPopWinByPreFab(preFabPath, function (preFabNode) {\n            var window = preFabNode.getComponent(comName);\n            window.parentScene = that;\n            var testArray = [\n                {\n                    title :_string,\n                    bottomType : 0\n                }\n            ];\n            window.setTitleContentAndButtons(\"提示\",tips, testArray);\n        });\n    },\n\n    getDiamond:function(){\n        hall.LOGW(\"==\",\" file = [ddz_congratulation] fun = [getDiamond] \");\n        ddz.GlobalFuncs.playZuanShi();\n    },\n\n    updateButtonText:function(data){\n        if (data.pointId != ddz.Share.SharePointType.tongGuan){\n            return;\n        }\n        hall.LOGW(\"==\",\" file = [ddz_congratulation] fun = [updateButtonText] diamond = \" + data.leftCount);\n        var _shareType = ddz.Share.onShareType.clickStatShareTypeCongratulation;\n        var titileS = \"<color=#FFFFFF>\"+ hall.GlobalFuncs.getButtonTitle(_shareType) +\"</c>\";\n        if (!data.leftCount || data.leftCount <= 0) {\n            titileS = \"<color=#FFFFFF>\"+ hall.GlobalFuncs.getButtonTitle() +\"</c>\";\n        }else {\n            titileS = \"<color=#FFFFFF>\"+ hall.GlobalFuncs.getButtonTitle(_shareType) +\"</c>\";\n        }\n        // var comBtnList = this.buttons.getComponent('ddz_buttonList_2');\n        // comBtnList.setBottomTextWithButton(titileS);\n        this.bottomBtnText.string = titileS;\n    },\n\n    playAnimationAfterShareWithType : function (shareType) {\n        if (shareType && shareType != ddz.Share.onShareType.clickStatShareTypeCongratulation) {\n            return;\n        }\n        ddz.gameModel.checkShareReward(ddz.Share.SharePointType.tongGuan);\n        var reultType = ddz.Share.resultType;\n        switch (reultType) {\n            case 1:\n                if (!ddz.gameModel.isBringVersion) {\n                    hall.MsgBoxManager.showToast({title : '请分享到微信群哦~'});\n                }\n                break;\n            case 2:\n                if (!ddz.gameModel.isBringVersion) {\n                    hall.MsgBoxManager.showToast({title : '请不要频繁分享到一个群~'});\n                }\n                \n                break;\n            case 3:\n\n                break;\n            default:\n                break;\n        }\n\n        ddz.Share.resultType = 0;\n    },\n\n    onClickCenterButton:function(){\n        var shareType = ddz.Share.onShareType.clickStatShareTypeCongratulation;\n        ddz.Share.shareWithType(shareType);\n    },\n\n\n    shut:function () {\n        // if (hall.GlobalFuncs.isInAtScene(\"TableScene\")) {\n        //     hall.adManager.canShowTableBanner = true;\n        //     ty.NotificationCenter.trigger(ddz.EventType.SHOW_TABLE_BANNER);\n        // }\n        this.removeSelfAni();\n        ddz.matchResultPanel = null;\n        this.node.destroy();\n        ty.NotificationCenter.ignoreScope(this);\n    },\n\n    update : function(dt) {\n    },\n\n    onDestroy : function () {\n        // this.shareButton.node.off(\"click\",this.onShareButton,this);\n        ty.NotificationCenter.ignoreScope(this);\n    },\n\n    _onPreDestroy:function () {\n        this._super();\n        //删除动画\n        this.removeSelfAni();\n    },\n    removeSelfAni:function () {\n        if (this.resultTitle){\n            this.resultTitle.removeFromParent();\n        }\n        if (this.progress){\n            this.progress.removeFromParent();\n        }\n    }\n});\n"]}