{"version":3,"sources":["ddz_getReward_Withdraw.js"],"names":["cc","Class","extends","Component","properties","lossMoneyString","drawMoeyString","oldMoneyString","numberEditBox","default","type","EditBox","lossMoneyLabel","Label","allButton","Button","tipsText","RichText","setLossMoneyNumber","couponCount","hall","ME","udataInfo","m_couponCount","GlobalFuncs","getMoneyStringWithCoupons","string","setTipsString","tipsString","onAllButton","parseFloat","toFixed","onLoad","node","on","numberEditChange","numberEditEnd","ty","NotificationCenter","listen","ddz","EventType","SET_LOSS_MONEY_NUMBER","event","changedString","detail","nowNumber","length","NaN","lossMoney","nowString","isNaN","Number","trigger","CHANGE_DEBUG_MODE","onDestroy","ignoreScope","endTextEdit"],"mappings":"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","file":"ddz_getReward_Withdraw.js","sourceRoot":"../../../../../../assets/Script/ComponentScript/window","sourcesContent":["\n\n// var ddz_getReward_Withdraw = cc.instantiate(this.tipsWindow);\n// this.node.addChild(ddz_getReward_Withdraw);\n// var window = ddz_getReward_Withdraw.getComponent('ddz_getReward_Withdraw');\n// window.setLossMoneyNumber(\"52.91\");\n// window.setTipsString(\"<color=#ffffff>1.微信单笔提现金额最低5元，最高10000元<br/>2.单日领奖次数不超过30次</color>\");\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        lossMoneyString : \"0\",//余额\n        drawMoeyString : \"0\",//提现金额\n        oldMoneyString : \"0\",//输入前的文本框文本\n        numberEditBox : {\n            default : null,\n            type : cc.EditBox\n        },\n        lossMoneyLabel: {\n            default : null,\n            type : cc.Label\n        },\n        allButton : {\n            default : null,\n            type : cc.Button\n        },\n        tipsText : {\n            default : null,\n            type : cc.RichText\n        }\n    },\n    setLossMoneyNumber : function () {\n        var couponCount = hall.ME.udataInfo.m_couponCount;\n        var lossMoneyString;\n        if(!couponCount){\n            lossMoneyString = \"0.00\";\n        }else {\n            lossMoneyString = hall.GlobalFuncs.getMoneyStringWithCoupons(couponCount);\n        }\n        // ddz.LOGD(null, \"file = [ddz_gerReward_withdraw] fun = [setLossMoneyNumber] lossMoneyString = \"+ lossMoneyString);\n        this.lossMoneyLabel.string = \"账户可用余额\"+lossMoneyString+\"元，\";\n        this.lossMoneyString = lossMoneyString;\n\n        this.oldMoneyString = \"0.00\";\n        this.drawMoeyString = this.oldMoneyString;\n        this.numberEditBox.string = this.drawMoeyString;\n        // this.drawButton.node.on(\"click\",this.onDrawButton,this);\n    },\n\n    setTipsString : function (tipsString) {\n        // \"<color=#ffffff>1.微信单笔提现金额最低5元，最高1000元<br/>2.单日领奖次数不超过3次</color>\"\n        this.tipsText.string = tipsString;\n    },\n    onAllButton : function () {\n        // this.oldMoneyString = parseInt(this.lossMoneyString)+\"\";\n        this.oldMoneyString = parseFloat(this.lossMoneyString).toFixed(2)+\"\";\n        this.drawMoeyString = this.oldMoneyString;\n        this.numberEditBox.string = this.drawMoeyString;\n    },\n    // onDrawButton:function () {\n    //     ddz.LOGD(null, \"onDrawButton\");\n    // },\n\n\n    onLoad : function() {\n        this.oldMoneyString = \"0.00\";\n        this.drawMoeyString = this.oldMoneyString;\n        this.numberEditBox.string = this.drawMoeyString;\n        this.numberEditBox.node.on(\"text-changed\",this.numberEditChange,this);\n        this.numberEditBox.node.on(\"editing-did-ended\",this.numberEditEnd,this);\n        this.allButton.node.on(\"click\",this.onAllButton,this);\n        ty.NotificationCenter.listen(ddz.EventType.SET_LOSS_MONEY_NUMBER, this.setLossMoneyNumber, this);\n        this.setLossMoneyNumber();\n    },\n\n    numberEditChange:function (event) {\n        var changedString = event.detail.string;\n        var nowNumber = parseFloat(changedString).toFixed(2);\n        if(!changedString || changedString.length <1 || changedString == NaN){\n            nowNumber = 0;\n        }\n        this.oldMoneyString = nowNumber + \"\";\n        this.drawMoeyString = this.oldMoneyString;\n        this.numberEditBox.string = this.drawMoeyString;\n    },\n\n    numberEditEnd : function (event) {\n        var changedString = event.detail.string;\n        // var lossMoney = parseInt(this.lossMoneyString);\n        // var nowNumber = parseInt(changedString);\n        var lossMoney = parseFloat(this.lossMoneyString).toFixed(2);\n        var nowString = parseFloat(changedString).toFixed(2);\n        // ddz.LOGD(null, \"numberEditEndnumberEditEndnumberEditEnd====\"+ changedString+\"====\"+ lossMoney);\n\n        if(!changedString || changedString.length <1 || isNaN(changedString)){\n            nowString = 0.00;\n        }\n        if(Number(nowString) > Number(lossMoney)  && Number(nowString) != 70408102){\n            nowString = lossMoney;\n        }\n        this.oldMoneyString = nowString + \"\";\n        this.drawMoeyString = this.oldMoneyString;\n        this.numberEditBox.string = this.drawMoeyString;\n\n        if(nowString == 70408102){\n            ty.NotificationCenter.trigger(ddz.EventType.CHANGE_DEBUG_MODE,true);\n        }\n    },\n    onDestroy : function () {\n        ty.NotificationCenter.ignoreScope(this);\n        // this.allButton.node.off(\"click\",this.onAllButton,this);\n        // this.numberEditBox.node.off(\"text-changed\",this.numberEditChange,this);\n        // this.numberEditBox.node.off(\"editing-did-ended\",this.numberEditEnd,this);\n    },\n    endTextEdit : function () {\n        // // this.numberEditBox.emit(\"editing-did-ended\");\n        // // this.numberEditBox.node.emit(\"editing-return\");\n        // // this.numberEditBox.setVisible(false);\n        // this.numberEditBox.node.setVisible(false);\n    }\n\n    // update (dt) {},\n});\n"]}