{"version":3,"sources":["ddz_diamond_windows.js"],"names":["cc","Class","extends","Component","properties","banner","Node","betRich","RichText","shareRedPacket","Prefab","panel","btnText","personalAssets","diamondNode","videoNode","videoBtnSpr","Sprite","diamondBntSpr","btnSpriteFrame","SpriteFrame","videoBtnText","diamondBntText","seeVideoBtn","Button","shareBtn","videoButtonText","redDot","onLoad","that","hall","GlobalFuncs","btnScaleEffect","node","active","ty","NotificationCenter","listen","ddz","EventType","UPDATE_SHARE_STATE","playAnimationAfterShareWithType","REMOVE_WINDOW_ANI","onClose","_shareType","Share","onShareType","clickStatShareTypeGetDiamondHall","string","getButtonTitle","setPersonalAssets","canPlayVideo","wimdow","getComponent","updateInfo","type","reultType","resultType","gameModel","isBringVersion","MsgBoxManager","showToast","title","updateWindowInfo","state","AdManagerTYWX","getAdNodeByTag","hideAdNode","spriteFrame","onShareBtn","BiLog","clickStat","UserInfo","clickStatEventType","clickStatEventTypeButtonClick","shareWithType","updateWatchVideoState","result","adId","videoId","status","mail","times","finishShowRewardVideo","isEnded","getWatchVideoReward","queryWatchVideoReward","errorShowRewardVideo","parArr","parseInt","finishGetRewardVideo","rewards","itemId","playZuanShi","count","onClcikSeeVideoBtn","TCP","connectStatus","CONNECT_STATUS_OK","LOGD","adManager","showRewardedVideo","onClickDiamondBtn","onClickVideoBtn","updateShareInfo","data","newUserMulti","setBtnRichText","trigger","UPDATE_REWARD_COUNT","inviteeList","length","_index","_inviteeList","runOneFun","_playerData","shift","com","setSharePeopleInfo","instantiate","addChild","bigReward","bigWindow","setBigReward","requestAnimationFrame","_bet","removeLoopAni","ani","Animation","stop","stopAllActions","shut","destroy","onDestroy","ignoreScope","showAdNode","ddz_dayWelfare"],"mappings":"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","file":"ddz_diamond_windows.js","sourceRoot":"../../../../../../assets/Script/ComponentScript/window","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/class/index.html\n// Learn Attribute:\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/reference/attributes/index.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/life-cycle-callbacks/index.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        banner:cc.Node,\n        betRich:cc.RichText,\n        shareRedPacket:cc.Prefab,\n        panel:cc.Node,\n        btnText:cc.RichText,\n        personalAssets : cc.Node,\n\n        diamondNode:cc.Node,\n        videoNode:cc.Node,\n\n        videoBtnSpr:cc.Sprite,\n        diamondBntSpr:cc.Sprite,\n\n        btnSpriteFrame:[cc.SpriteFrame],\n\n        videoBtnText:cc.RichText,\n        diamondBntText:cc.RichText,\n\n        seeVideoBtn:cc.Button,\n        shareBtn:cc.Button,\n\n        videoButtonText:cc.RichText,\n\n        redDot:cc.Node,\n\n    },\n\n    onLoad:function(){\n        var that = this;\n        // this.scheduleOnce(function () {\n        //     var ani = that.banner.getComponent(cc.Animation);\n        //     ani.play('btnTick');\n        // }, 1);\n\n        // hall.GlobalFuncs.btnScaleEffect(this.seeVideoBtn.node,1.13);\n        hall.GlobalFuncs.btnScaleEffect(this.shareBtn.node,1.13);\n        this.betRich.node.active = false;\n        ty.NotificationCenter.listen(ddz.EventType.UPDATE_SHARE_STATE, this.playAnimationAfterShareWithType, this);\n        ty.NotificationCenter.listen(ddz.EventType.REMOVE_WINDOW_ANI, this.onClose, this);\n\n        // ty.NotificationCenter.listen(ddz.EventType.UPDATE_WATCH_VIDEO_STATUS, this.updateWatchVideoState,this);\n        // ty.NotificationCenter.listen(ddz.EventType.REWARD_VIDEO_COMPLETE,this.finishShowRewardVideo,this);\n        // ty.NotificationCenter.listen(ddz.EventType.REWARD_VIDEO_COMPLETE_ERROR,this.errorShowRewardVideo,this);\n        // ty.NotificationCenter.listen(ddz.EventType.UPDATE_VIDEO_REWARD,this.finishGetRewardVideo,this);\n        \n        var _shareType = ddz.Share.onShareType.clickStatShareTypeGetDiamondHall;\n        this.btnText.string = \"<color=#E54D42>\"+ hall.GlobalFuncs.getButtonTitle(_shareType) +\"</c>\";\n        // ddz.gameModel.queryWatchVideoReward();\n        this.setPersonalAssets();\n\n        this.canPlayVideo = true;\n    },\n\n    setPersonalAssets:function () {\n        // 个人财产信息\n        var wimdow = this.personalAssets.getComponent(\"personalAssets\");\n        wimdow.updateInfo();\n    },\n\n    playAnimationAfterShareWithType : function (type) {\n        if (type && type != ddz.Share.onShareType.clickStatShareTypeGetDiamondHall) {\n            return;\n        }\n        var reultType = ddz.Share.resultType;\n        switch (reultType) {\n            case 1:\n                if (!ddz.gameModel.isBringVersion) {\n                    hall.MsgBoxManager.showToast({title : '请分享到微信群哦~'});\n                }\n                break;\n            case 2:\n                if (!ddz.gameModel.isBringVersion) {\n                    hall.MsgBoxManager.showToast({title : '请不要频繁分享到一个群~'});\n                }\n                break;\n            case 3:\n\n                break;\n            default:\n                break;\n        }\n\n        ddz.Share.resultType = 0;\n    },\n\n    updateWindowInfo:function(state){\n        if (hall.AdManagerTYWX && hall.AdManagerTYWX.getAdNodeByTag(\"myFirstAdNode\")) {\n            hall.AdManagerTYWX.getAdNodeByTag(\"myFirstAdNode\").hideAdNode();\n        }\n\n        if (state == 1) {   //钻石\n            // this.diamondNode.active = true;\n            // this.videoNode.active = false;\n            this.diamondBntSpr.spriteFrame = this.btnSpriteFrame[0];\n            this.diamondBntText.string = \"<color=#ffffff>钻石红包</c>\";\n            this.videoBtnSpr.spriteFrame = this.btnSpriteFrame[1];\n            this.videoBtnText.string = \"<color=#9C7343>看视频</color>\";\n            this.redDot.active = false;\n        }else if (state == 2) { //看视频\n            // this.diamondNode.active = false;\n            // this.videoNode.active = true;\n            // this.diamondBntSpr.spriteFrame = this.btnSpriteFrame[1];\n            // this.diamondBntText.string = \"<color=#9C7343>钻石红包</c>\";\n            // this.videoBtnSpr.spriteFrame = this.btnSpriteFrame[0];\n            // this.videoBtnText.string = \"<color=#ffffff>看视频</color>\";\n        }\n    },\n\n    onShareBtn:function(){\n        ty.BiLog.clickStat(ty.UserInfo.clickStatEventType.clickStatEventTypeButtonClick,\n            [\"diamondShare\"]);\n        ddz.Share.shareWithType(ddz.Share.onShareType.clickStatShareTypeGetDiamondHall);\n    },\n\n\n    updateWatchVideoState : function (result) {\n        this.adId = result.videoId;\n        if(result.status == 0){\n            this.canPlayVideo = false;\n            this.mail = result.mail;\n            this.videoButtonText.string = \"<color=#ED4824>看视频领取(\"+ result.times[0] +\"/\"+ result.times[1]+\")</c>\";\n        }else if(result.status == 1){\n            this.videoButtonText.string = \"<color=#ED4824>看视频领取(\"+ result.times[0] +\"/\"+ result.times[1]+\")</c>\";\n            this.canPlayVideo = true;\n\n        }\n    },\n    finishShowRewardVideo : function (isEnded) {\n        if(isEnded){\n            ddz.gameModel.getWatchVideoReward();\n            ddz.gameModel.queryWatchVideoReward();\n        }\n        // this.playRideo = false;\n    },\n    errorShowRewardVideo : function (parArr) {\n        this.finishShowRewardVideo(parseInt(parArr[1]))\n    },\n\n    finishGetRewardVideo : function (result) {\n        if(result.rewards){\n            var rewards = result.rewards;\n            if(rewards.itemId == \"item:1311\"){\n                ddz.GlobalFuncs.playZuanShi(false,this,rewards.count,false);\n            }else {\n                ddz.GlobalFuncs.playZuanShi(false,this,rewards.count,true);\n            }\n        }else {\n            if (result.mail) {\n                hall.MsgBoxManager.showToast({title : result.mail});\n            }\n        }\n        this.videoButtonText.string = \"<color=#ED4824>看视频领取(\"+ result.times[0] +\"/\"+ result.times[1]+\")</c>\";\n    },\n\n\n    onClcikSeeVideoBtn:function(){\n        if (ty.TCP.connectStatus != ty.TCP.CONNECT_STATUS_OK){\n            hall.MsgBoxManager.showToast({title : \"正在登录，请稍候\"});\n            ddz.LOGD(null, \"TCP is not ok! Please wait!\");\n            return;\n        }\n\n        ty.BiLog.clickStat(ty.UserInfo.clickStatEventType.clickStatEventTypeButtonClick,\n            [\"watchVideo\",\"diamond\"]);\n\n        if (this.canPlayVideo) {\n            hall.adManager.showRewardedVideo(this.adId,\"diamond\");\n        }else {\n            if (this.mail){\n                hall.MsgBoxManager.showToast({title : this.mail});\n            }\n        }\n    },\n\n    onClickDiamondBtn:function(){\n        this.updateWindowInfo(1);\n    },\n\n    onClickVideoBtn:function(){\n        this.updateWindowInfo(2);\n    },\n\n    updateShareInfo:function(data){\n        if (data.newUserMulti){\n            this.setBtnRichText(data.newUserMulti);\n        }\n        ty.NotificationCenter.trigger(ddz.EventType.UPDATE_REWARD_COUNT,data);\n        if (data.inviteeList && data.inviteeList.length > 0) {\n            var that = this;\n            var _index = 0;\n            var _inviteeList = data.inviteeList;\n            var runOneFun = function () {\n\n                if (_index < 5) {\n                    if (_inviteeList.length > 0){\n                        var _playerData = _inviteeList.shift();\n                        if (that[\"shareRedPacket_\"+_index]) {\n                            var com = that[\"shareRedPacket_\"+_index].getComponent('shareRedPacket');\n                            com.setSharePeopleInfo(_playerData);\n                        }else {\n                            that[\"shareRedPacket_\"+_index] = cc.instantiate(that.shareRedPacket);\n\n                            that.panel.addChild(that[\"shareRedPacket_\"+_index]);\n                            var com = that[\"shareRedPacket_\"+_index].getComponent('shareRedPacket');\n                            com.setSharePeopleInfo(_playerData);\n                        }\n                    }\n\n                }else if (_index == 5){\n                    if (data.bigReward) {\n                        if (that.bigWindow) {\n                            var com = that.bigWindow.getComponent('shareRedPacket');\n                            if (com) {\n                                com.setBigReward(data.bigReward);\n                            }\n                        }else {\n                            that.bigWindow = cc.instantiate(that.shareRedPacket);\n                            that.panel.addChild(that.bigWindow);\n                            var com = that.bigWindow.getComponent('shareRedPacket');\n                            com.setBigReward(data.bigReward);\n                        }\n\n                    }\n                }\n                _index++;\n                requestAnimationFrame(runOneFun);\n            };\n            runOneFun();\n        }\n    },\n\n    setBtnRichText:function(_bet) {\n        if (_bet > 1) {\n            this.betRich.node.active = true;\n            this.betRich.string = \"<color=#9C7343>新玩家点击，可获得</c><color=#ED4824><size=30>\" + _bet + \"倍奖励</color>\";\n        }else {\n            this.betRich.node.active = false;\n        }\n    },\n\n    removeLoopAni:function () {\n        var ani = this.banner.getComponent(cc.Animation);\n        ani.stop();\n\n        this.seeVideoBtn.node.stopAllActions();\n        this.shareBtn.node.stopAllActions();\n    },\n\n    shut:function () {\n        this.removeLoopAni();\n        this.node.destroy();\n    },\n\n    onDestroy : function () {\n        ty.NotificationCenter.ignoreScope(this);\n        if (hall.AdManagerTYWX.getAdNodeByTag(\"myFirstAdNode\")) {\n            hall.AdManagerTYWX.getAdNodeByTag(\"myFirstAdNode\").showAdNode();\n        }\n    },\n\n    onClose:function(){\n        this.shut();\n        ddz.ddz_dayWelfare = null;\n    },\n});\n"]}