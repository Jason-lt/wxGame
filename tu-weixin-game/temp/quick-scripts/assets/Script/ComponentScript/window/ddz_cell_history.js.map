{"version":3,"sources":["ddz_cell_history.js"],"names":["cc","Class","extends","Component","properties","bgBtn","default","type","Button","playLabel","Label","timeLabel","countLabel","player_1","Node","player_2","player_3","onLoad","node","on","showGameDetail","addDataWithObject","objc","setDetailInformation","resultMap","historyDdata","ddz","historyModel","getHistoryData","detailsModel","parseResults","index","results","myIndex","getMySeatIndex","LOGD","leftindex","GlobalFuncs","getPreIndex","rightindex","GetNextIndex","avatars","updateAcatar","setPlayMode","titleS","updateTimer","timeS","setSumScore","score","_player","_url","isMy","com","getComponent","gameModel","isLimit","setAvatarUrl","hideNameDisplay","_playMode","playingString","string","_timer","parseFriendRound","curRound","totalRound","setMySeatIndex","mySeatIndex","setIsHisTory","hall","onShowDetail"],"mappings":"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","file":"ddz_cell_history.js","sourceRoot":"../../../../../../assets/Script/ComponentScript/window","sourcesContent":["\n\n/*\n ➢\t好友房战绩弹窗展示一轮牌局信息：用户头像、时间、牌局类型和用户本人分数结算\n ➢\t好友房战绩展示最近十条\n ➢\t点击具体战绩，打开对局详情弹窗\n ➢\t弹窗为叠加展示，即关闭对局详情展示好友房战绩。关闭好友房战绩，展示创建房间牌桌。\n */\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n\n        bgBtn: {\n            default : null,\n            type : cc.Button\n        },\n        playLabel: {\n            default : null,\n            type : cc.Label\n        },\n        timeLabel: {\n            default : null,\n            type : cc.Label\n        },\n        countLabel: {\n            default : null,\n            type : cc.Label\n        },\n\n        player_1 : cc.Node,\n\n        player_2 : cc.Node,\n\n        player_3 : cc.Node,\n    },\n\n    onLoad : function () {\n        this.bgBtn.node.on(\"click\",this.showGameDetail,this);\n    },\n\n    addDataWithObject : function (objc) {\n        this.setDetailInformation(objc);\n    },\n\n    setDetailInformation:function (resultMap) {\n        var historyDdata = ddz.historyModel.getHistoryData();\n        ddz.detailsModel.parseResults(historyDdata[this.index].results);\n        var myIndex = ddz.historyModel.getMySeatIndex(this.index);\n        ddz.LOGD(\"\", \"file = [ddz_cell_history] fun = [setDetailInformation] myIndex = \" + myIndex);\n        var leftindex = ddz.GlobalFuncs.getPreIndex(myIndex);\n        var rightindex = ddz.GlobalFuncs.GetNextIndex(myIndex);\n\n        var avatars = resultMap.avatars;\n\n        this.updateAcatar(this.player_1,avatars[myIndex-1],true);\n        this.updateAcatar(this.player_2,avatars[rightindex-1]);\n        this.updateAcatar(this.player_3,avatars[leftindex-1]);\n\n        this.setPlayMode(resultMap.titleS);\n        this.updateTimer(resultMap.timeS);\n        this.setSumScore(resultMap.score);\n\n    },\n\n    updateAcatar:function(_player,_url,isMy){\n\n        var com = _player.getComponent('Avatar');\n        if (isMy) {\n            if (ddz.gameModel.isLimit) {\n                com.setAvatarUrl(_url);\n            }else {\n                com.setAvatarUrl();\n            }\n        }else {\n            com.setAvatarUrl(_url);\n        }\n        \n        com.hideNameDisplay();\n    },\n\n    setPlayMode:function(_playMode){\n        \n        var playingString = \"经典玩法\";\n        switch (_playMode){\n            case \"happy\" : playingString = \"欢乐玩法\";break;\n            case \"wild\" : playingString = \"癞子玩法\";break;\n            default : playingString = \"经典玩法\";\n        }\n\n        this.playLabel.string = playingString;\n    },\n\n    updateTimer:function(_timer){\n        this.timeLabel.string = _timer;\n    },\n\n    setSumScore:function(score){\n        this.countLabel.string = score;\n    },\n\n    showGameDetail:function(){\n        ddz.LOGD(\"\", \"file = [ddz_window_history] fun = [showGameDetail] this.index = \" + this.index);\n        var historyDdata = ddz.historyModel.getHistoryData();\n        ddz.detailsModel.parseResults(historyDdata[this.index].results);\n        ddz.detailsModel.parseFriendRound(historyDdata[this.index].curRound,historyDdata[this.index].totalRound);\n        ddz.detailsModel.setMySeatIndex(historyDdata[this.index].mySeatIndex);\n        ddz.detailsModel.setIsHisTory(true);\n        hall.GlobalFuncs.onShowDetail();\n    },\n\n});\n"]}