{"version":3,"sources":["collectDeskTop.js"],"names":["cc","Class","extends","Component","ctor","_TAG","properties","bgBtn","default","type","Button","closeBtn","hand","Node","yindao","Prefab","onLoad","isAction","animation","getComponent","Animation","anim1","getAnimationState","play","backButtonH","ddz","GlobalFuncs","getBackButtonPositionY","y","that","on","yindaoAni","instantiate","addChild","ani","clipName","getClips","name","anim","once","playEndAnimation","removeFromParent","node","destroy","onClose","event"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;AAELC,UAAO,gBAAY;AACf,aAAKC,IAAL,GAAY,gBAAZ;AAEH,KALI;;AAOLC,gBAAY;;AAERC,eAAO;AACHC,qBAAU,IADP;AAEHC,kBAAOT,GAAGU;AAFP,SAFC;;AAORC,kBAAW;AACPH,qBAAU,IADH;AAEPC,kBAAOT,GAAGU;AAFH,SAPH;;AAYRE,cAAOZ,GAAGa,IAZF;;AAcRC,gBAAOd,GAAGe;AAdF,KAPP;;AAwBLC,YAAQ,kBAAW;AACf,aAAKC,QAAL,GAAgB,IAAhB;AACA,YAAIC,YAAY,KAAKC,YAAL,CAAkBnB,GAAGoB,SAArB,CAAhB;AACA,YAAIC,QAAQH,UAAUI,iBAAV,CAA4B,gBAA5B,CAAZ;AACAD,cAAME,IAAN;AACA,YAAIC,cAAcC,IAAIC,WAAJ,CAAgBC,sBAAhB,EAAlB;AACA,YAAIH,WAAJ,EAAgB;AACZ,iBAAKZ,IAAL,CAAUgB,CAAV,GAAcJ,cAAc,EAA5B;AACH;AACD,YAAIK,OAAO,IAAX;AACAR,cAAMS,EAAN,CAAS,UAAT,EAAqB,YAAU;AAC3BD,iBAAKZ,QAAL,GAAgB,KAAhB;AACAY,iBAAKE,SAAL,GAAiB/B,GAAGgC,WAAH,CAAe,KAAKlB,MAApB,CAAjB;AACAe,iBAAKjB,IAAL,CAAUqB,QAAV,CAAmBJ,KAAKE,SAAxB;AACA,gBAAIG,MAAML,KAAKE,SAAL,CAAeZ,YAAf,CAA4BnB,GAAGoB,SAA/B,CAAV;AACA,gBAAIe,WAAWD,IAAIE,QAAJ,GAAe,CAAf,EAAkBC,IAAjC;AACA,gBAAIC,OAAOJ,IAAIZ,iBAAJ,CAAsBa,QAAtB,CAAX;AACAG,iBAAKC,IAAL,CAAU,UAAV,EAAsB,YAAY,CACjC,CADD;AAEAD,iBAAKf,IAAL;AACH,SAVD,EAUE,IAVF;AAWH,KA7CI;;AA+CLiB,sBAAmB,4BAAY;AAC3B,aAAKvB,QAAL,GAAgB,KAAhB;AACA,YAAI,KAAKc,SAAT,EAAoB;AAChB,iBAAKA,SAAL,CAAeU,gBAAf;AACH;AACD,aAAKC,IAAL,CAAUC,OAAV;AACH,KArDI;;AAuDLC,aAAQ,iBAAUC,KAAV,EAAiB;AACrB,YAAI,KAAK5B,QAAT,EAAmB;AACf;AACH;AACD,aAAKuB,gBAAL;AACH;;AA5DI,CAAT","file":"collectDeskTop.js","sourceRoot":"../../../../../../assets/Script/ComponentScript/window","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/class/index.html\n// Learn Attribute:\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/reference/attributes/index.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/life-cycle-callbacks/index.html\n\n/**\n * 收藏桌面引导\n */\ncc.Class({\n    extends: cc.Component,\n    ctor : function () {\n        this._TAG = \"collectDeskTop\";\n\n    },\n\n    properties: {\n\n        bgBtn: {\n            default : null,\n            type : cc.Button\n        },\n\n        closeBtn : {\n            default : null,\n            type : cc.Button\n        },\n\n        hand : cc.Node,\n\n        yindao:cc.Prefab,\n    },\n\n    onLoad :function() {\n        this.isAction = true;\n        var animation = this.getComponent(cc.Animation);\n        var anim1 = animation.getAnimationState('tipsWindowNode');\n        anim1.play();\n        var backButtonH = ddz.GlobalFuncs.getBackButtonPositionY();\n        if (backButtonH){\n            this.hand.y = backButtonH - 50;\n        }\n        var that = this;\n        anim1.on('finished', function(){\n            that.isAction = false;\n            that.yindaoAni = cc.instantiate(this.yindao);\n            that.hand.addChild(that.yindaoAni);\n            var ani = that.yindaoAni.getComponent(cc.Animation);\n            var clipName = ani.getClips()[0].name;\n            var anim = ani.getAnimationState(clipName);\n            anim.once(\"finished\", function () {\n            });\n            anim.play();\n        },this);\n    },\n\n    playEndAnimation : function () {\n        this.isAction = false;\n        if (this.yindaoAni) {\n            this.yindaoAni.removeFromParent();\n        }\n        this.node.destroy();\n    },\n\n    onClose:function (event) {\n        if (this.isAction) {\n            return;\n        }\n        this.playEndAnimation();\n    },\n\n\n});\n"]}