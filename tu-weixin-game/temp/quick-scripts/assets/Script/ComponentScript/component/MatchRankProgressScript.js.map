{"version":3,"sources":["MatchRankProgressScript.js"],"names":["cc","Class","extends","Component","ctor","properties","subPrefab","Prefab","onLoad","initWithPars","forwardIndex","stages_P","playAni","_forwardIndex","_stages","startIndex","endIndex","length","lsLen","stage","stageNode","obj","viewtype","needShowRight","stageCom","i","createNewStage","parent","node","index","numLeft","totalUserCount","numRight","riseUserCount","type","listLen","needShowLeft","getComponent","initWith","forward","instantiate","onDestroy"],"mappings":";;;;;;AAAA;;;AAGAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,UAAK,gBAAY,CAChB,CAJI;;AAMLC,gBAAY;AACRC,mBAAYN,GAAGO;AADP,KANP;;AAULC,YAAO,kBAAY,CAElB,CAZI;;AAcLC,kBAAa,sBAAUC,YAAV,EAAwBC,QAAxB,EAAkCC,OAAlC,EAA2C;AACpD,aAAKC,aAAL,GAAqBH,YAArB;AACA,aAAKI,OAAL,GAAeH,QAAf;;AAEA,YAAII,aAAc,KAAKF,aAAL,GAAqB,CAAtB,GAA2B,CAA5C;AACA,YAAIE,aAAa,CAAjB,EAAmB;AACfA,yBAAa,CAAb;AACH;;AAED,YAAIC,WAAWD,aAAa,CAA5B;AACA,YAAIC,WAAW,KAAKF,OAAL,CAAaG,MAA5B,EAAmC;AAC/BD,uBAAW,KAAKF,OAAL,CAAaG,MAAxB;AACAF,yBAAaC,WAAW,CAAxB;AACA,gBAAID,aAAa,CAAjB,EAAmB;AACfA,6BAAa,CAAb;AACH;AACJ;;AAED,YAAIG,QAAQ,KAAKJ,OAAL,CAAaG,MAAzB;;AAEA;AACA,YAAIE,KAAJ,EAAWC,SAAX,EAAsBC,GAAtB,EAA2BC,QAA3B,EAAqCC,aAArC,EAAoDC,QAApD;AACA,aAAK,IAAIC,IAAIT,WAAS,CAAtB,EAAyBS,KAAIV,UAA7B,EAA0CU,GAA1C,EAA8C;AAC1CN,oBAAQ,KAAKL,OAAL,CAAaW,CAAb,CAAR;AACAL,wBAAY,KAAKM,cAAL,EAAZ;AACAN,sBAAUO,MAAV,GAAmB,KAAKC,IAAxB;AACAN,uBAAWH,MAAMU,KAAN,GAAc,KAAKhB,aAAnB,GAAmC,CAAnC,GAAuC,CAAlD;;AAEAU,4BAAgBE,IAAIP,QAAM,CAAV,IAAgBO,KAAKT,WAAW,CAAhD;;AAEAK,kBAAM;AACFS,yBAAWX,MAAMY,cADf;AAEFC,0BAAWb,MAAMc,aAFf;AAGFC,sBAAOZ,QAHL;AAIFa,yBAAUjB,KAJR;AAKFkB,8BAAgBX,KAAKV,UALnB;AAMFQ,+BAAgBA;AANd,aAAN;AAQAC,uBAAWJ,UAAUiB,YAAV,CAAuB,gBAAvB,CAAX;AACAb,qBAASc,QAAT,CAAkBjB,GAAlB;AACA,gBAAIF,MAAMU,KAAN,IAAe,KAAKhB,aAApB,IAAqCD,OAAzC,EAAiD;AAC7CY,yBAASe,OAAT;AACH;AAEJ;AACJ,KA3DI;;AA6DL;;;AAGAb,oBAAiB,0BAAY;AACzB,YAAIN,SAAJ;AACAA,oBAAYpB,GAAGwC,WAAH,CAAe,KAAKlC,SAApB,CAAZ;AACA,eAAOc,SAAP;AACH,KApEI;;AAsELqB,eAAU,qBAAY,CAErB;;AAED;AA1EK,CAAT","file":"MatchRankProgressScript.js","sourceRoot":"../../../../../../assets/Script/ComponentScript/component","sourcesContent":["/**\n * 比赛进度条\n */\ncc.Class({\n    extends: cc.Component,\n\n    ctor:function () {\n    },\n\n    properties: {\n        subPrefab : cc.Prefab\n    },\n\n    onLoad:function () {\n\n    },\n\n    initWithPars:function (forwardIndex, stages_P, playAni) {\n        this._forwardIndex = forwardIndex;\n        this._stages = stages_P;\n\n        var startIndex = (this._forwardIndex - 1) - 1;\n        if (startIndex < 0){\n            startIndex = 0;\n        }\n\n        var endIndex = startIndex + 4;\n        if (endIndex > this._stages.length){\n            endIndex = this._stages.length;\n            startIndex = endIndex - 4;\n            if (startIndex < 0){\n                startIndex = 0;\n            }\n        }\n\n        var lsLen = this._stages.length;\n\n        //生成进度条\n        var stage, stageNode, obj, viewtype, needShowRight, stageCom;\n        for (var i = endIndex-1; i >=startIndex ; i--){\n            stage = this._stages[i];\n            stageNode = this.createNewStage();\n            stageNode.parent = this.node;\n            viewtype = stage.index < this._forwardIndex ? 1 : 0;\n\n            needShowRight = i < lsLen-1 && (i == endIndex - 1);\n\n            obj = {\n                numLeft  : stage.totalUserCount,\n                numRight : stage.riseUserCount,\n                type : viewtype,\n                listLen : lsLen,\n                needShowLeft  : i == startIndex,\n                needShowRight : needShowRight\n            };\n            stageCom = stageNode.getComponent('ProgressBarSub');\n            stageCom.initWith(obj);\n            if (stage.index == this._forwardIndex && playAni){\n                stageCom.forward();\n            }\n\n        }\n    },\n\n    /**\n     * 创建一个新节点(也有可能是从池中取出来的)\n     */\n    createNewStage : function () {\n        var stageNode;\n        stageNode = cc.instantiate(this.subPrefab);\n        return stageNode;\n    },\n\n    onDestroy:function () {\n\n    }\n\n    // update (dt) {},\n});\n"]}