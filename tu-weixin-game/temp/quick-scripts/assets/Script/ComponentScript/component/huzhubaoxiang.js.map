{"version":3,"sources":["huzhubaoxiang.js"],"names":["cc","Class","extends","Component","properties","haveReward","Node","onLoad","that","ty","NotificationCenter","listen","ddz","EventType","IS_HAVE_REWARD","isHaveReward","scheduleOnce","playLoopAni","openBox","isClickOpenBox","gameModel","getOpenBox","data","_count","rewards","_rewards","active","stopLoopAni","animationCom","node","getComponent","Animation","ani","getAnimationState","stop","play","onDestroy","ignoreScope"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,oBAAWL,GAAGM;;AADN,KAHP;;AAQLC,YAAO,kBAAU;AACb,YAAIC,OAAO,IAAX;AACAC,WAAGC,kBAAH,CAAsBC,MAAtB,CAA6BC,IAAIC,SAAJ,CAAcC,cAA3C,EAA2D,KAAKC,YAAhE,EAA6E,IAA7E;AACA,aAAKC,YAAL,CAAkB,YAAY;AAC1BR,iBAAKS,WAAL;AACH,SAFD,EAEG,CAFH;AAGH,KAdI;;AAgBLC,aAAQ,mBAAU;AACdN,YAAIO,cAAJ,GAAqB,IAArB;AACAP,YAAIQ,SAAJ,CAAcC,UAAd;AACH,KAnBI;;AAqBLN,kBAAa,sBAASO,IAAT,EAAc;AACvB,YAAIC,SAAS,CAAb;AACA,YAAID,KAAKE,OAAT,EAAiB;AAAG;AAChB,gBAAIC,WAAWH,KAAKE,OAApB;AACA,gBAAIC,SAAS,WAAT,IAAwB,CAA5B,EAA+B;AAC3BF,yBAASA,SAASE,SAAS,WAAT,CAAlB;AACH;AACD,gBAAIA,SAAS,WAAT,IAAwB,CAA5B,EAA8B;AAC1BF,yBAASA,SAASE,SAAS,WAAT,CAAlB;AACH;AACJ;AACD,aAAKpB,UAAL,CAAgBqB,MAAhB,GAAyBH,SAAS,CAAlC;AACH,KAjCI;;AAmCLI,iBAAY,uBAAY;AACpB,YAAIC,eAAe,KAAKC,IAAL,CAAUC,YAAV,CAAuB9B,GAAG+B,SAA1B,CAAnB;AACA,YAAIC,MAAMJ,aAAaK,iBAAb,CAA+B,UAA/B,CAAV;AACAD,YAAIE,IAAJ;AACH,KAvCI;;AAyCLjB,iBAAY,uBAAY;AACpB,YAAIe,MAAM,KAAKH,IAAL,CAAUC,YAAV,CAAuB9B,GAAG+B,SAA1B,CAAV;AACAC,YAAIG,IAAJ,CAAS,UAAT;AACH,KA5CI;;AA8CLC,eAAU,qBAAU;AAChB3B,WAAGC,kBAAH,CAAsB2B,WAAtB,CAAkC,IAAlC;AACH;;AAhDI,CAAT","file":"huzhubaoxiang.js","sourceRoot":"../../../../../../assets/Script/ComponentScript/component","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/class/index.html\n// Learn Attribute:\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/reference/attributes/index.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/life-cycle-callbacks/index.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        haveReward:cc.Node,\n\n    },\n\n    onLoad:function(){\n        var that = this;\n        ty.NotificationCenter.listen(ddz.EventType.IS_HAVE_REWARD, this.isHaveReward,this);\n        this.scheduleOnce(function () {\n            that.playLoopAni();\n        }, 1);\n    },\n\n    openBox:function(){\n        ddz.isClickOpenBox = true;\n        ddz.gameModel.getOpenBox();\n    },\n\n    isHaveReward:function(data){\n        var _count = 0;\n        if (data.rewards){  // 未领取\n            var _rewards = data.rewards;\n            if (_rewards['item:1311'] > 0) {\n                _count = _count + _rewards['item:1311'];\n            }\n            if (_rewards['user:chip'] > 0){\n                _count = _count + _rewards['user:chip'];\n            }\n        }\n        this.haveReward.active = _count > 0;\n    },\n\n    stopLoopAni:function () {\n        var animationCom = this.node.getComponent(cc.Animation);\n        var ani = animationCom.getAnimationState('baoxiang');\n        ani.stop();\n    },\n\n    playLoopAni:function () {\n        var ani = this.node.getComponent(cc.Animation);\n        ani.play('baoxiang');\n    },\n\n    onDestroy:function(){\n        ty.NotificationCenter.ignoreScope(this);\n    },\n\n\n});\n"]}