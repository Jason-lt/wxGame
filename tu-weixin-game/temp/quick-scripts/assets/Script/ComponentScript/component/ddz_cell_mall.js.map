{"version":3,"sources":["ddz_cell_mall.js"],"names":["cc","Class","extends","Component","properties","diamondText","default","type","RichText","coinText","Label","ratioLabel","redBar","Node","sureBtn","Button","coinSpr","Sprite","chipNumber","onLoad","ty","NotificationCenter","listen","ddz","EventType","UPDATE_CONVERSION_STATE","onUpdateBtnState","hall","GlobalFuncs","btnEffect","node","addDataWithObject","objc","setDetailInformation","resultMap","string","coin","updateDiamond","diamond","updateRedBar","radio","m_id","num","str","active","Math","round","isEnabled","interactable","onClickBtn","BiLog","clickStat","UserInfo","clickStatEventType","clickStatEventTypeButtonClick","trigger","MsgFactory","conversionCoin","onDestroy","ignoreScope"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,qBAAc;AACVC,qBAAU,IADA;AAEVC,kBAAOP,GAAGQ;AAFA,SADN;AAKRC,kBAAW;AACPH,qBAAU,IADH;AAEPC,kBAAOP,GAAGU;AAFH,SALH;AASRC,oBAAa;AACTL,qBAAU,IADD;AAETC,kBAAOP,GAAGU;AAFD,SATL;AAaRE,gBAAS;AACLN,qBAAU,IADL;AAELC,kBAAOP,GAAGa;AAFL,SAbD;AAiBRC,iBAAU;AACNR,qBAAU,IADJ;AAENC,kBAAOP,GAAGe;AAFJ,SAjBF;AAqBRC,iBAAU;AACNV,qBAAU,IADJ;AAENC,kBAAOP,GAAGiB;AAFJ,SArBF;;AA0BRC,oBAAa;;AA1BL,KAHP;;AAiCLC,YAAO,kBAAY;AACfC,WAAGC,kBAAH,CAAsBC,MAAtB,CAA6BC,IAAIC,SAAJ,CAAcC,uBAA3C,EAAmE,KAAKC,gBAAxE,EAAyF,IAAzF;AACAC,aAAKC,WAAL,CAAiBC,SAAjB,CAA2B,KAAKf,OAAL,CAAagB,IAAxC,EAA6C,GAA7C,EAAiD,IAAjD;AACH,KApCI;;AAsCLC,uBAAoB,2BAAUC,IAAV,EAAgB;AAChC,aAAKC,oBAAL,CAA0BD,IAA1B;AACH,KAxCI;;AA0CLC,0BAAqB,8BAAUC,SAAV,EAAqB;AACtC,aAAKzB,QAAL,CAAc0B,MAAd,GAAuBD,UAAUE,IAAjC;AACA,aAAKlB,UAAL,GAAkBgB,UAAUE,IAA5B;AACA,aAAKC,aAAL,CAAmBH,UAAUI,OAA7B;AACA,aAAKC,YAAL,CAAkBL,UAAUM,KAA5B;AACA,aAAKC,IAAL,GAAYP,UAAUO,IAAtB;AACH,KAhDI;;AAkDLJ,mBAAc,uBAAUK,GAAV,EAAe;AACzB,YAAIC,MAAM,uEAAuED,GAAvE,GAA6E,MAAvF;AACA,aAAKrC,WAAL,CAAiB8B,MAAjB,GAA0BQ,GAA1B;AACH,KArDI;;AAuDLJ,kBAAa,sBAAUG,GAAV,EAAe;AACxB;AACA,YAAIA,OAAOA,MAAM,CAAjB,EAAoB;AAChB,iBAAK9B,MAAL,CAAYgC,MAAZ,GAAqB,IAArB;AACA,iBAAKjC,UAAL,CAAgBwB,MAAhB,GAAyB,OAAQU,KAAKC,KAAL,CAAWJ,MAAM,KAAjB,IAAwB,GAAhC,GAAuC,GAAhE;AACH,SAHD,MAGM;AACF,iBAAK9B,MAAL,CAAYgC,MAAZ,GAAqB,KAArB;AACH;AACJ,KA/DI;;AAiELlB,sBAAkB,0BAASqB,SAAT,EAAmB;AACjC,aAAKjC,OAAL,CAAakC,YAAb,GAA4BD,SAA5B;AACH,KAnEI;;AAqELE,gBAAW,sBAAY;AACnB7B,WAAG8B,KAAH,CAASC,SAAT,CAAmB/B,GAAGgC,QAAH,CAAYC,kBAAZ,CAA+BC,6BAAlD,EACI,CAAC,cAAD,EAAgB,KAAKpC,UAArB,CADJ;AAEA;AACAE,WAAGC,kBAAH,CAAsBkC,OAAtB,CAA8BhC,IAAIC,SAAJ,CAAcC,uBAA5C,EAAoE,KAApE;;AAEAE,aAAK6B,UAAL,CAAgBC,cAAhB,CAA+B,KAAKhB,IAApC;AACH,KA5EI;;AA8ELiB,eAAY,qBAAY;AACpBtC,WAAGC,kBAAH,CAAsBsC,WAAtB,CAAkC,IAAlC;AACH;AAhFI,CAAT","file":"ddz_cell_mall.js","sourceRoot":"../../../../../../assets/Script/ComponentScript/component","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/class/index.html\n// Learn Attribute:\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/reference/attributes/index.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/life-cycle-callbacks/index.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        diamondText : {\n            default : null,\n            type : cc.RichText\n        },\n        coinText : {\n            default : null,\n            type : cc.Label\n        },\n        ratioLabel : {\n            default : null,\n            type : cc.Label\n        },\n        redBar : {\n            default : null,\n            type : cc.Node\n        },\n        sureBtn : {\n            default : null,\n            type : cc.Button\n        },\n        coinSpr : {\n            default : null,\n            type : cc.Sprite\n        },\n\n        chipNumber : 0,\n\n    },\n\n    onLoad:function () {\n        ty.NotificationCenter.listen(ddz.EventType.UPDATE_CONVERSION_STATE,this.onUpdateBtnState,this);\n        hall.GlobalFuncs.btnEffect(this.sureBtn.node,1.1,this);\n    },\n\n    addDataWithObject : function (objc) {\n        this.setDetailInformation(objc);\n    },\n\n    setDetailInformation:function (resultMap) {\n        this.coinText.string = resultMap.coin;\n        this.chipNumber = resultMap.coin;\n        this.updateDiamond(resultMap.diamond);\n        this.updateRedBar(resultMap.radio);\n        this.m_id = resultMap.m_id;\n    },\n\n    updateDiamond:function (num) {\n        var str = \"<img src='dda_button_diamond' height=34 width=42/><color=#FFFFFF> \" + num + \"</c>\";\n        this.diamondText.string = str;\n    },\n\n    updateRedBar:function (num) {\n        // (Math.round(this * 10000)/100).toFixed(2) + '%';\n        if (num && num > 0) {\n            this.redBar.active = true;\n            this.ratioLabel.string = \"多送\" + (Math.round(num * 10000)/100) + '%';\n        }else {\n            this.redBar.active = false;\n        }\n    },\n\n    onUpdateBtnState: function(isEnabled){\n        this.sureBtn.interactable = isEnabled;\n    },\n\n    onClickBtn:function () {\n        ty.BiLog.clickStat(ty.UserInfo.clickStatEventType.clickStatEventTypeButtonClick,\n            [\"goldExchange\",this.chipNumber]);\n        // ddz.LOGD(null,\"file = [ddz_cell_mall] fun = [onClickBtn] this.index = \" + this.index);\n        ty.NotificationCenter.trigger(ddz.EventType.UPDATE_CONVERSION_STATE,false);\n        \n        hall.MsgFactory.conversionCoin(this.m_id);\n    },\n\n    onDestroy : function () {\n        ty.NotificationCenter.ignoreScope(this);\n    },\n});\n"]}