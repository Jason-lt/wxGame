{"version":3,"sources":["ServerStateManager.js"],"names":["require","ty","ServerStateManager","checkServerState","callBack","header","configObj","SystemInfo","loginUrl","appId","HttpUtil","httpPost","res","data","result","code","hall","GlobalFuncs","showPopWinByPreFab","preFabNode","lbl","getChildByName","getComponent","cc","Label","string","info"],"mappings":";;;;;;AAAA;;;;;AAKAA,QAAQ,UAAR;;AAEAC,GAAGC,kBAAH,GAAwB;AACpBC,sBAAiB,0BAAUC,QAAV,EAAoB;AACjC,YAAIC,SAAS,EAAC,gBAAgB,mCAAjB,EAAb;AACA,YAAIC,YAAY;AACZ,mBAAOL,GAAGM,UAAH,CAAcC,QAAd,GAAyB,0CADpB;AAEZ,sBAAUH,MAFE;AAGZ,wBAAY;AACRI,uBAAQR,GAAGM,UAAH,CAAcE;AADd;AAHA,SAAhB;AAOA;AACAR,WAAGS,QAAH,CAAYC,QAAZ,CAAqBL,SAArB,EAA+B,MAA/B,EAAuC,UAAUM,GAAV,EAAe;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAIA,IAAIC,IAAJ,CAASC,MAAT,CAAgBC,IAAhB,IAAwB,CAA5B,EAA8B;AAC1B;AACAC,qBAAKC,WAAL,CAAiBC,kBAAjB,CAAoC,4BAApC,EAAkE,UAAUC,UAAV,EAAsB;AACpF,wBAAIC,MAAMD,WAAWE,cAAX,CAA0B,OAA1B,CAAV;AACAD,wBAAIE,YAAJ,CAAiBC,GAAGC,KAApB,EAA2BC,MAA3B,GAAoCb,IAAIC,IAAJ,CAASC,MAAT,CAAgBY,IAApD;AACH,iBAHD;AAIH,aAND,MAOI;AACAtB;AACH;AACJ,SAjCD,EAkCA,UAAUQ,GAAV,EAAe;AACXR;AACH,SApCD;AAqCH;AAhDmB,CAAxB","file":"ServerStateManager.js","sourceRoot":"../../../../../assets/Script/Framework","sourcesContent":["/**\n * Created by xujing on 2018/5/15.\n * 服务器状态检查,在登录SDK之前\n */\n\nrequire('HttpUtil');\n\nty.ServerStateManager = {\n    checkServerState:function (callBack) {\n        var header = {'content-type': 'application/x-www-form-urlencoded'};\n        var configObj = {\n            'url': ty.SystemInfo.loginUrl + 'open/v4/sdk/util/gameserver/status/query',\n            'header': header,\n            'postData': {\n                appId : ty.SystemInfo.appId\n            }\n        };\n        // 测试post\n        ty.HttpUtil.httpPost(configObj,'POST', function (res) {\n            // 游戏服务器正常返回\n            // {\n            //     \"result\": {\n            //         \"code\": 0,\n            //         \"info\": \"\"\n            //     }\n            // }\n            //\n            // 维护中\n            // {\n            //     \"result\": {\n            //         \"code\": 1,\n            //         \"info\": \"服务器维护中，请稍后重试\"\n            //     }\n            // }\n            //     res.data =\n            //     {\n            //         \"result\": {\n            //             \"code\": 1,\n            //             \"info\": \"服务器维护中，请稍后重试\"\n            //         }\n            //     };\n            if (res.data.result.code == 1){\n                //显示维护中的窗口\n                hall.GlobalFuncs.showPopWinByPreFab('prefabs/withdrawalMaintain', function (preFabNode) {\n                    var lbl = preFabNode.getChildByName('label');\n                    lbl.getComponent(cc.Label).string = res.data.result.info;\n                });\n            }\n            else{\n                callBack();\n            }\n        },\n        function (res) {\n            callBack();\n        });\n    }\n};"]}