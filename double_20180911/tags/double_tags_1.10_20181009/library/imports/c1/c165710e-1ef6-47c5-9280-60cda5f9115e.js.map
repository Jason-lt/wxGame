{"version":3,"sources":["../../../../../../assets/Script/ComponentScript/window/assets/Script/ComponentScript/window/double_weaponsDepot.js"],"names":["cc","Class","extends","Component","properties","coinLabel","default","type","Label","pageTypeSprite","Sprite","pageTypeSpriteFrameList","SpriteFrame","progressLabel","weaponSpriteFrameList","weaponSpriteFrameList2","weaponNodeList","Node","myPageView","PageView","nowPageIndex","tempPageIndex","pageCellPrefab","Prefab","solveButton","Button","blackAction","backAction","node","removeFromParent","onLoad","enableAutoGrayEffect","on","pageViewScrolling","pages","getPages","pageView","tempColor","i","double","weaponsPageCellColor","weaponBgGreen","weaponBgYellow","weaponBgPink","j","addWindow","instantiate","getComponent","changeBackgroundColor","changeWeaponSpriteFrame","push","x","y","parseInt","addChild","updateWeaponsDepotInfo","string","GameWorld","chipNumber","interactable","event","getCurrentPageIndex","spriteFrame","number","solveNewWeapon","GlobalFuncs","showWindowNewWeapon","windowNewWeaponType","newWeapon","addCoinAction","hall","adManager","showRewardedVideo","onDestroy","ty","NotificationCenter","ignoreScope","unscheduleAllCallbacks"],"mappings":"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","file":"double_weaponsDepot.js","sourceRoot":"../../../../../../assets/Script/ComponentScript/window","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n\n        coinLabel : {\n            default : null,\n            type : cc.Label\n        },\n\n        pageTypeSprite : {\n            default : null,\n            type : cc.Sprite\n        },\n        pageTypeSpriteFrameList : [cc.SpriteFrame],\n        progressLabel : {\n            default : null,\n            type : cc.Label\n        },\n\n        weaponSpriteFrameList : [cc.SpriteFrame],\n        weaponSpriteFrameList2 : [cc.SpriteFrame],\n        weaponNodeList : [cc.Node],\n\n        myPageView : {\n            default : null,\n            type : cc.PageView\n        },\n        nowPageIndex : 0,\n        tempPageIndex : 0,\n\n        pageCellPrefab : {\n            default : null,\n            type : cc.Prefab\n        },\n\n        solveButton : {\n            default : null,\n            type : cc.Button\n        }\n    },\n    blackAction : function () {\n\n    },\n    backAction : function () {\n        this.node.removeFromParent();\n    },\n    onLoad : function() {\n        this.solveButton.enableAutoGrayEffect = true;\n        this.myPageView.node.on(\"scrolling\",this.pageViewScrolling,this);\n\n        var pages = this.myPageView.getPages();\n        var pageView;\n        var tempColor;\n        for (var i = 0 ; i < pages ; i ++){\n            pageView = pages[i];\n            if(i == 0){\n                tempColor = double.weaponsPageCellColor.weaponBgGreen;\n            }else if(i == 1){\n                tempColor = double.weaponsPageCellColor.weaponBgYellow;\n            }else {\n                tempColor = double.weaponsPageCellColor.weaponBgPink;\n            }\n            for (var j = 0 ; j < 12 ; j ++){\n                var addWindow = cc.instantiate(this.pageCellPrefab);\n                addWindow.getComponent(\"double_cell_weaponsDepot\").changeBackgroundColor(tempColor);\n                addWindow.getComponent(\"double_cell_weaponsDepot\").changeWeaponSpriteFrame(this.weaponSpriteFrameList[i]);\n                //TODO:选出已有武器\n                // if(1){\n                //     addWindow.getComponent(\"double_cell_weaponsDepot\").changeBackgroundColor(double.weaponsPageCellColor.weaponBgWhite);\n                //     addWindow.getComponent(\"double_cell_weaponsDepot\").changeWeaponSpriteFrame(this.weaponSpriteFrameList2[i*12+j]);\n                // }\n                this.weaponNodeList.push(addWindow);\n                addWindow.x = (j%3)*150 -150;\n                addWindow.y = 249-parseInt(j/3)*166;\n                pageView.addChild(addWindow);\n            }\n        }\n    },\n    updateWeaponsDepotInfo : function () {\n        this.coinLabel.string = double.GameWorld.chipNumber;\n        //TODO: 计算解锁所需金币\n        this.solveButton.interactable = double.GameWorld.chipNumber >= 35;\n        //TODO:计算武器状况\n        this.progressLabel.string = \"4/12\";\n\n        var pages = this.myPageView.getPages();\n        var pageView;\n        for (var i = 0 ; i < pages ; i ++){\n            pageView = pages[i];\n            for (var j = 0 ; j < 12 ; j ++){\n                var addWindow = cc.instantiate(this.pageCellPrefab);\n\n            }\n        }\n    },\n\n    pageViewScrolling : function (event) {\n        this.tempPageIndex = this.myPageView.getCurrentPageIndex();\n        if(this.tempPageIndex != this.nowPageIndex){\n            this.nowPageIndex = this.tempPageIndex;\n            this.pageTypeSprite.spriteFrame = this.pageTypeSpriteFrameList[this.nowPageIndex];\n            var number = 0;\n            this.progressLabel.string = number+\"/12\";\n        }\n    },\n    solveNewWeapon : function () {\n        //TODO:随机在未解锁武器内抽取一个，配抽取动画,计算新武器ID\n        double.GlobalFuncs.showWindowNewWeapon(double.windowNewWeaponType.newWeapon,2);\n    },\n    addCoinAction : function () {\n        hall.adManager.showRewardedVideo(\"weaponsDepot\");\n    },\n    onDestroy : function () {\n        ty.NotificationCenter.ignoreScope(this);\n        this.unscheduleAllCallbacks();\n    }\n    // LIFE-CYCLE CALLBACKS:\n\n\n\n    // start () {\n    //\n    // },\n\n    // update (dt) {},\n});\n"]}