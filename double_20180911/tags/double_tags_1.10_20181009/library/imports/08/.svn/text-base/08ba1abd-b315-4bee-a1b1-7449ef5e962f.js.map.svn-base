{"version":3,"sources":["../../../../../../assets/Script/ComponentScript/Scenes/assets/Script/ComponentScript/Scenes/double_main.js"],"names":["cc","Class","extends","Component","properties","objectNode","default","type","Node","objectWin","serializable","leftGunNode","leftGunWin","rightGunNode","rightGunWin","leftGunButton","Button","rightGunButton","gameFailNode","progressNodeSprite","Sprite","objectBloodAll","levelProgressSpriteList","levelProgressSpriteFrameList","SpriteFrame","doubleInfoNode","levelLabel","Label","scoreLabel","surpassNode","surpassSprite","surpassTexture","Texture2D","surpassSpriteFrame","surpassCount","onLoad","getComponent","parentScene","node","on","EventType","TOUCH_END","openFireLeftButtonTouchEnded","openFireRightButtonTouchEnded","setSurpassNodeInit","double","GameWorld","totalLevel","hall","GlobalFuncs","ReadNumFromLocalStorage","gameModel","GAME_LEVEL","newestObjectIndex","GAME_NEWEST_OBJECT_INDEX","chipNumber","GAME_COIN_NUMBER","totalScore","newer","ReadBoolFromLocalStorage","IS_NEW_USER","newerGameStart","gameStart","ty","NotificationCenter","listen","GAME_START","GAME_OVER","gameOverNoChange","GlobalTimer","getCurWeek","showNewResult","resurgence","gameResurgence","gameNextLevel","setDoubleGunType","active","string","levelObjectNumber","chooseLevelObject","getNextObjectType","gameOver","gamePause","changeObjectType","levelObjectList","i","push","tempN","getRandomNumberBefore","middleIndex","parseInt","generalConfig","objectStageTopScale","bottomIndex","objectStageMiddleScale","tempNumber","addNumber","tempObject","length","Math","random","objectStageTopProbability","objectStageMiddleProbability","indexOf","boxNowConfig","subIndex","boxConfig","minLevel","maxLevel","setInLocalStorage","GAME_STAGE_BOX_NUMBER","probability","nowNumber","mostBoxNumber","spriteFrame","objectType","bloodList","objectConfig","objectBlood","fillRange","stageOneLevel","objectInitializedSpeed","initializedSpeed","objectAccelerated","accelerated","stageTwoLevel","gameLevelUp","sendArrow","sendArrowForObject","getGunAngle","receiveArrow","gunDamageBonus","removeAllGunHitAniNodeChild","gameBomb","afterObjectBomb","levelNumberUp","levelUp","nextNewLevel","addTemp","showRewardWeapon","showGameOverResult","showResurgence","showGamePause","openDataContext","getOpenData","sharedCanvas","canvas","width","height","setSurpassNode","initWithElement","handleLoadedTexture","_refreshTexture","update","dt","onDestroy","ignoreScope","unscheduleAllCallbacks"],"mappings":"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","file":"double_main.js","sourceRoot":"../../../../../../assets/Script/ComponentScript/Scenes","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n\n    // ctor : function () {\n    //     this.arrowPool = null;\n    // },\n\n    extends: cc.Component,\n\n    properties: {\n\n        //标的物\n        objectNode : {\n            default : null,\n            type : cc.Node\n        },\n        objectWin : {\n            default: null,\n            serializable: false\n        },\n\n        //枪\n        leftGunNode : {\n            default : null,\n            type : cc.Node\n        },\n        leftGunWin: {\n            default: null,\n            serializable: false\n        },\n        rightGunNode : {\n            default : null,\n            type : cc.Node\n        },\n        rightGunWin: {\n            default: null,\n            serializable: false\n        },\n        leftGunButton : {\n            default : null,\n            type : cc.Button\n        },\n        rightGunButton : {\n            default : null,\n            type : cc.Button\n        },\n\n        //游戏失败\n        gameFailNode : {\n            default : null,\n            type : cc.Node\n        },\n\n        //游戏进度/进度条\n        progressNodeSprite : {\n            default : null,\n            type : cc.Sprite\n        },\n        objectBloodAll : 0,\n        levelProgressSpriteList : [cc.Sprite],\n        levelProgressSpriteFrameList : [cc.SpriteFrame],\n\n        //关卡信息\n        doubleInfoNode : {\n            default : null,\n            type : cc.Node\n        },\n        levelLabel : {\n            default : null,\n            type : cc.Label\n        },\n        scoreLabel : {\n            default : null,\n            type : cc.Label\n        },\n\n        //即将超越\n        surpassNode : {\n            default : null,\n            type : cc.Node\n        },\n        surpassSprite : {\n            default : null,\n            type : cc.Sprite\n        },\n        surpassTexture : cc.Texture2D,\n        surpassSpriteFrame : cc.SpriteFrame,\n        surpassCount : 0\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad : function() {\n        this.rightGunWin = this.rightGunNode.getComponent('double_gun');\n        this.rightGunWin.parentScene = this;\n        this.leftGunWin = this.leftGunNode.getComponent('double_gun');\n        this.leftGunWin.parentScene = this;\n        this.objectWin = this.objectNode.getComponent('double_object');\n        this.objectWin.parentScene = this;\n\n        // this.leftGunButton.node.on(cc.Node.EventType.TOUCH_START, this.openFireLeftButtonTouchStart, this, true);\n        this.leftGunButton.node.on(cc.Node.EventType.TOUCH_END, this.openFireLeftButtonTouchEnded, this, true);\n        // this.rightGunButton.node.on(cc.Node.EventType.TOUCH_START, this.openFireRightButtonTouchStart, this, true);\n        this.rightGunButton.node.on(cc.Node.EventType.TOUCH_END, this.openFireRightButtonTouchEnded, this, true);\n\n        this.setSurpassNodeInit();\n\n        //数据初始化\n        double.GameWorld.totalLevel = hall.GlobalFuncs.ReadNumFromLocalStorage(double.gameModel.GAME_LEVEL ,1);\n        double.GameWorld.newestObjectIndex = hall.GlobalFuncs.ReadNumFromLocalStorage(double.gameModel.GAME_NEWEST_OBJECT_INDEX ,3);\n        double.GameWorld.chipNumber = hall.GlobalFuncs.ReadNumFromLocalStorage(double.gameModel.GAME_COIN_NUMBER ,0);\n        double.GameWorld.totalScore = 0;\n\n\n        var newer = hall.GlobalFuncs.ReadBoolFromLocalStorage(double.gameModel.IS_NEW_USER,true);\n        if (newer){\n            this.newerGameStart();\n        }else {\n            this.gameStart();\n        }\n        ty.NotificationCenter.listen(double.EventType.GAME_START,this.gameStart,this);\n        ty.NotificationCenter.listen(double.EventType.GAME_OVER,this.gameOverNoChange,this);\n\n        hall.GlobalTimer.getCurWeek();\n\n        // that.nowScoreLabel.string = shot.GameWorld.totalScore;\n        // that.addScoreAniPool.put(aniNode);\n        // aniNode.removeFromParent();\n    },\n\n    newerGameStart : function () {\n        // //TODO:\n        // this.doubleInfoNode.active = false;\n        // this.objectNode.active = false;\n        // double.GlobalFuncs.showTitlePage();\n\n        double.GlobalFuncs.showNewResult();\n    },\n\n    gameStart : function (resurgence) {\n        if(resurgence){\n            this.gameResurgence();\n            return;\n        }\n\n        double.GameWorld.totalScore = 0;\n        this.gameNextLevel();\n    },\n    gameNextLevel : function () {\n        //TODO:TEST\n        double.GlobalFuncs.setDoubleGunType(1,\"bow1\");\n\n        this.doubleInfoNode.active = true;\n        this.objectNode.active = true;\n\n        this.levelLabel.string = \"第\"+ double.GameWorld.totalLevel+\"关\";\n        this.scoreLabel.string = double.GameWorld.totalScore+\"\";\n        double.GameWorld.levelObjectNumber = 5;\n        this.chooseLevelObject();\n        this.getNextObjectType();\n        double.GameWorld.gameOver = false;\n        double.GameWorld.gamePause = false;\n    },\n    gameResurgence : function () {\n        this.objectWin.changeObjectType();\n        double.GameWorld.gameOver = false;\n        double.GameWorld.gamePause = false;\n    },\n\n    chooseLevelObject : function () {\n        double.GameWorld.levelObjectList = [];\n        var i;\n        //配置物品\n        if(double.GameWorld.newestObjectIndex <= 4){\n            for (i = 0 ; i < double.GameWorld.newestObjectIndex ; i ++){\n                double.GameWorld.levelObjectList.push(\"object\"+i);\n            }\n            if(double.GameWorld.newestObjectIndex == 3){\n                if(double.GameWorld.totalLevel == 5){\n                    var tempN = hall.GlobalFuncs.getRandomNumberBefore(3)+1;\n                    double.GameWorld.levelObjectList.push(double.GameWorld.levelObjectList[tempN]);\n                    double.GameWorld.levelObjectList[tempN] = \"box\";\n                }\n            }else if(double.GameWorld.newestObjectIndex == 2){\n                if(double.GameWorld.totalLevel == 2){\n                    double.GameWorld.levelObjectList.push(\"object\"+(hall.GlobalFuncs.getRandomNumberBefore(3)));\n                }\n            }\n        }else {\n            var middleIndex = parseInt(double.GameWorld.newestObjectIndex - double.GameWorld.newestObjectIndex*double.GameWorld.generalConfig.objectStageTopScale);\n            middleIndex = middleIndex < 2 ? 2 : middleIndex;\n            var bottomIndex = parseInt(middleIndex - double.GameWorld.newestObjectIndex*double.GameWorld.generalConfig.objectStageMiddleScale);\n            bottomIndex = bottomIndex < 1 ? 1 : bottomIndex;\n            var tempNumber;\n            var addNumber;\n            var tempObject;\n            while (double.GameWorld.levelObjectList.length < 5){\n                tempNumber = Math.random();\n                if(tempNumber > 1-double.GameWorld.generalConfig.objectStageTopProbability){\n                    addNumber = hall.GlobalFuncs.getRandomNumberBefore(double.GameWorld.newestObjectIndex-middleIndex+1)+middleIndex;\n                }else if(tempNumber > 1-double.GameWorld.generalConfig.objectStageTopProbability-double.GameWorld.generalConfig.objectStageMiddleProbability){\n                    addNumber = hall.GlobalFuncs.getRandomNumberBefore(middleIndex-bottomIndex+1)+bottomIndex;\n                }else {\n                    addNumber = hall.GlobalFuncs.getRandomNumberBefore(bottomIndex+1);\n                }\n                tempObject = \"object\"+addNumber;\n                if(double.GameWorld.levelObjectList.indexOf(tempObject) == -1){\n                    double.GameWorld.levelObjectList.push(\"object\"+addNumber);\n                }\n            }\n        }\n        //添加宝箱\n        var boxNowConfig;\n        var subIndex;\n        for (i = 0 ; i < double.GameWorld.boxConfig ; i ++){\n            boxNowConfig = double.GameWorld.boxConfig[i];\n            if(boxNowConfig.minLevel <= double.GameWorld.totalLevel && boxNowConfig.maxLevel >= double.GameWorld.totalLevel){\n                if(boxNowConfig.minLevel == double.GameWorld.totalLevel){\n                    hall.GlobalFuncs.setInLocalStorage(double.gameModel.GAME_STAGE_BOX_NUMBER,0);\n                    if(Math.random() < boxNowConfig.probability){\n                        hall.GlobalFuncs.setInLocalStorage(double.gameModel.GAME_STAGE_BOX_NUMBER,1);\n                        subIndex = hall.GlobalFuncs.getRandomNumberBefore(4)+1;\n                        // double.GameWorld.levelObjectList[5] = double.GameWorld.levelObjectList[subIndex];\n                        double.GameWorld.levelObjectList[subIndex] = \"box\";\n                    }\n                }else {\n                    var nowNumber = hall.GlobalFuncs.ReadNumFromLocalStorage(double.gameModel.GAME_STAGE_BOX_NUMBER,0);\n                    if(nowNumber < boxNowConfig.mostBoxNumber){\n                        hall.GlobalFuncs.setInLocalStorage(double.gameModel.GAME_STAGE_BOX_NUMBER,nowNumber+1);\n                        subIndex = hall.GlobalFuncs.getRandomNumberBefore(4)+1;\n                        // double.GameWorld.levelObjectList[5] = double.GameWorld.levelObjectList[subIndex];\n                        double.GameWorld.levelObjectList[subIndex] = \"box\";\n                    }\n                }\n                break;\n            }\n        }\n\n        // double.GameWorld.levelObjectList = [\"object0\",\"object1\",\"object2\",\"object3\",\"object4\"];\n        double.GameWorld.levelObjectNumber = double.GameWorld.levelObjectList.length;\n\n        for (i = 0 ; i < this.levelProgressSpriteList.length ; i ++){\n            this.levelProgressSpriteList[i].node.active = true;\n            this.levelProgressSpriteList[i].spriteFrame = this.levelProgressSpriteFrameList[1];\n            if(double.GameWorld.levelObjectList.length < 5 && i == 4){\n                this.levelProgressSpriteList[i].node.active = false;\n            }\n            if(double.GameWorld.levelObjectList.length < 4 && i == 3){\n                this.levelProgressSpriteList[i].node.active = false;\n            }\n        }\n    },\n    getNextObjectType : function () {\n        double.GameWorld.objectType = double.GameWorld.levelObjectList[double.GameWorld.levelObjectNumber-1];\n\n        var bloodList = double.GameWorld.objectConfig[double.GameWorld.objectType].bloodList;\n        if(double.GameWorld.totalLevel >= 16){\n            double.GameWorld.objectBlood = hall.GlobalFuncs.getRandomNumberBefore(bloodList[1]-bloodList[0]+1)+bloodList[0];\n        }else if(double.GameWorld.totalLevel == 1){\n            double.GameWorld.objectBlood = bloodList[3];\n        }else {\n            double.GameWorld.objectBlood = hall.GlobalFuncs.getRandomNumberBefore(5)-2+parseInt((double.GameWorld.totalLevel/15*(bloodList[3]-bloodList[2]))+bloodList[2]);\n        }\n\n        this.objectBloodAll = double.GameWorld.objectBlood;\n        this.progressNodeSprite.fillRange = 1;\n\n        // double.GameWorld.objectAccelerated = double.GameWorld.objectConfig[double.GameWorld.objectType].accelerated;\n\n        if(double.GameWorld.totalLevel <= double.GameWorld.generalConfig.stageOneLevel){\n            double.GameWorld.objectInitializedSpeed = double.GameWorld.objectConfig[double.GameWorld.objectType].initializedSpeed[0];\n            double.GameWorld.objectAccelerated = double.GameWorld.objectConfig[double.GameWorld.objectType].accelerated[0];\n        }else if(double.GameWorld.totalLevel <= double.GameWorld.generalConfig.stageTwoLevel){\n            double.GameWorld.objectInitializedSpeed = double.GameWorld.objectConfig[double.GameWorld.objectType].initializedSpeed[1];\n            double.GameWorld.objectAccelerated = double.GameWorld.objectConfig[double.GameWorld.objectType].accelerated[1];\n        }else {\n            double.GameWorld.objectInitializedSpeed = double.GameWorld.objectConfig[double.GameWorld.objectType].initializedSpeed[2];\n            double.GameWorld.objectAccelerated = double.GameWorld.objectConfig[double.GameWorld.objectType].accelerated[2];\n        }\n\n        this.objectWin.changeObjectType();\n        double.GameWorld.gameLevelUp = false;\n    },\n\n    openFireLeftButtonTouchEnded : function () {\n        if(double.GameWorld.gameOver || double.GameWorld.gamePause || double.GameWorld.gameLevelUp){\n            return;\n        }\n        this.leftGunWin.sendArrow();\n        this.objectWin.sendArrowForObject(0,this.leftGunWin.getGunAngle());\n    },\n    openFireRightButtonTouchEnded : function () {\n        if(double.GameWorld.gameOver || double.GameWorld.gamePause || double.GameWorld.gameLevelUp){\n            return;\n        }\n        this.rightGunWin.sendArrow();\n        this.objectWin.sendArrowForObject(1,this.rightGunWin.getGunAngle());\n    },\n    receiveArrow : function () {\n        //增加分数\n        double.GameWorld.totalScore += double.GameWorld.totalLevel;\n        this.scoreLabel.string = double.GameWorld.totalScore+\"\";\n\n        double.GameWorld.objectBlood -= double.GameWorld.gunDamageBonus;\n        if(double.GameWorld.objectBlood <= 0){\n            this.objectWin.removeAllGunHitAniNodeChild();\n            this.progressNodeSprite.fillRange = 0;\n            double.GameWorld.levelObjectNumber --;\n            double.GameWorld.gameLevelUp = true;\n            this.objectWin.gameBomb();\n        }else {\n            this.progressNodeSprite.fillRange = (double.GameWorld.objectBlood/this.objectBloodAll);\n        }\n    },\n    afterObjectBomb : function () {\n        this.levelNumberUp();\n        // if(double.GameWorld.levelObjectNumber <= 0){\n        //     // //本局游戏结束,按照关数出现界面\n        //     // this.levelNumberUp();\n        // }else {\n        //     this.levelNumberUp();\n        // }\n    },\n    levelNumberUp : function () {\n        this.objectWin.removeAllGunHitAniNodeChild();\n        // double.GameWorld.levelObjectNumber --;\n        this.levelProgressSpriteList[double.GameWorld.levelObjectNumber].spriteFrame = this.levelProgressSpriteFrameList[0];\n        if(double.GameWorld.levelObjectNumber <= 0){\n            this.levelUp();\n        }else {\n            this.getNextObjectType();\n        }\n    },\n    levelUp : function () {\n\n        var nextNewLevel = 0;\n        var addTemp = 2;\n        while (nextNewLevel < double.GameWorld.totalLevel){\n            nextNewLevel += addTemp;\n            if(nextNewLevel == double.GameWorld.totalLevel){\n                //TODO:解锁新物品\n                double.GameWorld.newestObjectIndex ++;\n                hall.GlobalFuncs.setInLocalStorage(double.gameModel.GAME_NEWEST_OBJECT_INDEX,double.GameWorld.newestObjectIndex);\n                break;\n            }\n            addTemp ++;\n        }\n\n        double.GameWorld.totalLevel ++;\n        hall.GlobalFuncs.setInLocalStorage(double.gameModel.GAME_LEVEL ,double.GameWorld.totalLevel);\n\n        // // // //TODO:TEST\n        // this.gameStart();\n        //结果页面\n        if(double.GameWorld.totalLevel%10 == 1){\n            // 每10关，进行枪械转盘抽奖励\n            double.GlobalFuncs.showRewardWeapon();\n        }else {\n            //闯关成功后展示闯关成功页面，字样向上滑动，出现老虎机\n            double.GlobalFuncs.showNewResult();\n        }\n    },\n    gameOver : function () {\n        this.objectWin.removeAllGunHitAniNodeChild();\n        double.GameWorld.gameOver = true;\n        if(double.GameWorld.levelObjectNumber == 5){\n            double.GlobalFuncs.showGameOverResult();\n        }else {\n            double.GlobalFuncs.showResurgence();\n        }\n    },\n    gameOverNoChange : function () {\n        this.objectWin.removeAllGunHitAniNodeChild();\n        double.GameWorld.gameOver = true;\n        this.objectNode.active = false;\n        this.doubleInfoNode.active = false;\n    },\n    gamePause : function () {\n        double.GameWorld.gamePause = true;\n        double.GlobalFuncs.showGamePause();\n    },\n\n    //超越好友\n    setSurpassNodeInit : function () {\n        var openDataContext = double.GlobalFuncs.getOpenData();\n        if(!openDataContext){\n            return;\n        }\n        this.sharedCanvas = openDataContext.canvas;\n        this.sharedCanvas.width  = 300;\n        this.sharedCanvas.height = 60;\n\n        if(!this.surpassTexture){\n            this.surpassTexture = new cc.Texture2D();\n        }\n        if(!this.surpassSpriteFrame){\n            this.surpassSpriteFrame = new cc.SpriteFrame(this.surpassTexture);\n        }\n        this.surpassSprite.spriteFrame = this.surpassSpriteFrame;\n    },\n    setSurpassNode : function () {\n        this.surpassTexture.initWithElement(this.sharedCanvas);\n        this.surpassTexture.handleLoadedTexture();\n        this.surpassSprite.spriteFrame._refreshTexture(this.surpassTexture);\n    },\n\n    update : function(dt) {\n        this.surpassCount ++ ;\n        if(this.surpassCount >= 10){\n            this.surpassCount = 0;\n            this.setSurpassNode();\n        }\n    },\n\n    onDestroy : function () {\n        // this.arrowPool = null;\n        ty.NotificationCenter.ignoreScope(this);\n        this.unscheduleAllCallbacks();\n    }\n});\n"]}