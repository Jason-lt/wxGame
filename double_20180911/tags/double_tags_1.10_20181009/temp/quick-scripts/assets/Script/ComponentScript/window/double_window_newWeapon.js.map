{"version":3,"sources":["double_window_newWeapon.js"],"names":["cc","Class","extends","Component","properties","titleLabel","default","type","Label","newObjectNode","Node","objectSprite","Sprite","objectSpriteFrameList","SpriteFrame","objectNameLabel","newWeaponNode","weaponSprite","weaponSpriteFrameList","goldNode","btnTitleLabel","checkSprite","objectTypeIndex","windowType","openType","blackAction","backAction","onLoad","ty","NotificationCenter","listen","double","EventType","UPDATE_SHARE_STATE","playAnimationAfterShareWithType","updateWeaponInfo","windowNewWeaponType","newObject","string","active","spriteFrame","GameWorld","doubleObjectNameList","newWeapon","goldTreasureChest","changeCheckBoxType","node","shareType","Share","onShareType","clickStatShareTypeOpenSecretBoxB","resultType","hall","MsgBoxManager","showToast","title","openBox","onClickOpen","shareWithType","clickStatShareTypeAddBullet","GlobalFuncs","setDoubleGunType","objectType","closeAction","removeFromParent","onDestroy","ignoreScope","unscheduleAllCallbacks"],"mappings":"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","file":"double_window_newWeapon.js","sourceRoot":"../../../../../../assets/Script/ComponentScript/window","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        titleLabel : {\n            default : null,\n            type : cc.Label\n        },\n        newObjectNode : {\n            default : null,\n            type : cc.Node\n        },\n        objectSprite : {\n            default : null,\n            type : cc.Sprite\n        },\n        objectSpriteFrameList : [cc.SpriteFrame],\n        objectNameLabel : {\n            default : null,\n            type : cc.Label\n        },\n\n        newWeaponNode : {\n            default : null,\n            type : cc.Node\n        },\n        weaponSprite : {\n            default : null,\n            type : cc.Sprite\n        },\n        weaponSpriteFrameList : [cc.SpriteFrame],\n\n        goldNode : {\n            default : null,\n            type : cc.Node\n        },\n\n        btnTitleLabel : {\n            default : null,\n            type : cc.Label\n        },\n\n        checkSprite : {\n            default : null,\n            type : cc.Sprite\n        },\n\n        objectTypeIndex : 0,\n        windowType : 0,\n        openType : \"share\"\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    blackAction : function () {\n\n    },\n    backAction : function () {\n\n    },\n    onLoad : function() {\n        ty.NotificationCenter.listen(double.EventType.UPDATE_SHARE_STATE, this.playAnimationAfterShareWithType, this);\n    },\n    updateWeaponInfo : function (type,objectTypeIndex) {\n        this.windowType = type;\n        this.objectTypeIndex = objectTypeIndex;\n        //TODO: 更改图片\n        switch (type){\n            case double.windowNewWeaponType.newObject : {\n                this.titleLabel.string = \"解锁新物品\";\n                this.btnTitleLabel.string = \"确定\";\n                this.newObjectNode.active = true;\n                this.newWeaponNode.active = false;\n                this.goldNode.active = false;\n                this.objectSprite.spriteFrame = this.objectSpriteFrameList[objectTypeIndex];\n                this.objectNameLabel.string = double.GameWorld.doubleObjectNameList[objectTypeIndex];\n                break;\n            }\n            case double.windowNewWeaponType.newWeapon : {\n                this.titleLabel.string = \"获得新武器\";\n                this.btnTitleLabel.string = \"装备\";\n                this.newObjectNode.active = false;\n                this.newWeaponNode.active = true;\n                this.goldNode.active = false;\n                this.weaponSpriteFrameList.spriteFrame = this.weaponSpriteFrameList[objectTypeIndex];\n                break;\n            }\n            case double.windowNewWeaponType.goldTreasureChest : {\n                this.titleLabel.string = \"金币宝箱\";\n                this.btnTitleLabel.string = \"免费领取\";\n                this.newObjectNode.active = false;\n                this.newWeaponNode.active = false;\n                this.goldNode.active = true;\n                break\n            }\n            default : break;\n        }\n    },\n    changeCheckBoxType : function () {\n        this.checkSprite.node.active = !this.checkSprite.node.active;\n        this.openType = this.checkSprite.node.active ? \"share\" : \"open\";\n    },\n    playAnimationAfterShareWithType : function (shareType) {\n        if (shareType && (shareType == double.Share.onShareType.clickStatShareTypeOpenSecretBoxB)) {\n            var resultType = double.Share.resultType;\n            switch (resultType) {\n                case 1:\n                    hall.MsgBoxManager.showToast({title : '分享到群才有效哦~'});\n                    break;\n                case 2:\n                    hall.MsgBoxManager.showToast({title : '这个群今天已经打扰过了哦~'});\n                    break;\n                case 3:\n                    this.openBox();\n                    break;\n                case 6:\n                    hall.MsgBoxManager.showToast({title : '分享失败'});\n                    break;\n                default:\n                    hall.MsgBoxManager.showToast({title : '分享失败了'});\n                    break;\n            }\n        }\n        double.Share.resultType = 0;\n    },\n    onClickOpen : function () {\n        if(this.openType == \"open\"){\n            this.openBox();\n        }else {\n            double.Share.shareWithType(double.Share.onShareType.clickStatShareTypeAddBullet);\n        }\n    },\n    openBox : function () {\n        switch (this.windowType){\n            case double.windowNewWeaponType.newObject : {\n                //TODO:解锁新物品\n                break;\n            }\n            case double.windowNewWeaponType.newWeapon : {\n                //TODO:获得新武器\n                double.GlobalFuncs.setDoubleGunType(0,this.objectType);\n                break;\n            }\n            case double.windowNewWeaponType.goldTreasureChest : {\n                //TODO:领取金币宝箱\n                break\n            }\n            default : break;\n        }\n    },\n    closeAction : function () {\n        this.node.removeFromParent();\n    },\n    onDestroy : function () {\n        ty.NotificationCenter.ignoreScope(this);\n        this.unscheduleAllCallbacks();\n    }\n\n    // update (dt) {},\n});\n"]}