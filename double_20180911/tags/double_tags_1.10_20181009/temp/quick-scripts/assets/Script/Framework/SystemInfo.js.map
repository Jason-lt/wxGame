{"version":3,"sources":["SystemInfo.js"],"names":["console","log","ty","SystemInfo","DEBUG_SER_KEY","clientId","clientIdInt","cloudid","version","isCheckVersion","loginUrl","deviceId","wxAppId","appId","hallId","gameId","tableBgMusicVolume","cdnPath","cdnPath_shareMoment","m_server_ip","shareManagerUrlShare","shareManagerUrl","shareImagePath","shareImageType","boxId","mysteryGiftBagBoxId","mostImgCount","imageDicArray","imageDic","bsgsCitys","getImageWithURL","urlStringO","nowSprite","urlString","hall","hex_md5","setOldSize","texture","oldSize","cc","size","node","width","height","spriteFrame","setContentSize","textureArray","push","length","tempURL","splice","loader","load","url","type","err","SpriteFrame","tempA","i","sprit","bind"],"mappings":"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","file":"SystemInfo.js","sourceRoot":"../../../../../assets/Script/Framework","sourcesContent":["/**\n * @author zhaoliang\n * @date 1.28\n * \n * 全局对象\n * 系统信息\n * 包括clientId，loginUrl等\n */\nconsole.log(\"SystemInfo loaded\");\nty.SystemInfo = {\n    DEBUG_SER_KEY:\"DEBUG_SER_KEY\",\n    clientId: 'H5_5.0_weixin.weixin.0-hall115.weixin.shuangqwz',\n    clientIdInt: 24587,\n    cloudid:24,\n\n    version:1.00,\n    isCheckVersion : true,\n\n    // loginUrl: 'https://fz.nalrer.cn/', //仿真地址\n    // loginUrl: 'http://140.143.201.170:8000/', //仿真地址\n\n    // webSocketUrl: 'ws://39.107.104.141/',\n    loginUrl: 'http://192.168.20.108:8000/',\n    // webSocketUrl: 'ws://192.168.10.88/',\n    //\n    // loginUrl : 'https://openrich.nalrer.cn/',  //正式\n    // webSocketUrl: 'wss://richwss.nalrer.cn/',\n    // wss.nalrer.cn\n\n    deviceId: 'wechatGame',\n    wxAppId: 'wx824d94ce511885ad',\n    appId: 9999,\n    hallId: 9999,\n    gameId: 115,\n    tableBgMusicVolume: 0.4,\n    // cdnPath:\"https://richqn.nalrer.cn/dizhu/\",\n    // cdnPath:\"https://nslyqn.nalrer.cn/nsly\",\n    cdnPath:\"https://richqn.nalrer.cn/nsly/\",\n    cdnPath_shareMoment : \"https://richqn.nalrer.cn/nsly/crazygun/shareMoment/\",\n\n    m_server_ip : \"https://cbi.touch4.me/api/bilog5/text\",\n\n    shareManagerUrlShare : 'https://market.touch4.me/',\n    // shareManagerUrl : 'https://market.touch4.me/',\n    shareManagerUrl : 'https://analy.ywdier.com/',\n\n    shareImagePath : \"\",\n    shareImageType :\"\",\n    boxId : \"\",\n    mysteryGiftBagBoxId : \"\",\n    mostImgCount : 40,\n    imageDicArray : [],\n    imageDic : {},\n\n    bsgsCitys : ['北京','上海','广州','深圳','杭州','成都','天津','未知'],\n\n    getImageWithURL : function (urlStringO, nowSprite) {\n        if(!urlStringO || !nowSprite){\n            return;\n        }\n        var urlString = hall.hex_md5(urlStringO);\n        var setOldSize = function (nowSprite, texture) {\n            var oldSize = cc.size(nowSprite.node.width, nowSprite.node.height);\n            nowSprite.spriteFrame = texture;\n            nowSprite.node.setContentSize(oldSize);\n        };\n\n        if (ty.SystemInfo.imageDic[urlString]) {\n            if (ty.SystemInfo.imageDic[urlString].texture){\n                // hall.LOGD(null, \"缓存在这里缓存在这里缓存在这里缓存在这里缓存在这里\");\n                setOldSize(nowSprite, ty.SystemInfo.imageDic[urlString].texture);\n            }else {\n                if (ty.SystemInfo.imageDic[urlString].textureArray){\n                    ty.SystemInfo.imageDic[urlString].textureArray.push(nowSprite);\n                }else {\n                    ty.SystemInfo.imageDic[urlString].textureArray = [];\n                    ty.SystemInfo.imageDic[urlString].textureArray.push(nowSprite);\n                }\n            }\n        } else {\n            ty.SystemInfo.imageDic[urlString] = {};\n            ty.SystemInfo.imageDic[urlString].textureArray = [];\n            ty.SystemInfo.imageDic[urlString].textureArray.push(nowSprite);\n            if (ty.SystemInfo.imageDicArray.length >= ty.SystemInfo.mostImgCount){\n                var tempURL = ty.SystemInfo.imageDicArray[0];\n                ty.SystemInfo.imageDic[tempURL] = null;\n                delete ty.SystemInfo.imageDic[tempURL];\n                ty.SystemInfo.imageDicArray.splice(0,1);\n            }\n            ty.SystemInfo.imageDicArray.push(urlString);\n            cc.loader.load({url: urlStringO, type: 'jpg'}, function (err, texture) {\n                // hall.LOGD(null, \"请求图片请求图片请求图片请求图片请求图片请求图片\");\n                if (!err) {\n                    ty.SystemInfo.imageDic[urlString].texture =  new cc.SpriteFrame(texture);\n                    var tempA = ty.SystemInfo.imageDic[urlString].textureArray;\n                    for (var  i = 0 ; i < tempA.length ; i ++){\n                        var sprit = tempA[i];\n                        if (sprit){\n                            // hall.LOGD(null, \"不是缓存获得图片不是缓存获得图片不是缓存获得图片不是缓存获得图片不是缓存获得图片\");\n                            setOldSize(sprit, ty.SystemInfo.imageDic[urlString].texture);\n                        }\n                    }\n                }\n                else {\n                    //加载失败\n                    ty.SystemInfo.imageDic[urlString] = null;\n                    delete  ty.SystemInfo.imageDic[urlString];\n                    //可以删除数组中对应的url地址,可是不删也没有什么影响\n                }\n            }.bind(this));\n        }\n    }\n};\n"]}