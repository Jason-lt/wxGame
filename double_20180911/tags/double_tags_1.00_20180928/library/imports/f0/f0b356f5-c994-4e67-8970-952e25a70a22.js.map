{"version":3,"sources":["../../../../../../assets/Script/ComponentScript/window/assets/Script/ComponentScript/window/double_rewardWeapon.js"],"names":["cc","Class","extends","Component","properties","levelLabel","default","type","Label","btnTitleLabel","rollNode","Node","resultIndex","isStartAni","isEndAni","blackAction","backAction","onLoad","ty","NotificationCenter","listen","double","EventType","GAME_ROLL_STOP","stopAnimation","updateRewardInfo","string","GameWorld","totalLevel","getComponent","setRollTypeAndScale","windowNewWeaponType","newWeapon","setRollTime","startAnimation","node","destroy","aniType","onDestroy","ignoreScope","unscheduleAllCallbacks"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,oBAAa;AACTC,qBAAU,IADD;AAETC,kBAAOP,GAAGQ;AAFD,SADL;AAKRC,uBAAgB;AACZH,qBAAU,IADE;AAEZC,kBAAOP,GAAGQ;AAFE,SALR;AASRE,kBAAW;AACPJ,qBAAU,IADH;AAEPC,kBAAOP,GAAGW;AAFH,SATH;AAaRC,qBAAc,CAbN;AAcRC,oBAAa,KAdL;AAeRC,kBAAW;AAfH,KAHP;AAoBL;;AAEAC,iBAAc,uBAAY,CAEzB,CAxBI;AAyBLC,gBAAa,sBAAY,CAExB,CA3BI;AA4BLC,YAAS,kBAAW;AAChBC,WAAGC,kBAAH,CAAsBC,MAAtB,CAA6BC,OAAOC,SAAP,CAAiBC,cAA9C,EAA6D,KAAKC,aAAlE,EAAgF,IAAhF;AACH,KA9BI;;AAgCLC,sBAAmB,4BAAY;AAC3B,aAAKpB,UAAL,CAAgBqB,MAAhB,GAAyB,OAAKL,OAAOM,SAAP,CAAiBC,UAAjB,GAA4B,CAAjC,IAAoC,GAA7D;AACA;AACA,aAAKhB,WAAL,GAAmB,CAAnB;AACA,aAAKF,QAAL,CAAcmB,YAAd,CAA2B,uBAA3B,EAAoDC,mBAApD,CAAwET,OAAOU,mBAAP,CAA2BC,SAAnG,EAA6G,EAA7G,EAAgH,KAAKpB,WAArH;AACA,aAAKF,QAAL,CAAcmB,YAAd,CAA2B,uBAA3B,EAAoDI,WAApD,CAAgE,GAAhE,EAAoE,EAApE;AACH,KAtCI;AAuCLC,oBAAiB,0BAAY;AACzB,YAAG,CAAC,KAAKrB,UAAT,EAAoB;AAChB,iBAAKA,UAAL,GAAkB,IAAlB;AACA,iBAAKH,QAAL,CAAcmB,YAAd,CAA2B,uBAA3B,EAAoDC,mBAApD,CAAwET,OAAOU,mBAAP,CAA2BC,SAAnG,EAA6G,EAA7G,EAAgH,EAAhH;AACA,iBAAKtB,QAAL,CAAcmB,YAAd,CAA2B,uBAA3B,EAAoDI,WAApD,CAAgE,GAAhE,EAAoE,GAApE;AACH,SAJD,MAIM;AACF,gBAAG,KAAKnB,QAAR,EAAiB;AACb;AACA,qBAAKqB,IAAL,CAAUC,OAAV;AACH;AACJ;AACJ,KAlDI;AAmDLZ,mBAAgB,uBAAUa,OAAV,EAAmB;AAC/B,YAAGA,WAAWhB,OAAOU,mBAAP,CAA2BC,SAAzC,EAAmD;AAC/C;AACH;AACD,YAAG,KAAKnB,UAAR,EAAmB;AACf,iBAAKqB,cAAL;AACA;AACH;AACD,aAAKpB,QAAL,GAAgB,IAAhB;AACA;AACA,aAAKL,aAAL,CAAmBiB,MAAnB,GAA4B,IAA5B;AACH,KA9DI;AA+DLY,eAAY,qBAAY;AACpBpB,WAAGC,kBAAH,CAAsBoB,WAAtB,CAAkC,IAAlC;AACA,aAAKC,sBAAL;AACH;;AAED;AApEK,CAAT","file":"double_rewardWeapon.js","sourceRoot":"../../../../../../assets/Script/ComponentScript/window","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        levelLabel : {\n            default : null,\n            type : cc.Label\n        },\n        btnTitleLabel : {\n            default : null,\n            type : cc.Label\n        },\n        rollNode : {\n            default : null,\n            type : cc.Node\n        },\n        resultIndex : 0,\n        isStartAni : false,\n        isEndAni : false\n    },\n    // LIFE-CYCLE CALLBACKS:\n\n    blackAction : function () {\n\n    },\n    backAction : function () {\n\n    },\n    onLoad : function() {\n        ty.NotificationCenter.listen(double.EventType.GAME_ROLL_STOP,this.stopAnimation,this);\n    },\n\n    updateRewardInfo : function () {\n        this.levelLabel.string = \"第\"+(double.GameWorld.totalLevel-1)+\"关\";\n        //TODO: 计算武器抽取结果\n        this.resultIndex = 5;\n        this.rollNode.getComponent(\"double_cell_newResult\").setRollTypeAndScale(double.windowNewWeaponType.newWeapon,10,this.resultIndex);\n        this.rollNode.getComponent(\"double_cell_newResult\").setRollTime(200,10);\n    },\n    startAnimation : function () {\n        if(!this.isStartAni){\n            this.isStartAni = true;\n            this.rollNode.getComponent(\"double_cell_newResult\").setRollTypeAndScale(double.windowNewWeaponType.newWeapon,10,10);\n            this.rollNode.getComponent(\"double_cell_newResult\").setRollTime(100,300);\n        }else {\n            if(this.isEndAni){\n                //TODO:退出页面\n                this.node.destroy();\n            }\n        }\n    },\n    stopAnimation : function (aniType) {\n        if(aniType != double.windowNewWeaponType.newWeapon){\n            return;\n        }\n        if(this.isStartAni){\n            this.startAnimation();\n            return;\n        }\n        this.isEndAni = true;\n        //TODO:选中动画\n        this.btnTitleLabel.string = \"OK\";\n    },\n    onDestroy : function () {\n        ty.NotificationCenter.ignoreScope(this);\n        this.unscheduleAllCallbacks();\n    }\n\n    // update (dt) {},\n});\n"]}