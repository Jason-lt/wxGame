{"version":3,"sources":["ToDoTasks.js"],"names":["cc","Class","ctor","_TAG","hall","LOGD","_taskStatk","_currentTask","actionMap","destroy","runTasks","gameWorld","model","m_todoTask","taskVec","runNextTask","length","nextTask","shift","runOneTask","oneTask","curActinFun","ToDoTask","runReplaceSceneToActivity","params","runSetExitWndInf","showerweima"],"mappings":";;;;;;;;AAEAA,GAAGC,KAAH,CAAS;;AAER;AACAC,OAAM,gBAAW;AAChB,OAAKC,IAAL,GAAY,gBAAZ;AACAC,OAAKC,IAAL,CAAU,KAAKF,IAAf,EAAqB,UAArB;;AAEA,OAAKG,UAAL,GAAkB,IAAlB,CAJgB,CAIQ;AACxB,OAAKC,YAAL,GAAoB,IAApB,CALgB,CAKU;AAC1B,OAAKC,SAAL,GAAiB,EAAjB;AACA,OAAKF,UAAL,GAAkB,EAAlB;AACA;AACA,EAZO;;AAcR;AACAG,UAAS,mBAAW,CAAE,CAfd;;AAiBR;AACAC,WAAU,oBAAW;AACpB,MAAI,CAAC,KAAKH,YAAV,EAAwB;AACvB,QAAKD,UAAL,GAAkBF,KAAKO,SAAL,CAAeC,KAAf,CAAqBC,UAArB,CAAgCC,OAAlD;AACA,QAAKC,WAAL;AACA;AACD,EAvBO;;AAyBR;AACA;AACAA,cAAa,uBAAW;AACvB,MAAI,KAAKR,YAAT,EAAuB;AACtB,QAAKA,YAAL,GAAoB,IAApB;AACA;AACD,MAAI,KAAKD,UAAL,CAAgBU,MAAhB,IAA0B,CAA9B,EAAiC;AAChC;AACA;AACD,MAAIC,WAAW,KAAKX,UAAL,CAAgBY,KAAhB,EAAf;AACA,OAAKX,YAAL,GAAoBU,QAApB;AACA,OAAKE,UAAL,CAAgBF,QAAhB;AACA,EArCO;;AAuCR;AACAE,aAAY,oBAASC,OAAT,EAAkB;AAC7BhB,OAAKC,IAAL,CAAU,KAAKF,IAAf,EAAqB,YAArB;AACA,MAAI,QAAQiB,OAAR,IAAmB,OAAOA,OAAP,IAAmB,WAAtC,IAAqD,OAAOA,QAAQ,QAAR,CAAP,IAA6B,WAAlF,IAAiG,OAAOA,QAAQ,QAAR,CAAP,IAA6B,WAAlI,EAA+I;AAC9IhB,QAAKC,IAAL,CAAU,KAAKF,IAAf,EAAqB,oDAAoDiB,QAAQ,QAAR,CAApD,GAAwE,MAAxE,WAAsF,KAAKZ,SAAL,CAAeY,QAAQ,QAAR,CAAf,CAAtF,CAArB;;AAEA,OAAI,OAAO,KAAKZ,SAAL,CAAeY,QAAQ,QAAR,CAAf,CAAP,IAA6C,WAAjD,EAA8D;AAC7D;AACA,SAAKC,WAAL,GAAmB,KAAKb,SAAL,CAAeY,QAAQ,QAAR,CAAf,CAAnB;AACA,SAAKC,WAAL,CAAiBD,QAAQ,QAAR,CAAjB;AACA,SAAKC,WAAL,GAAmB,IAAnB;AACA,IALD,MAKO;AACNjB,SAAKC,IAAL,CAAU,KAAKF,IAAf,EAAqB,sCAAsCiB,QAAQ,QAAR,CAA3D;AACAhB,SAAKkB,QAAL,CAAcP,WAAd;AACA;AACD,GAZD,MAYO;AACNX,QAAKC,IAAL,CAAU,KAAKF,IAAf,EAAqB,2CAArB;AACAC,QAAKkB,QAAL,CAAcP,WAAd;AACA;AACD,EA1DO;;AA6DRQ,4BAA2B,mCAASC,MAAT,EAAiB;AAC3CpB,OAAKC,IAAL,CAAU,KAAKF,IAAf,EAAqB,uDAArB;AACAC,OAAKkB,QAAL,CAAcP,WAAd;AACA,EAhEO;;AAkERU,mBAAkB,0BAASD,MAAT,EAAiB,CAClC,CAnEO;;AAqERE,cAAa,uBAAY;AACxB;AACA;AACA;;AAxEO,CAAT","file":"ToDoTasks.js","sourceRoot":"../../../../../../assets/Script/hall/utils","sourcesContent":["\n\ncc.Class({\n\n\t//本阻塞功能是临时的,尽可能不要用,以后需要重构!!!\n\tctor: function() {\n\t\tthis._TAG = 'hall.ToDoTasks';\n\t\thall.LOGD(this._TAG, \" in ctor\");\n\n\t\tthis._taskStatk = null; //任务队列\n\t\tthis._currentTask = null; //当前正在执行的task,如弹窗\n\t\tthis.actionMap = {};\n\t\tthis._taskStatk = [];\n\t\t// this.actionMap['show_rewards'] = this.tipsForShowReward; //收到每日登录赠送钻石消息\n\t},\n\n\t// 默认的析构函数\n\tdestroy: function() {},\n\n\t//本阻塞功能是临时的,尽可能不要用,以后需要重构!!!\n\trunTasks: function() {\n\t\tif (!this._currentTask) {\n\t\t\tthis._taskStatk = hall.gameWorld.model.m_todoTask.taskVec;\n\t\t\tthis.runNextTask();\n\t\t}\n\t},\n\n\t//从堆栈弹出一个任务,并执行\n\t//用于收到task数组保存到堆栈后执行第一个,或执完任一task后执行\n\trunNextTask: function() {\n\t\tif (this._currentTask) {\n\t\t\tthis._currentTask = null;\n\t\t}\n\t\tif (this._taskStatk.length == 0) {\n\t\t\treturn;\n\t\t}\n\t\tvar nextTask = this._taskStatk.shift();\n\t\tthis._currentTask = nextTask;\n\t\tthis.runOneTask(nextTask);\n\t},\n\n\t//单个task的实际执行单元\n\trunOneTask: function(oneTask) {\n\t\thall.LOGD(this._TAG, \"runOneTask\");\n\t\tif (null != oneTask && typeof(oneTask) != 'undefined' && typeof(oneTask['action']) != 'undefined' && typeof(oneTask['params']) != 'undefined') {\n\t\t\thall.LOGD(this._TAG, \" run runOneTask-------------------------action:\" + oneTask['action'] + \"====\"+typeof(this.actionMap[oneTask['action']]));\n\n\t\t\tif (typeof(this.actionMap[oneTask['action']]) != 'undefined') {\n\t\t\t\t//以下这样写得目的是保持this为当前context否者this失效\n\t\t\t\tthis.curActinFun = this.actionMap[oneTask['action']];\n\t\t\t\tthis.curActinFun(oneTask['params']);\n\t\t\t\tthis.curActinFun = null;\n\t\t\t} else {\n\t\t\t\thall.LOGD(this._TAG, \"This action is undefined! action:\" + oneTask['action']);\n\t\t\t\thall.ToDoTask.runNextTask();\n\t\t\t}\n\t\t} else {\n\t\t\thall.LOGD(this._TAG, \"This action is undefined or cmd is error!\");\n\t\t\thall.ToDoTask.runNextTask();\n\t\t}\n\t},\n\n\n\trunReplaceSceneToActivity: function(params) {\n\t\thall.LOGD(this._TAG, \" run runReplaceSceneToActivity-----------------------\");\n\t\thall.ToDoTask.runNextTask();\n\t},\n\n\trunSetExitWndInf: function(params) {\n\t},\n\n\tshowerweima: function () {\n\t\t// document.getElementById(\"coverContainer\").style.display = \"block\";\n\t\t// hall.ToDoTask.runNextTask();\n\t}\n\n\n});"]}