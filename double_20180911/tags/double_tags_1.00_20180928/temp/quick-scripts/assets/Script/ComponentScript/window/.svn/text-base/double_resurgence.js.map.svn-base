{"version":3,"sources":["double_resurgence.js"],"names":["cc","Class","extends","Component","properties","scoreLabel","default","type","Label","rankTexture","Texture2D","rankSpriteFrame","SpriteFrame","rankSprite","Sprite","blackAction","backAction","onLoad","ty","NotificationCenter","listen","double","EventType","UPDATE_SHARE_STATE","playAnimationAfterShareWithType","string","GameWorld","totalScore","setRankNextInfo","openDataContext","GlobalFuncs","getOpenData","sharedCanvas","canvas","width","height","texture","spriteFrame","sprite","main","initWithElement","handleLoadedTexture","_refreshTexture","Timer","setTimer","getThirdRankInfo","justNowAction","showGameOverResult","node","destroy","resurgenceAction","Share","shareWithType","onShareType","clickStatShareTypeAddBullet","shareType","clickStatShareTypeOpenSecretBoxB","resultType","hall","MsgBoxManager","showToast","title","trigger","GAME_START","onDestroy","ignoreScope","unscheduleAllCallbacks"],"mappings":"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","file":"double_resurgence.js","sourceRoot":"../../../../../../assets/Script/ComponentScript/window","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        scoreLabel : {\n            default : null,\n            type : cc.Label\n        },\n\n        rankTexture : cc.Texture2D,\n        rankSpriteFrame : cc.SpriteFrame,\n        rankSprite : cc.Sprite\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n\n    blackAction : function () {\n\n    },\n    backAction : function () {\n\n    },\n    onLoad : function() {\n        ty.NotificationCenter.listen(double.EventType.UPDATE_SHARE_STATE, this.playAnimationAfterShareWithType, this);\n\n        this.scoreLabel.string = double.GameWorld.totalScore+\"\";\n        this.setRankNextInfo();\n    },\n\n    setRankNextInfo : function () {\n        var openDataContext = double.GlobalFuncs.getOpenData();\n        if(!openDataContext){\n            return;\n        }\n        var sharedCanvas = openDataContext.canvas;\n        sharedCanvas.width  = 584;\n        sharedCanvas.height = 110;\n        this.rankTexture = new cc.Texture2D();\n        this.rankSpriteFrame = new cc.SpriteFrame(this.rankTexture);\n        var texture = this.rankTexture;\n        var spriteFrame = this.rankSpriteFrame;\n        var sprite = this.rankSprite;\n        var main = function () {\n            texture.initWithElement(sharedCanvas);\n            texture.handleLoadedTexture();\n            sprite.spriteFrame = spriteFrame;\n            sprite.spriteFrame._refreshTexture(texture);\n        };\n        main();\n        ty.Timer.setTimer(this, main, 1/10,5000);\n\n        double.GlobalFuncs.getThirdRankInfo();\n    },\n\n    justNowAction : function () {\n        double.GlobalFuncs.showGameOverResult();\n        this.node.destroy();\n    },\n    resurgenceAction : function () {\n        double.Share.shareWithType(double.Share.onShareType.clickStatShareTypeAddBullet);\n    },\n    playAnimationAfterShareWithType : function (shareType) {\n\n        if (shareType && (shareType == double.Share.onShareType.clickStatShareTypeOpenSecretBoxB)) {\n            var resultType = double.Share.resultType;\n            switch (resultType) {\n                case 1:\n                    hall.MsgBoxManager.showToast({title : '分享到群才有效哦~'});\n                    break;\n                case 2:\n                    hall.MsgBoxManager.showToast({title : '这个群今天已经打扰过了哦~'});\n                    break;\n                case 3:\n                    ty.NotificationCenter.trigger(double.EventType.GAME_START,true);\n                    this.node.destroy();\n                    break;\n                case 6:\n                    hall.MsgBoxManager.showToast({title : '分享失败'});\n                    break;\n                default:\n                    hall.MsgBoxManager.showToast({title : '分享失败了'});\n                    break;\n            }\n        }\n        double.Share.resultType = 0;\n    },\n    onDestroy : function () {\n        ty.NotificationCenter.ignoreScope(this);\n        this.unscheduleAllCallbacks();\n    }\n\n    // update (dt) {},\n});\n"]}