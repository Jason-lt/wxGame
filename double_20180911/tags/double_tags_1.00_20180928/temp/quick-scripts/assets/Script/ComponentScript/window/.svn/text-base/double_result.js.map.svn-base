{"version":3,"sources":["double_result.js"],"names":["cc","Class","extends","Component","properties","nowScoreLabel","default","type","Label","bestScoreLabel","rankTexture","Texture2D","rankSpriteFrame","SpriteFrame","rankSprite","Sprite","blackAction","backAction","onLoad","updateResultInfo","string","double","GameWorld","totalScore","bestScore","hall","GlobalFuncs","ReadNumFromLocalStorage","gameModel","GAME_BEST_SCORE","setInLocalStorage","setRankInfo","openDataContext","getOpenData","sharedCanvas","canvas","width","height","texture","spriteFrame","sprite","main","initWithElement","handleLoadedTexture","_refreshTexture","ty","Timer","setTimer","getThirdRankInfo","showAllRank","BiLog","clickStat","UserInfo","clickStatEventType","clickStatEventTypeButtonClick","showRankList","playNextGame","NotificationCenter","trigger","EventType","GAME_START","node","destroy","showBest","Share","shareWithType","onShareType","clickStatShareTypeAddBullet","onDestroy","ignoreScope","unscheduleAllCallbacks"],"mappings":"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","file":"double_result.js","sourceRoot":"../../../../../../assets/Script/ComponentScript/window","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        nowScoreLabel : {\n            default : null,\n            type : cc.Label\n        },\n        bestScoreLabel : {\n            default : null,\n            type : cc.Label\n        },\n\n        rankTexture : cc.Texture2D,\n        rankSpriteFrame : cc.SpriteFrame,\n        rankSprite : cc.Sprite\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    blackAction : function () {\n\n    },\n    backAction : function () {\n\n    },\n    onLoad : function() {\n\n    },\n\n    updateResultInfo : function () {\n        this.nowScoreLabel.string = double.GameWorld.totalScore+\"\";\n\n        var bestScore = hall.GlobalFuncs.ReadNumFromLocalStorage(double.gameModel.GAME_BEST_SCORE,\"0\");\n        if(bestScore < double.GameWorld.totalScore){\n            bestScore = double.GameWorld.totalScore;\n            hall.GlobalFuncs.setInLocalStorage(double.gameModel.GAME_BEST_SCORE,bestScore);\n        }\n        this.bestScoreLabel.string = \"本周最佳:\"+bestScore;\n\n        this.setRankInfo();\n    },\n    setRankInfo : function () {\n        var openDataContext = double.GlobalFuncs.getOpenData();\n        if(!openDataContext){\n            return;\n        }\n        var sharedCanvas = openDataContext.canvas;\n        sharedCanvas.width  = 580;\n        sharedCanvas.height = 300;\n        this.rankTexture = new cc.Texture2D();\n        this.rankSpriteFrame = new cc.SpriteFrame(this.rankTexture);\n        var texture = this.rankTexture;\n        var spriteFrame = this.rankSpriteFrame;\n        var sprite = this.rankSprite;\n        var main = function () {\n            texture.initWithElement(sharedCanvas);\n            texture.handleLoadedTexture();\n            sprite.spriteFrame = spriteFrame;\n            sprite.spriteFrame._refreshTexture(texture);\n        };\n        main();\n        ty.Timer.setTimer(this, main, 1/10,5000);\n\n        double.GlobalFuncs.getThirdRankInfo();\n    },\n\n    showAllRank : function () {\n        ty.BiLog.clickStat(ty.UserInfo.clickStatEventType.clickStatEventTypeButtonClick,[\"showAllRank\"]);\n        double.GlobalFuncs.showRankList(\"\");\n    },\n    playNextGame : function () {\n        ty.NotificationCenter.trigger(double.EventType.GAME_START);\n        this.node.destroy();\n    },\n    showBest : function () {\n        double.Share.shareWithType(double.Share.onShareType.clickStatShareTypeAddBullet);\n    },\n\n    onDestroy : function () {\n        ty.NotificationCenter.ignoreScope(this);\n        this.unscheduleAllCallbacks();\n    }\n\n    // update (dt) {},\n});\n"]}