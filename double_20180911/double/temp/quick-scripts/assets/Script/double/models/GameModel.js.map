{"version":3,"sources":["GameModel.js"],"names":["double","gameModel","IS_NEW_USER","GAME_LEVEL","GAME_BEST_SCORE","GAME_NEWEST_OBJECT_INDEX","GAME_COIN_NUMBER","GAME_STAGE_BOX_NUMBER","rankWindow","titlePage","weaponsDepot","newWeapon","newResult","getNormalConfig","params","ty","SystemInfo","gameId","hall","MsgFactory","_sendCmd","parseGame","value","result","action","parseCommonConfig","configKey","saveNormalConfigJson","config","GlobalFuncs","isEmptyObject","GameWorld","objectConfig","gunConfig","boxConfig","generalConfig","saveShareConfigJson","shareConfig","saveGunnerShareSchemeJson","allCheckVersion","isCheckVersion","version","gunnerShareSchemeConfig","resurgenceShare","allCheckConfig","boxShareGetProp","giftBagShareGetDiamond","NotificationCenter","trigger","EventType","GUNNER_SHARE_SCHEME","GET_AD_MSG_SUCCESS","getAllCheckConfig","saveScoreResult","Share","shareKeywordReplace","mysteryGiftBagBoxId","boxId","saveShareConfigFromHttp","shareExt","shareCfg","extCfg","shareKey","subKey"],"mappings":";;;;;;AACAA,OAAOC,SAAP,GAAmB;AACfC,iBAAc,aADC;;AAGfC,gBAAa,YAHE,EAGW;AAC1BC,qBAAkB,iBAJH,EAIqB;AACpCC,8BAA2B,0BALZ,EAKuC;AACtDC,sBAAmB,kBANJ,EAMuB;;AAEtCC,2BAAwB,uBART,EAQiC;;AAEhDC,gBAAa,IAVE;AAWfC,eAAY,IAXG;AAYfC,kBAAe,IAZA;AAafC,eAAY,IAbG;AAcfC,eAAY,IAdG;;AAgBf;AACAC,qBAAiB,2BAAW;AACxB,YAAIC,SAAS;AACT,mBAAO,MADE;AAET,sBAAU;AACN,0BAAW,eADL;AAEN,0BAAWC,GAAGC,UAAH,CAAcC,MAFnB;AAGN,6BAAc;AAHR;AAFD,SAAb;AAQAC,aAAKC,UAAL,CAAgBC,QAAhB,CAAyBN,MAAzB;AACH,KA3Bc;AA4Bf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGAO,eAAU,mBAAUC,KAAV,EAAiB;AACvB;AACA,gBAAQA,MAAMC,MAAN,CAAaC,MAArB;AACI,iBAAK,eAAL;AAAuB;AACnB,yBAAKC,iBAAL,CAAuBH,MAAMC,MAA7B;AACA;AACH;AAJL;AAMH,KAlDc;;AAoDf;AACAE,uBAAkB,2BAAUH,KAAV,EAAiB;AAC/B,gBAAQA,MAAMI,SAAd;AACI,iBAAK,cAAL;AAAqB;AACjB,yBAAKC,oBAAL,CAA0BL,MAAMM,MAAhC;AACA;AACH;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAZJ;AAcH,KApEc;AAqEfD,0BAAuB,8BAAUL,KAAV,EAAiB;AACpC,YAAIJ,KAAKW,WAAL,CAAiBC,aAAjB,CAA+BR,KAA/B,CAAJ,EAA0C;AACtC;AACH;AACDtB,eAAO+B,SAAP,CAAiBC,YAAjB,GAAgCV,MAAMU,YAAtC;AACAhC,eAAO+B,SAAP,CAAiBE,SAAjB,GAA6BX,MAAMW,SAAnC;AACAjC,eAAO+B,SAAP,CAAiBG,SAAjB,GAA6BZ,MAAMY,SAAnC;AACAlC,eAAO+B,SAAP,CAAiBI,aAAjB,GAAiCb,MAAMa,aAAvC;AACA;AACA;AACA;AACA;AACH,KAjFc;AAkFfC,yBAAsB,6BAAUd,KAAV,EAAiB;AACnC,YAAIJ,KAAKW,WAAL,CAAiBC,aAAjB,CAA+BR,KAA/B,CAAJ,EAA0C;AACtC;AACH;AACDtB,eAAO+B,SAAP,CAAiBM,WAAjB,GAA+Bf,KAA/B;AACH,KAvFc;AAwFfgB,+BAA4B,mCAAUhB,KAAV,EAAiB;AACzC,YAAIJ,KAAKW,WAAL,CAAiBC,aAAjB,CAA+BR,KAA/B,CAAJ,EAA0C;AACtC;AACH;AACD,YAAGA,MAAMiB,eAAT,EAAyB;AACrBxB,eAAGC,UAAH,CAAcwB,cAAd,GAA+BlB,MAAMiB,eAAN,IAAyBxB,GAAGC,UAAH,CAAcyB,OAAtE;AACH;AACDzC,eAAO+B,SAAP,CAAiBW,uBAAjB,GAA2CpB,KAA3C;AACA,YAAGP,GAAGC,UAAH,CAAcwB,cAAjB,EAAgC;AAC5BxC,mBAAO+B,SAAP,CAAiBW,uBAAjB,CAAyCC,eAAzC,GAA2DrB,MAAMsB,cAAjE;AACA5C,mBAAO+B,SAAP,CAAiBW,uBAAjB,CAAyCG,eAAzC,GAA2DvB,MAAMsB,cAAjE;AACA5C,mBAAO+B,SAAP,CAAiBW,uBAAjB,CAAyCI,sBAAzC,GAAkExB,MAAMsB,cAAxE;AACH;AACD7B,WAAGgC,kBAAH,CAAsBC,OAAtB,CAA8BhD,OAAOiD,SAAP,CAAiBC,mBAA/C;AACAnC,WAAGgC,kBAAH,CAAsBC,OAAtB,CAA8BjC,GAAGkC,SAAH,CAAaE,kBAA3C;AACH,KAvGc;AAwGfC,uBAAmB,6BAAY;AAC3B,eAAOrC,GAAGC,UAAH,CAAcwB,cAAd,KAAiC,CAACxC,OAAO+B,SAAP,CAAiBW,uBAAlB,IAA6C,CAAC1C,OAAO+B,SAAP,CAAiBW,uBAAjB,CAAyCE,cAAxH,CAAP;AACH,KA1Gc;AA2GfS,qBAAkB,yBAAU9B,MAAV,EAAkB;AAChCvB,eAAOsD,KAAP,CAAaC,mBAAb,CAAiCC,mBAAjC,GAAuDjC,OAAOkC,KAA9D;AACH,KA7Gc;AA8GfC,6BAA0B,iCAAUpC,KAAV,EAAiB;AACvC,YAAIJ,KAAKW,WAAL,CAAiBC,aAAjB,CAA+BR,KAA/B,CAAJ,EAA0C;AACtC;AACH;;AAED;AACA,YAAIqC,WAAWrC,MAAM,UAAN,CAAf;AACA,eAAOA,MAAM,UAAN,CAAP;;AAEA,YAAGqC,QAAH,EAAY;AACR,gBAAIC,QAAJ,EAAcC,MAAd;AACA,iBAAK,IAAIC,QAAT,IAAqBxC,KAArB,EAA2B;AACvBsC,2BAAWtC,MAAMwC,QAAN,CAAX;AACAD,yBAASF,SAASG,QAAT,CAAT;AACA,oBAAID,MAAJ,EAAW;AACP,yBAAK,IAAIE,MAAT,IAAmBF,MAAnB,EAA0B;AACtBD,iCAASG,MAAT,IAAmBF,OAAOE,MAAP,CAAnB,CADsB,CACa;AACtC;AACJ;AACJ;AACJ;;AAED,aAAK1B,WAAL,GAAmBf,KAAnB;AACAtB,eAAO+B,SAAP,CAAiBM,WAAjB,GAA+Bf,KAA/B;AACH;AAtIc,CAAnB","file":"GameModel.js","sourceRoot":"../../../../../../assets/Script/double/models","sourcesContent":["\ndouble.gameModel = {\n    IS_NEW_USER : \"IS_NEW_USER\",\n\n    GAME_LEVEL : \"GAME_LEVEL\",//关卡数\n    GAME_BEST_SCORE : \"GAME_BEST_SCORE\",//最佳分数\n    GAME_NEWEST_OBJECT_INDEX : \"GAME_NEWEST_OBJECT_INDEX\",//解锁的最后一个物品\n    GAME_COIN_NUMBER : \"GAME_COIN_NUMBER\",//金币数量\n\n    GAME_STAGE_BOX_NUMBER : \"GAME_STAGE_BOX_NUMBER\",//当前阶段的宝箱数量\n\n    rankWindow : null,\n    titlePage : null,\n    weaponsDepot : null,\n    newWeapon : null,\n    newResult : null,\n\n    //获取布局配置信息\n    getNormalConfig: function() {\n        var params = {\n            'cmd': 'game',\n            'params': {\n                'action' : 'common_config',\n                'gameId' : ty.SystemInfo.gameId,\n                'configKey' : 'normalConfig'\n            }\n        };\n        hall.MsgFactory._sendCmd(params);\n    },\n    // //获取布局配置信息\n    // getShareConfig: function() {\n    //     var params = {\n    //         'cmd': 'game',\n    //         'params': {\n    //             'action' : 'common_config',\n    //             'gameId' : ty.SystemInfo.gameId,\n    //             'configKey' : 'shareConfig'\n    //         }\n    //     };\n    //     hall.MsgFactory._sendCmd(params);\n    // },\n\n\n    parseGame:function (value) {\n        // hall.LOGD(this._TAG, \"onGame Ddz_network -------------------------\"+ JSON.stringify(value));\n        switch (value.result.action){\n            case \"common_config\" : {\n                this.parseCommonConfig(value.result);\n                break;\n            }\n        }\n    },\n\n    // 解析透传参数数据\n    parseCommonConfig:function (value) {\n        switch (value.configKey){\n            case \"normalConfig\": {\n                this.saveNormalConfigJson(value.config);\n                break;\n            }\n            // case \"shareConfig\": {\n            //     this.saveShareConfigJson(value.config);\n            //     break;\n            // }\n            // case \"gunnerShareScheme\": {\n            //     this.saveGunnerShareSchemeJson(value.config);\n            //     break;\n            // }\n        }\n    },\n    saveNormalConfigJson : function (value) {\n        if (hall.GlobalFuncs.isEmptyObject(value)){\n            return;\n        }\n        double.GameWorld.objectConfig = value.objectConfig;\n        double.GameWorld.gunConfig = value.gunConfig;\n        double.GameWorld.boxConfig = value.boxConfig;\n        double.GameWorld.generalConfig = value.generalConfig;\n        // if(value.toolUserTimeConfig){\n        //     double.GameWorld.toolUserTimeConfig = value.toolUserTimeConfig;\n        // }\n        // ty.NotificationCenter.trigger(double.EventType.GUNNER_SHARE_SCHEME);\n    },\n    saveShareConfigJson : function (value) {\n        if (hall.GlobalFuncs.isEmptyObject(value)){\n            return;\n        }\n        double.GameWorld.shareConfig = value;\n    },\n    saveGunnerShareSchemeJson : function (value) {\n        if (hall.GlobalFuncs.isEmptyObject(value)){\n            return;\n        }\n        if(value.allCheckVersion){\n            ty.SystemInfo.isCheckVersion = value.allCheckVersion == ty.SystemInfo.version;\n        }\n        double.GameWorld.gunnerShareSchemeConfig = value;\n        if(ty.SystemInfo.isCheckVersion){\n            double.GameWorld.gunnerShareSchemeConfig.resurgenceShare = value.allCheckConfig;\n            double.GameWorld.gunnerShareSchemeConfig.boxShareGetProp = value.allCheckConfig;\n            double.GameWorld.gunnerShareSchemeConfig.giftBagShareGetDiamond = value.allCheckConfig;\n        }\n        ty.NotificationCenter.trigger(double.EventType.GUNNER_SHARE_SCHEME);\n        ty.NotificationCenter.trigger(ty.EventType.GET_AD_MSG_SUCCESS);\n    },\n    getAllCheckConfig :function () {\n        return ty.SystemInfo.isCheckVersion && (!double.GameWorld.gunnerShareSchemeConfig || !double.GameWorld.gunnerShareSchemeConfig.allCheckConfig);\n    },\n    saveScoreResult : function (result) {\n        double.Share.shareKeywordReplace.mysteryGiftBagBoxId = result.boxId;\n    },\n    saveShareConfigFromHttp : function (value) {\n        if (hall.GlobalFuncs.isEmptyObject(value)){\n            return;\n        }\n\n        //要进行处理,因为少了分享点和群验证标识\n        var shareExt = value['shareExt'];\n        delete value['shareExt'];\n\n        if(shareExt){\n            var shareCfg, extCfg;\n            for (var shareKey in value){\n                shareCfg = value[shareKey];\n                extCfg = shareExt[shareKey];\n                if (extCfg){\n                    for (var subKey in extCfg){\n                        shareCfg[subKey] = extCfg[subKey]; //把扩展属性,添加到主配置上\n                    }\n                }\n            }\n        }\n\n        this.shareConfig = value;\n        double.GameWorld.shareConfig = value;\n    }\n};"]}