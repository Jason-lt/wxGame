{"version":3,"sources":["../../../../../assets/Script/hall/assets/Script/hall/HallNetWorkCenter.js"],"names":["require","hall","hallNetWorkCenter","_TAG","boot","LOGD","cmdMap","ty","NotificationCenter","listen","EventType","TCP_OPENED","onTCP_Open","TCP_RECEIVE","onReceiveTCP_Msg","double","MSG_GAME_DATA","onReceiveGameData","MSG_USER_INFO","onReceiveUserInfo","MSG_BAG_INFO","onReceiveBagInfo","MSG_DATA_CHANGED","onUpdateChangedData","GET_USER_FEATURE_SUCCESS","_userFeature","value","LOGW","onGameData","shut","ignoreScope","MsgFactory","bindUser","msgCmd","cmd","result","gameId","SystemInfo","hallId","func","call","MSG_LOG_OUT","errMsg","error","info","MsgBoxManager","showToast","title","argument","GlobalFuncs","checkMsgWithGameId","GameId","getUserInfo","val","UserInfo","isInBSGS","debugMode","retmsg","featureInfo","ip","last_login_ip","trigger","BSGS_CHECK_RESULT","BiLog","clickStat","clickStatEventType","clickStatEventTypeTCP_Success","JSON","stringify","gameModel","getNormalConfig","sceneInfo","onShowParam","wx","getLaunchOptionsSync","scene","scene_id","query","shareTicket","qrCodeOption","withQrCode","par","hasOwnProperty","path","runOption","sourceCode","clickStatEventTypeUserFrom","inviteCode","Share","clickStatShareType","imageType","from","appid","isOnShare","playAnimationAfterShareWithType","ME","parseBagInfo","i","length","curValue","getGameData","getBagInfo"],"mappings":"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","file":"HallNetWorkCenter.js","sourceRoot":"../../../../../assets/Script/hall","sourcesContent":["/**\n * 大厅消息中心\n */\nrequire('doubleEventType');\nhall.hallNetWorkCenter = {\n    _TAG : 'hall.hallNetWorkCenter',\n    boot : function (){\n        hall.LOGD(this._TAG, \"boot!\");\n\n        this.cmdMap = {};\n        //注册消息监听\n        ty.NotificationCenter.listen(ty.EventType.TCP_OPENED, this.onTCP_Open, this);\n        ty.NotificationCenter.listen(ty.EventType.TCP_RECEIVE, this.onReceiveTCP_Msg, this);\n        this.cmdMap[double.EventType.MSG_GAME_DATA] = this.onReceiveGameData;\n        this.cmdMap[double.EventType.MSG_USER_INFO] = this.onReceiveUserInfo;\n        this.cmdMap[double.EventType.MSG_BAG_INFO] = this.onReceiveBagInfo;\n        this.cmdMap[double.EventType.MSG_DATA_CHANGED] = this.onUpdateChangedData;\n        ty.NotificationCenter.listen(double.EventType.GET_USER_FEATURE_SUCCESS, this._userFeature, this);\n    },\n    onReceiveGameData : function(value){\n        hall.LOGW(null, \"file = [HallNetWorkCenter] fun = [onReceiveGameData] \");\n        this.onGameData(value);\n        // hall.MsgFactory.getHallInfo(ty.SystemInfo.gameId);\n    },\n    shut : function(){\n        this.cmdMap = {};\n        ty.NotificationCenter.ignoreScope(this);\n    },\n\n    //\n    onTCP_Open : function(){\n        //发送BindUser\n        hall.MsgFactory.bindUser();\n    },\n    /**\n     * 收到TCP消息\n     */\n    onReceiveTCP_Msg : function(value){\n        // double.LOGD(this._TAG, \"onReceiveTCP_Msg --ty\" + JSON.stringify(value));\n        var msgCmd = value.cmd;\n        var result = value.result;\n        if (result){\n            var gameId = result.gameId;\n            if (gameId === ty.SystemInfo.hallId){\n                //大厅消息在这里处理，其它游戏，在自己的插件里监听消息，并用gameId进行过滤\n                var func = this.cmdMap[msgCmd];\n                if (func){\n                    // func(value);\n                    func.call(this, value);\n                }\n                else{\n                    // ty.NotificationCenter.trigger(msgCmd, value);\n                    hall.LOGD(this._TAG, \"未注册关于消息 ： \" + msgCmd + \" 的监听！\");\n                }\n            }\n        }else{\n            if (msgCmd == ty.EventType.MSG_LOG_OUT){\n                var errMsg = value.error ? value.error.info : null;\n                if (errMsg){\n                    hall.MsgBoxManager.showToast({title : errMsg});\n                }\n            }\n        }\n    },\n    // 返回gameData\n    onGameData: function(argument) {\n        hall.LOGD(this._TAG, 'onGameData');\n        if (typeof(argument) != \"undefined\") {\n            if (!hall.GlobalFuncs.checkMsgWithGameId(argument, double.GameId)) {\n                // 大厅的game_data，返回，暂时没内容\n                return;\n            }\n            hall.MsgFactory.getUserInfo(double.GameId);\n        }\n    },\n    _userFeature:function (val) {\n        // var ={\n        //     \"_id\":\"1490806\",\n        //         \"bind_wx\":\"wx:om67ov41A6awFwQ0rQB0RtWFA8NA\",\n        //         \"last_login_time\":\"2018-05-25 16:44:22\",\n        //         \"last_login_ip\":\"183.212.187.255\",\n        //         \"last_login_province\":\"江苏\",\n        //         \"last_login_city\":\"南京\",\n        //         \"last_login_clientid\":\"H5_5.1_weixin.weixin.0-hall6.weixin.rich\",\n        //         \"login_counts\": {\n        //             \"2018-05-25\":1\n        //         },\n        //     \"create_platform_id\":\"3\",\n        //         \"create_clientid\":\"H5_5.1_weixin.weixin.0-hall6.weixin.rich\",\n        //         \"create_subplatform_id\":\"5\",\n        //         \"create_city\":\"南京\",\n        //         \"create_channel_id\":\"104\",\n        //         \"create_ip\":\"183.212.187.255\",\n        //         \"create_time\":\"2018-05-25 16:44:22\",\n        //         \"create_province\":\"江苏\",\n        //         \"create_product_id\":\"6\",\n        //         \"login_detail\": {\n        //         \"2018-05-25\": [\n        //             \"16:44:22\"\n        //         ]\n        //     }\n        // };\n        //TODO:TEST\n        // hall.LOGE(\"===val.retmsg=====\",\"====val.retmsg===\"+JSON.stringify(val.retmsg));\n        ty.UserInfo.isInBSGS = true;\n        if(debugMode){\n            ty.UserInfo.isInBSGS = !debugMode;\n            // return;\n        }\n        if (!val.retmsg) {\n            return;\n        }\n        ty.UserInfo.featureInfo = val.retmsg;\n        // ty.UserInfo.isInBSGS = hall.GlobalFuncs.checkBSGS(ty.UserInfo.featureInfo.last_login_city); //是否在北上广深\n        // ty.UserInfo.isInBSGS = false;\n        ty.UserInfo.ip = ty.UserInfo.featureInfo.last_login_ip; //上一次登录的IP\n        ty.NotificationCenter.trigger(double.EventType.BSGS_CHECK_RESULT);\n    },\n    onReceiveUserInfo : function(value){\n        ty.BiLog.clickStat(ty.UserInfo.clickStatEventType.clickStatEventTypeTCP_Success, [JSON.stringify(value)]);\n        double.gameModel.getNormalConfig();\n        // double.gameModel.getUserInfoForShot();\n        // double.gameModel.getShareConfig();\n        // double.gameModel.getGunnerShareSchemeConfig();\n        // hall.MsgFactory.getBagInfo();\n        // double.gameModel.checkRewardWithSharePoint(double.Share.SharePointType.getFreeTool);\n        var sceneInfo = ty.UserInfo.onShowParam || wx.getLaunchOptionsSync();\n        var scene = ty.UserInfo.scene_id || sceneInfo.scene;\n        var query = sceneInfo.query;\n        var shareTicket = sceneInfo.shareTicket;\n        if (double.qrCodeOption.withQrCode(scene)){\n            //是否为从小程序码进入\n            var par = \"\";\n            if (query.hasOwnProperty('scene')){\n                //个人小程序码\n                par = query.scene;\n            }\n            else if (sceneInfo.hasOwnProperty('path')){\n                par = sceneInfo.path;\n            }\n            double.qrCodeOption.runOption(par, scene);\n        }\n        if(query && query.sourceCode){//从小程序消息卡片中点入\n            ty.BiLog.clickStat(ty.UserInfo.clickStatEventType.clickStatEventTypeUserFrom,[scene,query.inviteCode,double.Share.clickStatShareType[query.sourceCode],\n                query.imageType,\"GameStart\",JSON.stringify(sceneInfo)]);\n            // if (query.inviteCode) {\n            //     // double.gameModel.bindMutualInviterId(parseInt(query.inviteCode));\n            // }\n            //\n            // if (query.inviteCode && shareTicket) {\n            //     var _boxUserId = query.inviteCode;\n            //     hall.LOGW(\"\",\"file = [HallNetWrokCenter] fun = [onReceiveUserInfo] ty.SystemInfo.boxId = \"+JSON.stringify(ty.SystemInfo.boxId));\n            //     // double.Share.getOpenGid(shareTicket,_boxUserId);\n            // }\n        }else {\n            ty.BiLog.clickStat(ty.UserInfo.clickStatEventType.clickStatEventTypeUserFrom,[scene,query.from,query.appid,\n                \"GameStart\",JSON.stringify(sceneInfo)]);\n        }\n        // 1001\t发现栏小程序主入口，“最近使用”列表（基础库2.2.4版本起将包含“我的小程序”列表）\n        // 1089\t微信聊天主界面下拉，“最近使用”栏（基础库2.2.4版本起将包含“我的小程序”栏）\n        // 1103\t发现栏小程序主入口，“我的小程序”列表（基础库2.2.4版本起该场景值废弃）\n        // 1104\t微信聊天主界面下拉，“我的小程序”栏（基础库2.2.4版本起该场景值废弃）\n        // if(scene == 1103 || scene == 1104){\n        //     double.gameModel.shareToGetreward(double.Share.SharePointType.getFreeTool);\n        // }\n\n        // requestAnimationFrame(function () {\n        //     ty.NotificationCenter.trigger(double.EventType.REPLAY_BG_MUSIC);\n        // });\n        // ty.NotificationCenter.trigger(double.EventType.REPLAY_BG_MUSIC);\n\n        if(double.Share.isOnShare){\n            double.Share.playAnimationAfterShareWithType();\n        }else {\n            // if(scene == 1038 && hall.GlobalFuncs.ReadNumFromLocalStorage(double.gameModel.OPEN_ADBTN_STATE_TODAY,0) != 3 &&\n            //     double.GameWorld.growthConfig.reward.indexOf(hall.GlobalFuncs.ReadStringFromLocalStorage(double.gameModel.OPEN_ADBTN_TYPE_TODAY,'')) > -1){\n            //\n            //     var rewardIndex = hall.GlobalFuncs.getRandomNumberBefore(double.GameWorld.treasureBoxTypeList.length-3)+3;\n            //     var rewardType = double.GameWorld.treasureBoxTypeList[rewardIndex];\n            //     var curScene = cc.director.getScene();\n            //     if (curScene.name == 'double_main'){\n            //         double.GlobalFuncs.playGetPropBoxAni(rewardIndex);\n            //         double.GlobalFuncs.setBulletType(double.GameWorld.propertyConfig[rewardType].bulletType);\n            //         double.GlobalFuncs.hideAdBtnWithTag(5002,true);\n            //         double.GlobalFuncs.hideAdBtnWithTag(5003,true);\n            //         double.GlobalFuncs.hideAdBtnWithTag(5004,true);\n            //     }else {\n            //         double.GlobalFuncs.playGetPropBoxAni(rewardIndex);\n            //         double.GameWorld.initBulletType = double.GameWorld.propertyConfig[rewardType].bulletType;\n            //         double.GlobalFuncs.hideAdBtnWithTag(5001,true);\n            //     }\n            //     double.GlobalFuncs.setDayOriginGameData();\n            //\n            //     var count = hall.GlobalFuncs.ReadNumFromLocalStorage(double.gameModel.OPEN_ADBTN_STATE_TODAY,0);\n            //     if(hall.GlobalFuncs.ReadStringFromLocalStorage(double.gameModel.OPEN_ADBTN_TYPE_TODAY,'') == 'CO'){\n            //         count += 1;\n            //     }else {\n            //         count += 2;\n            //     }\n            //     hall.GlobalFuncs.setInLocalStorage(double.gameModel.OPEN_ADBTN_STATE_TODAY,count);\n            //     hall.GlobalFuncs.setInLocalStorage(double.gameModel.OPEN_ADBTN_TYPE_TODAY,'');\n            // }\n        }\n        double.Share.isOnShare = false;\n        //\n        // if (ty.SystemInfo.shareTicket &&  ty.SystemInfo.shareTicket != \"\"){\n        //     var shareTicket = ty.SystemInfo.shareTicket;\n        //     double.GlobalFuncs.showRankList(shareTicket);\n        // }\n        // ty.SystemInfo.shareTicket = \"\";\n    },\n\n    onReceiveBagInfo:function(value){\n        if (typeof(value) == 'undefined') {\n            return;\n        }\n        hall.ME.parseBagInfo(value);\n    },\n\n    onUpdateChangedData:function(argument){\n        //解析数据\n        if (typeof(argument) != 'undefined') {\n            //hall.ME.parseUserInfo(argument[0]);\n            var result = argument[\"result\"];\n            if (typeof(result) != 'undefined' && typeof(result['changes']) != 'undefined') {\n                var gameId = result.gameId;\n                hall.LOGD(this._TAG, 'gameid = ' + gameId);\n                for (var i = 0; i < result['changes'].length; i++) {\n                    var curValue = result[\"changes\"][i];\n                    if (typeof(curValue) == 'undefined') {\n                        continue;\n                    }\n                    if (curValue == 'gdata') {\n                        hall.LOGD(this._TAG, \"update_notify,更新gdata\");\n                        hall.MsgFactory.getGameData(gameId);\n                    } else if (curValue == 'item') {\n                        hall.LOGD(this._TAG, \"update_notify,更新道具\");\n                        hall.MsgFactory.getBagInfo();\n                    }\n                    //金币，钻石\n                    else if (curValue == \"udata\") {\n                        hall.LOGD(this._TAG, \"update_notify,更新钻石金币\");\n                        hall.MsgFactory.getUserInfo(gameId);\n                    }\n                }\n            }\n        }\n    }\n};\n\n//模块启动\nhall.hallNetWorkCenter.boot();"]}